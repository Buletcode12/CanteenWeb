<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style>
.dropbtn {
	color: white;
	font-size: 16px;
	border: none;
}

.dropdown {
	position: relative;
	display: inline-block;
}

.dropdown-content {
	display: none;
	position: absolute;
	background-color: #f1f1f1;
	min-width: 98px;
	z-index: 9999999 !important;
	top: 33px;
	left: -2px;
	border: solid 1px #7b7878;
	color: #333;
}

.dropdown-content a {
	font-size: 13px !important;
	color: black;
	padding: 0px 8px;
	text-decoration: none;
	display: block;
	cursor: pointer;
}

.dropdown-content a:hover {
	background-color: #ddd;
}

.dropdown:hover .dropdown-content {
	display: block;
}

.dropdown:hover .dropbtn {
	background-color: #D4F5F7;
}

.roomdetails h3 {
	font-size: 15px;
	font-family: 'Montserrat', sans-serif;
	color: #fff;
	font-weight: 100;
	margin-bottom: 0;
	margin-top: 10px;
	background-color: #4882d4;
	padding: 10px;
}

#goButton {
	margin-top: 17px;
}

#allocate {
	margin-right: 5px;
}

.zonesec {
	position: relative;
}

.zonesec {
	position: relative;
}

.zonesec .form-control {
	font-family: 'Montserrat', sans-serif;
	display: block;
	width: 100%;
	font-size: 12px;
	color: #929292;
	background-color: transparent;
	background-clip: padding-box;
	border: 1px solid #d5d5d5;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
	line-height: 30px;
	border-radius: 0;
	padding: 3px 3px;
	margin-bottom: 5px;
}

.chrtxt {
	text-size: 13px;
}

.chrtxt label {
	text-size: 13px !important;
	text-align: center !important;
}

.modal1 {
	position: fixed;
	top: 167px;
	left: 337px;
	z-index: 1055;
	display: none;
	width: 100%;
	height: 100%;
	overflow-x: hidden;
	overflow-y: auto;
	outline: 0;
}

.totalHour{
  border: 1px solid #ddd;
  border-radius: 2px;
  background-color: #C5C5C5;
  padding: 10px; 
  font-size: 12px; 
  color: #333; 
  transition: border-color 0.3s ease-in-out;
    width: 107px;
}
</style>
<script>
$(document).ready(function() {
	 //$('#cldDiv').attr("disabled", true);
	    $('#deleteBinQty').attr("disabled", true);
	
		$('#deleteData').attr("disabled", true); 
		$('#approveRequest').attr("disabled", true);
		batchNoTypeClick();
		var gridDiv = document.querySelector('#myGrid');
		new agGrid.Grid(gridDiv, gridOptions);
		var rowData = [];
		gridOptions.api.setRowData(rowData);
		
		console.log(rowData);
		agGrid.simpleHttpRequest({
				url : "warehouse-allocation-through-ajax"
			}).then(function(data) {
				var jsonData = JSON.parse(data.body);
				console.log("lllllllll",jsonData);
				var allData=jsonData.AllocationData;
				var len = allData.length;
				$('#totalCandidate').find('span').html(len);
				gridOptions.api.setRowData(allData);
			}); 
		
	 var gridDiv = document.querySelector('#myGridAllocationQty');
		new agGrid.Grid(gridDiv, gridOptionsAllocationQty);  
		
		gridOptionsAllocationQty.api.setRowData();
		
		
       $("#Cancel").hide();
		$("#addData").hide();
		$("#save").hide();
		$('#deleteData').attr("disabled", true);
		$('#delete').attr("disabled", true);
		
		var dateFormat = localStorage.getItem("dateFormat");
		$("#manufactureDateCalendar").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
			//minDate : 0,
		}).on("change", function() {
			$('#manufactureDate').val($(this).val());
		})

		$('#manufactureDate').blur(function() {
			$("#manufactureDateCalendar").val($(this).val());
		})
		
			$("#bestBeforeCalendar").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
			//minDate : 0,
		}).on("change", function() {
			$('#bestBeforeDate').val($(this).val());
		})

		$('#bestBeforeDate').blur(function() {
			$("#bestBeforeCalendar").val($(this).val());
		})
		
		
		
	$("#toDateCalendarTime").datetimepicker({
		format : 'H:i',
		closeOnDateSelect : false,
		timepicker : true,
		datepicker : false,
		step: 15
	}).on("change", function() {
		$('#manufactureTime').val($(this).val());
	})

	$('#manufactureTime').blur(function() {
		$("#toDateCalendarTime").val($(this).val());
	})
	
	var ld = localStorage.getItem('ReqAllocationData');
						var data = JSON.parse(ld);
						console.log(data)
						
						if (data) {
							add();
							
							$('#searchRowDiv').hide();
							$("#add").hide();
							$("#myGrid").hide();
							$("#save").show();
							$("#Cancel").show();
							$("#addData").show();
							$("#totalItem").hide();
							$("#dwnld").hide();
                            $("#vreificationId").val(data.id);
                       
							$("#categoryId").val(data.category);
							getItemList(data.item);
							$("#quantity").val(data.qty);
							$("#unit").val(data.unit);
							 localStorage.setItem('ReqAllocationData', null);
						} else {
						}
 
    });
function Cancel(){
	 localStorage.setItem('ReqAllocationData', null);
	agGrid.simpleHttpRequest({
		url : "warehouse-allocation-through-ajax"
	}).then(function(data) {
		var jsonData = JSON.parse(data.body[0]);
		var allData=jsonData.AllocationData;
		var len = allData.length;
		$('#totalCandidate').find('span').html(len);
		gridOptions.api.setRowData(allData);
	}); 
		$('.formValidation').remove();
	    $("#add").show();
		$("#myGrid").show();
		$("#save").hide();
		$("#Cancel").hide();
		$("#addData").hide();
		$('#hideTbl').show();
		$("#totalCandidate").show();
		$("#dwnld").show();
		$("#reqTable").show();
		$(".btn-hs").show();
		$("#searchRowDiv").show();
		$('#deleteData').show();
		$("#approveRequest").show(); 
		$("#batchNo").val('');
		$("#manufactureDate").val('');
		$("#manufacturePlace").val('');
		$("#shift").val('');
		$("#lineNo").val('');
		$("#manufactureTime").val('');
		$("#manufactureDate").val('');
		$("#bestBeforeDate").val(''); 
}
	var columnDefs = [
			{
				headerCheckboxSelection : false,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true

			},
			{ 
				headerName : "Allocation Id",
				field : "allocationId",
				width : 150,
			
			}, {
				headerName : 'Warehouse',
				field : "warehouseName",
					width : 150,
			}, {
				headerName : 'Zone',
				field : "ZoneName",
				width : 150,
				
			}, {
				headerName : 'Category',
				field : "categoryName",
				width : 150,
				  
			}, {  
				headerName : 'Item Name',
				field : "itemName",
				width : 200,
			}, {  
				headerName : 'Quantity',
				field : "quantity",
				width : 100,
				type : 'rightAligned',
			}, {
				headerName : 'Unit',
				field : "unitName",
				width : 100,
			}, { 
				headerName : 'Batch No.',
				field : "batchNo",
				width : 120,
			}, {
				headerName : 'Bin',
				field : "binIdAllocation",
				width : 200, 
			
			
			}, {
				headerName : 'Request Status',
				field : "approveStatus",
				width:140,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.spdata =="Requested") { 
						return '<div style="color:#0642f5">'+params.data.spdata+'</div>';
					}else {
						return '<div style="color:#a9a9a9">'+params.data.spdata+'</div>';
					}
				}
			},{
				headerName : 'Stacking Status',
				field : "stackingStatus",
				width:150,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.stackingStatus =="Stacked") { 
						return '<div style="color:#0642f5">'+params.data.stackingStatus+'</div>';
					}else if(params.data.stackingStatus =="In Progress") {
						return '<div style="color:#ffa500">'+params.data.stackingStatus+'</div>';
					}else{
						return '<div style="color:#a9a9a9">'+params.data.stackingStatus+'</div>';
					}
				}
			} ];

var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'single',
		onSelectionChanged : onRowSelection,
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},
	};
	
window.index=-1;	
var columnDefsQty = [
	{
		headerCheckboxSelection : false,
		headerCheckboxSelectionFilteredOnly : true,
		checkboxSelection : true,
		width : 10,
		sortable : false,
		filter : false,
		resizable : true
	},
	{ 
		headerName : "Bin Id",
		field : "binId",
		width : 150,
		hide:true
	
	}, {
		headerName : "Bin Name",
		field : "binName",
		width : 100,
	
	}, {
		headerName : "Zone Name",
		field : "zoneId",
		width : 100,
		hide:true
	
	}, {
		headerName : 'Unit',
		field : "unitName",
			width : 80,
	}, {
		headerName : 'Capacity',
		field : "capacityQuantity",
			width : 80,
	}, {
		headerName : 'Bin Quqntity',
		field : "binQuntity",
		width : 130,
		cellRenderer : function(params) {
			index=index+1;
				return '<input type="number" class="totalHour" value="0" min="0" placeholder="Bin Quqntity" id="'+"binqty"+window.index+'">';
		},
		
	}, {
		headerName : 'SlNo. From',
		field : "slNoFrom",
		width : 120,
		cellRenderer : function(params) {
				return '<input type="number" class="totalHour" value="0" min="0" placeholder="SlNo. From" id="'+"slfrom"+window.index+'">';
		},
		  
	}, {  
		headerName : 'SlNo. To',
		field : "slNoTo",
		width : 120,
		cellRenderer : function(params) {
				return '<input type="number" class="totalHour" value="0" min="0" placeholder="SlNo. To" id="'+"slto"+window.index+'">';
		},
	}, {  
		headerName : 'Remark',
		field : "binRemark",
		width : 200,
		cellRenderer : function(params) {
				return '<input type="text" class="totalHour" placeholder="Drop Remarks" id="'+"remark"+window.index+'">';
		},
	
	
	} ];

var gridOptionsAllocationQty = {
columnDefs : columnDefsQty,
rowSelection : 'single',
onSelectionChanged : onRowSelectionBin,
groupSelectsChildren : true,
suppressRowClickSelection : true,
suppressRowClickSelection : true,
suppressAggFuncInHeader : true,
defaultColDef : {
	sortable : true,
	filter : true,
	resizable : true,
	width : 251,
	height : 10
},
}; 

	///////////onRowSelection////////////
	
	function onRowSelection(){
		console.log("hello");
		var selectedNodes = gridOptions.api.getSelectedNodes();
		
		 var selectedData = selectedNodes.map(node => node.data);
		 console.log(selectedData);
		 var id= selectedData.map(node => node.vreification_id);
		
		 var rowCount = 0;
		 selectedNodes.forEach(function(selectedNodes, index) {
			 console.log("vvv",selectedNodes.data.spdata);
			 window.value=selectedNodes.data.spdata;
				rowCount = rowCount + 1;
			});
		 var spdata=window.value;
		 if (rowCount > 0){
			 $('#add').attr("disabled", true);
			 if (spdata=="Requested") {
				 $('#deleteData').attr("disabled", true);
				 $('#approveRequest').attr("disabled", true);
				} else{
					$('#deleteData').attr("disabled", false); 
					$('#approveRequest').attr("disabled", false);
					
				} 
		 }else{
				$('#add').attr("disabled", false);
				 $('#deleteData').attr("disabled", true);
				 $('#approveRequest').attr("disabled", true);
			}
		}
	
	
	function onRowSelectionBin() {
		
		var selectedRows = gridOptionsAllocationQty.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			$('#deleteBinQty').attr("disabled", false);
			$('#saveAllocateData').attr("disabled", true);
			

		} else {
			$('#deleteBinQty').attr("disabled", true);
			$('#saveAllocateData').attr("disabled", false);
			
		}

	}
	
	/////////////////  //////////////////
	
	
		//Data approve Request
	function approveRequest() {
		$('#approveRequestModel').modal('show');
	}
	function cancelApproveRequest() {
     $('#approveRequestModel').modal('hide');
	}
	
	
	
	function approveRequestOnclick() {
		
		var selectedRows = gridOptions.api.getSelectedRows();
		 var id=selectedRows[0].allocationId;
		 console.log("vvv",id);
		$.ajax({
			type : "GET",
			url : "warehouse-allocation-approve?id=" + id,
			async : false,
			success : function(response) {

				if (true) {
					$("#messageParagraph").text("Request To Stacking Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					agGrid.simpleHttpRequest({
						url : "view-quotation-through-ajax"
					}).then(function(data) {
						var len = data.length;
						$('#totalCandidate').find('span').html(len);
						gridOptions.api.setRowData(data);
					});
					location.reload();
					
					
					$('#delete').attr("disabled", true);
					$('#reqAppvBtn').attr("disabled", true);
					$('#revision').attr("disabled", true);
					$('#add').attr("disabled", false);
					
					
				}

			},
		});
	}
	
	//Delete Bin
	function deleteBinQty() {
		var totalRows = gridOptionsAllocationQty.api.getDisplayedRowCount();
			var selectedRows = gridOptionsAllocationQty.api.getSelectedRows();
			
			gridOptionsAllocationQty.api.applyTransaction({
				remove : selectedRows
				
			});
			
			 /*   var len = selectedRows.length;
			    $('#totalAllocateList').find('span').html(len);  */ 
		
	            var len = totalRows - selectedRows.length;
	            $('#totalAllocateList').find('span').html(len);
			    
		}
	
	///////////////DELETE ROW////////////////////
	function deleteData() {
		var selectedRows = gridOptions.api.getSelectedRows();
					 var id=selectedRows[0].allocationId;
					 console.log("vvv",id);
					$.ajax({
						type : "GET",
						url : "view-allocation-delete?id=" + id,
						async : false,
						success : function(response) {

							if (true) {
								$("#messageParagraph").text("Deleted Successfully");
								$("#msgOkModal").removeClass("btn3");
								$("#msgOkModal").addClass("btn1");
								$("#msgModal").modal('show');

								agGrid.simpleHttpRequest({
									url : "view-quotation-through-ajax"
								}).then(function(data) {
									var len = data.length;
									$('#totalCandidate').find('span').html(len);
									gridOptions.api.setRowData(data);
								});
								location.reload();
								
								
								$('#delete').attr("disabled", true);
								$('#reqAppvBtn').attr("disabled", true);
								$('#revision').attr("disabled", true);
								$('#add').attr("disabled", false);
								
								
							}

						},
					});
		}

	
	/////////////////////////////////////////////////////////


	   function add() {
		   openDetails();
		  
		$("#searchRowDiv").hide();
		$("#delete").hide();
	    $('#hideTbl').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
    	$("#allocationId").val('');
    	$("#vreificationId").val('');
    	$("#zoneId").val('');
    	$("#categoryId").val('');
    	$("#itemName").val('');
    	$("#quantity").val('');
    	$("#unit").val('');
    	$("#approveRequest").hide();
    	$('#add').hide();
    	$('#deleteData').hide();
    	
	}


	
	function rowSelect() {
		var selectedRows = gridOptions.api.getSelectedRows();
		 var selectedNodes = gridOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			$('#delete').attr("disabled", false);
		
			
			
		} else {
			$('#delete').attr("disabled", true);
			
			
		}

	}
	
	

	
	function onQuickFilterChanged() {
		$(".ti-search srchicon").hide();
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
	


		
		
	function downloadDetails() { 
		  var dataset = [];
		  gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		        dataset.push(rowNode.data);
		    });
		  gridOptions.api.exportDataAsCsv(dataset);
		}
	
	
</script>
<script>
function activeRoom(id) {
	var cl=$("#" + id).attr('class');
	if(cl=="roombtn cp"){
		$("#" + id).addClass("roombtnactive");
		
	}else if(cl=="roombtn cp roombtnactive"){
	   $("#" + id).removeClass("roombtnactive");
	  
	}else{
		
	}

}

function partiallyAllocRoom(id) {
	var cl=$("#" + id).attr('class');
	if(cl=="roombtn cp roombtnpartialalloc"){
		 $("#" + id).removeClass("roombtnpartialalloc");
		$("#" + id).addClass("roombtnactive");
	}else if(cl=="roombtn cp roombtnactive"){
		   $("#" + id).removeClass("roombtnactive");
		   $("#" + id).addClass("roombtnpartialalloc");
     }else{
		
	}
}
</script>

<script>
$(document).ready(
		function() {
			$("#connew").hide();
			var wid = $("#warehouseId").val();
			if (wid == null || wid == "") {
				validation = validationUpdated("Select Warehouse",
						"warehouseId");
			} else {
				$(".formValidation").remove();
			}

			$("input[class='myCheckbox']").click(function() {
				if ($("#formID input:checkbox:checked").length > 0) {

					$(".checkSubmit").addClass('active');
				} else {
					$(".checkSubmit").removeClass('active');
				}
			});
 
		});
 
$(document)
		.ready(
				function() {
					$.fn
							.extend({
								treed : function(o) {

									/*var openedClass = 'fa-minus-circle';
									var closedClass = 'fa-plus-circle';*/
									var openedClass = 'fa fa-angle-down';
									var closedClass = 'fa fa-angle-right ';

									if (typeof o != 'undefined') {
										if (typeof o.openedClass != 'undefined') {
											openedClass = o.openedClass;
										}
										if (typeof o.closedClass != 'undefined') {
											closedClass = o.closedClass;
										}
									}
									;

									//initialize each of the top levels
									var tree = $(this);
									tree.addClass("tree");
									tree
											.find('li')
											.has("ul")
											.each(
													function() {
														var branch = $(this); //li with children ul
														branch
																.prepend("<i class='indicator fa " + closedClass + "'></i>");
														branch
																.addClass('branch');
														branch
																.on(
																		'click',
																		function(
																				e) {
																			if (this == e.target) {
																				var icon = $(
																						this)
																						.children(
																								'i:first');
																				icon
																						.toggleClass(openedClass
																								+ " "
																								+ closedClass);
																				$(
																						this)
																						.children()
																						.children()
																						.toggle();
																			}
																		})
														branch.children()
																.children()
																.toggle();
													});

									//fire event from the dynamically added icon
									tree
											.find('.branch .indicator')
											.each(
													function() {
														$(this)
																.on(
																		'click',
																		function() {
																			$(
																					this)
																					.closest(
																							'li')
																					.click();
																		});
													});

									//fire event to open branch if the li contains an anchor instead of text
									tree.find('.branch>a').each(function() {
										$(this).on('click', function(e) {
											$(this).closest('li').click();
											e.preventDefault();
										});
									});

									//fire event to open branch if the li contains a button instead of text
									tree
											.find('.branch>button')
											.each(
													function() {
														$(this)
																.on(
																		'click',
																		function(
																				e) {
																			$(
																					this)
																					.closest(
																							'li')
																					.click();
																			e
																					.preventDefault();
																		});
													});
								}
							});

					$('#tree1').treed();

					$('#tree2').treed({
						openedClass : 'glyphicon-folder-open',
						closedClass : 'glyphicon-folder-close'
					});

					$('#tree3').treed({
						openedClass : 'glyphicon-chevron-right',
						closedClass : 'glyphicon-chevron-down'
					});
				})

</script>


<script>
$(document)
.ready(
		function() {

			//select all checkbox
			$(".pc-box").click(
					function() {
						if (this.checked) {
							$(this).closest("li").find(".pc-box")
									.prop("checked", true);
							$(this).closest("li").find(".pc1-box")
									.prop("checked", true);
							$(this).closest("li").find(".pc2-box")
									.prop("checked", true);
							$(this).closest("li").find(
									".activityCls").prop("checked",
									true);
							$(this).parent();
						}
					});
			$(".pc-box").click(
					function() {
						if (!this.checked) {
							$(this).closest("li").find(".pc1-box")
									.prop("checked", false);
							$(this).closest("li").find(".pc2-box")
									.prop("checked", false);
							$(this).closest("li").find(
									".activityCls").prop("checked",
									false);
							$(this).parent();
						}
					});
			$(".pc1-box").click(
					function() {
						if (this.checked) {
							$(this).closest("li").find(".pc1-box")
									.prop("checked", true);
							$(this).closest("li").find(".pc2-box")
									.prop("checked", true);
							$(this).closest("li").find(
									".activityCls").prop("checked",
									true);
							$(this).parent();
						}
					});
			$(".pc1-box").click(
					function() {
						if (!this.checked) {
							$(this).closest("li").find(".pc2-box")
									.prop("checked", false);
							$(this).closest("li").find(
									".activityCls").prop("checked",
									false);
							$(this).parent();
						}
					});

			$(".pc2-box").click(
					function() {
						if (this.checked) {
							$(this).closest("li").find(".pc2-box")
									.prop("checked", true);
							$(this).closest("li").find(
									".activityCls").prop("checked",
									true);
							$(this).parent();
						}
					});
			$(".pc2-box").click(
					function() {
						if (!this.checked) {
							$(this).closest("li").find(
									".activityCls").prop("checked",
									false);
							$(this).parent();
						}
					});

			$(".activityCls").click(
					function() {
						if (!this.checked)
							$(this).closest("ul").prev().find(
									".pc-box").prop("checked",
									false);
					});
			//select all checkbox end

			//SELECT BOX CUSTOM
			jQuery(document)
					.delegate(
							'a.add-record',
							'click',
							function(e) {
								e.preventDefault();
								var content = jQuery('#append_table tr'), size = jQuery('#myTbl >tbody >tr').length + 1, element = null, element = content
										.clone();
								element.attr('id', 'rec-' + size);
								element.find('.delete-record')
										.attr('data-id', size);
								element.appendTo('#myTbl_body');
								element.find('.sn').html(size);
							});
			jQuery(document)
					.delegate(
							'a.delete-record',
							'click',
							function(e) {
								e.preventDefault();
								var didConfirm = confirm("Are you sure You want to delete");
								if (didConfirm == true) {
									var id = jQuery(this).attr(
											'data-id');
									var targetDiv = jQuery(this)
											.attr('targetDiv');
									jQuery('#rec-' + id).remove();

									//regnerate index number on table
									$('#myTbl_body tr')
											.each(
													function(index) {
														$(this)
																.find(
																		'span.sn')
																.html(
																		index + 1);
													});
									return true;
								} else {
									return false;
								}

								$('#closeKey').on('click',
										function() {
											alert()
										});
							});

			$('input,textarea').focus(
					function() {
						$(this).data('placeholder',
								$(this).attr('placeholder')).attr(
								'placeholder', '');
					}).blur(
					function() {
						$(this).attr('placeholder',
								$(this).data('placeholder'));
					});

			//New Friday

			var x, i, j, l, ll, selElmnt, a, b, c;
			/*look for any elements with the class "custom-select":*/
			x = document.getElementsByClassName("selectbox");
			l = x.length;
			for (i = 0; i < l; i++) {
				selElmnt = x[i].getElementsByTagName("select")[0];
				ll = selElmnt.length;
				/*for each element, create a new DIV that will act as the selected item:*/
				a = document.createElement("DIV");
				a.setAttribute("class", "select-selected");
				a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
				x[i].appendChild(a);
				/*for each element, create a new DIV that will contain the option list:*/
				b = document.createElement("DIV");
				b.setAttribute("class", "select-items select-hide");
				for (j = 1; j < ll; j++) {
					/*for each option in the original select element,
					create a new DIV that will act as an option item:*/
					c = document.createElement("DIV");
					c.innerHTML = selElmnt.options[j].innerHTML;
					c
							.addEventListener(
									"click",
									function(e) {
										/*when an item is clicked, update the original select box,
										and the selected item:*/
										var y, i, k, s, h, sl, yl;
										s = this.parentNode.parentNode
												.getElementsByTagName("select")[0];
										sl = s.length;
										h = this.parentNode.previousSibling;
										for (i = 0; i < sl; i++) {
											if (s.options[i].innerHTML == this.innerHTML) {
												s.selectedIndex = i;
												h.innerHTML = this.innerHTML;
												y = this.parentNode
														.getElementsByClassName("same-as-selected");
												yl = y.length;
												for (k = 0; k < yl; k++) {
													y[k]
															.removeAttribute("class");
												}
												this
														.setAttribute(
																"class",
																"same-as-selected");
												break;
											}
										}
										h.click();
									});
					b.appendChild(c);
				}
				x[i].appendChild(b);
				a.addEventListener("click", function(e) {
					/*when the select box is clicked, close any other select boxes,
					and open/close the current select box:*/
					e.stopPropagation();
					closeAllSelect(this);
					this.nextSibling.classList
							.toggle("select-hide");
					this.classList.toggle("select-arrow-active");
				});
			}

			function closeAllSelect(elmnt) {
				/*a function that will close all select boxes in the document,
				except the current select box:*/
				var x, y, i, xl, yl, arrNo = [];
				x = document.getElementsByClassName("select-items");
				y = document
						.getElementsByClassName("select-selected");
				xl = x.length;
				yl = y.length;
				for (i = 0; i < yl; i++) {
					if (elmnt == y[i]) {
						arrNo.push(i)
					} else {
						y[i].classList
								.remove("select-arrow-active");
					}
				}
				for (i = 0; i < xl; i++) {
					if (arrNo.indexOf(i)) {
						x[i].classList.add("select-hide");
					}
				}
			}
			/*if the user clicks anywhere outside the select box,
			then close all select boxes:*/
			document.addEventListener("click", closeAllSelect);
			//SELECT BOX CUSTOM ENDS

			$("#newBtn").click(function() {
				$("#myTbl").hide();
				$(".btn-hs").hide();
				$("#demo").show();
			})

			$(".pc-box").click(
					function() {
						if (this.checked) {
							$(".cbicon").addClass("green-cls");
							$(".cbicon1").addClass("green-cls");
							$(".cbicon2").addClass("green-cls");
							$(".cbicon")
									.removeClass("remove-green");
							$(".cbicon1").removeClass(
									"remove-green");
							$(".cbicon2").removeClass(
									"remove-green");
							$(this).closest("li").find(".pc-box")
									.prop("checked", true);
							$(this).closest("li").find(".pc1-box")
									.prop("checked", true);
							$(this).closest("li").find(".pc2-box")
									.prop("checked", true);
							$(this).parent();
							$(".roomLoc").show();

							showRoomDetails("ABC");
						}
						if (!this.checked) {
							$(".cbicon").removeClass("green-cls");
							$(".cbicon1").removeClass("green-cls");
							$(".cbicon2").removeClass("green-cls");
							$(".cbicon").addClass("remove-green");
							$(".cbicon1").addClass("remove-green");
							$(".cbicon2").addClass("remove-green");
							$(this).closest("li").find(".pc1-box")
									.prop("checked", false);
							$(this).closest("li").find(".pc2-box")
									.prop("checked", false);
							$(this).parent();
							$(".roomLoc").hide();
							$("#locCount").text(' (0)');
						}
					});

			$("#cancelBtn").click(function() {
				$("#myGrid").show();
				$(".btn-hs").show();
				$("#demo").hide();

				//listingOfLocation();

				$(".caret").removeClass("caret-down");
				$(".nested").removeClass("active");

				$('input:checkbox').prop('checked', false);

				$("#searchRowDiv").show();

			});

			$("input[class='myCheckbox']")
					.click(
							function() {
								if ($("#formID input:checkbox:checked").length > 0) {

									$(".checkSubmit").addClass(
											'active');
								} else {
									$(".checkSubmit").removeClass(
											'active');
								}
							});
 
 
		});


</script>


<script>
$(document).ready(
		function() {
			var toggler = document.getElementsByClassName("caret");
			var i;

			for (i = 0; i < toggler.length; i++) {
				toggler[i].addEventListener("click", function() {
					this.parentElement.querySelector(".nested").classList
							.toggle("active");
					this.classList.toggle("caret-down");
				});
			}

		});

function openDetails() {
	 $('.loader').show();
		$("body").addClass("overlay");
	var warehouseId = $('#warehouseId').val()
     getZoneList(warehouseId);
	 $.ajax({
			type : "GET",
			url : "warehouse-allocation-get-data?warehouseId=" + warehouseId,
			dataType : 'json',
			contentType : 'application/json',
			data : warehouseId,
			success : function(response) {
				if (response.code == "success") {
					$('.loader').hide();
					$("body").removeClass("overlay");
					$(".roomListDiv").empty();
					var jsonData = JSON.parse(response.body);
					for (var i = 0; i < jsonData.ZoneData.length; i++) {
						$(".slidearrow").show();
						var div = "";
						if (jsonData.ZoneData[i].BinData.length > 0) {
							for (var j = 0; j <jsonData.ZoneData[i].BinData.length; j++) {
								
								var whId =jsonData.ZoneData[i].warehouse_id;
								var zoneId =jsonData.ZoneData[i].zone_id;
								var zoneCode =jsonData.ZoneData[i].zone_code;
								var zoneName =jsonData.ZoneData[i].zone_name;
								
								var rackId =jsonData.ZoneData[i].rack_id;
								var rackCode =jsonData.ZoneData[i].rack_code;
								var rackName =jsonData.ZoneData[i].rack_name;
								
								var rmId =jsonData.ZoneData[i].BinData[j].bin_id;
								var rmCode = jsonData.ZoneData[i].BinData[j].bin_code;
								var rmName = jsonData.ZoneData[i].BinData[j].bin_name;
								var allocationStatus = jsonData.ZoneData[i].BinData[j].bin_allocation_status;
								var allocateid = jsonData.ZoneData[i].BinData[j].allocationId;
								var binquantity = jsonData.ZoneData[i].BinData[j].binQuantity;
								var capacity = jsonData.ZoneData[i].BinData[j].capacity_qty;
								
								var sec_room = i + '_' + j;
								var textLen = jsonData.ZoneData[i].BinData.length;
								if (allocationStatus=="1") {
									if (textLen > 7) {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'" data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp roombtnassigned"  data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
											    +'<a onclick=viewAllocation("'
												+ rmId
												+ '")>View Stock</a>'
												+'<a onclick=holdData("'
												+ rmId
												+ '")>In Hold</a>'
												+'</span>'
												+ '</div>';
									} else {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'"  data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp roombtnassigned" data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
											    +'<a onclick=viewAllocation("'
												+ rmId
												+ '")>View Stock</a>'
												+'<a onclick=holdData("'
												+ rmId
												+ '")>In Hold</a>'
												+'</span>'
												+ '</div>';
									}
								} else if (allocationStatus=="2") {
										if (textLen > 7) {
											div = div
													+ '<div class="dropdown dropbtn">'
													+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'" data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
													+ i
													+ '_'
													+ j
													+ '" class="roombtn cp roombtnclear"  data-rmName="'
													+ rmName
													+ '" onclick=activeRoom("'
													+ sec_room
													+ '");>'
													+ rmName
													+'</span>'
													+'<span class="dropdown-content">'
												    +'<a onclick=viewBin("'
													+ rmId
													+ '")>View Config</a>'
												    +'<a onclick=viewAllocation("'
													+ rmId
													+ '")>View Stock</a>'
													+'<a onclick=release("'
													+ rmId
													+ '")>Release</a>'
													+'</span>'
													+ '</div>';
										} else {
											div = div
													+ '<div class="dropdown dropbtn">'
													+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'"  data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
													+ i
													+ '_'
													+ j
													+ '" class="roombtn cp roombtnclear" data-rmName="'
													+ rmName
													+ '" onclick=activeRoom("'
													+ sec_room
													+ '");>'
													+ rmName
													+'</span>'
													+'<span class="dropdown-content">'
												    +'<a onclick=viewBin("'
													+ rmId
													+ '")>View Config</a>'
												    +'<a onclick=viewAllocation("'
													+ rmId
													+ '")>View Stock</a>'
													+'<a onclick=release("'
													+ rmId
													+ '")>Release</a>'
													+'</span>'
													+ '</div>';
										}
								} else if (allocationStatus=="3") {
										if (textLen > 7) {
											div = div
													+ '<div class="dropdown dropbtn">'
													+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'" data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
													+ i
													+ '_'
													+ j
													+ '" class="roombtn cp roombtnpartialalloc""  data-rmName="'
													+ rmName
													+ '" onclick=partiallyAllocRoom("'
													+ sec_room
													+ '");>'
													+ rmName
													+'</span>'
													+'<span class="dropdown-content">'
												    +'<a onclick=viewBin("'
													+ rmId
													+ '")>View Config</a>'
												    +'<a onclick=viewAllocation("'
													+ rmId
													+ '")>View Stock</a>'
													+'<a onclick=release("'
													+ rmId
													+ '")>Release</a>'
													+'</span>'
													+ '</div>';
										} else {
											div = div
													+ '<div class="dropdown dropbtn">'
													+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'"  data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
													+ i
													+ '_'
													+ j
													+ '" class="roombtn cp roombtnpartialalloc"" data-rmName="'
													+ rmName
													+ '" onclick=partiallyAllocRoom("'
													+ sec_room
													+ '");>'
													+ rmName
													+'</span>'
													+'<span class="dropdown-content">'
												    +'<a onclick=viewBin("'
													+ rmId
													+ '")>View Config</a>'
												    +'<a onclick=viewAllocation("'
													+ rmId
													+ '")>View Stock</a>'
													+'<a onclick=release("'
													+ rmId
													+ '")>Release</a>'
													+'</span>'
													+ '</div>';
										}
								} else {
									if (textLen > 7) {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-cqty="'+capacity+'"  data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp" data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
												+'</span>'
												+ '</div>';
									} else {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-cqty="'+capacity+'"  data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp" data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
												+'</span>'
												+ '</div>';
									}
								}
							
							}
						}
						var tbl = '<h3 class="roomLoc roomSectionDiv_'+zoneName+' roomFloorDiv_'+zoneName+'">'
						+zoneName
						+ ' ('
						+ textLen
						+ ')</h3>'
						+ '<div class="row btmgap roomLoc roomSectionDiv_'+zoneName+' roomFloorDiv_'+zoneName+'"><div class="col-md-12 roomsection rmsec_'+zoneId+'">'
						+ div + '</div></div>';

						$(".roomListDiv").append(tbl);
					}
					$('.loader').hide();
					$("body").removeClass("overlay");
				}
			},
			error : function(data) {
				console.log(data);
			}
		})
}

function getZoneList(warehouseId) {
	if (warehouseId) {
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$.ajax({
			type : "GET",
			url : "warehouse-allocation-getzoneList?id=" + warehouseId,
			success : function(response) {
				if (response.code == "success") {
					$("#zoneId").empty();
					var option = $("<option></option>");
					$(option).val(null);
					$(option).html("Select");
					$("#zoneId").append(option);
					for (var i = 0; i < response.body.length; i++) {
						var option = $("<option></option>");
						$(option).val(response.body[i].key);
						$(option).html(response.body[i].name);
						$("#zoneId").append(option);
					}
				}
			},
			error : function(e) {
			}
		});
	} else {
		$("#zoneId").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("warehouseId");
		$("#zoneId").append(option);
		$("#zoneId").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
	}
}



function getItemList(rtid) {
    var categoryId = $("#categoryId").val();
    if (categoryId) {
        $("#itemName").empty();
        var option = $("<option></option>");
        $(option).val(null);
        $(option).html("---Select---");
        $("#itemName").append(option);
        $.ajax({
            type: 'GET',
            url: 'warehouse-allocation-getitemList?id=' + categoryId,
            contentType: false,
            success: function(response) {
                if (response.code == "success") {
                    $("#itemName").empty();
                    var option = $("<option></option>");
                    $(option).val(null);
                    $(option).html("---Select---");
                    $("#itemName").append(option);
                    console.log(response.body)
                    for (var i = 0; i < response.body.length; i++) {
                        var option = $("<option></option>");
                        $(option).val(response.body[i].key);
                        $(option).html(response.body[i].name);
                        $("#itemName").append(option);
                    }
                if(rtid!="" && rtid!=""){
                    	 $("#itemName").val(rtid);
                    } 
                }
            },
            error: function(e) {
                alert("error");
            }
        });
    } else {
        $("#itemName").empty();
        var option = $("<option></option>");
        $(option).val(null);
        $(option).html("---Select---");
        $("#itemName").append(option);
    }
}


function getItemListt(rtid) {
	
    var categoryId = $("#binCategoryConfig").val();
	
    if (categoryId) {
        $("#binitemConfig").empty();
        var option = $("<option></option>");
        $(option).val(null);
        $(option).html("---Select---");
        $("#binitemConfig").append(option);
        $.ajax({
            type: 'GET',
            url: 'warehouse-allocation-getitemList?id=' + categoryId,
            contentType: false,
            success: function(response) {
                if (response.code == "success") {
                	
                    $("#binitemConfig").empty();
                    var option = $("<option></option>");
                    $(option).val(null);
                    $(option).html("---Select---");
                    $("#binitemConfig").append(option);
                    console.log(response.body)
                    for (var i = 0; i < response.body.length; i++) {
                        var option = $("<option></option>");
                        $(option).val(response.body[i].key);
                        $(option).html(response.body[i].name);
                        $("#binitemConfig").append(option);
                    }
                if(rtid!="" && rtid!=""){
                    	 $("#binitemConfig").val(rtid);
                    } 
                }
            },
            error: function(e) {
                alert("error");
            }
        });
    } else {
        $("#binitemConfig").empty();
        var option = $("<option></option>");
        $(option).val(null);
        $(option).html("---Select---");
        $("#binitemConfig").append(option);
    }
}


function getFilterWarehouseData(){
	var warehouseId = $('#warehouseId').val()
	var zoneId = $('#zoneId').val()
	var categoryId = $('#categoryId').val()
	var itemName = $('#itemName').val()
	var rackId = $('#rackId').val()
	var validation = true;
	var obj = {};
		if (obj.warehouseId == null || obj.warehouseId == "") {
			validation = validationUpdated("Please Select Warehouse",
					"warehouseId");
		}
	if (validation){
	 $.ajax({
			type : "GET",
			url : "warehouse-allocation-getFilterWarehouseData?warehouseId=" + warehouseId + "&zoneId=" + zoneId + "&rackId=" + rackId + "&categoryId=" + categoryId + "&itemName=" + itemName,
			dataType : 'json',
			contentType : 'application/json',
			success : function(response) {
				if (response.code == "success") {
					$(".roomListDiv").empty();
					var jsonData = JSON.parse(response.body);
					for (var i = 0; i < jsonData.ZoneData.length; i++) {
						$(".slidearrow").show();
						var div = "";
						if (jsonData.ZoneData[i].BinData.length > 0) {
							for (var j = 0; j <jsonData.ZoneData[i].BinData.length; j++) {
								
								var whId =jsonData.ZoneData[i].warehouse_id;
								var zoneId =jsonData.ZoneData[i].zone_id;
								var zoneCode =jsonData.ZoneData[i].zone_code;
								var zoneName =jsonData.ZoneData[i].zone_name;
								
								var rackId =jsonData.ZoneData[i].rack_id;
								var rackCode =jsonData.ZoneData[i].rack_code;
								var rackName =jsonData.ZoneData[i].rack_name;
								
								var rmId =jsonData.ZoneData[i].BinData[j].bin_id;
								var rmCode = jsonData.ZoneData[i].BinData[j].bin_code;
								var rmName = jsonData.ZoneData[i].BinData[j].bin_name;
								var binquantity = jsonData.ZoneData[i].BinData[j].binQuantity;
								var capacity = jsonData.ZoneData[i].BinData[j].capacity_qty;
								var sec_room = i + '_' + j;
								var allocationStatus = jsonData.ZoneData[i].BinData[j].bin_allocation_status;
								var allocateid = jsonData.ZoneData[i].BinData[j].allocationId;
								var textLen = jsonData.ZoneData[i].BinData.length;
								if (allocationStatus=="1") {
									
									if (textLen > 7) {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-binqty="'+binquantity+'" data-cqty="'+capacity+'" data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp roombtnassigned"  data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
											    +'<a onclick=viewAllocation("'
												+ rmId
												+ '")>View Stock</a>'
												+'<a onclick=holdData("'
												+ rmId
												+ '")>In Hold</a>'
												+'</span>'
												+ '</div>';
									} else {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-binqty="'+binquantity+'" data-cqty="'+capacity+'" data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp roombtnassigned" data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
											    +'<a onclick=viewAllocation("'
												+ rmId
												+ '")>View Stock</a>'
												+'<a onclick=holdData("'
												+ rmId
												+ '")>In Hold</a>'
												+'</span>'
												+ '</div>';
									}

								} else {
									if (allocationStatus=="2") {
										if (textLen > 7) {
											div = div
													+ '<div class="dropdown dropbtn">'
													+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'" data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
													+ i
													+ '_'
													+ j
													+ '" class="roombtn cp roombtnclear"  data-rmName="'
													+ rmName
													+ '" onclick=activeRoom("'
													+ sec_room
													+ '");>'
													+ rmName
													+'</span>'
													+'<span class="dropdown-content">'
												    +'<a onclick=viewBin("'
													+ rmId
													+ '")>View Config</a>'
												    +'<a onclick=viewAllocation("'
													+ rmId
													+ '")>View Stock</a>'
													
													+'</span>'
													+ '</div>';
										} else {
											div = div
													+ '<div class="dropdown dropbtn">'
													+ '<span title="Bin" data-value="'+rmId+'" data-aid="'+allocateid+'" data-cqty="'+capacity+'"  data-binqty="'+binquantity+'" data-zoneid="'+zoneId+'" id="'
													+ i
													+ '_'
													+ j
													+ '" class="roombtn cp roombtnclear" data-rmName="'
													+ rmName
													+ '" onclick=activeRoom("'
													+ sec_room
													+ '");>'
													+ rmName
													+'</span>'
													+'<span class="dropdown-content">'
												    +'<a onclick=viewBin("'
													+ rmId
													+ '")>View Config</a>'
												    +'<a onclick=viewAllocation("'
													+ rmId
													+ '")>View Stock</a>'
													
													+'</span>'
													+ '</div>';
										}
								} else {
									if (textLen > 7) {
									
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-cqty="'+capacity+'" data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp" data-rmName="'
												+ rmName
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ sec_room
												+ '")>View Config</a>'
												+'</span>'
												+ '</div>';
									} else {
										div = div
												+ '<div class="dropdown dropbtn">'
												+ '<span title="Bin" data-value="'+rmId+'" data-cqty="'+capacity+'" data-zoneid="'+zoneId+'" id="'
												+ i
												+ '_'
												+ j
												+ '" class="roombtn cp" data-rmName="'
												+ sec_room
												+ '" onclick=activeRoom("'
												+ sec_room
												+ '");>'
												+ rmName
												+'</span>'
												+'<span class="dropdown-content">'
											    +'<a onclick=viewBin("'
												+ rmId
												+ '")>View Config</a>'
												+'</span>'
												+ '</div>';
									}
								}
								}
							}
						}
						var tbl = '<h3 class="roomLoc roomSectionDiv_'+zoneName+' roomFloorDiv_'+zoneName+'">'
						+zoneName
						+ ' ('
						+ textLen
						+ ')</h3>'
						+ '<div class="row btmgap roomLoc roomSectionDiv_'+zoneName+' roomFloorDiv_'+zoneName+'"><div class="col-md-12 roomsection rmsec_'+zoneId+'">'
						+ div + '</div></div>';

						$(".roomListDiv").append(tbl);
					}
					$('.loader').hide();
					$("body").removeClass("overlay");

				}
			},
			error : function(data) {
				console.log(data);
				
			}
		})
}

}
function validHeaderData() {
	var allValid = true;
	if (!validationUpdated("Warehouse Required", "warehouseId"))
		allValid = false;
	if (!validationUpdated("Category Required", "categoryId"))
		allValid = false;
	if (!validationUpdated("Quantity Required", "quantity"))
		allValid = false;
	if (!validationUpdated("Unit Required", "unit"))
		allValid = false;
	if (!validationUpdated("Item Name Required", "itemName"))
		allValid = false;
	return allValid;
}
function closeIcon() {
	$('#allocateGoods').modal('hide');
	//$("#batchNoType").val('');
	$("#manufacturePlace").val('');
	$("#shift").val('');
	$("#lineNo").val('');
	$("#manufactureTime").val('');
	$("#manufactureDate").val('');
	$("#bestBeforeDate").val('');
	$("#cldNo").val('');
	$("#batchNo").val('');
	openDetails();
	
}

function allocate() {
	 
	window.index=-1;
	if(validHeaderData()){
    var bindatas = "";
    $('.roombtnactive').each(function(){
    	bindatas = bindatas + '"' + $(this).data("value") + '",';
    });
	
    if(bindatas){
    	$("#cldDiv").hide();
    	 $('#allocateGoods').modal('show');
        var date = (new Date()).toISOString().split('T')[0];
		var newDate = changeDateFormat(date);
		$("#batchDate").val(newDate);
		 
		 var item = [];  
		 var bindatass = "";
	
		// getBatchData();
		 //$('#cldDiv').attr("disabled", true);
		   item.categoryId = $("#categoryId option:selected").text();
		   item.itemName = $("#itemName option:selected").text();
		   item.unit = $("#unit option:selected").text();
		  var quantity = $('#quantity').val()
			$("#binCategoryMod").val(item.categoryId);
			 $("#binItemMod").val(item.itemName );
			 $("#quantityMod").val(quantity);
			 $("#unitBinMod").val(item.unit); 
		    $('.roombtnactive').each(function(){
		    	var obj = {};
		    	obj.binId=$(this).data("value");
		    	obj.unitName = $("#unit option:selected").text();
		    	obj.zoneId = $(this).data("zoneid");
		    	obj.binName = $(this).data("rmname");
		    	obj.capacityQuantity = $(this).data("cqty");
		    	obj.binQuntity="0"
		    	obj.slNoFrom="0"
		    	obj.slNoTo="0"
		    	bindatass = bindatass + '' + $(this).data("value") + ',';
		    	item.push(obj)
		    });
		    bindatass = bindatass.substring(0, bindatass.length - 1); 
            gridOptionsAllocationQty.api.setRowData(item);
            var len = item.length;
		  $('#totalAllocateList').find('span').html(len); 
	
    }else{
		$("#messageParagraph").text("Please Select Atleast one Bin !");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
		$("#msgModal").modal('hide');
    } 
  }
}


function changeDateFormat(inputDate){  // expects Y-m-d
    var splitDate = inputDate.split('-');
    if(splitDate.count == 0){
        return null;
    }
    var year = splitDate[0];
    var month = splitDate[1];
    var day = splitDate[2]; 
    return day + '-' + month + '-' + year;
}

function closeNav() {
	document.getElementById("mySidenavAllocate").style.width = "0";
	document.getElementById("item").style.width = "100%";
	$('.formValidation').remove();
	$("#allocate").show();
	$("#batchNo").val('');
	$("#manufactureDate").val('');
}
function validFormData() {
	var allValid = true;
	if (!validationUpdated("Warehouse Required", "warehouseId"))
		allValid = false;
	if (!validationUpdated("Category Required", "categoryId"))
		allValid = false;
	if (!validationUpdated("Quantity Required", "quantity"))
		allValid = false;
	if (!validationUpdated("Item Name Required", "itemName"))
		allValid = false;
        var batchType = $("#batchNoType").val();
	    if (batchType == "Automatic") {
	    if (!validationUpdated("Manufacture Place Required", "manufacturePlace"))
			allValid = false;
		if (!validationUpdated("Shift Required", "shift"))
			allValid = false;
		if (!validationUpdated("Manufacture Date", "manufactureDate"))
			allValid = false;
		if (!validationUpdated("Line No. Required ", "lineNo"))
			allValid = false;
		if (!validationUpdated("Packaging site Required ", "packingSite"))
			allValid = false;
		
	} else {
	 if (!validationUpdated("Batch No .Required", "batchNo"))
		allValid = false; 
	}
		if (!validationUpdated("Manufacture Date", "manufactureDate"))
			allValid = false;
		
		if (!validationUpdated("Enter Manufacture Time ", "manufactureTime"))
			allValid = false;
		
		if (!validationUpdated("Enter Best Before Date ", "bestBeforeDate"))
			allValid = false;
	
	return allValid;
}


function saveAllocateData(){
	if (validFormData()) {
		
	var datas = [];
	let sum = 0;
	let i=-1;
	gridOptionsAllocationQty.api.forEachNode(function(rowNode, indrx) {
    	var obj = {};
    	i=i+1;
    	obj.allocationId = $("#allocationId").val();
    	obj.vreificationId = $("#vreificationId").val();
    	obj.warehouseId = $("#warehouseId").val();
    	obj.categoryId = $("#categoryId").val();
    	obj.itemName = $("#itemName").val();
    	obj.quantity = $("#quantity").val();
    	obj.unit = $("#unit").val();
    	//obj.batchId = $("#batchId").val();
    	obj.batchNo = $("#batchNo").val();
    	obj.manufactureDate = $("#manufactureDate").val();
    	obj.manufacturePlace = $("#manufacturePlace").val();
    	obj.shift = $("#shift").val();
    	obj.batchNoType = $("#batchNoType").val();
    	if (obj.batchNoType == "Automatic") {
    		obj.batchDate = $("#batchDate").val();
    	}
    	obj.lineNo = $("#lineNo").val();
    	obj.packingSite = $("#packingSite").val();
    	obj.manufactureTime = $("#manufactureTime").val();
    	obj.bestBeforeDate = $("#bestBeforeDate").val();
    	obj.cldNo = $("#cldNo").val();
    	obj.binId = rowNode.data.binId;
    	obj.zoneId = rowNode.data.zoneId;
    	obj.capacityQuantity = rowNode.data.capacityQuantity;
    	obj.binQuntity=$('#binqty'+i).val();
    	obj.slNoFrom=$('#slfrom'+i).val();
    	obj.slNoTo=$('#slto'+i).val();
    	obj.binRemark=$('#remark'+i).val();
    	
 	 	sum +=parseInt(obj.binQuntity);
    	   console.log(sum); 
    	   if (obj.binQuntity != "0") {
       		
      
	  	if (obj.binQuntity <= rowNode.data.capacityQuantity ) {
	  		
	    		datas.push(obj);
	  	
			} else {
				
				datas.push("");
				$("#messageParagraph").text(
				"Please add less than or same Bin Quantity as capacity");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
			} 
    	
    
    	console.log(obj)
    	//datas.push(obj);
    	   }else{
    		   datas.push("");
    		   $("#messageParagraph").text(
				"Please Remove Zero Quantity Bin");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');  
    	   }
    });
	  console.log(sum); 
	  	if ($("#quantity").val()==sum) {
	  	
	  	submitAllocateData(datas);
		} else {
			datas.push("");
			$("#messageParagraph").text(
			"Please add  same Bin Quantity as Item Quantity");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
		} 
    console.log(datas)
/*     if(datas){
    	
    } */
		
	
	}
}

function submitAllocateData(datas) {
	
                $.ajax({
						type : "POST",
						url : "warehouse-allocation-save-allocation",
						contentType : "application/json",
						data : JSON.stringify(datas),
						success : function(response) {
						if (response.code == "success") {
							$('#approveRequest').attr("disabled", true);
							$('#deleteData').attr("disabled", true);
							$("#messageParagraph").text("Data Saved Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
						$('.loader').hide();
						$("body").removeClass("overlay");
						$('#allocateGoods').modal('hide');
						Cancel();
						//add();
						agGrid.simpleHttpRequest({
							url : "warehouse-allocation-through-ajax"
						}).then(function(data) {
							var jsonData = JSON.parse(data.body);
							console.log("lllllllll",jsonData);
							var allData=jsonData.AllocationData;
							var len = allData.length;
							$('#totalCandidate').find('span').html(len);
							gridOptions.api.setRowData(allData);
						}); 
					} else {
						$('.loader').hide();
						$("body").removeClass("overlay");
					}
				},
				error : function(data) {
					console.log(data);
					$('.loader').hide();
					$("body").removeClass("overlay");
				}
			})
}

function viewAllocation(rmId){
	$('#myModalViewAllocation').modal('show');
 	$.ajax({
		type : "GET",
		url : "warehouse-allocation-get-bindata?rmId="+ rmId,
		success : function(response) {
			if (response.code == "success") {
				var jsonData = JSON.parse(response.body);
				var allData=jsonData.AllocationData[0];
				
				var len = allData.length;
			    $("#binCategory").val(allData.categoryName);
				$("#binitem").val(allData.itemName);
				$("#binQuantity").val(allData.quantity);
				$("#batchNoBin").val(allData.batchNo);
				$("#manufactureDateBin").val(allData.manufactureDate);
				$("#bestbeforeDateBin").val(allData.bestbeforeDate);
				$("#serialNoStock").val(allData.serialNoStock);
				$("#unitAllocate").val(allData.unit);
			}
		},
		error : function(e) {
		}
	}); 
}
function closeViewAllocation() {
	$('#myModalViewAllocation').modal('hide');
}

function viewBin(rmId){
	$('#myModalConfig').modal('show');
	$.ajax({
		type : "GET",
		url : "warehouse-allocation-get-binconfigdata?rmId="+ rmId,
		success : function(response) {
		
			if (response.code == "success") {
				var jsonData = JSON.parse(response.body);
				var allData=jsonData.BindataData[0];
				
				var len = allData.length;
			    $("#binCategoryConfig").val(allData.categoryId);
				
				$("#binitemConfig").val(allData.itemId);
				$("#binQuantityConfig").val(allData.quantity);
				$("#descriptionConfig").val(allData.decs);
				$("#unitConfig").val(allData.unit);
				
				$('#binCategoryConfig').attr("disabled", true); 
				$('#binitemConfig').attr("disabled", true); 
				//getItemListt(allData.itemId);
			}
		},
		error : function(e) {
		}
	});
}

function closeConfigModal() {

	$('#myModalConfig').modal('hide');
}

function holdData(rmId){
	$("#binid").val(rmId);
	$('#holdModel').modal('show');
}

function cancelHold() {

	$('#holdModel').modal('hide');
}

function holdOnclick(){
 var rmId= $("#binid").val();
 
	$.ajax({
		type : "GET",
		url : "warehouse-allocation-hold?rmId=" + rmId,
		async : false,
		success : function(response) {
			
			if (true) {
				$("#messageParagraph").text("Bin Hold Successfully");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
				$("#binid").val("");
				$('#holdModel').modal('hide');
				
			}
			openDetails();
			$("#binid").val("");

		},
	});
}

function release(rmId){
	$("#binid").val(rmId);
	$('#realeaseModel').modal('show');
}

function cancelRelease() {

	$('#realeaseModel').modal('hide');
}

function releaseOnclick(){
	 var rmId= $("#binid").val();
	 
		$.ajax({
			type : "GET",
			url : "warehouse-allocation-release?rmId=" + rmId,
			async : false,
			success : function(response) {

				if (true) {
					$("#messageParagraph").text("Bin Release Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					$("#binid").val("");
					$('#realeaseModel').modal('hide');

				}
				openDetails();
				$("#binid").val("");

			},
		});
	}
function batchNoTypeClick() {
	var batchNoType = $("#batchNoType").val();
	$(".formValidation").remove();
	if (batchNoType == "Automatic") {
		$("#batchDateDtls").show();
		$("#manufacturePlaceDtls").show();
		$("#shiftDtls").show();
		$("#lineNoDtls").show();
		$("#packingSiteDtls").show();
		$("#batchNoDtls").hide();
		
		
	} else {
		//$("#totalFreightCharges").val(0);
		$("#batchDateDtls").hide();
		$("#manufacturePlaceDtls").hide();
		$("#shiftDtls").hide();
		$("#lineNoDtls").hide();
		$("#packingSiteDtls").hide();
		$("#batchNoDtls").show();
		
	}

}
// Get Rack List
function getRackList() {
	var  zoneIdListId= $('#zoneId').val();
	if (zoneIdListId) {
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$.ajax({
			type : "GET",
			url : "warehouse-allocation-getrackList?id=" + zoneIdListId,
			success : function(response) {
				if (response.code == "success") {
					$("#rackId").empty();
					var option = $("<option></option>");
					$(option).val(null);
					$(option).html("Select");
					$("#rackId").append(option);
					for (var i = 0; i < response.body.length; i++) {
						var option = $("<option></option>");
						$(option).val(response.body[i].key);
						$(option).html(response.body[i].name);
						$("#rackId").append(option);
					}
				}
			},
			error : function(e) {
			}
		});
	} else {
		$("#rackId").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("zoneId");
		$("#rackId").append(option);
		$("#rackId").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
	}
}

/* function getBatchData(){
	$.ajax({
		type : "GET",
		url : "warehouse-allocation-get-batchdata",
		success : function(response) {
		
			if (response.code == "success") {
				var jsonData = JSON.parse(response.body);
				var allData=jsonData.BatchData[0];
				
				var len = allData.length;
			    $("#shift").val(allData.shift);
				$("#lineNo").val(allData.lineNo);
				$("#batchId").val(allData.batchId);
				$("#batchNo").val(allData.batchNo);
				$("#binBlockQuantity").val(allData.batchNo);
				$("#manufactureDate").val(allData.mfgDate);
				$("#manufactureTime").val(allData.mfgTime);
				$("#manufacturePlace").val(allData.mfgPlace);
				$("#batchNoType").val(allData.batchType);
				$("#bestBeforeDate").val(allData.bestBefore);
				$("#packingSite").val(allData.packingSite);
				
				 batchNoTypeClick();
				
			}
		},
		error : function(e) {
		}
	});

} */
</script>

</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">
						<div class="d-flex justify-content-between" id="reqTable"
							style="display: none;">

							<div class="btn-hs">
								<div class="font-design" id="totalCandidate">
									Warehouse Allocation(<span></span>)
								</div>
							</div>
							<div id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

							<div class="col-md-5 buttonsec btn-hs">


								<button class="btn4" id=dwnld onclick="downloadDetails()">Download</button>
								<button onclick="deleteData()" class="delete-btn"
									id="deleteData">Delete</button>
								<button onclick="approveRequest()" class="approve-btn"
									id="approveRequest">Request To Stacking</button>
								<button onclick="add()" class="btn1" id="add">New</button>


							</div>
						</div>
						<div id="myGrid" style="height: 500px; width: 100%;"
							class="ag-theme-alpine"></div>

						<div class="collapse" id="addData">
							<div class="innerstickybg">
								<div class="row">
									<div class="col-md-6">
										<h3>Warehouse Allocation</h3>
									</div>
									<div class="col-md-6" align="right">
										<button class="download-btn" id="Cancel" onClick="Cancel()">Back</button>

									</div>
								</div>
								<div class="row">
									<div class="col-md-2">
										<div class="form-group">
											<label>Warehouse</label>
											<div class="select">
												<select class="form-control" id="warehouseId"
													onchange="openDetails();getZoneList()">
													<!-- <option value="">--Select--</option> -->
													<option th:each="c:${locationList}" th:value='${c.key}'
														th:text="${c.name}" th:name='${c.name}'
														th:selected="${c.key==locationList}"></option>
												</select>
											</div>
										</div>
									</div>

									<div class="col-md-1">

										<div class="form-group">
											<label>Zone</label>
											<div class="select">
												<select name="zone" id="zoneId" onchange="getRackList()">
													<option value="">Select</option>
												</select> <span class="focus"></span>
											</div>
										</div>

									</div>

									<div class="col-md-1">

										<div class="form-group">
											<label>Rack</label>
											<div class="select">
												<select name="rack" id="rackId">
													<option value="">Select</option>
												</select> <span class="focus"></span>
											</div>
										</div>

									</div>
									<div class="col-md-2">

										<div class="form-group">
											<label>Category</label>
											<div class="select">
												<select class="form-control transparenttxtbox"
													id="categoryId" onblur="removeValid(event)"
													onchange="getItemList('');">

													<option value="">Select</option>
													<option th:each="c,iter:${categorylist}"
														th:value="${c.key}" th:text="${c.name}"></option>
												</select>
											</div>
										</div>

									</div>
									<div class="col-md-3">
										<div class="form-group">
											<label>Item Name</label>
											<div class="select">
												<select class="form-control transparenttxtbox" id="itemName"
													onblur="removeValid(event)">

													<option value="">Select</option>
												</select>
											</div>
										</div>
									</div>

									<div class="col-md-1">
										<div class="form-group">
											<label>Quantity</label> <input type="text" id="quantity"
												placeholder="Quantity" class="form-control">
										</div>
									</div>
									<div class="col-md-1">
										<div class="form-group">
											<label>Unit</label>
											<div class="select">
												<select class="" id="unit" onblur="removeValid(event);">
													<option value="">Select</option>
													<option th:each="c,iter:${unitList}" th:value="${c.key}"
														th:text="${c.name}"></option>
												</select>
											</div>
										</div>
									</div>
									<div class="col-md-1">
										<div class="form-group">
											<button style="background-color: orange;" class="new-btn"
												id="goButton" onClick="getFilterWarehouseData()">Filter</button>
										</div>
									</div>
								</div>



							</div>





							<div class="row innersticky_contentgap">

								<div id="demo_11" class="mt-4">
									<div class="row">
										<div class="col-md-6">
											<div class="roomdetails roomListDiv" id="main"
												style="width: 100%; height: 500px; overflow-y: scroll;"></div>
										</div>
										<div class="col-md-6" align="right">

											<button class="approve-btn" id="allocate"
												onclick="allocate();">Allocate</button>
										</div>
									</div>


								</div>

							</div>







						</div>
					</div>



				</div>
			</div>
		</div>
		<!-- Goods Allocate Modal -->

		<div class="modal fade " id="allocateGoods">
			<div class="modal-dialog modal-lg" style="max-width: 900px">
				<div class="modal-content p-5 pt-2" style="width: 100%">

					<!-- Modal Header -->
					<div class="modal-header">

						<div class="col-md-12" align="right">
							<button type="button" class="close" data-bs-dismiss="modal"
								aria-label="Close" onclick="closeIcon()">
								<i class="ti-close"></i>
							</button>
						</div>

					</div>

					<div class="row">
						<div class="col-md-3">
							<div class="form-group">
								<label>Category </label> <input type="text" class="form-control"
									id="binCategoryMod" readonly>
							</div>


						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label>Item Name</label> <input type="text" class="form-control"
									id="binItemMod" readonly>
							</div>
						</div>

						<div class="col-md-3">
							<div class="form-group">
								<label>Item Quantity</label> <input type="text" id="quantityMod"
									class="form-control" readonly>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label>Unit</label> <input type="text" id="unitBinMod"
									class="form-control" readonly>
							</div>
						</div>
					</div>

					<div class="d-flex justify-content-between" id="goodsTable"
						style="display: none;">
						<div class="btn-hs mt-2">
							<div class="font-design" id="totalAllocateList">
								Total Allocate List(<span></span>)
							</div>
						</div>

						<div class="col-md-6 buttonsec btn-hs mt-2">
							<button id="saveAllocateData" class="approve-btn"
								onclick="saveAllocateData()">Submit</button>
							<button class="delete-btn" id="deleteBinQty"
								onclick="deleteBinQty();">Delete</button>

						</div>
					</div>

					<!-- Modal body -->
					<div class="modal-body p-0" style="height: 460px; overflow-y: scroll;">
						<div class="vertical-line">
							<div id="myGridAllocationQty" style="height: 125px; width: 100%;"
								class="ag-theme-alpine"></div>


							<div class="row">
							<input type="hidden" id="binid">
								<input type="hidden" id="allocationId"> <input
									type="hidden" id="vreificationId"><!-- <input type="hidden" id="batchId"> -->

														<div class="col-md-6">
													<div class="form-group">
														<label>Batch No. Generated Type</label>
														<div class="select">
															<select id="batchNoType" onchange='batchNoTypeClick()'
																onblur="removeValid(event)">
																<!-- <option value="">Select</option> -->
																<option th:each="c,iter:${BatchNoLists}"
																	th:value="${c.name}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>

												</div>
								<div class="col-md-6" id="batchNoDtls">
													<div class="form-group">
														<label>Batch No.</label> <input type="text"
															class="form-control transparenttxtbox"
															placeholder="Enter Batch No." id="batchNo">
													</div>
												</div>
								<div class="col-lg-6" id="batchDateDtls">
													<div class="form-group">
														<label>Date</label><input type="text" id="batchDate"
															class="form-control" readonly>
													</div>
												</div>

								<div class="col-md-6" id="manufacturePlaceDtls">
													<div class="form-group">
														<label>SFG Manufacture Location</label>
														<div class="select">
															<select id="manufacturePlace" onblur="removeValid(event)">
																<option value="">Select</option>
																<option th:each="c,iter:${ManufacturePlaceLists}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>

												</div>

								<div class="col-md-6" id="shiftDtls">
													<div class="form-group">
														<label>Shift</label>
														<div class="select">
															<select id="shift" onblur="removeValid(event)">
																<option value="">Select</option>
																<option th:each="c,iter:${shiftLists}"
																	th:value="${c.name}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>

												</div>

									<div class="col-md-6" id="lineNoDtls">
													<div class="form-group">
														<label>Packing Machine</label>
														<div class="select">
															<select id="lineNo" onblur="removeValid(event)">
																<option value="">Select</option>
																<option th:each="c,iter:${lineLists}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>

												</div>

							<div class="col-md-6" id="packingSiteDtls">
													<div class="form-group">
														<label>Packing Site</label>
														<div class="select">
															<select id="packingSite" onblur="removeValid(event)">
																<!-- <option value="">Select</option> -->
																<option th:each="c,iter:${packingSiteLists}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>

												</div>


								<div class="col-md-6" id="entryT">
													<div class="form-group calendar_box">
														<label>Manufacture Time</label> <input type="text"
															id="manufactureTime" class="form-control"
															onblur="removeValid(event)"
															th:attr="onkeyup=|formatDate('manufactureTime','${session.DATEFORMAT_JS}')|"
															readonly> <i class="ti-calendar picker_calendar"
															id="toDateCalendarTime"></i>
													</div>
												</div>

												<div class="col-md-6">
													<div class="form-group calendar_box">
														<label>Manufacture Date</label> <input type="text"
															id="manufactureDate" class="form-control"
															onblur="removeValid(event)"
															th:attr="onkeyup=|formatDate('manufactureDate','${session.DATEFORMAT_JS}')|"
															readonly> <i class="ti-calendar picker_calendar"
															id="manufactureDateCalendar" onblur="removeValid(event)"></i>
													</div>
												</div>
												<div class="col-md-6">
													<div class="form-group calendar_box">
														<label>Best Before</label> <input type="text"
															id="bestBeforeDate" class="form-control"
															onblur="removeValid(event)"
															th:attr="onkeyup=|formatDate('bestBefore','${session.DATEFORMAT_JS}')|"
															readonly> <i class="ti-calendar picker_calendar"
															id="bestBeforeCalendar" onblur="removeValid(event)"></i>
													</div>
												</div>
								<div class="col-md-6" id="cldDiv">
									<div class="form-group">
										<label>Cld No.</label> <input type="text"
											class="form-control transparenttxtbox"
											placeholder="Enter Cld No." id="cldNo">
									</div>
								</div>

							</div>

						</div>
					</div>
				</div>
			</div>
		</div>

		<div id="approveRequestModel" class="modal fade show"
			aria-modal="true">
			<div class="modal-dialog modal-confirm">
				<div class="modal-content">
					<div class="modal-header flex-column"></div>
					<div class="modal-body">
						<p>Do you want to Request For Stacking the bin</p>
					</div>
					<div class="modal-footer justify-content-center"
						style="margin-top: -30px;">
						<button type="button" class="cancel-btn" data-dismiss="modal"
							onclick="cancelApproveRequest();">No</button>
						<button type="button" class="approve-btn"
							onclick="approveRequestOnclick()">Yes</button>
					</div>
				</div>
			</div>
		</div>
		
		<!-- Hold Modal -->
	<div id="holdModel" class="modal fade show"
			aria-modal="true">
			<div class="modal-dialog modal-confirm">
				<div class="modal-content">
					<div class="modal-header flex-column"></div>
					<div class="modal-body">
						<p>Do you want to Hold the bin</p>
					</div>
					<div class="modal-footer justify-content-center"
						style="margin-top: -30px;">
						<button type="button" class="cancel-btn" data-dismiss="modal"
							onclick="cancelHold();">No</button>
						<button type="button" class="approve-btn"
							onclick="holdOnclick()">Yes</button>
					</div>
				</div>
			</div>
		</div>
	<!-- Release Modal -->
	<div id="realeaseModel" class="modal fade show"
			aria-modal="true">
			<div class="modal-dialog modal-confirm">
				<div class="modal-content">
					<div class="modal-header flex-column"></div>
					<div class="modal-body">
						<p>Do you want to Release the bin</p>
					</div>
					<div class="modal-footer justify-content-center"
						style="margin-top: -30px;">
						<button type="button" class="cancel-btn" data-dismiss="modal"
							onclick="cancelRelease();">No</button>
						<button type="button" class="approve-btn"
							onclick="releaseOnclick()">Yes</button>
					</div>
				</div>
			</div>
		</div>
		<!-- Modal Start-->
	<div class="modal1 fade" id="myModalViewAllocation">
			<div class="modal-dialog modal-lg" style="max-width: 526px">
				<div class="modal-content" style="width: 100%">

					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title" style="font-size: 16px">
							<b>View Stock </b>
						</h4>
						<button type="button" class="close" data-bs-dismiss="modal"
							aria-label="Close" onclick="closeViewAllocation()">
							<i class="ti-close"></i>
						</button>
					</div>
					<!-- Modal body -->
					<div class="modal-body" style="height: 270px; overflow-y: scroll;">

						<div class="vertical-line">

							<div class="row">


								<div class="col-md-6">
									<div class="form-group">
										<label>Category</label> <input type="text"
											class="form-control" id="binCategory" readonly>
									</div>


								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label>Item</label> <input type="text" class="form-control"
											id="binitem" readonly>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label>Quantity</label> <input type="text"
											class="form-control" id="binQuantity" readonly>
									</div>
								</div>


								<div class="col-md-6">
									<div class="form-group">
										<label>Unit</label> <input type="text" class="form-control"
											id="unitAllocate" readonly>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label>Batch No.</label> <input type="text"
											class="form-control" id="batchNoBin" readonly>
									</div>
								</div>

								<div class="col-md-6">
									<div class="form-group">
										<label>Manufacture Date</label> <input type="text"
											id="manufactureDateBin" class="form-control" readonly>
									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-6">
									<div class="form-group">
										<label>Best Before Date</label> <input type="text"
											id="bestbeforeDateBin" class="form-control" readonly>
									</div>
								</div>
								<div class="col-md-6">
									<div class="form-group">
										<label>Sl No.</label> <input type="text" id="serialNoStock"
											class="form-control" readonly>
									</div>
								</div>
							</div>






						</div>
					</div>
				</div>
			</div>
		</div>


		<!-- Modal End-->

		<!-- Modal Start-->
		<div class="modal1 fade" id="myModalConfig">
			<div class="modal-dialog modal-lg" style="max-width: 400px">
				<div class="modal-content" style="width: 100%">

					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title" style="font-size: 16px">
							<b>View Config </b>
						</h4>
						<button type="button" class="close" data-bs-dismiss="modal"
							aria-label="Close" onclick="closeConfigModal()">
							<i class="ti-close"></i>
						</button>
					</div>
					<!-- Modal body -->
					<div class="modal-body" style="height: 330px; overflow-y: scroll;">

						<div class="vertical-line">

							<div class="row">



								<div class="col-md-12">
									<div class="form-group">
										<label>Category Name</label> <input type="text"
											class="form-control" id="binCategoryConfig" readonly>
									</div>


								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label>Item Name</label> <input type="text"
											class="form-control" id="binitemConfig" readonly>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label>Quantity</label> <input type="text"
											class="form-control" id="binQuantityConfig" readonly>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label>Unit</label> <input type="text" class="form-control"
											id="unitConfig" readonly>
									</div>
								</div>
								<div class="col-md-12">
									<div class="form-group">
										<label>Description</label> <input type="text"
											class="form-control" id="descriptionConfig" readonly>
									</div>
								</div>


							</div>

						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Modal End-->
	</div>
</body>
</html>