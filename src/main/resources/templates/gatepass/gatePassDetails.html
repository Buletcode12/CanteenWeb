<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.btn-primary {
	color: #fff;
	background-color: #002A53;
	border-color: #0d6efd;
}

.sugg-cls ul {
	height: 150px;
	overflow-x: scroll;
	position: relative;
}

.autocomplete {
	position: relative;
	display: inline-block;
	width: 100%;
}

/* ul li {
	margin: 0 !important;
	padding: 0 !important;
}

ul li p {
	margin: 0 !important;
	padding: 0 !important;
} */

/* #mySidenav {
	top: 315px ! important;
} */
label {
	margin: -2px;
}
</style>
<script type="text/javascript">
	$(document).ready(function() {
		

		
		$("#myGrid").show();
		$("#download").show();
		$("#download1").hide();
		$("#searchDiv1").show();
		$("#searchDiv2").hide();
		$("#totalReq").show();
		$("#totalReq1").hide();
		$("#newGateIn").show();
		$("#newGateOut").hide();
		$("#mySidenav").hide();
		$("#gateInDetails").addClass("active");
		
		$('#docTbl').on('click', '.rmv1', function() {
			openDeleteConfirm();
			var value = $(this).parent("div").attr("id");
			$("#dltValue").val(value);
		});
		
		var gridDiv = document.querySelector('#myGrid');
		new agGrid.Grid(gridDiv, gridOptions);

	 
	viewGateInDetails();
		//viewGateOutDetails(); 
		
		$("#myGrid1").hide(); 
		var gridDiv = document.querySelector('#myGrid1');
		new agGrid.Grid(gridDiv, gridOptions1);

		var gridDiv = document.querySelector('#myGridItem');
		new agGrid.Grid(gridDiv, gridOptionsItem);
		var data = [];
		gridOptionsItem.api.setRowData(data);
		//openDeleteConfirm();
 
		///TO_date
		
		var dateFormat = localStorage.getItem("dateFormat");
		$("#DateCalendar").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#date').val($(this).val());
		})

		$('#date').blur(function() {
			$("#DateCalendar").val($(this).val());
		})
 
	$("#toDateCalendarTime").datetimepicker({
		 format: 'h:i A',
		    closeOnDateSelect: false,
		    timepicker: true,
		    datepicker: false,
		    step: 1,
		    formatTime: 'h:i A'
	}).on("change", function() {
		$('#time').val($(this).val());
	})

	$('#time').blur(function() {
		$("#toDateCalendarTime").val($(this).val());
	})
	
	
	// exit date and time
	
	var dateFormat = localStorage.getItem("dateFormat");
		$("#DateCalendar1").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#exitDate').val($(this).val());
		})

		$('#exitDate').blur(function() {
			$("#DateCalendar1").val($(this).val());
		})
 // 
 		$("#DateCalendar2").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#dlDate').val($(this).val());
		})

		$('#dlDate').blur(function() {
			$("#DateCalendar2").val($(this).val());
		}) 
		
//

		$("#DateCalendar3").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#insuranceDate').val($(this).val());
		})

		$('#insuranceDate').blur(function() {
			$("#DateCalendar3").val($(this).val());
		})
//

		$("#DateCalendar4").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#polutionDate').val($(this).val());
		})

		$('#polutionDate').blur(function() {
			$("#DateCalendar4").val($(this).val());
		})
//

		$("#DateCalendar5").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#fitnessDate').val($(this).val());
		})

		$('#fitnessDate').blur(function() {
			$("#DateCalendar5").val($(this).val());
		})
		
		$("#DateCalendar6").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#roadTax').val($(this).val());
		})

		$('#roadTax').blur(function() {
			$("#DateCalendar6").val($(this).val());
		})
//
	$("#DateCalendar8").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#challanDate').val($(this).val());
		})

		$('#challanDate').blur(function() {
			$("#DateCalendar8").val($(this).val());
		})

	$("#toDateCalendarTime1").datetimepicker({
		 format: 'h:i A',
		    closeOnDateSelect: false,
		    timepicker: true,
		    datepicker: false,
		    step: 1,
		    formatTime: 'h:i A'
	}).on("change", function() {
		$('#exitTime').val($(this).val());
	})

	$('#exitTime').blur(function() {
		$("#toDateCalendarTime1").val($(this).val());
	})
	
$("#DateCalendar7").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#visitdate').val($(this).val());
		})

		$('#visitdate').blur(function() {
			$("#DateCalendar7").val($(this).val());
		})


$("#toDateCalendarTime2").datetimepicker({
    format: 'h:i A',
    closeOnDateSelect: false,
    timepicker: true,
    datepicker: false,
    step: 1,
    formatTime: 'h:i A'
}).on("change", function() {
    $('#visittime').val($(this).val());
});

$('#visittime').blur(function() {
    $("#toDateCalendarTime2").val($(this).val());
});	
	
	})
 
	var columnDefs = [ 
		{
			headerCheckboxSelection : false,
			headerCheckboxSelectionFilteredOnly : true,
			checkboxSelection : true,
			cellEditorPopup: true,  
			width : 10,
			pinned: 'left',
			sortable : false,
			filter : false,
			resizable : true
		},
		{
		headerName : "Entry Id",
		field : "getPassEntryId",
		width :150,
		pinned: 'left',
		cellRenderer : function(params) {
			return '<a onclick=editGatePassEntry("'
					+ params.data.getPassEntryId +','+params.data.appoveStatus+','+window.btoa(params.data.type)
					+ '") href="javascript:void(0)">'
					+ params.data.getPassEntryId + '</a>';
		}
	}, {
		headerName : "Vehicle No ",
		field : "vechileNo",
			width : 150,
			pinned: 'left'
	}, {
		headerName : "Type",
		field : "type",
		width : 200,
	},{
		headerName : "Entry Date",
		field : "entrydate",
		width : 150,
		cellStyle : {
			textAlign : 'center'
		},

	}, {
		headerName : "Entry Time",
		field : "entryTime",
		width : 150,
		cellStyle : {
			textAlign : 'center'
		},

	},
	 {
		headerName : 'Approve Status',
		field : "appoveStatus",
		width : 150,
		cellStyle : {
			textAlign : 'center'
		},
		cellRenderer : function(params) {
			if (params.data.appoveStatus =="Pending") { 
				return '<div style="color:#a9a9a9">Pending</div>';
			} else {
				return '<div style="color:#0642f5">Approved</div>';
			} 	
		}
		}, {
			headerName : "Exit Status",
			field : "exitStatus",
			width : 200,
			cellStyle : {
				textAlign : 'center'
			},
			cellRenderer : function(params) {
				if (params.data.exitStatus =="Exit Pending") { 
					return '<div style="color:#a9a9a9">Exit Pending</div>';
				} else {
					return '<div style="color:#0642f5">Exit Completed</div>';
				} 	
			}
		},{
			headerName : "Document",
			field : "image",
			width : 110,
			cellStyle : {
				textAlign : 'center'
			},
			cellRenderer : function(params) {
				var div = "";
				if (params.data.image) {
					var ext = params.data.image.split(".");
					if (ext[1] == "pdf") {
						div = div
						+ " "
						+ '<div class ="fa fa-file-pdf-o" style="cursor: pointer; color: red;" onclick=viewImage("'+ params.data.image + '")> </div>';
					}else{
						div = div
						+ " "
						+ '<div class ="fa fa-picture-o" style="cursor: pointer; color: blue;" onclick=viewImage("'+ params.data.image + '")> </div>';
					}
				}
				return div;
			},
	}, {
		headerName : "Driver Name ",
		field : "driverName",
		width : 150,
	}, {
		headerName : "Driver Mobile",
		field : "driverMobile",
		width : 150,
	}, {
		headerName : "LR No",
		field : "lrNo",
		width : 150,
	}, {
		headerName : "Wheeler Type",
		field : "noOfWheel",
		width : 200,

	}, {
		headerName : "Purchase Order No ",
		field : "poNumber",
		width : 200,
	} 
	];

	var gridOptions = {
		columnDefs : columnDefs,
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 190
		},
		onSelectionChanged : rowSelect,
	};

	
	
	var columnDefs1 = [ 
		{
			
			headerCheckboxSelection : false,
			headerCheckboxSelectionFilteredOnly : true,
			checkboxSelection : true,
			
			width : 10,
			sortable : false,
			filter : false,
			resizable : true
		},
		{
		headerName : "Exit Id",
		field : "getPassExitId",
		width :160,
		cellRenderer : function(params) {
			return '<a onclick=editGatePassExit("'
			+ params.data.getPassExitId +','+params.data.appoveStatus 
			+ '") href="javascript:void(0)">'
			+ params.data.getPassExitId + '</a>';
		}
	}, {
		headerName : "Type",
		field : "type",
		width : 200,
	},{
		headerName : "Exit Date",
		field : "exitDate",
		width : 150,

	}, {
		headerName : "Exit Time",
		field : "exitTime",
		width : 150,

	},  {
		headerName : 'Approve Status',
		field : "appoveStatus",
		width : 150,
		cellStyle : {
			textAlign : 'center'
		},
		cellRenderer : function(params) {
			if (params.data.appoveStatus =="Pending") { 
				return '<div style="color:#a9a9a9">Pending</div>';
			} else {
				return '<div style="color:#0642f5">Approved</div>';
			} 	
		}
	},{
		headerName : "Document",
		field : "image",
		cellStyle : {
			textAlign : 'center'
		},
		cellRenderer : function(params) {
			var div = "";
			if (params.data.image) {
				var ext = params.data.image.split(".");
				if (ext[1] == "pdf") {
					div = div
					+ " "
					+ '<div class ="fa fa-file-pdf-o" style="cursor: pointer; color: red;" onclick=viewImage("'+ params.data.image + '")> </div>';
				}else{
					div = div
					+ " "
					+ '<div class ="fa fa-picture-o" style="cursor: pointer; color: blue;" onclick=viewImage("'+ params.data.image + '")> </div>';
				}
			}
			return div;
		},
	},{
		
		headerName : "Vehicle No ",
		field : "vechileNo",
			width : 150,
	}, {
		headerName : "Driver Name ",
		field : "driverName",
		width : 150,
	}, {
		headerName : "Driver Mobile",
		field : "driverMobile",
		width : 150,
	}, {
		headerName : "LR No",
		field : "lrNo",
		width : 150,
	}, {
		headerName : "Wheeler Type",
		field : "wheelerName",
		width : 200,
		
	}, {
		headerName : "Invoice No",
		field : "poNumber",
		width : 200,

		
	}];

	var gridOptions1 = {
		columnDefs : columnDefs1,
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 190
		},
		onSelectionChanged : rowSelect1,
	};

	

	/* -------------ag grid for items details table(child table)---------- */

	const columnDefsItem = [
		{
			headerCheckboxSelection : false,
			headerCheckboxSelectionFilteredOnly : true,
			checkboxSelection : true,
			width : 10,
			sortable : false,
			filter : false,
			resizable : true
		},
		{
			headerName : "SlNo",
			field : "slNo",
			width : 70,
			cellRenderer : function(params) {
				if (params.data.slNo) {
					return '<a onclick=editProduct("' + params.data.slNo
							+ '") href="javascript:void(0)">'
							+ params.data.slNo + '</a>';
				} else {
					return '<a onclick=editProduct("' + params.data.slNo
							+ '") href="javascript:void(0)">'
							+ params.data.slNo + '</a>';
				}
			}
		},
		{
			headerName : 'SKU/Item Code',
			field : "sku",
			width : 120,
		}, 
		{
			headerName : 'HSN Code',
			field : "hsnCode",
			width : 120,
		}, {


			headerName : 'Item Name',
			field : "itemName",
			width : 175,
		}, {
			headerName : 'Item Id',
			field : "itemId",
			width : 100,
			hide : true,
		}, {
			headerName : 'Quantity',
			field : "quantity",
			type : 'rightAligned',
			width : 100,
			cellStyle : {
				textAlign : 'center'
			},
		}, {

			headerName : 'Unit',
			field : "unitName",
			width : 100,
			cellStyle : {
				textAlign : 'center'
			},
		}, {
			headerName : 'Unit',
			field : "unit",
			hide : true,

		},   {
			headerName : 'Amount',
			field : "lineTotal",
			type : 'rightAligned',
			width : 120,
			
			aggFunc : 'sum',
		
		},
		{
			headerName : 'Challan/Invoice No',
			field : "challanNo",
			width : 220,
			//hide : true,

		},
		{
			headerName : 'Challan/Invoice Date',
			field : "challanDate",
			width : 250,
			//hide : true,

		},
		{
			headerName : 'Pending Quantity',
			field : "pendingQuantity",
			type : 'rightAligned',
			width : 170,
			//hide : true,
			cellStyle : {
				textAlign : 'center'
			},
		}, {
			headerName : 'Receiving Quantity',
			field : "receivingQuantity",
			type : 'rightAligned',
			width : 170,
			//hide : true,
			cellStyle : {
				textAlign : 'center'
			},
		}, {
			headerName : 'Received Quantity',
			field : "receivedQuantity",
			type : 'rightAligned',
			width : 173,
			//hide : true,
			cellStyle : {
				textAlign : 'center'
			},
		},
	    {
			headerName : 'Description',
			field : "descItem",
			//type : 'rightAligned',
			width : 153,
			
		},
	];
	const gridOptionsItem = {
			columnDefs : columnDefsItem,
			rowSelection : 'single',
			onSelectionChanged : rowSelectLeaveDetails,
			groupSelectsChildren : true,
			suppressRowClickSelection : true,
			suppressAggFuncInHeader : true,
			defaultColDef : {
				sortable : true,
				filter : true,
				resizable : true,
				width : 220,
				height : 10
			},
			getRowNodeId : function(data) {
				return data.slNo;
			}
			
		};
	
	 var deleteid = "";
		function rowSelectLeaveDetails() {
			var selectedRows = gridOptionsItem.api.getSelectedRows();
			var rowCount = 0;
			selectedRows.forEach(function() {
				rowCount = rowCount + 1;
			});
			if (rowCount > 0) {
				$('#deleteChild').attr("disabled", false);
				$('#new1').attr("disabled", true);
			} else {
				$('#deleteChild').attr("disabled", true);
				$('#new1').attr("disabled", false);
			}

		}
	

function rowSelect() {
			var selectedRows = gridOptions.api.getSelectedRows();
			var rowCount = 0;
			selectedRows.forEach(function(selectedRow, index) {
				rowCount = rowCount + 1;
			});

			
			var selectedNodes = gridOptions.api.getSelectedNodes();
			 var selectedData = selectedNodes.map(node => node.data);
			 var appoveStatus= selectedData.map(node => node.appoveStatus);
			 var exitStatus= selectedData.map(node => node.exitStatus);
				
			if (rowCount > 0) {
				$('#newGateIn').attr("disabled", true);
				if(appoveStatus=='Approved'){
					
					$('#deleteGateIn').attr("disabled", true);
					$('#approveGateIn').attr("disabled", true);
					if(exitStatus=='Exit Pending'){
						$('#gateoutDtls').attr("disabled", false);
					}else{
						$('#gateoutDtls').attr("disabled", true);
					}
					
				}else{
					$('#deleteGateIn').attr("disabled", false);
					$('#approveGateIn').attr("disabled", false);
					$('#gateoutDtls').attr("disabled", true);
				}
			} else {
				$('#newGateIn').attr("disabled", false);
				$('#deleteGateIn').attr("disabled", true);
				$('#approveGateIn').attr("disabled", true);
				$('#gateoutDtls').attr("disabled", true);
			}
		}

function rowSelect1() {
	
			var selectedRows = gridOptions1.api.getSelectedRows();
			var rowCount = 0;
			selectedRows.forEach(function(selectedRow, index) {
				rowCount = rowCount + 1;
			});

			
			var selectedNodes = gridOptions1.api.getSelectedNodes();
			 var selectedData = selectedNodes.map(node => node.data);
			 var appoveStatus= selectedData.map(node => node.appoveStatus);
			
			if (rowCount > 0) {
				$('#newGateOut').attr("disabled", true);
				if(appoveStatus=='Approved'){
					$('#deleteGateOut').attr("disabled", true);
					$('#approveGateOut').attr("disabled", true);
				}else{
					$('#deleteGateOut').attr("disabled", false);
					$('#approveGateOut').attr("disabled", false);
				}
			} else {
				$('#newGateOut').attr("disabled", false);
				$('#deleteGateOut').attr("disabled", true);
				$('#approveGateOut').attr("disabled", true);
			}
	}
function approveGateIn() {
	$('#approveGateInModal').modal('show');
}
function cancelApproveModalBtn() {
	$('#approveGateInModal').modal('hide');
}
function approveGateOut() {
	$('#approveGateOutModal').modal('show');
}
function cancelApproveModalBtn1() {
	$('#approveGateOutModal').modal('hide');
}
function deleteGateIn() {
	$('#deleteGateinModal').modal('show');
}
function deleteGateOut() {
	$('#deleteGateOutModal').modal('show');
}
function cancelModalBtn() {
	$('#deleteGateinModal').modal('hide');
}
function cancelModalBtn1() {
	$('#deleteGateOutModal').modal('hide');
}
function editProduct(slNo) {
	var rowNode = gridOptionsItem.api.getRowNode(slNo);
	let gateEntry = $("#getPassEntryId").text();
/* 	 if(gateEntry == "" || gateEntry == null){
		openNav();
	}else{
		$("#messageParagraph").text("Can Not Be Modified ! Create Another Gate Entry !!");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
		
	} */
	 openNav();
	 var poNo = $("#poNo").val();
	$("#editProduct").val(slNo);
	$("#sku").val(rowNode.data.sku);
	$("#itemId").val(rowNode.data.itemId);
	$("#itemName").val(rowNode.data.itemName);
	$("#hsnCode").val(rowNode.data.hsnCode);
	$("#unit").val(rowNode.data.unit);
	$("#quantity").val(rowNode.data.quantity);	
	$("#lineTotal").val(rowNode.data.lineTotal);
	$("#pendingQuantity").val(rowNode.data.pendingQuantity);
	$("#receivingQuantity").val(rowNode.data.receivingQuantity);
	$("#receivedQuantity").val(rowNode.data.receivedQuantity);
	$("#descriptionItem").val(rowNode.data.descItem);
	$("#challanDate").val(rowNode.data.challanDate);
	$("#challanNo").val(rowNode.data.challanNo);
	if(poNo!=''){
	$("#unit").attr("disabled", true);
	$("#itemName").attr("disabled", true);
	$("#sku").attr("disabled", true);
	$("#quantity").attr("disabled", true);
	$("#lineTotal").attr("disabled", true);
	$("#pendingQuantity").attr("disabled", true);
	}
	else{
		$("#unit").attr("disabled", false);
		$("#itemName").attr("disabled", false);
		$("#sku").attr("disabled", false);
		$("#quantity").attr("disabled", false);
		$("#lineTotal").attr("disabled", false);
		$("#pendingQuantity").attr("disabled", false);
	}
}

	function viewGateInDetails() {
		$("#getPassEntryId").html("");
		$("#getPassExitId").html("");
		$("#myGrid").show();
		$("#myGrid1").hide();
		//$('.loader').show();
		gridOptions.api.setRowData()
		agGrid.simpleHttpRequest({
			url : "gate-pass-entry-view",
		}).then(function(data) {
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptions.api.setRowData(data);
			$('.loader').hide();
		})
		rowSelect();
		 $("#new").show();
		$('#new').attr("disabled", true);
		$("#gateInDetails").addClass("active");
		$("#gateOutDetails").removeClass("active");
 
		$("#activeStatus").val("1");
		//closeNav1();
		$("#myGrid").show();
		$("#download").show();
		$("#download1").hide();
		$("#searchDiv1").show();
		$("#searchDiv2").hide();
		$("#totalReq").show();
		$("#totalReq1").hide();
		$("#newGateIn").show();
		$("#deleteGateIn").attr("disabled", true);
		$("#approveGateIn").attr("disabled", true);
		$('#gateoutDtls').attr("disabled", true);
		$("#deleteGateIn").show();
		$("#approveGateIn").show();
		$("#deleteGateOut").hide();
		$("#approveGateOut").hide();
		$("#gateoutDtls").show();
		$("#newGateOut").hide();
		$("#gateInDetails").addClass("active");
	
	}

	function viewGateOutDetails() {
		//$('.loader').show();
		$("#getPassEntryId").html("");
		$("#getPassExitId").html("");
		
		closeNav();
		$("#gateOutDetails").addClass("active");
		$("#gateInDetails").removeClass("active");
		gridOptions1.api.setRowData();
		gridOptions1.api.setRowData()
		agGrid.simpleHttpRequest({
			url : "gate-pass-exit-view",
		}).then(function(data) {
			var len = data.length;
			$('#totalReq1').find('span').html(len);
			gridOptions1.api.setRowData(data);
			$('.loader').hide();
		})
		rowSelect1();
		$("#activeStatus").val("2");
		$("#myGrid1").show();
		$("#myGrid").hide();
		$("#newGateIn").hide();
		$("#newGateOut").show();
		$("#download1").show();
		$("#download").hide();
		$("#totalReq1").show();
		$("#totalReq").hide();
		$("#searchDiv1").hide();
		$("#searchDiv2").show();
		$("#deleteGateIn").hide();
		$("#approveGateIn").hide();
		$("#gateoutDtls").hide();
		$("#deleteGateOut").show();
		$("#approveGateOut").show();
		$("#deleteGateOut").attr("disabled", true);
		$("#approveGateOut").attr("disabled", true);
	}

	function editGatePassEntry(id1){
		var data = id1.split(",");
		var id= data[0];
		var appoveStatus = data[1];
		var type1 = window.atob(data[2]);
		$("#idDiv2").hide();
		$("#idDiv3").hide();
		$("#invc").hide();
		$("#desc2").hide();
		$("#desc11").show();
		$("#exit1").hide();
		$("#exitD").hide();
		$("#exitT").hide();
		$("#poExitDiv").hide();
		$("#customerDiv").hide();
		$("#gateoutDtls").hide();
		$("#approveGateIn").hide();
		$("#deleteGateIn").hide();
		$('#deleteChild').attr("disabled", true);
		$('#type').attr("disabled", true);
		

		$("#transportName").attr("disabled", false);
		$("#vehicleNo").attr("disabled", false);
		$("#lrNo").attr("disabled", false);
		$("#vendorName").attr("disabled", false);
		$("#driverName").attr("disabled", false);
		$("#driverMob").attr("disabled", false);
		$("#noOfWheel").attr("disabled", false);
		$("#dlNo").attr("disabled", false);
		$("#dlDate").attr("disabled", false);
		$("#insuranceDate").attr("disabled", false);
		$("#polutionDate").attr("disabled", false);
		$("#fitnessDate").attr("disabled", false);
		$("#roadTax").attr("disabled", false);
		$("#truckSeal").attr("disabled", false);
		$("#depoName").attr("disabled", false);
		
		if(appoveStatus=='Approved'){
			$("#mainsave").hide();
			$("#new1").hide();
			$("#deleteChild").hide();
			$("#deleteChild").attr("disabled", true);
		}
		else{
			$("#mainsave").show();
			$("#poNo").attr("disabled", true);
			$("#new1").show();
			$("#deleteChild").show();
			$("#deleteChild").attr("disabled", true);
		}
			$("#getPassEntryId").html(id);
			$("#demo").show();
			$("#myGridItem").show();
			$('#myGrid').hide();
			$('#myGrid1').hide();
			$('#newGateIn').hide();
			$('#newGateOut').hide();
			$("#download").hide();
			$("#download1").hide();
			$("#searchDiv1").hide();
			$("#searchDiv2").hide();
			$("#mySidenav").hide();
			$("#mySidenav1").hide();
			$("#sDiv").hide();
			$("#totalReq").hide();
			$("#totalReq1").hide();
			$("#idDiv1").show();
			$("#exit").show();	
			$("#idDiv").show();	
			agGrid.simpleHttpRequest({
			url : "gate-pass-entry-edit?id=" + id,
			}).then(function(data) {
				var type=data[0].type;
				if(type=='loading'){
					$("#poTypeDiv").hide();
					$("#entryD").show();
					$("#entryT").show();
					$("#transDiv").show();
					$("#vehiDiv").show();
					$("#lrDiv").hide();
					$("#vendorDiv").hide();
					$("#drvrDiv").show();
					$("#whlDiv").show();
					$("#dlDiv").show();
					$("#dlDateDiv").show();
					$("#insuDiv").show();
					$("#polDiv").show();
					$("#polNoDiv").show();
					$("#fitDiv").show();
					$("#rdtxDiv").show();
					$("#tckDiv").hide();
					$("#depoDiv").show();
					$("#drvrNodiv").show();
					$("#poDiv").hide();
					$("#myGridItem").hide();
					$("#totalReq3").hide();
					$("#documentDetails").hide();
					$("#accordionExample2").hide();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").hide();
					$("#visitA").hide();
					$("#visitP").hide();
					$("#visitTm").hide();
					$("#visitVn").hide();
					$("#visitPn").hide();
					$("#visitM").hide();
					$("#poTypeDiv").hide();
					$("#invoiceTypeDiv").hide();
					$("#new1").hide();
					$("#deleteChild").hide();
				}
				else if(type=='unloading'){
					$("#dlDateDiv").hide();
					$("#insuDiv").hide();
					$("#polDiv").hide();
					$("#polNoDiv").hide();
					$("#fitDiv").hide();
					$("#rdtxDiv").hide();
					$("#tckDiv").hide();
					$("#depoDiv").hide();
					$("#documentDetails").hide();
					$("#accordionExample2").hide();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").hide();
					$("#visitA").hide();
					$("#visitP").hide();
					$("#visitTm").hide();
					$("#visitVn").hide();
					$("#visitPn").hide();
					$("#visitM").hide();
					$("#entryD").show();
					$("#entryT").show();
					$("#transDiv").show();
					$("#lrDiv").show();
					$("#vendorDiv").show();
					$("#vehiDiv").show();
					$("#whlDiv").show();
					$("#drvrDiv").show();
					$("#drvrNodiv").show();
					$("#dlDiv").show();
					$("#dlDateDiv").show();
					$("#poDiv").show();
					$("#myGridItem").show();
					$("#totalReq3").show();
					$("#invoiceTypeDiv").hide();
					$("#poTypeDiv").show();
					gridOptionsItem.api.setRowData(data);
					
				}
				else if(type=='visiting'){
					$("#poDiv").hide();
					$("#myGridItem").hide();
					$("#totalReq3").hide();
					$("#dlDateDiv").hide();
					$("#insuDiv").hide();
					$("#polDiv").hide();
					$("#polNoDiv").hide();
					$("#fitDiv").hide();
					$("#rdtxDiv").hide();
					$("#tckDiv").hide();
					$("#depoDiv").hide();
					//$("#poDiv").hide();
					$("#entryD").show();
					$("#entryT").show();
					$("#transDiv").hide();
					$("#vehiDiv").hide();
					$("#lrDiv").hide();
					$("#vendorDiv").hide();
					$("#drvrDiv").hide();
					$("#whlDiv").hide();
					$("#dlDiv").hide();
					$("#dlDateDiv").hide();
					$("#insuDiv").hide();
					$("#polDiv").hide();
					$("#polNoDiv").hide();
					$("#fitDiv").hide();
					$("#rdtxDiv").hide();
					$("#tckDiv").hide();
					$("#depoDiv").hide();
					$("#drvrNodiv").hide();
					$("#documentDetails").show();
					$("#accordionExample2").show();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").show();
					$("#visitA").show();
					$("#visitP").show();
					$("#visitTm").show();
					$("#vehiDiv").show();
					$("#visitPn").show();
					$("#visitM").show();
					$("#poTypeDiv").hide();
					$("#invoiceTypeDiv").hide();
				}
				else{
					$("#poDiv").show();
					$("#entryD").show();
					$("#entryT").show();
					$("#transDiv").show();
					$("#vehiDiv").show();
					$("#lrDiv").show();
					$("#vendorDiv").show();
					$("#drvrDiv").show();
					$("#whlDiv").show();
					$("#dlDiv").show();
					$("#dlDateDiv").show();
					$("#insuDiv").show();
					$("#polDiv").show();
					$("#polNoDiv").show();
					$("#fitDiv").show();
					$("#rdtxDiv").show();
					$("#tckDiv").show();
					$("#depoDiv").show();
					$("#drvrNodiv").show();
					$("#myGridItem").show();
					$("#totalReq3").show();
					$("#documentDetails").hide();
					$("#accordionExample2").hide();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").hide();
					$("#visitA").hide();
					$("#visitP").hide();
					$("#visitTm").hide();
					$("#visitVn").hide();
					$("#visitPn").hide();
					$("#visitM").hide();
					$("#invoiceTypeDiv").hide();
					$("#poTypeDiv").show();
					
				}
			gridOptionsItem.api.setRowData(data);
			            $("#getPassEntryId").val(data[0].getPassEntryId);
						$("#poNo").val(data[0].poNumber);
						$("#vendorName").val(data[0].vendorName);
						$("#date").val(data[0].entrydate);
						$("#time").val(data[0].entryTime);
						$("#transportName").val(data[0].transportName);
						$("#vehicleNo").val(data[0].vechileNo);
						$("#driverName").val(data[0].driverName);
						$("#driverMob").val(data[0].driverMobile);
						$("#lrNo").val(data[0].lrNo);
						$("#vendorName").val(data[0].vendorName);
						$("#noOfWheel").val(data[0].noOfWheel);
						$("#dlNo").val(data[0].dlNo);
						$("#dlDate").val(data[0].dlDate);
						
						$("#insuranceDate").val(data[0].insuranceDate);
						$("#type").val(data[0].type);
						$("#polutionDate").val(data[0].polutionDate);
						$("#polutionNo").val(data[0].polutionNo);
						$("#fitnessDate").val(data[0].fitnessDate);
						$("#roadTax").val(data[0].roadTax);
						$("#truckSeal").val(data[0].truckSeal);
						$("#depoName").val(data[0].depoName);
						$("#visitingName").val(data[0].visitingName);
						$("#visitingAddress").val(data[0].visitingAddress);
						$("#visitingPurpose").val(data[0].visitingPurpose);
						$("#visitingTomeet").val(data[0].visitingTomeet);
						$("#visitingPassno").val(data[0].visitingPassno);
						$("#vehicleNo").val(data[0].vechileNo);
						$("#visitingMobile").val(data[0].visitingMobile);
						$("#visittime").val(data[0].entryTime);
						$("#visitdate").val(data[0].entrydate);
						 document.getElementById("withPo").disabled = true;  
						 document.getElementById("withOutPo").disabled = true;
						
						var fileName=data[0].image;
						if (fileName != null) {
							var ext = data[0].image.split(".");
							$("#imageName_0").html(fileName);
	 
				           if (ext[1] == "jpg" || ext[1] == "png") {
								var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-picture-o" style="color: blue" onclick=viewImage("'
									+ fileName + '")></i></a> </div>';
							}else if (ext[1] == "pdf") {
								var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-file-pdf-o" style="color: red" onclick=viewImage("'
									+ fileName + '")></i></a> </div>';
							} else {
								var LightImg = "<div class='uploadicon position-l'> </div>";
							}  

							$("#uploadedBillDiv_0").html(LightImg);
						}
							if (data[0].poType == '1') {
								$("#withPo").prop('checked', true);
								$("#vendorName").attr("disabled", true);
								if(appoveStatus=='Approved'){
									$("#new1").hide();
									$("#deleteChild").hide();
								}
								else{
									$("#new1").show();
									$("#deleteChild").show();
									$("#deleteChild").attr("disabled", true);
								}
							} if(data[0].poType == '0') {
								$("#withOutPo").prop('checked', true);
								$("#poDiv").hide();
								$("#vendorName").attr("disabled", false);
								if(appoveStatus=='Approved'){
									$("#new1").hide();
									$("#deleteChild").hide();
								}
								else{
									$("#new1").show();
									$("#deleteChild").show();
									$("#deleteChild").attr("disabled", true);
								}
							}
	})
	}
	function editGatePassExit(id1){
		var data = id1.split(",");
		var id= data[0];
		var appoveStatus = data[1];
		$("#poTypeDiv").hide();
		$("#idDiv").hide();
		$("#idDiv1").hide();
		$("#invc").show();
		$("#desc11").hide();
		$("#desc2").show();
		$("#exit").hide();
		$("#exit1").show();
		$("#entryD").hide();
		$("#entryT").hide();
		
		$('#deleteChild').attr("disabled", true);
		
		$("#transportName").attr("disabled", true);
		$("#vehicleNo").attr("disabled", true);
		
		$("#driverName").attr("disabled", true);
		$("#driverMob").attr("disabled", true);
		$("#noOfWheel").attr("disabled", true);
		$("#dlNo").attr("disabled", true);
		$("#dlDate").attr("disabled", true);
		$("#insuranceDate").attr("disabled", true);
		$("#polutionDate").attr("disabled", true);
		$("#polutionNo").attr("disabled", true);
		$("#fitnessDate").attr("disabled", true);
		$("#roadTax").attr("disabled", true);
		$("#vendorName").attr("disabled", true);
		
		$("#depoName").attr("disabled", true);
		$("#DateCalendar2").css("pointer-events", "none"); 
		$("#DateCalendar3").css("pointer-events", "none"); 
		$("#DateCalendar4").css("pointer-events", "none"); 
		$("#DateCalendar5").css("pointer-events", "none");  
		$("#DateCalendar6").css("pointer-events", "none");  
		
		$("#deleteGateOut").hide();
		if(appoveStatus=='Approved'){
			$("#mainsave1").hide();
			$("#lrNo").attr("disabled", true);
			$("#truckSeal").attr("disabled", true);
			$("#DateCalendar1").css("pointer-events", "none"); 
			$("#toDateCalendarTime1").css("pointer-events", "none");
			
		}
		else{
			$("#mainsave1").show();
			$("#lrNo").attr("disabled", false);
			$("#truckSeal").attr("disabled", false);
			$("#DateCalendar1").css("pointer-events", "auto"); 
			$("#toDateCalendarTime1").css("pointer-events", "auto");
		}
		$('#type').attr("disabled", true);
		$("#approveGateOut").hide();
			$("#getPassExitId").html(id);
			$("#demo").show();
			$("#myGridItem").show();
			$('#myGrid').hide();
			$('#myGrid1').hide();
			$('#newGateIn').hide();
			$('#newGateOut').hide();
			$("#download").hide();
			$("#download1").hide();
			$("#searchDiv1").hide();
			$("#searchDiv2").hide();
			$("#mySidenav").hide();
			$("#mySidenav1").hide();
			$("#sDiv").hide();
			$("#totalReq").hide();
			$("#totalReq1").hide();
			$("#idDiv2").show();
			$("#idDiv3").show();	
			$("#exit1").show();
		
			agGrid.simpleHttpRequest({
			url : "gate-pass-exit-edit?id=" + id,
			}).then(function(data) {
				var type=data[0].type;
				if(type=='unloading'){
					$("#dlDateDiv").hide();
					$("#insuDiv").hide();
					$("#polDiv").hide();
					$("#polNoDiv").hide();
					$("#fitDiv").hide();
					$("#customerDiv").hide();
					$("#rdtxDiv").hide();
					$("#tckDiv").hide();
					$("#depoDiv").hide();
					$("#documentDetails").hide();
					$("#accordionExample2").hide();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").hide();
					$("#visitA").hide();
					$("#visitP").hide();
					$("#visitTm").hide();
					$("#visitVn").hide();
					$("#visitPn").hide();
					$("#visitM").hide();
					$("#entryD").hide();
					$("#entryT").hide();
					$("#transDiv").show();
					$("#lrDiv").show();
					$("#vendorDiv").show();
					$("#vehiDiv").show();
					$("#whlDiv").show();
					$("#drvrDiv").show();
					$("#drvrNodiv").show();
					$("#dlDiv").show();
					$("#poDiv").hide();
					$("#poExitDiv").hide();
					$("#poTypeDiv").hide();
					$("#invoiceTypeDiv").hide();
					$("#myGridItem").hide();
					$("#totalReq3").hide();
					$("#deleteChild").hide();
					$("#new1").hide();
				}
				
				else if(type=='loading'){
					$("#poExitDiv").show();
					$("#exitD").show();
					$("#exitT").show();
					$("#transDiv").show();
					$("#customerDiv").show();
					$("#vehiDiv").show();
					$("#lrDiv").show();
					$("#vendorDiv").hide();
					$("#drvrDiv").show();
					$("#whlDiv").show();
					$("#dlDiv").show();
					$("#dlDateDiv").show();
					$("#insuDiv").show();
					$("#polDiv").show();
					$("#polNoDiv").show();
					$("#fitDiv").show();
					$("#rdtxDiv").show();
					$("#tckDiv").show();
					$("#depoDiv").show();
					$("#drvrNodiv").show();
					$("#poDiv").hide();
					$("#documentDetails").hide();
					$("#accordionExample2").hide();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").hide();
					$("#visitA").hide();
					$("#visitP").hide();
					$("#visitTm").hide();
					$("#visitVn").hide();
					$("#visitPn").hide();
					$("#visitM").hide();
					$('#receivingQuantityDiv').hide();
					$('#pendingQuantityDiv').hide();
					$('#receivedQuantityDiv').hide();
					$("#poTypeDiv").hide();
					$("#invoiceTypeDiv").show();
				}
				else if(type=='visiting'){
			 		$("#poExitDiv").hide();
			 		$("#exitD").show();
			 		$("#exitT").show();
					$("#poDiv").hide();
					$("#customerDiv").hide();
					$("#myGridItem").hide();
					$("#totalReq3").hide();
					$("#dlDateDiv").hide();
					$("#insuDiv").hide();
					$("#polDiv").hide();
					$("#polNoDiv").hide();
					$("#fitDiv").hide();
					$("#rdtxDiv").hide();
					$("#tckDiv").hide();
					$("#depoDiv").hide();
					$("#poDiv").hide();
					$("#entryD").hide();
					$("#entryT").hide();
					$("#transDiv").hide();
					$("#vehiDiv").hide();
					$("#lrDiv").hide();
					$("#vendorDiv").hide();
					$("#drvrDiv").hide();
					$("#whlDiv").hide();
					$("#dlDiv").hide();
					$("#dlDateDiv").hide();
					$("#insuDiv").hide();
					$("#polDiv").hide();
					$("#polNoDiv").hide();
					$("#fitDiv").hide();
					$("#rdtxDiv").hide();
					$("#tckDiv").hide();
					$("#depoDiv").hide();
					$("#drvrNodiv").hide();
					$("#documentDetails").show();
					$("#accordionExample2").show();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").show();
					$("#visitA").show();
					$("#visitP").show();
					$("#visitTm").show();
					$("#vehiDiv").show();
					$("#visitPn").show();
					$("#visitM").show();
					$("#poTypeDiv").hide();
					$("#invoiceTypeDiv").hide();
					$("#new1").hide();
					$("#deleteChild").hide();
				}
				else{
					$("#poExitDiv").show();
					$("#poDiv").hide();
					$("#exitD").show();
					$("#customerDiv").show();
					$("#exitT").show();
					$("#entryD").hide();
					$("#entryT").hide();
					$("#transDiv").show();
					$("#vehiDiv").show();
					$("#lrDiv").show();
					$("#vendorDiv").show();
					$("#drvrDiv").show();
					$("#whlDiv").show();
					$("#dlDiv").show();
					$("#dlDateDiv").show();
					$("#insuDiv").show();
					$("#polDiv").show();
					$("#polNoDiv").show();
					$("#fitDiv").show();
					$("#rdtxDiv").show();
					$("#tckDiv").show();
					$("#depoDiv").show();
					$("#drvrNodiv").show();
					$("#myGridItem").show();
					$("#totalReq3").show();
					$("#documentDetails").hide();
					$("#accordionExample2").hide();
					$("#visitD").hide();
					$("#visitT").hide();
					$("#visitN").hide();
					$("#visitA").hide();
					$("#visitP").hide();
					$("#visitTm").hide();
					$("#visitVn").hide();
					$("#visitPn").hide();
					$("#visitM").hide();
					$('#receivingQuantityDiv').hide();
					$('#pendingQuantityDiv').hide();
					$('#receivedQuantityDiv').hide();
					$("#poTypeDiv").hide();
					$("#invoiceTypeDiv").show();
				}
				var type= data[0].type;
			 	 gridOptionsItem.api.setRowData();
				if (type!="") {
					gridOptionsItem.columnApi.setColumnVisible('pendingQuantity', false);
					gridOptionsItem.columnApi.setColumnVisible('receivingQuantity', false);
					gridOptionsItem.columnApi.setColumnVisible('receivedQuantity', false);
				}else{
					gridOptionsItem.columnApi.setColumnVisible('pendingQuantity', true);
				}
			     		gridOptionsItem.api.setRowData(data);
			            $("#getPassExitId").val(data[0].getPassExitId);
						$("#poExitNo").val(data[0].poNumber);
						$("#exitDate").val(data[0].exitDate);
						$("#exitTime").val(data[0].exitTime);
						$("#transportName").val(data[0].transportName);
						$("#customerName").val(data[0].customerName);
						$("#vehicleNo").val(data[0].vechileNo);
						$("#driverName").val(data[0].driverName);
						$("#driverMob").val(data[0].driverMobile);
						$("#lrNo").val(data[0].lrNo);
						$("#vendorName").val(data[0].vendorName);
						$("#noOfWheel").val(data[0].noOfWheel);
						$("#dlNo").val(data[0].dlNo);
						$("#dlDate").val(data[0].dlDate);
						
						$("#insuranceDate").val(data[0].insuranceDate);
						$("#type").val(data[0].type);
						$("#polutionDate").val(data[0].polutionDate);
						$("#polutionNo").val(data[0].polutionNo);
						$("#fitnessDate").val(data[0].fitnessDate);
						$("#roadTax").val(data[0].roadTax);
						$("#truckSeal").val(data[0].truckSeal);
						$("#depoName").val(data[0].depoName);
						var type=data[0].type;
						if(type=='visiting'){
			 		     $("#poExitDiv").hide();}
						if(type=='loading'){
							$("#documentDetails").hide();
							$("#accordionExample2").hide();
							$("#visitD").hide();
							$("#visitT").hide();
							$("#visitN").hide();
							$("#visitA").hide();
							$("#visitP").hide();
							$("#visitTm").hide();
							$("#visitVn").hide();
							$("#visitPn").hide();
							$("#visitM").hide();
							}
						if(type=='both'){
							$("#documentDetails").hide();
							$("#accordionExample2").hide();
							$("#totalReq3").hide();
							$("#visitD").hide();
							$("#visitT").hide();
							$("#visitN").hide();
							$("#visitA").hide();
							$("#visitP").hide();
							$("#visitTm").hide();
							$("#visitVn").hide();
							$("#visitPn").hide();
							$("#visitM").hide();}
						
						$("#visitingName").val(data[0].visitingName);
						$("#visitingAddress").val(data[0].visitingAddress);
						$("#visitingPurpose").val(data[0].visitingPurpose);
						$("#visitingTomeet").val(data[0].visitingTomeet);
						$("#vehicleNo").val(data[0].visitingVehicleno);
						$("#visitingPassno").val(data[0].visitingPassno);
						$("#visitingMobile").val(data[0].visitingMobile);
						$("#visittime").val(data[0].exitTime);
						$("#visitdate").val(data[0].exitDate);
						$("#vehicleNo").val(data[0].vechileNo);
						document.getElementById("withInvoice").disabled = true;  
						 document.getElementById("withOutInvoice").disabled = true;
						var fileName=data[0].image;
						if (fileName != null) {
							var ext = data[0].image.split(".");
							$("#imageName_0").html(fileName);
	 
				           if (ext[1] == "jpg" || ext[1] == "png") {
								var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-picture-o" style="color: blue" onclick=viewImage("'
									+ fileName + '")></i></a> </div>';
							}else if (ext[1] == "pdf") {
								var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-file-pdf-o" style="color: red" onclick=viewImage("'
									+ fileName + '")></i></a> </div>';
							} else {
								var LightImg = "<div class='uploadicon position-l'> </div>";
							}  
							$("#uploadedBillDiv_0").html(LightImg);
						}	
						if (data[0].invoiceType == '1') {
							$("#withInvoice").prop('checked', true);
							$("#poExitDiv").show();
							if(appoveStatus=='Approved'){
								$("#new1").hide();
								$("#deleteChild").hide();
								$("#totalReq3").show();
							}
							else{
								$("#new1").show();
								$("#deleteChild").show();
								$("#deleteChild").attr("disabled", true);
								$("#totalReq3").show();
							}
							$("#new1").hide();
							$("#deleteChild").hide();
							
						} if(data[0].invoiceType == '0') {
							
							$("#withOutInvoice").prop('checked', true);
							$("#poExitDiv").hide();
							if(appoveStatus=='Approved'){
								$("#new1").hide();
								$("#deleteChild").hide();
								$("#totalReq3").show();
							}
							else{
								$("#new1").show();
								$("#deleteChild").show();
								$("#deleteChild").attr("disabled", true);
								$("#totalReq3").show();
							}

						}
				
	})
	}
	function downloadDetails() {
		var dataset = [];
		gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptions.api.exportDataAsCsv(dataset);
	}
	function downloadGateOutDetails() {
		var dataset = [];
		gridOptions1.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptions1.api.exportDataAsCsv(dataset);
	}
 
/* -------------------search bar for mygrid------------------------ */

function onQuickFilterChanged() {
	gridOptions.api
	.setQuickFilter(document.getElementById('quickFilter1').value);
}
function onQuickFilterChanged1() {
	gridOptions1.api
	.setQuickFilter(document.getElementById('quickFilter2').value);
}

 

function cancelBar1() {
	var id1 = document.getElementById("closeKey1");
	id1.style.display = "block";

	if ($('#quickFilter1').val() == null || $('#quickFilter1').val() == "") {
		id1.style.display = "none";
	}
}
function cancelBar2() {
	var id = document.getElementById("closeKey2");
	id.style.display = "block";
	if ($('#quickFilter2').val() == null || $('#quickFilter2').val() == "") {
		id.style.display = "none";
	}
}


/* -------------function for open side nav-------------------  */
  function newGateIn(){
	  var date1 = (new Date()).toISOString().split('T')[0];
	  var newDate = changeDateFormat(date1);
	  
	  var currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });
	
	$("#time").val(currentTime);
	$("#date").val(newDate);
	$("#visitdate").val(newDate);
	$("#new1").hide();
	$("#deleteChild").hide();
	$("#customerDiv").hide();
	$("#poNo").val('');
	$("#vendorId").val('');
	$("#vender").val('');
	$("#entryD").show();
	$("#poExitDiv").hide();
	$("#myGridItem").hide();
	$("#totalReq3").hide();	
    $("#entryT").show();
	$("#demo").show();
	$("#idDiv2").hide();
	$("#idDiv3").hide();
	$("#invc").hide();
	$("#desc2").hide();
	$("#desc11").show();
	$("#exit1").hide();
	$("#exitD").hide();
	$("#exitT").hide();
	$('#myGrid').hide();
	$('#myGrid1').hide();
	$('#newGateIn').hide();
	$('#newGateOut').hide();
	$("#download").hide();
	$("#download1").hide();
	$("#searchDiv1").hide();
	$("#searchDiv2").hide();
	$("#mySidenav").hide();
	$("#mySidenav1").hide();
	$("#sDiv").hide();
	$("#totalReq").hide();
	$("#totalReq1").hide();
	$("#idDiv1").show();
	$("#exit").show();	
	$("#idDiv").show();	
	$("#poTypeDiv").hide();	
	$("#invoiceTypeDiv").hide();	
	$("#approveGateIn").hide();
	$("#deleteGateIn").hide();
	$("#visitD").hide();
	$("#visitT").hide();
	$("#visitN").hide();
	$("#visitA").hide();
	$("#visitP").hide();
	$("#visitTm").hide();
	$("#visitVn").hide();
	$("#visitPn").hide();
	$("#visitM").hide();
	$("#documentDetails").hide();
	$("#accordionExample2").hide();
	$("#poDiv").hide();
	$("#chalanDiv").hide();
	$("#gateoutDtls").hide();
	$("#poNo").val("");
	$("#type").val("");
	//$("#time").val("");
	$("#transportName").val("");
	$("#lrNo").val("");
	$("#vendorName").val("");
	$("#driverName").val("");
	$("#driverMob").val("");
	$("#vehicleNo").val("");
	$("#noOfWheel").val("");
	$("#dlNo").val("");
	$("#depoName").val("");
	$("#truckSeal").val("");
	$("#roadTax").val("");
	$("#insuranceDate").val("");
	$("#polutionDate").val("");
	$("#polutionNo").val("");
	$("#fitnessDate").val("");
	$("#dlDate").val("");
	$("#visittime").val("");
	$("#DateCalendar2").val("");
	$("#DateCalendar3").val("");
	$("#DateCalendar4").val("");
	$("#DateCalendar5").val("");
	$("#visitingName").val("");
	$("#visitingAddress").val("");
	$("#visitingPurpose").val("");
	$("#visitingTomeet").val("");
	$("#vehicleNo").val("");
	$("#visitingPassno").val("");
	$("#visitingMobile").val("");
	$('#type').attr("disabled", false);
	$("#getPassEntryId").html("");
	$("#mainsave").show();
	$("#entryD").show();
	$("#entryT").show();
	$("#transDiv").show();
	$("#vehiDiv").show();
	$("#lrDiv").show();
	$("#vendorDiv").hide();
	$("#drvrDiv").show();
	$("#whlDiv").show();
	$("#dlDiv").show();
	$("#dlDateDiv").show();
	$("#insuDiv").show();
	$("#polDiv").show();
	$("#polNoDiv").show();
	$("#fitDiv").show();
	$("#rdtxDiv").show();
	$("#tckDiv").show();
	$("#depoDiv").show();
	
	$("#customerDiv").hide();
	
	$("#poNo").attr("disabled", false);
	$("#transportName").attr("disabled", false);
	$("#vehicleNo").attr("disabled", false);
	$("#lrNo").attr("disabled", false);
	$("#vendorName").attr("disabled", false);
	$("#driverName").attr("disabled", false);
	$("#driverMob").attr("disabled", false);
	$("#noOfWheel").attr("disabled", false);
	$("#dlNo").attr("disabled", false);
	$("#dlDate").attr("disabled", false);
	$("#insuranceDate").attr("disabled", false);
	$("#polutionDate").attr("disabled", false);
	$("#polutionNo").attr("disabled", false);
	$("#fitnessDate").attr("disabled", false);
	$("#roadTax").attr("disabled", false);
	$("#truckSeal").attr("disabled", false);
	$("#depoName").attr("disabled", false);
	$("#DateCalendar2").css("pointer-events", "auto");
	$("#DateCalendar3").css("pointer-events", "auto");
	$("#DateCalendar4").css("pointer-events", "auto");
	$("#DateCalendar5").css("pointer-events", "auto");
	$("#DateCalendar6").css("pointer-events", "auto");
 
	document.getElementById("withOutPo").disabled = false;  
	 document.getElementById("withPo").disabled = false;
	 $("#exitDate").val("");
	  $("#uploadHidden_0").empty();
	  $('#uploadDoc_0').empty();
	  $('#imageName_0').empty();
	  $("#uploadHidden_0").empty();
	  $('#uploadedBillDiv_0').empty();
	  $("#imageName_0").empty();
	
} 
	function changeDateFormat(inputDate) { // expects Y-m-d
		var splitDate = inputDate.split('-');
		if (splitDate.count == 0) {
			return null;
		}
		var year = splitDate[0];
		var month = splitDate[1];
		var day = splitDate[2];

		return day + '-' + month + '-' + year;
	}
  function cancelNewGateIn(){
		$("#demo").hide();
		$("#sDiv").show();
		$("#myGridItem").show();
		$("#totalReq3").show();
		viewGateInDetails();
		gridOptionsItem.api.setRowData([]);

       
		
}  
  function cancelNewGateOut(){
	  viewGateOutDetails();
	  $("#getPassEntryId").html("");
		$("#getPassExitId").html("");
		$("#demo").hide();
		$("#sDiv").show();
		$("#myGridItem").show();
		gridOptionsItem.api.setRowData([]);
} 
 
 function openNav(){
		document.getElementById("mySidenav").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;top:350px;";
		document.getElementById("myGridItem").style.width = "70%";
		$("#suggesstion-box_").hide();
		$("#lineTotal").attr("disabled", true);
		$("#sku").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#lineTotal").val('');
		$("#hsnCode").val('');
		$("#unit").val('');
		$("#editProduct").val(null);
		$("#pendingQuantity").val('');
		$("#receivingQuantity").val('');
		$("#receivedQuantity").val('');
		$("#challanNo").val('');
		$("#challanDate").val('');
		$("#descriptionItem").val('');
		$('#new1').hide();
		$('#deleteChild').hide();
		var x=$("input[type='radio'][name='checkbox1']:checked").val();
		if(x==0){
			$('#pendingQuantityDiv').hide();
			$('#receivedQuantityDiv').hide();
		}else{
			$('#pendingQuantityDiv').show();
			$('#receivedQuantityDiv').show();
		}
		var poid =$('#poNo').val();
		if(poid!=''){
			$("#unit").attr("disabled", true);
			$("#itemName").attr("disabled", true);
			$("#sku").attr("disabled", true);
			$("#quantity").attr("disabled", true);
			$("#lineTotal").attr("disabled", true);
			$("#pendingQuantity").attr("disabled", true);
			$("#hsnCode").attr("disabled", true);
			$("#receivingQuantity").attr("disabled", true);
			$("#receivedQuantity").attr("disabled", true);
			}
			else{
				$("#unit").attr("disabled", false);
				$("#itemName").attr("disabled", false);
				$("#sku").attr("disabled", false);
				$("#quantity").attr("disabled", false);
				$("#lineTotal").attr("disabled", false);
				$("#pendingQuantity").attr("disabled", false);
				$("#hsnCode").attr("disabled", false);
				$("#receivingQuantity").attr("disabled", false);
				$("#receivedQuantity").attr("disabled", false);
			}
		//$('#receivingQuantityDiv').show();
		//$('#pendingQuantityDiv').show();
		//$('#receivedQuantityDiv').show();
 }
function openNav2(){
	document.getElementById("mySidenav1").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;top:285px;";
	document.getElementById("myGridItem2").style.width = "70%";

	/* $('#newGateIn').hide();
	$('#newGateOut').hide();
	$("#download").hide();
	$("#download1").hide(); */
	
	
	$('#new3').hide();
	$('#deleteChild2').hide();
}	
function closeNav() {
	var poid =$('#poNo').val();
	var poExitNo =$('#poExitNo').val();
	if(poid!=''){
		$('#new1').hide();
		$('#deleteChild').hide();	
	}
	else if (poExitNo!=''){
		$('#new1').hide();
		$('#deleteChild').hide();
	}
	else{
		$('#new1').show();
		$('#deleteChild').show();
	}
	document.getElementById("mySidenav").style.width = "0";
	document.getElementById("myGridItem").style.width = "100%";
}
function closeNav1() {

	$('#newGateIn').hide();
	$('#newGateOut').show();
	$("#download1").show();
	$("#download").hide();
	document.getElementById("mySidenav1").style.width = "0";
	document.getElementById("myGrid1").style.width = "100%";
}
function downloadGateInDetails() {
	var dataset = [];
	gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		dataset.push(rowNode.data);
	});
	gridOptions.api.exportDataAsCsv(dataset);
}

function deleteDetailsOnclick() {
	$('.modal').hide();
	var selectedRows = gridOptionsItem.api.getSelectedRows();
	gridOptionsItem.api.applyTransaction({
		remove : selectedRows
	});
}
function validFormDataLoading() {
	var allValid = true;
	 if (!validationUpdated("Type can't be Left Blank",'type'))
    allValid = false;
	/* if (!validationUpdated("Transport Name can't be Blank", 'transportName'))
		allValid = false; */
	if (!validationUpdated("Time can't be Blank", 'time'))
		allValid = false;
	if (!validationUpdated("Vehicle No can't be Blank", 'vehicleNo'))
		allValid = false;
	if (!validationUpdated("Driver Name can't be Blank", 'driverName'))
		allValid = false;
	if (!validationUpdated("Mobile No can't be Blank", 'driverMob'))
		allValid = false;
	/* if (!validationUpdated("Wheel Type can't be Blank", 'noOfWheel'))
		allValid = false;
	if (!validationUpdated("DL No can't be Blank", 'dlNo'))
		allValid = false;
	if (!validationUpdated("DL Date can't be Blank", 'dlDate'))
		allValid = false;
	if (!validationUpdated("Insurance Date can't be Blank", 'insuranceDate'))
		allValid = false;
	if (!validationUpdated("Polution Date can't be Blank", 'polutionDate'))
		allValid = false;
	if (!validationUpdated("Fitness Date can't be Blank", 'fitnessDate'))
		allValid = false;
	if (!validationUpdated("Road Tax can't be Blank", 'roadTax'))
		allValid = false;
	if (!validationUpdated("Depo Name can't be Blank", 'depoName'))
		allValid = false; */ 
	return allValid;
	
}
function validFormDataboth() {
	var allValid = true;
	 if (!validationUpdated("Type can't be Left Blank",'type'))
    allValid = false;

	/*  if (!validationUpdated("Purchase order  can't be Left Blank",
			'poNo'))
		allValid = false; */
	 
	/* if (!validationUpdated("Transport Name can't be Blank", 'transportName'))
		allValid = false; */
	if (!validationUpdated("Time can't be Blank", 'time'))
		allValid = false;
	if (!validationUpdated("Vehicle No can't be Blank", 'vehicleNo'))
		allValid = false;
	/* if (!validationUpdated("LR No can't be Blank", 'lrNo'))
		allValid = false; */
	if (!validationUpdated("Driver Name can't be Blank", 'driverName'))
		allValid = false;
	if (!validationUpdated("Mobile No can't be Blank", 'driverMob'))
		allValid = false;
	/* if (!validationUpdated("Wheel Type can't be Blank", 'noOfWheel'))
		allValid = false;
	if (!validationUpdated("DL No can't be Blank", 'dlNo'))
		allValid = false;
	if (!validationUpdated("DL Date can't be Blank", 'dlDate'))
		allValid = false;
	if (!validationUpdated("Insurance Date can't be Blank", 'insuranceDate'))
		allValid = false;
	if (!validationUpdated("Polution Date can't be Blank", 'polutionDate'))
		allValid = false;
	if (!validationUpdated("Fitness Date can't be Blank", 'fitnessDate'))
		allValid = false;
	if (!validationUpdated("Road Tax can't be Blank", 'roadTax'))
		allValid = false;
	if (!validationUpdated("Truck Seal can't be Blank", 'truckSeal'))
		allValid = false;
	if (!validationUpdated("Depo Name can't be Blank", 'depoName'))
		allValid = false; */ 
	return allValid;
	
}
function validFormDataunloading1() {
	
	var allValid = true;
	 if (!validationUpdated("Type can't be Left Blank",'type'))
    allValid = false;
	/*  if (!validationUpdated("Purchase order  can't be Left Blank",'poNo'))
		allValid = false; */
	/* if (!validationUpdated("Transport Name can't be Blank", 'transportName'))
		allValid = false; */
	if (!validationUpdated("Time can't be Blank", 'exitTime'))
		allValid = false;
	if (!validationUpdated("Vehicle No can't be Blank", 'vehicleNo'))
		allValid = false;
	/* if (!validationUpdated("LR No can't be Blank", 'lrNo'))
		allValid = false; */
	if (!validationUpdated("Driver Name can't be Blank", 'driverName'))
		allValid = false;
	if (!validationUpdated("Mobile No can't be Blank", 'driverMob'))
		allValid = false;
	/* if (!validationUpdated("Wheel Type can't be Blank", 'noOfWheel'))
		allValid = false;
	if (!validationUpdated("DL No can't be Blank", 'dlNo'))
		allValid = false;
	if (!validationUpdated("DL Date can't be Blank", 'dlDate'))
		allValid = false; */
	return allValid;
}

function validFormDataunloading() {
	
	var allValid = true;
	 if (!validationUpdated("Type can't be Left Blank",'type'))
    allValid = false;
	/*  if (!validationUpdated("Purchase order  can't be Left Blank",'poNo'))
		allValid = false; */
	/* if (!validationUpdated("Transport Name can't be Blank", 'transportName'))
		allValid = false; */
	if (!validationUpdated("Time can't be Blank", 'time'))
		allValid = false;
	if (!validationUpdated("Vehicle No can't be Blank", 'vehicleNo'))
		allValid = false;
	/* if (!validationUpdated("LR No can't be Blank", 'lrNo'))
		allValid = false; */
	if (!validationUpdated("Driver Name can't be Blank", 'driverName'))
		allValid = false;
	if (!validationUpdated("Mobile No can't be Blank", 'driverMob'))
		allValid = false;
	/* if (!validationUpdated("Wheel Type can't be Blank", 'noOfWheel'))
		allValid = false;
	if (!validationUpdated("DL No can't be Blank", 'dlNo'))
		allValid = false;
	if (!validationUpdated("DL Date can't be Blank", 'dlDate'))
		allValid = false; */
	return allValid;
}
function validFormDatavisiting() {
	var allValid = true;
	 if (!validationUpdated("Type can't be Left Blank",'type'))
    allValid = false;
	if (!validationUpdated("Visiting Name can't be Blank", 'visitingName'))
		allValid = false;
	if (!validationUpdated("Time can't be Blank", 'time'))
		allValid = false;
	/* if (!validationUpdated("Visiting Address can't be Blank", 'visitingAddress'))
		allValid = false;
	if (!validationUpdated("To Meet can't be Blank", 'visitingTomeet'))
		allValid = false; */
	if (!validationUpdated("Vehicle No can't be Blank", 'vehicleNo'))
		allValid = false;
	if (!validationUpdated("Pass No can't be Blank", 'visitingPassno'))
		allValid = false;
	if (!validationUpdated("Mobile can't be Blank", 'visitingMobile'))
		allValid = false;
	return allValid;
}



function validFormData1() {
	var allValid = true;

	if (!validationUpdated("Time can't be Blank", 'exitTime'))
		allValid = false;
	return allValid;
	
}
function validFormDatavisit() {
	var allValid = true;

	if (!validationUpdated("Time can't be Blank", 'exitTime'))
		allValid = false;
	return allValid;
	
}

function validProductData() {
	return true;
}
var datas = [];
function addEntryDetails() {
	
	//if (validProductData()  && validFormData()) { 
	var datas = [];
 
	var type1=$("#type").val();
	 if(type1=='both'){
	   var count = 0;
	//uploadList=''
	if (gridOptionsItem.api.getDisplayedRowCount() > 0) {
		gridOptionsItem.api.forEachNode(function(rowNode, indrx) {
			var challanNo = rowNode.data.challanNo;
				if (challanNo == null) {
					count++;}
				var obj = rowNode.data;
				if(count>0){
	          	if(rowNode.data.challanNo!=null){
	          		obj.getPassEntryId = $("#getPassEntryId").html();
				}
			else {
				$("#messageParagraph").text("Add Challan Details First.");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
			}
				}
				obj.getPassEntryId = $("#getPassEntryId").html();
				obj.poNumber = $("#poNo").val();
				obj.poType = $("input[name='checkbox1']:checked").val();
				obj.type = $("#type").val();
				obj.entrydate = $("#date").val();
				obj.entryTime = $("#time").val();
				obj.transportName = $("#transportName").val();
				obj.lrNo = $("#lrNo").val();
				obj.vendorName = $("#vendorName").val();
				obj.vendorId = $("#vendorId").val();
				obj.driverName = $("#driverName").val();
				obj.driverMobile = $("#driverMob").val();
				obj.vechileNo = $("#vehicleNo").val();
				obj.noOfWheel = $("#noOfWheel").val();
				obj.dlNo = $("#dlNo").val();
				obj.depoName = $("#depoName").val();
				obj.truckSeal = $("#truckSeal").val();
				obj.roadTax = $("#roadTax").val();
				obj.insuranceDate = $("#insuranceDate").val();
				obj.polutionDate = $("#polutionDate").val();
				obj.polutionNo = $("#polutionNo").val();
				obj.fitnessDate = $("#fitnessDate").val();
				obj.dlDate = $("#dlDate").val();
				obj.image =  $("#imageName_0").html();
				obj.vendorName1 = $("#vendorName1").val();
				datas.push(obj);
		});
	}
	else {
		$("#messageParagraph").text("Please Add Item Details");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
		return false;
	}
	 }
		else if(type1=='unloading'){
			var count = 0;
			//uploadList=''
			if (gridOptionsItem.api.getDisplayedRowCount() > 0) {
				gridOptionsItem.api.forEachNode(function(rowNode, indrx) {
					var challanNo = rowNode.data.challanNo;
						if (challanNo == null) {
							count++;}
						var obj = rowNode.data;
						if(count>0){
			          	if(rowNode.data.challanNo!=null){
			          		obj.getPassEntryId = $("#getPassEntryId").html();
						}
					else {
						$("#messageParagraph").text("Add Challan Details First.");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
					}
						}
						obj.getPassEntryId = $("#getPassEntryId").html();
						obj.poNumber = $("#poNo").val();
						obj.poType = $("input[name='checkbox1']:checked").val();
						obj.type = $("#type").val();
						obj.entrydate = $("#date").val();
						obj.entryTime = $("#time").val();
						obj.transportName = $("#transportName").val();
						obj.lrNo = $("#lrNo").val();
						obj.vendorName = $("#vendorName").val();
						obj.vendorId = $("#vendorId").val();
						obj.driverName = $("#driverName").val();
						obj.driverMobile = $("#driverMob").val();
						obj.vechileNo = $("#vehicleNo").val();
						obj.noOfWheel = $("#noOfWheel").val();
						obj.dlNo = $("#dlNo").val();
						obj.dlDate = $("#dlDate").val();
						obj.image =  $("#imageName_0").html();
						
						obj.vendorName1 = $("#vendorName1").val();
						datas.push(obj);
				});
			}
			else {
				$("#messageParagraph").text("Please Add Item Details");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
				return false;
			}
	 }
	
	else if(type1=='visiting'){
		var obj = {};
		obj.getPassEntryId = $("#getPassEntryId").html();
		obj.type = $("#type").val();
		obj.entrydate = $("#date").val();
		//obj.poType = $("input[name='checkbox']:checked").val();
		obj.entryTime = $("#time").val();
		obj.visitingName = $("#visitingName").val();
		obj.visitingAddress = $("#visitingAddress").val();
		obj.visitingPurpose = $("#visitingPurpose").val();
		obj.visitingTomeet = $("#visitingTomeet").val();
		obj.vechileNo = $("#vehicleNo").val();
		obj.visitingPassno = $("#visitingPassno").val();
		obj.visitingMobile = $("#visitingMobile").val();
		obj.image =  $("#imageName_0").html();
		datas.push(obj);

}
	else {
			var obj = {};
			obj.getPassEntryId = $("#getPassEntryId").html();
			obj.type = $("#type").val();
			//obj.poType = $("input[name='checkbox']:checked").val();
			obj.entrydate = $("#date").val();
			obj.entryTime = $("#time").val();
			obj.transportName = $("#transportName").val();
			obj.lrNo = $("#lrNo").val();
			obj.vechileNo = $("#vehicleNo").val();
			obj.noOfWheel = $("#noOfWheel").val();
			obj.dlNo = $("#dlNo").val();
			obj.driverName = $("#driverName").val();
			obj.driverMobile = $("#driverMob").val();
			obj.depoName = $("#depoName").val();
			obj.truckSeal = $("#truckSeal").val();
			obj.roadTax = $("#roadTax").val();
			obj.insuranceDate = $("#insuranceDate").val();
			obj.polutionDate = $("#polutionDate").val();
			obj.polutionNo = $("#polutionNo").val();
			obj.fitnessDate = $("#fitnessDate").val();
			obj.dlDate = $("#dlDate").val();
			obj.image =  $("#imageName_0").html();
 
			datas.push(obj);
		}
		console.log(datas);
		 var type1=$("#type").val();	
		if(type1=='both'){
		if (validFormDataboth()){
		submitgetpassentry(datas);
		}}
		else if(type1=='unloading'){
			if (validFormDataunloading()){
				
				submitgetpassentry(datas);
			}}
		else if(type1=='loading'){
			if (validFormDataLoading()){
			submitgetpassentry(datas);
			}}
		else 
			if (validFormDatavisiting()){
				submitgetpassentry(datas);
			} 
	// } 
}
function viewImage(id){
	window.open("/document/document/"+id,'_blank');
}	

function submitgetpassentry(datas) {
		$.ajax({
		type : "POST",
		url : "gate-pass-entry-add",
		dataType : "json",
		contentType : "application/json",
		data : JSON.stringify(datas),
		success : function(response) {
			 
			if (response.message == "Success") {
				
				
		$("#messageParagraph").text("Data Saved Successfully");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
		 
	 agGrid.simpleHttpRequest({
			url : "gate-pass-entry-view",
		}).then(function(data) {
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptions.api.setRowData(data);
			$('.loader').hide();
		}) 
		cancelNewGateIn();

	}

},
error : function(datas) {
	console.log(datas)
}
})
}

function openModal(id) {
	if (id == 0) {
		closeNav();
		$("#poNo").val(null);
		$("#poExitNo").val(null);
		$("#vendorName").val("");
		$("#poDiv").hide();
		$("#poExitDiv").hide();
		$("#new1").show();
		$("#deleteChild").show();
		$("#deleteChild").attr("disabled", true);
		$("#vendorName").attr("disabled", false);
		gridOptionsItem.api.setRowData('');
	
	} else  {
		$("#poNo").val(null);
		$("#poExitNo").val(null);
		$("#poDiv").show();
		closeNav();
		$("#new1").hide();
		$("#deleteChild").hide();
		$("#vendorName").attr("disabled", true);
	}	
}
function openModal1(id) {
	if (id == 0) {
		closeNav();
		$("#poExitNo").val(null);
		$("#poExitDiv").hide();
		$("#new1").show();
		$("#deleteChild").show();
		$("#deleteChild").attr("disabled", true);
		gridOptionsItem.api.setRowData('');
	
	} else  {
		$("#poExitNo").val(null);
		$("#poExitDiv").show();
		closeNav();
		$("#new1").hide();
		$("#deleteChild").hide();
	}	
}
function saveTableData() {
	var editProduct = $("#editProduct").val();
	var item = {};
	var data = 1;
	var validation = true;


	if (item.challanNo == null || item.challanNo == "") {
		validation = validationUpdated("Challan No Required", 'challanNo');
	}
	if (item.challanDate == null || item.challanDate == "") {
		validation = validationUpdated("Challan Date Required", 'challanDate');
	}
	if (item.receivingQuantity == null || item.receivingQuantity == "") {
		validation = validationUpdated("Receiving Quantity Required", 'receivingQuantity');
	}
	/* if (item.descriptionItem == null || item.descriptionItem == "") {
		validation = validationUpdated("Description Required", 'descriptionItem');
	} */
	if (validation) {
		item.slNo = data;
		gridOptionsItem.api.forEachNode(function(rowNode, index) {
			if (!editProduct) {
				data = data + 1;
				item.slNo = data;
			}
			else{
				item.slNo = editProduct;
			}
			
		});

		item.itemId = $('#itemId').val();
		item.sku = $('#sku').val();
		item.itemName = $('#itemName').val();
		item.hsnCode = $('#hsnCode').val();
		item.unit = $('#unit').val();
		item.unitName = $("#unit option:selected").text();
		item.quantity = $('#quantity').val();
		item.lineTotal = $('#lineTotal').val();
		item.descItem = $('#descriptionItem').val();
		item.pendingQuantity = $('#pendingQuantity').val();
		item.receivingQuantity = $('#receivingQuantity').val();
		item.receivedQuantity = $('#receivedQuantity').val();
		item.challanDate = $('#challanDate').val();
		item.challanNo = $('#challanNo').val();
		var quot = [];

		if (editProduct) {
			var rowNode = gridOptionsItem.api.getRowNode(editProduct);
			rowNode.setData(item);
		} else {
			gridOptionsItem.api.forEachNode(function(rowNode, index) {
				quot.push(rowNode.data);
			});
			quot.push(item)
			gridOptionsItem.api.setRowData(quot);

		
		}
		closeNav();
		$("#sku").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#lineTotal").val('');
		$("#hsnCode").val('');
		$("#unit").val('');
		$("#editProduct").val(null);
	}

}
 //var datas = [];
function addExitDetails() {
	var getPassEntryId1=$("#entryId").val();
		var datas = [];
		var type1=$("#type").val();
        if(type1=='both' || type1=='loading'){
						if (gridOptionsItem.api.getDisplayedRowCount() > 0) {
							gridOptionsItem.api.forEachNode(function(rowNode, indrx) {
								var obj = rowNode.data;
								obj.getPassExitId = $("#getPassExitId").html();
								obj.getPassEntryId = getPassEntryId1;
								obj.poNumber = $("#poExitNo").val();
								obj.invoiceType = $("input[name='checkbox']:checked").val();
								obj.type = $("#type").val();
								obj.exitDate = $("#exitDate").val();
								obj.exitTime = $("#exitTime").val();
								obj.transportName = $("#transportName").val();
								obj.lrNo = $("#lrNo").val();
								obj.vendorName = $("#vendorName").val();
								obj.customerName = $("#customerName").val();
								obj.driverName = $("#driverName").val();
								obj.driverMobile = $("#driverMob").val();
								obj.vechileNo = $("#vehicleNo").val();
								obj.noOfWheel = $("#noOfWheel").val();
								obj.dlNo = $("#dlNo").val();
								obj.depoName = $("#depoName").val();
								obj.truckSeal = $("#truckSeal").val();
								obj.roadTax = $("#roadTax").val();
								obj.insuranceDate = $("#insuranceDate").val();
								obj.polutionDate = $("#polutionDate").val();
								obj.polutionNo = $("#polutionNo").val();
								obj.fitnessDate = $("#fitnessDate").val();
								obj.dlDate = $("#dlDate").val();
								obj.image = $("#imageName_0").html();
								datas.push(obj);
							});
						}else {
							$("#messageParagraph").text("Please Add Item Details");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
							return false;
						}
						 }
        
    	
    	else if(type1=='visiting'){
    		var obj = {};
    		obj.getPassExitId = $("#getPassExitId").html();
    		obj.type = $("#type").val();
    		obj.exitDate = $("#exitDate").val();
    		obj.exitTime = $("#exitTime").val();
    		obj.visitingName = $("#visitingName").val();
    		obj.visitingAddress = $("#visitingAddress").val();
    		obj.visitingPurpose = $("#visitingPurpose").val();
    		obj.visitingTomeet = $("#visitingTomeet").val();
    		obj.vechileNo = $("#vehicleNo").val();
    		obj.visitingPassno = $("#visitingPassno").val();
    		obj.visitingMobile = $("#visitingMobile").val();
    		obj.image = $("#imageName_0").html();
    		datas.push(obj);

          }
		
					else {
							var obj = {};
							obj.getPassExitId = $("#getPassExitId").html();
							obj.getPassEntryId = $("#getPassEntryId").val();
							obj.type = $("#type").val();
							obj.exitDate = $("#exitDate").val();
							obj.exitTime = $("#exitTime").val();
							obj.transportName = $("#transportName").val();
							obj.lrNo = $("#lrNo").val();
							obj.vendorName = $("#vendorName").val();
							obj.vechileNo = $("#vehicleNo").val();
							obj.noOfWheel = $("#noOfWheel").val();
							obj.dlNo = $("#dlNo").val();
							obj.driverName = $("#driverName").val();
							obj.driverMobile = $("#driverMob").val();
							obj.depoName = $("#depoName").val();
							obj.truckSeal = $("#truckSeal").val();
							obj.roadTax = $("#roadTax").val();
							obj.insuranceDate = $("#insuranceDate").val();
							obj.polutionDate = $("#polutionDate").val();
							obj.polutionNo = $("#polutionNo").val();
							obj.fitnessDate = $("#fitnessDate").val();
							obj.dlDate = $("#dlDate").val();
							obj.image = $("#imageName_0").html();
							datas.push(obj);
						}
						console.log(datas);
						var type1=$("#type").val();	
						if(type1=='both'){
						if (validFormDataunloading1()){
							submitgetpassExit(datas);
						}}
						else if(type1=='unloading'){
							if (validFormData1()){
								submitgetpassExit(datas);
							}}
						else if(type1=='loading'){
							if (validFormData1()){
								submitgetpassExit(datas);
							}}
						else 
							if (validFormDatavisit()){
								submitgetpassExit(datas);
						}					
	//}
}
function submitgetpassExit(datas) {
	console.log(JSON.stringify(datas))
		$.ajax({
		type : "POST",
		url : "gate-pass-exit-add",
		dataType : "json",
		contentType : "application/json",
		data : JSON.stringify(datas),
		success : function(response) {
			 
			if (response.message == "Success") {
		$("#messageParagraph").text("Data Saved Successfully");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
		
		agGrid.simpleHttpRequest({
			url : "gate-pass-exit-view",
		}).then(function(data) {
			var len = data.length;
			$('#totalReq1').find('span').html(len);
			gridOptions1.api.setRowData(data);
			$('.loader').hide();
		})
		cancelNewGateOut();
	}

},
error : function(datas) {
	console.log(datas)
}
})
}
function getVendorandItemDetails(){
	var poId=$("#poNo").val();
	agGrid.simpleHttpRequest({
		url : 'gate-pass-getVendorandItemDetails?id=' + poId
	}).then(function(data) {
		console.log(data)
		$("#vendorName").val(data[0].vendorName);
		$("#vendorId").val(data[0].vendorId);
		gridOptionsItem.api.setRowData(data);

	});
}	
function getItemDetailsForExit(){
	var poId=$("#poExitNo").val();
	agGrid.simpleHttpRequest({
		url : 'gate-pass-getItemDetailsForExit?id=' + poId
	}).then(function(data) {
		console.log(data)
		gridOptionsItem.api.setRowData(data);

	});

}	
function approveGateInOnclick() {
	
	var selectedRows = gridOptions.api.getSelectedRows();
	var selectedRowsString = '';
	selectedRows.forEach(function(selectedRow, index) {
		if (index > 0) {
			selectedRowsString += ',';
		}
		selectedRowsString += selectedRow.getPassEntryId;
	});
	var getPassEntryId = selectedRowsString;
	
	var approveStatus = 1;
	$('#approveGateInModal').modal('show');
	$('.loader').show();
	
$.ajax({
	type : "GET",
	url : "gate-pass-entry-approve-th-ajax?approveStatus=" + approveStatus + "&getPassEntryId=" + getPassEntryId ,
	async : false,
	success : function(response) {
		if (response.message == "Success") {
			$('.loader').hide();
			$("#messageParagraph").text("Gate In Approved Successfully");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			$('#approveGateInModal').modal('hide');
			viewGateInDetails();
		}else{
			$('.loader').hide();
			$('#approveGateInModal').modal('show');
		}
		
	},
	error : function(data) {
	}
});
}	
function approveGateOutOnclick() {
	
	var selectedRows = gridOptions1.api.getSelectedRows();
	var selectedRowsString = '';
	selectedRows.forEach(function(selectedRow, index) {
		if (index > 0) {
			selectedRowsString += ',';
		}
		selectedRowsString += selectedRow.getPassExitId;
	});
	var getPassExitId = selectedRowsString;
	
	var approveStatus = 1;
	$('#approveGateOutModal').modal('show');
	$('.loader').show();
	
$.ajax({
	type : "GET",
	url : "gate-pass-exit-approve-th-ajax?approveStatus=" + approveStatus + "&getPassExitId=" + getPassExitId ,
	async : false,
	success : function(response) {
		if (response.message == "Success") {
			$('.loader').hide();
			$("#messageParagraph").text("Gate Out Approved Successfully");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			
			$('#approveGateOutModal').modal('hide');
			viewGateOutDetails();
			
			
		}else{
			$('.loader').hide();
			$('#approveGateOutModal').modal('show');
		}
		
	},
	error : function(data) {
	}
});
}	
function deleteGateInOnclick() {

	var selectedRows = gridOptions.api.getSelectedRows();
 var id=selectedRows[0].getPassEntryId;


	$.ajax({
		type : "POST",
		url : "gate-pass-entry-delete?id="+ id,
		success : function(response) {
		 if (response.message == "Success") {
			
			 $('#deleteGateinModal').modal('hide');
			 cancelNewGateIn();
				viewGateInDetails();
				
				
			} else {
				$('#deleteGateinModal').modal('show');
			}
		},
		error : function(data) {
			console.log(data)
		}
	})
}
function deleteGateOutOnclick() {

	var selectedRows = gridOptions1.api.getSelectedRows();
 var id=selectedRows[0].getPassExitId;


	$.ajax({
		type : "POST",
		url : "gate-pass-exit-delete?id="+ id,
		success : function(response) {
		 if (response.message == "Success") {
			
			 $('#deleteGateOutModal').modal('hide');
			 cancelNewGateOut();
			 viewGateOutDetails();

			} else {
				$('#deleteGateOutModal').modal('show');
			}
		},
		error : function(data) {
			console.log(data)
		}
	})
}



function addGateOutDtls(){
	var currentTime = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });
	
	$("#exitTime").val(currentTime);
	$("#poDiv").hide();
	$("#poExitDiv").hide();
	var date1 = (new Date()).toISOString().split('T')[0];
	var newDate = changeDateFormat(date1);
	$("#exitDate").val(newDate);
	$("#poNo").val('');
	$("#vender").val('');
	$("#customerName").val('');
	$("#exitD").show();
	$("#exitT").show();
	$("#demo").show();
	$("#idDiv").hide();
	$("#idDiv1").hide();
	$("#invc").show();
	$("#desc11").hide();
	$("#desc2").show();
	$("#exit").hide();
	$("#exit1").show();
	$("#entryD").hide();
	$("#entryT").hide();
	$("#myGridItem").show();
	$('#myGrid').hide();
	$('#myGrid1').hide();
	$('#newGateIn').hide();
	$('#newGateOut').hide();
	$("#download").hide();
	$("#download1").hide();
	$("#searchDiv1").hide();
	$("#searchDiv2").hide();
	$("#mySidenav").hide();
	$("#mySidenav1").hide();
	$("#sDiv").hide();
	$("#totalReq").hide();
	$("#totalReq1").hide();
	$("#deleteGateOut").hide();
	$("#approveGateOut").hide();
	$("#poExitDiv").show();
	$("#idDiv2").show();
	$("#idDiv3").show();	
	$("#exit1").show();
	//$("#exitTime").val('');
	$("#deleteGateIn").hide();
	$("#approveGateIn").hide();
	$("#gateoutDtls").hide();
	
	$('#deleteChild').attr("disabled", true);
	
	$("#transportName").attr("disabled", true);
	$("#vehicleNo").attr("disabled", true);
	//$("#lrNo").attr("disabled", true);
	$("#vendorName").attr("disabled", true);
	$("#driverName").attr("disabled", true);
	$("#driverMob").attr("disabled", true);
	$("#noOfWheel").attr("disabled", true);
	$("#dlNo").attr("disabled", true);
	$("#dlDate").attr("disabled", true);
	$("#insuranceDate").attr("disabled", true);
	$("#polutionDate").attr("disabled", true);
	$("#polutionNo").attr("disabled", true);
	$("#fitnessDate").attr("disabled", true);
	$("#roadTax").attr("disabled", true);
	//$("#truckSeal").attr("disabled", true);
	$("#depoName").attr("disabled", true);
	$("#DateCalendar2").css("pointer-events", "none"); 
	$("#DateCalendar3").css("pointer-events", "none"); 
	$("#DateCalendar4").css("pointer-events", "none"); 
	$("#DateCalendar5").css("pointer-events", "none");  
	$("#DateCalendar6").css("pointer-events", "none");
	
	
	var selectedRows = gridOptions.api.getSelectedRows();
	 var id=selectedRows[0].getPassEntryId;
     var id1= $("#entryId").val(id);

	agGrid.simpleHttpRequest({
		url : "gate-pass-entry-edit?id=" + id,
		}).then(function(data) {
			var type=data[0].type;
		 	if(type=='loading'){
		 		gridOptionsItem.api.setRowData();
		 		$("#myGridItem").show();
		 		$("#documentDetails").hide();
				$("#accordionExample2").hide();
				$("#poTypeDiv").hide();	
				$("#invoiceTypeDiv").show();	
				$("#poExitDiv").show();
				$("#visitD").hide();
				$("#visitT").hide();
				$("#visitN").hide();
				$("#visitA").hide();
				$("#visitP").hide();
				$("#visitTm").hide();
				$("#visitVn").hide();
				$("#visitPn").hide();
				$("#visitM").hide();
				$("#entryD").hide();
				$("#entryT").hide();
				$("#transDiv").show();
				$("#vehiDiv").show();
				$("#lrDiv").show();
				$("#vendorDiv").hide();
				$("#drvrDiv").show();
				$("#whlDiv").show();
				$("#dlDiv").show();
				$("#customerDiv").show();
				$("#dlDateDiv").show();
				$("#insuDiv").show();
				$("#polDiv").show();
				$("#polNoDiv").show();
				$("#fitDiv").show();
				$("#rdtxDiv").show();
				$("#tckDiv").show();
				$("#depoDiv").show();
				$("#drvrNodiv").show();
				$("#poDiv").hide();
				$('#receivingQuantityDiv').hide();
				$('#pendingQuantityDiv').hide();
				$('#receivedQuantityDiv').hide();
				$("#poExitDiv").hide();
				$("#totalReq3").show();
				$("#new1").show();
				$("#deleteChild").show();
				var x=$("input[type='radio'][name='checkbox1']:checked").val();
				if(x==0){
					$(".p-2").show();
				}else{
					$(".p-2").hide();
				}
			} 
		 	else if(type=='unloading'){
				$("#dlDateDiv").hide();
				$("#insuDiv").hide();
				$("#polDiv").hide();
				$("#polNoDiv").hide();
				$("#fitDiv").hide();
				$("#customerDiv").hide();
				$("#rdtxDiv").hide();
				$("#tckDiv").hide();
				$("#depoDiv").hide();
				$("#myGridItem").hide();
				$("#totalReq3").hide();
				$("#poExitDiv").hide();
				$("#entryD").hide();
				$("#entryT").hide();
				$("#transDiv").show();
				$("#lrDiv").show();
				$("#vendorDiv").show();
				$("#vehiDiv").show();
				$("#whlDiv").show();
				$("#drvrDiv").show();
				$("#drvrNodiv").show();
				$("#dlDiv").show();
				$("#poDiv").hide();
				$("#documentDetails").hide();
				$("#accordionExample2").hide();
				$("#visitD").hide();
				$("#visitT").hide();
				$("#visitN").hide();
				$("#visitA").hide();
				$("#visitP").hide();
				$("#visitTm").hide();
				$("#visitVn").hide();
				$("#visitPn").hide();
				$("#visitM").hide();
				$("#lrNo").attr("disabled", true);
				$("#new1").hide();
				$("#deleteChild").hide();
				$("#poTypeDiv").hide();
				$("#invoiceTypeDiv").hide();	
			}
		 	else if(type=='visiting'){
		 		$("#poExitDiv").hide();
		 		$("#exitD").show();
		 		$("#exitT").show();
				$("#poDiv").hide();
				$("#customerDiv").hide();
				$("#myGridItem").hide();
				$("#totalReq3").hide();
				$("#dlDateDiv").hide();
				$("#insuDiv").hide();
				$("#polDiv").hide();
				$("#polNoDiv").hide();
				$("#fitDiv").hide();
				$("#rdtxDiv").hide();
				$("#tckDiv").hide();
				$("#depoDiv").hide();
				$("#poDiv").hide();
				$("#entryD").hide();
				$("#entryT").hide();
				$("#transDiv").hide();
				$("#vehiDiv").hide();
				$("#lrDiv").hide();
				$("#vendorDiv").hide();
				$("#drvrDiv").hide();
				$("#whlDiv").hide();
				$("#dlDiv").hide();
				$("#dlDateDiv").hide();
				$("#insuDiv").hide();
				$("#polDiv").hide();
				$("#polNoDiv").hide();
				$("#fitDiv").hide();
				$("#rdtxDiv").hide();
				$("#tckDiv").hide();
				$("#depoDiv").hide();
				$("#drvrNodiv").hide();
				$("#visitD").hide();
				$("#visitT").hide();
				$("#visitN").show();
				$("#visitA").show();
				$("#visitP").show();
				$("#visitTm").show();
				$("#vehiDiv").show();
				$("#visitPn").show();
				$("#visitM").show();
				$("#documentDetails").show();
				$("#accordionExample2").show();
				$("#new1").hide();
				$("#deleteChild").hide();
				$("#poTypeDiv").hide();
				$("#invoiceTypeDiv").hide();	
				
			}
		 	else{
		 		gridOptionsItem.api.setRowData(data);
		 		$("#entryD").hide();
		 		$("#entryT").hide();
		 		$("#poExitDiv").hide();
		 		$("#customerDiv").show();
		 		$("#documentDetails").hide();
				$("#accordionExample2").hide();
				$("#visitD").hide();
				$("#visitT").hide();
				$("#visitN").hide();
				$("#visitA").hide();
				$("#visitP").hide();
				$("#visitTm").hide();
				$("#visitVn").hide();
				$("#visitPn").hide();
				$("#visitM").hide();
				//$("#poExitDiv").show();
				$("#poDiv").hide();
				$("#entryD").hide();
				$("#entryT").hide();
				$("#transDiv").show();
				$("#vehiDiv").show();
				$("#lrDiv").show();
				$("#vendorDiv").show();
				$("#drvrDiv").show();
				$("#whlDiv").show();
				$("#dlDiv").show();
				$("#dlDateDiv").show();
				$("#insuDiv").show();
				$("#polDiv").show();
				$("#polNoDiv").show();
				$("#fitDiv").show();
				$("#rdtxDiv").show();
				$("#tckDiv").show();
				$("#depoDiv").show();
				$("#drvrNodiv").show();
				$("#myGridItem").show();
				$("#totalReq3").show();
				$('#receivingQuantityDiv').hide();
				$('#pendingQuantityDiv').hide();
				$('#receivedQuantityDiv').hide();
				$("#new1").show();
				$("#deleteChild").show();
				$("#poTypeDiv").hide();	
				$("#invoiceTypeDiv").show();	
		 	}
		 	var type= data[0].type;
		 	 gridOptionsItem.api.setRowData();
			if (type!="") {
				gridOptionsItem.columnApi.setColumnVisible('pendingQuantity', false);
				gridOptionsItem.columnApi.setColumnVisible('receivingQuantity', false);
				gridOptionsItem.columnApi.setColumnVisible('receivedQuantity', false);
			}else{
				gridOptionsItem.columnApi.setColumnVisible('pendingQuantity', true);
			}
		     //gridOptionsItem.api.setRowData(data); 
		        $("#poDiv").hide();
		        //$("#poExitDiv").show();
		     
					$("#poNo").val(data[0].poNumber);
					$("#date").val(data[0].entrydate);
					//$("#time").val(data[0].entryTime);
					$("#transportName").val(data[0].transportName);
					$("#vehicleNo").val(data[0].vechileNo);
					$("#driverName").val(data[0].driverName);
					$("#driverMob").val(data[0].driverMobile);
					if(type=='loading'){
						$("#lrNo").val('');
						$("#lrNo").attr("disabled", false);
					}else{
						$("#lrNo").val(data[0].lrNo);
					}
					//$("#lrNo").val(data[0].lrNo);
					$("#vendorName").val(data[0].vendorName);
					$("#noOfWheel").val(data[0].noOfWheel);
					$("#dlNo").val(data[0].dlNo);
					$("#dlDate").val(data[0].dlDate);
					
					$("#insuranceDate").val(data[0].insuranceDate);
					$("#type").val(data[0].type);
					$("#polutionDate").val(data[0].polutionDate);
					$("#polutionNo").val(data[0].polutionNo);
					$("#fitnessDate").val(data[0].fitnessDate);
					$("#roadTax").val(data[0].roadTax);
					//$("#truckSeal").val(data[0].truckSeal);
					$("#depoName").val(data[0].depoName);
					var type=data[0].type;
					if(type=='visiting'){
		 		     $("#poExitDiv").hide();}
					$("#visitingName").val(data[0].visitingName);
					$("#visitingAddress").val(data[0].visitingAddress);
					$("#visitingPurpose").val(data[0].visitingPurpose);
					$("#visitingTomeet").val(data[0].visitingTomeet);
					$("#vehicleNo").val(data[0].vechileNo);
					$("#visitingPassno").val(data[0].visitingPassno);
					$("#visitingMobile").val(data[0].visitingMobile);
					//$("#visittime").val(data[0].entryTime);
					$("#visitdate").val(data[0].entrydate);
					
					
					
})
$("#poDiv").hide();
//$("#poExitDiv").show();
$('#type').attr("disabled", true);
$("#mainsave1").show();
}

function entryType(){
	var type = $("#type").val();	
	if(type=='loading'){
		$("#entryD").show();
		$("#entryT").show();
		$("#transDiv").show();
		$("#vehiDiv").show();
		$("#lrDiv").hide();
		$("#vendorDiv").hide();
		$("#drvrDiv").show();
		$("#whlDiv").show();
		$("#dlDiv").show();
		$("#dlDateDiv").show();
		$("#insuDiv").show();
		$("#polDiv").show();
		$("#polNoDiv").show();
		$("#fitDiv").show();
		$("#rdtxDiv").show();
		$("#tckDiv").hide();
		$("#depoDiv").show();
		$("#drvrNodiv").show();
		$("#myGridItem").hide();
		$("#totalReq3").hide();
		$("#poDiv").hide();
		$("#visitD").hide();
		$("#visitT").hide();
		$("#visitN").hide();
		$("#visitA").hide();
		$("#visitP").hide();
		$("#visitTm").hide();
		$("#visitVn").hide();
		$("#visitPn").hide();
		$("#visitM").hide();
		$("#poDetails").hide();
		$(".p-2").hide();
		$("#documentDetails").hide();
		$("#accordionExample2").hide();
		$("#vendorDiv").hide();
	}
	else if(type=='unloading'){
		$("#poTypeDiv").show();
		$("#invoiceTypeDiv").hide();
		$("#withOutPo").prop('checked', true);
		$("#new1").show();
		$("#deleteChild").show();
		$("#deleteChild").attr("disabled", true);
		$("#poDiv").hide();
		$("#entryD").show();
		$("#entryT").show();
		$("#transDiv").show();
		$("#lrDiv").show();
		$("#vendorDiv").show();
		$("#vehiDiv").show();
		$("#whlDiv").show();
		$("#drvrDiv").show();
		$("#drvrNodiv").show();
		$("#dlDiv").show();
		$("#poDiv").hide();
		$("#myGridItem").show();
		$("#totalReq3").show();
		$("#insuDiv").hide();
		$("#polDiv").hide();
		$("#polNoDiv").hide();
		$("#fitDiv").hide();
		$("#rdtxDiv").hide();
		$("#tckDiv").hide();
		$("#depoDiv").hide();
		$("#documentDetails").hide();
		$("#accordionExample2").hide();
		$("#visitD").hide();
		$("#visitT").hide();
		$("#visitN").hide();
		$("#visitA").hide();
		$("#visitP").hide();
		$("#visitTm").hide();
		$("#visitVn").hide();
		$("#visitPn").hide();
		$("#visitM").hide();
		$("#poDetails").show();
		$("#vendorDiv").show();
		var x=$("input[type='radio'][name='checkbox1']:checked").val();
		if(x==0){
			$(".p-2").show();
		}else{
			$(".p-2").hide();
		}
		
		$("#documentDetails").hide();
		$("#accordionExample2").hide();
	}
	else if(type=='visiting'){
		$("#poTypeDiv").hide();
		$("#invoiceTypeDiv").hide();	
		$("#visitD").hide();
		$("#visitT").hide();
		$("#visitN").show();
		$("#visitA").show();
		$("#visitP").show();
		$("#visitTm").show();
		$("#vehiDiv").show();
		$("#visitPn").show();
		$("#visitM").show();
		$("#documentDetails").show();
		$("#myGridItem").hide();
		$("#totalReq3").hide();
		$("#poDiv").hide();
		$("#entryD").show();
		$("#entryT").show();
		$("#transDiv").hide();
		$("#vehiDiv").show();
		$("#lrDiv").hide();
		$("#vendorDiv").hide();
		$("#drvrDiv").hide();
		$("#whlDiv").hide();
		$("#dlDiv").hide();
		$("#dlDateDiv").hide();
		$("#insuDiv").hide();
		$("#polDiv").hide();
		$("#polNoDiv").hide();
		$("#fitDiv").hide();
		$("#rdtxDiv").hide();
		$("#tckDiv").hide();
		$("#depoDiv").hide();
		$("#drvrNodiv").hide();
		$("#documentDetails").show();
		$("#accordionExample2").show();
		$(".p-2").hide();
		$("#poDetails").hide();
		$("#vendorDiv").hide();
	}
	else{
		$("#poTypeDiv").show();
		$("#vendorDiv").show();
		$("#invoiceTypeDiv").hide();	
		$("#new1").show();
		$("#deleteChild").show();
		$("#withOutPo").prop('checked', true);
		$("#deleteChild").attr("disabled", true);
		$("#poDiv").hide();
		$("#entryD").show();
		$("#entryT").show();
		$("#transDiv").show();
		$("#vehiDiv").show();
		$("#lrDiv").show();
		$("#vendorDiv").show();
		$("#drvrDiv").show();
		$("#whlDiv").show();
		$("#dlDiv").show();
		$("#dlDateDiv").show();
		$("#insuDiv").show();
		$("#polDiv").show();
		$("#polNoDiv").show();
		$("#fitDiv").show();
		$("#rdtxDiv").show();
		$("#tckDiv").show();
		$("#depoDiv").show();
		$("#drvrNodiv").show();
		$("#myGridItem").show();
		$("#totalReq3").show();
		$("#visitD").hide();
		$("#visitT").hide();
		$("#visitN").hide();
		$("#visitA").hide();
		$("#visitP").hide();
		$("#visitTm").hide();
		$("#visitVn").hide();
		$("#visitPn").hide();
		$("#visitM").hide();
		$("#documentDetails").hide();
		$("#accordionExample2").hide();
		
		$("#poDetails").show();
		var x=$("input[type='radio'][name='checkbox1']:checked").val();
		if(x==0){
			$(".p-2").show();
		}else{
			$(".p-2").hide();
		}
	}
	gridOptionsItem.api.setRowData([]);
	$("#poNo").val("");
	closeNav();
}

function saveFile() {

	var uFile = $('#fileUpload')[0].files[0];
	var fileName = $('#fileUpload').val();
	var iURL = URL.createObjectURL(uFile);
	var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
	$("#uploadedBillDiv_").html(LightImg);
	var lastIndex = fileName.lastIndexOf("\\");
	if (lastIndex >= 0) {
		fileName = fileName.substring(lastIndex + 1);
	}
	var iURL = URL.createObjectURL(uFile);

	$('#imgLoc').attr('src', '');
	$('#imgLoc').attr('src', iURL);

	var fileData = new FormData();
	fileData.append('file', uFile);
	fileData.append('path', 'none');

	$.ajax({
		type : "POST",
		url : "gate-pass-upload-file",
		enctype : "multipart/form-data",
		contentType : false,
		data : fileData,
		processData : false,
		cache : false,
		success : function(response) {

		},
		error : function(e) {

		}
	});
}
 
function closeAllNav(){
	closeNav();
	//closeNav2();
}


function check1(fieldId) {
	var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');
	$("#" + fieldId).val(tempVal);
}

function addReceive() {
	var fieldId=$("#quantity").val();
	var idd=0;
	$("#pendingQuantity").val(fieldId);
	$("#receivingQuantity").val(fieldId);
	$("#receivedQuantity").val(idd);
}
function checkforQty(fieldId) {
	  var pending = parseFloat($("#pendingQuantity").val());
	  var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');

	  if (tempVal <= pending && tempVal > 0) {
	    $("#" + fieldId).val(tempVal);
	  } else {
	    if (tempVal == 0) {
	      $("#" + fieldId).val(null);
	    } else {
	      $("#messageParagraph").text("Please add less than or same Receiving Quantity as Pending Quantity");
	      $("#msgOkModal").removeClass("btn3");
	      $("#msgOkModal").addClass("btn1");
	      $("#msgModal").modal('show');
	      $("#" + fieldId).val(null);
	    }
	  }
	}
/ save document file /
function saveMultiFileDoc(event) {
	
	$(".formValidation").remove();
	
	
	var uFile;
	var fileName;
	
	if(event == 'cam'){
		uFile = camFile;
		fileName =camFileName ;
	}else{
		uFile = $(uploadDoc_0)[0].files[0];
		fileName = event.currentTarget.value;
	}
	
	console.log(fileName)
	var lastIndex = fileName.lastIndexOf("\\");
	if (lastIndex >= 0) {
		fileName = fileName.substring(lastIndex + 1);
	}
	var extension = fileName.split(".");
	var iURL = URL.createObjectURL(uFile);
	$("#uploadedBillDiv_0").html("");

	if (extension[1] == "jpg" || extension[1] == "png"|| extension[1] == "jpeg") {
		var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o' style='color: blue'></i></a></div>";
	}else if (extension[1] == "pdf") {
		var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o' style='color: red'></i></a></div>";
	} else {
		var LightImg = "<div class='uploadicon position-l'> </div>";
	}
	$("#uploadedBillDiv_0").html(LightImg);
	$("#imageName_0").html(fileName);
	var fileData = new FormData();
	fileData.append('file', uFile);
	fileData.append('path', 'none');
	$.ajax({
		type : "POST",
		url : "gate-pass-doc-upload-file",
		enctype : "multipart/form-data",
		contentType : false,
		data : fileData,
		processData : false,
		cache : false,
		success : function(response) {

		},
		error : function(e) {

		}
	});
	
	$('#docUploadModal').modal('hide');
	camFile = "";
	camFileName = "";
}
/* Item AutoSearch */

function getItemList() {
	var poType = $("#date").val();
	var invoiceType = $("#exitDate").val();
	var search = $("#itemName").val();
	if(invoiceType==''){
	if (search) {
		$.ajax({
					type : "POST",
					url : "gate-pass-get-item-list",
					dataType : 'json',
					contentType : 'application/json',
					data : search,
					success : function(response) {
						if (response.message == "success") {
							if (response.body.length != 0) {
								$("#itemId").val("");
								$("#gstRate").val("");
								$("#sku").val("");
								$("#brandName").val("");
								$("#brandId").val("");
								$("#hsnCode").val("");
								$("#unit").val("");
								$("#itemName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < response.body.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValueItem1(\''
											+ response.body[i].sku
											+ '\',\''
											+ response.body[i].productId
											+ '\',\''
											+ window
													.btoa(response.body[i].productName)
											+ '\',\''
											+ response.body[i].brandId
											+ '\',\''
											+ window
													.btoa(response.body[i].brandName)
											+ '\',\''
											+ window
													.btoa(response.body[i].hsnCode)
											+ '\',\''
											+ window
													.btoa(response.body[i].unit)
											+ '\',\''
											+ window
													.btoa(response.body[i].gstRate)
											+ '\')">'
											+ response.body[i].sku
											+ " - "
											+ response.body[i].productName
											+ '</li>';
								}
								content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
									+ '</li>';
								content += '</ul>';
								$("#suggesstion-box_").show();
								$("#suggesstion-box_").html(content);

							}
							else {
								$("#itemName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								content += '<li style="margin-left:-30px;font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"li onClick="selectAutocompleteValueItem()">'
										+ "No Data Found" + '</li>';
								content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
											+ '</li>';
								content += '</ul>';
								$("#suggesstion-box_").show();
								$("#suggesstion-box_").html(content);
							}
						}
					},
					error : function(data) {
						console.log(data);
					}
				})
	} else {
		$("#itemId").val("");
		$("#itemName").val("");
		$("#gstRate").val("");
		$("#sku").val("");
		$("#brandName").val("");
		$("#brandId").val("");
		$("#hsnCode").val("");
		$("#unit").val("");
		$("#suggesstion-box_").hide();
	}
	}
	else{
	if (search) {
		$.ajax({
					type : "POST",
					url : "gate-pass-get-item-listForFg",
					dataType : 'json',
					contentType : 'application/json',
					data : search,
					success : function(response) {
						if (response.message == "success") {
							if (response.body.length != 0) {
								$("#itemId").val("");
								$("#gstRate").val("");
								$("#sku").val("");
								$("#brandName").val("");
								$("#brandId").val("");
								$("#hsnCode").val("");
								$("#unit").val("");
								$("#itemName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < response.body.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValueItem1(\''
											+ response.body[i].sku
											+ '\',\''
											+ response.body[i].productId
											+ '\',\''
											+ window
													.btoa(response.body[i].productName)
											+ '\',\''
											+ response.body[i].brandId
											+ '\',\''
											+ window
													.btoa(response.body[i].brandName)
											+ '\',\''
											+ window
													.btoa(response.body[i].hsnCode)
											+ '\',\''
											+ window
													.btoa(response.body[i].unit)
											+ '\',\''
											+ window
													.btoa(response.body[i].gstRate)
											+ '\')">'
											+ response.body[i].sku
											+ " - "
											+ response.body[i].productName
											+ '</li>';
								}
								content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
									+ '</li>';
								content += '</ul>';
								$("#suggesstion-box_").show();
								$("#suggesstion-box_").html(content);

							}
							else {
								$("#itemName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								content += '<li style="margin-left:-30px;font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"li onClick="selectAutocompleteValueItem()">'
										+ "No Data Found" + '</li>';
								content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
											+ '</li>';
								content += '</ul>';
								$("#suggesstion-box_").show();
								$("#suggesstion-box_").html(content);
							}
						}
					},
					error : function(data) {
						console.log(data);
					}
				})
	} else {
		$("#itemId").val("");
		$("#itemName").val("");
		$("#gstRate").val("");
		$("#sku").val("");
		$("#brandName").val("");
		$("#brandId").val("");
		$("#hsnCode").val("");
		$("#unit").val("");
		$("#suggesstion-box_").hide();
	}
	}
}
function selectAutocompleteValueItem1(sku, productId, productName, brandId,
		brandName, hsnCode, unit, gstRate) {
	if (sku) {
		$("#sku").val(sku);
		$("#itemName").val(window.atob(productName));
		$("#itemId").val(productId);
		$("#hsnCode").val(window.atob(hsnCode));
		$("#unit").val(window.atob(unit));
		$("#itemName").attr('data-procat', itemId);
		$("#suggesstion-box_").hide();
		//hideShowS();
	} else {
		$("#sku").val("");
		$("#itemId").val("");
		$("#itemName").val("");
		$("#hsnCode").val("");
		$("#unit").val("");
		$("#itemName").attr('data-procat', "");
		$("#suggesstion-box_").hide();
	}
}
//transport Auto Search
function getTransportList() {
	
	var search = $("#transportName").val();

	if (search) {
		$.ajax({
					type : "GET",
					url : 'gate-pass-get-transport-list?searchValue='+ search,
					async : false,
					success : function(response) {
						console.log(response)
						var jsonData = JSON.parse(response.body);
						console.log(jsonData)
							if (jsonData !=null) {
							
								$("#transportName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < jsonData.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectTransportList(\''
							                   
							                     + jsonData[i].transportName
							                     + '\')">'
							                     + jsonData[i].transportName
							                     + '</li>';
							         	}
								
								content += '</ul>';
								$("#suggesstion-boxtrans_").show();
								$("#suggesstion-boxtrans_").html(content);

							} else {
								$("#transportName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								

								content += '</ul>';
								$("#suggesstion-boxtrans_").hide();
								$("#suggesstion-boxtrans_").html(content);
							}
					},
					error : function(data) {
						console.log(data);
					}
				})
	}else{
		
		$("#transportName").val("");
	$("#suggesstion-boxtrans_").hide();
	}
}

//driverName Auto Search
function getDriverList() {
	
	var search = $("#driverName").val();

	if (search) {
		$.ajax({
					type : "GET",
					url : 'gate-pass-get-driver-list?searchValue='+ search,
					async : false,
					success : function(response) {
						console.log(response)
						var jsonData = JSON.parse(response.body);
						console.log(jsonData)
							if (jsonData !=null) {
							
								$("#driverName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < jsonData.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectDriverList(\''
							                   
							                     + jsonData[i].DriverName
							                     + '\',\''
							                     + jsonData[i].DriverMob
							                     + '\',\''
							                     + jsonData[i].DLNO
							                     + '\',\''
							                     + jsonData[i].DLDate
							                     + '\')">'
							                     + jsonData[i].DriverName
							                     + '</li>';
							         	}
								
								content += '</ul>';
								$("#suggesstion-boxdriver_").show();
								$("#suggesstion-boxdriver_").html(content);

							} else {
								$("#driverName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								

								content += '</ul>';
								$("#suggesstion-boxdriver_").hide();
								$("#suggesstion-boxdriver_").html(content);
							}
					},
					error : function(data) {
						console.log(data);
					}
				})
	}else{
		
		$("#driverName").val("");
	$("#suggesstion-boxdriver_").hide();
	}
}
function selectTransportList(transportName) {
	if (transportName) {
		$("#transportName").val(transportName);
		$("#search").val(transportName);
		$("#search").attr('data-procat', transportName);
		$("#suggesstion-boxtrans_").hide();
		
	} else {
		$("#transportName").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-boxtrans_").hide();

	}
}

function selectDriverList(DriverName,DriverMob,DLNO,DLDate) {
	if (DriverName) {
		$("#driverName").val(DriverName);
		$("#driverMob").val(DriverMob);
		$("#dlNo").val(DLNO);
		$("#dlDate").val(DLDate);
		$("#search").val(DriverName);
		$("#search").attr('data-procat', DriverName);
		$("#suggesstion-boxdriver_").hide();
		
	} else {
		$("#driverName").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-boxdriver_").hide();

	}
}

//Category Auto Search
function getVehicleList() {
	
	var search = $("#vehicleNo").val();

	if (search) {
		$.ajax({
					type : "GET",
					url : 'gate-pass-get-vehicle-list?searchValue='+ search,
					async : false,
					success : function(response) {
						console.log(response)
						var jsonData = JSON.parse(response.body);
						console.log(jsonData)
							if (jsonData !=null) {
							
								$("#vehicleNo").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < jsonData.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectVehicleList(\''
							                   
							                     + jsonData[i].vehicleNo
							                     + '\',\''
							                     + jsonData[i].polutionNo
							                     + '\',\''
							                     + jsonData[i].insuranceDate
							                     + '\',\''
							                     + jsonData[i].polutionDate
							                     + '\',\''
							                     + jsonData[i].fitnessDate
							                     + '\',\''
							                     + jsonData[i].roadTax
							                     + '\')">'
							                     + jsonData[i].vehicleNo
							                     + '</li>';
							         	}
								
								content += '</ul>';
								$("#suggesstion-boxvehicle_").show();
								$("#suggesstion-boxvehicle_").html(content);

							} else {
								$("#vehicleNo").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								

								content += '</ul>';
								$("#suggesstion-boxvehicle_").hide();
								$("#suggesstion-boxvehicle_").html(content);
							}
					},
					error : function(data) {
						console.log(data);
					}
				})
	}else{
		
		$("#vehicleNo").val("");
	$("#suggesstion-boxvehicle_").hide();
	}
}
function selectVehicleList(vehicleNo,polutionNo,insuranceDate,polutionDate,fitnessDate,roadTax) {
	if (vehicleNo) {
		
		$("#vehicleNo").val(vehicleNo);
		$("#polutionNo").val(polutionNo);
		$("#insuranceDate").val(insuranceDate);
		$("#polutionDate").val(polutionDate);
		$("#fitnessDate").val(fitnessDate);
		$("#roadTax").val(roadTax);
		$("#search").val(vehicleNo);
		$("#search").attr('data-procat', vehicleNo);
		$("#suggesstion-boxvehicle_").hide();
		
	} else {
		
		$("#vehicleNo").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-boxvehicle_").hide();

	}
}

//Category Auto Search
function getDepoList() {
	
	var search = $("#depoName").val();

	if (search) {
		$.ajax({
					type : "GET",
					url : 'gate-pass-get-depo-list?searchValue='+ search,
					async : false,
					success : function(response) {
						console.log(response)
						var jsonData = JSON.parse(response.body);
						console.log(jsonData)
							if (jsonData !=null) {
							
								$("#depoName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < jsonData.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectDepoList(\''
							                   
							                     + jsonData[i].depoName
							                     + '\')">'
							                     + jsonData[i].depoName
							                     + '</li>';
							         	}
								
								content += '</ul>';
								$("#suggesstion-boxdepo_").show();
								$("#suggesstion-boxdepo_").html(content);

							} else {
								$("#depoName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								

								content += '</ul>';
								$("#suggesstion-boxdepo_").hide();
								$("#suggesstion-boxdepo_").html(content);
							}
					},
					error : function(data) {
						console.log(data);
					}
				})
	}else{
		
		$("#depoName").val("");
	$("#suggesstion-boxdepo_").hide();
	}
}
function selectDepoList(depoName) {
	if (depoName) {
		
		$("#depoName").val(depoName);
		$("#search").val(depoName);
		$("#search").attr('data-procat', depoName);
		$("#suggesstion-boxdepo_").hide();
		
	} else {
		
		$("#depoName").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-boxdepo_").hide();

	}
}

//Category Auto Search
function getVisitList() {
	
	var search = $("#visitingName").val();

	if (search) {
		$.ajax({
					type : "GET",
					url : 'gate-pass-get-visit-list?searchValue='+ search,
					async : false,
					success : function(response) {
						console.log(response)
						var jsonData = JSON.parse(response.body);
						console.log(jsonData)
							if (jsonData !=null) {
							
								$("#visitingName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								for (var i = 0; i < jsonData.length; i++) {
						content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectVisitorList(\''
							                   
							                     + jsonData[i].visitingName
							                     + '\')">'
							                     + jsonData[i].visitingName
							                     + '</li>';
							         	}
								
								content += '</ul>';
								$("#suggesstion-boxvisit_").show();
								$("#suggesstion-boxvisit_").html(content);

							} else {
								$("#visitingName").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';

								content += '</ul>';
								$("#suggesstion-boxvisit_").hide();
								$("#suggesstion-boxvisit_").html(content);
							}
					},
					error : function(data) {
						console.log(data);
					}
				})
	}else{
		
		$("#visitingName").val("");
	$("#suggesstion-boxvisit_").hide();
	}
}
function selectVisitorList(visitingName) {
	if (visitingName) {
		
		$("#visitingName").val(visitingName);
		$("#search").val(visitingName);
		$("#search").attr('data-procat', visitingName);
		$("#suggesstion-boxvisit_").hide();
		
	} else {
		
		$("#visitingName").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-boxvisit_").hide();

	}
}



function openDocUploadModal(){
	$("#docUplaodModalBody1").hide();
	$("#docUplaodModalBody").show();
	$('#docUploadModal').modal('show');
	$("#docUploadModal1").css('max-width', '500px');
	$("#entry").html("Document Upload:");
	$("#close1").hide();
	$("#close").show();
	
}
var videoStream;
var video;
function openCamera(){
	 $("#video").show();
	 $("#imagex").hide();
	 $("#upload").hide();
	 $("#retake").hide();
	 $("#capture").show();
	$("#docUplaodModalBody").hide();
	$("#docUplaodModalBody1").show();
	$("#close1").show();
	$("#close").hide();
	$("#docUploadModal1").css('max-width', '700px');
	$("#entry").html("Camera:");
	
	 video = document.getElementById("videoElement");
	 
	 navigator.mediaDevices.getUserMedia({ video: true })
	    .then(function(stream) {
	    	videoStream = stream;
	        videoElement.srcObject = stream;
	    })
	    .catch(function(error) {
	      console.error("Error accessing camera: ", error);
	    });
	
	 
}

function stopCamera(){
	if (videoStream) {
	    var tracks = videoStream.getVideoTracks();
	    tracks.forEach(function(track) {
	      track.stop();
	    });
	  }
	$('#docUploadModal').modal('hide');
	camFile = "";
	camFileName = "";
}
var camFile;
var camFileName;
function capture(){
	camFile = "";
	camFileName = "";
	var canvas = document.createElement("canvas");
	canvas.width = video.videoWidth;
    canvas.height = video.videoHeight;
    canvas.getContext("2d").drawImage(video, 0, 0, canvas.width, canvas.height);

    var imageDataURL = canvas.toDataURL("image/png");
    var blob = dataURLtoBlob(imageDataURL);

   var file = new File([blob], "IMG"+new Date().getTime()+".png", { type: blob.type });
console.log(file);
camFile = file;
camFileName = "IMG"+new Date().getTime()+".png";
  //  var filesList = createFileList(file);

    //uploadInput.files = filesList;
   // uploadButton.style.display = "inline";

    // Optionally, display the captured image on the web page
    var imageElement = document.createElement("img");
    imageElement.src = URL.createObjectURL(file);
    imageElement.height=350;
   $("#video").hide();
    $("#imagex").show();
    $("#imagex").html(imageElement); 
    //document.body.appendChild(imageElement); 
    if (videoStream) {
	    var tracks = videoStream.getVideoTracks();
	    tracks.forEach(function(track) {
	      track.stop();
	    });
	  }
    $("#upload").show();
	 $("#retake").show();
	 $("#capture").hide();
}
function dataURLtoBlob(dataURL) {
    var parts = dataURL.split(",");
    var contentType = parts[0].match(/:(.*?);/)[1];
    var base64Data = atob(parts[1]);
    var arrayBuffer = new ArrayBuffer(base64Data.length);
    var uint8Array = new Uint8Array(arrayBuffer);
    for (var i = 0; i < base64Data.length; i++) {
      uint8Array[i] = base64Data.charCodeAt(i);
    }
    return new Blob([arrayBuffer], { type: contentType });
  }
  
function createFileList(...files) {
    const dataTransfer = new DataTransfer();
    files.forEach((file) => {
      dataTransfer.items.add(file);
    });
    return dataTransfer.files;
  }
  
 function retake(){
	 openCamera();
	 $("#imagex").html("");
	 camFile = "";
	camFileName = "";
 }

</script>
<style>
.form-check-input::before {
	display: none !important;
}

.lbl {
	padding-left: 10px;
}
</style>
</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="d-flex ">
				<div class="maincontentsec">
					<div class="row" id="sDiv">
						<input type="hidden" id="activeStatus"> <input
							type="hidden" id="entryId">
						<div class="btn-group col-md-6">
							<button class="btn btn-primary" id="gateInDetails"
								onclick="viewGateInDetails()">Gate In</button>
						</div>
						<div class="btn-group col-md-6">
							<button class="btn btn-primary" id="gateOutDetails"
								onclick="viewGateOutDetails()">Gate Out</button>
						</div>

					</div>

					<div class="d-flex justify-content-between mt-4" id="sDiv1">
						<input type="hidden" id="rowId" />
						<div class="col-md-2 btn-hs" id="totalReq">
							Gate In List(<span></span>)
						</div>
						<div class="col-md-2 btn-hs" id="totalReq1">
							Gate Out List(<span></span>)
						</div>
						<div class="col-md-3  btn-hs" id="searchDiv1">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar1()"
									oninput="onQuickFilterChanged()" id="quickFilter1"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript:void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
										id="closeKey1"
										onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter1').val('');document.getElementById('closeKey1').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>

						</div>
						<div class="col-md-3  btn-hs" id="searchDiv2">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar2()"
									oninput="onQuickFilterChanged1()" id="quickFilter2"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript: void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
										id="closeKey2"
										onclick="gridOptions1.api.setQuickFilter(null);$('#quickFilter2').val('');document.getElementById('closeKey2').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>
						</div>

						<div class="row">
							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="download"
									onclick="downloadGateInDetails()">Download</button>
								<button class="new-btn" id="newGateIn" onclick="newGateIn();">New</button>
								<button class="delete-btn" id="deleteGateIn"
									onclick="deleteGateIn();">Delete</button>
								<button class="new-btn" id="approveGateIn"
									onclick="approveGateIn();">Approve</button>
								<button class="new-btn" id="gateoutDtls"
									onclick="addGateOutDtls()">Gate-Out</button>

							</div>

							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="download1"
									onclick="downloadGateOutDetails()">Download</button>
								<!-- <button class="new-btn" id="newGateOut" onclick="newGateOut()">New</button> -->
								<button class="delete-btn" id="deleteGateOut"
									onclick="deleteGateOut()">Delete</button>
								<button class="new-btn" id="approveGateOut"
									onclick="approveGateOut()">Approve</button>
							</div>

						</div>
					</div>
					<div class="collapse" id="demo">
						<div class="innercontent">
							<div class="innerstickybg">
								<div class="row">

									<div class="col-md-5" id="idDiv">
										ENTRY ID : <span id="getPassEntryId"></span>
									</div>
									<div class="col-md-3" id="idDiv1">
										<div class="font-design">Gate Pass Entry Details</div>

									</div>

									<div class="col-md-5" id="idDiv2">
										Exit ID : <span id="getPassExitId"></span>
									</div>
									<div class="col-md-3" id="idDiv3">
										<div class="font-design">Gate Pass Exit Details</div>

									</div>
									<div class="col-md-4" id="exit">
										<button class="approve-btn" id="mainsave"
											onclick="addEntryDetails()">Save</button>
										<button class="cancel-btn" id="cancel"
											onclick="cancelNewGateIn()">Cancel</button>
									</div>
									<div class="col-md-4" id="exit1">
										<button class="approve-btn" id="mainsave1"
											onclick="addExitDetails()">Save</button>
										<button class="cancel-btn" id="cancel"
											onclick="cancelNewGateOut()">Cancel</button>
									</div>


								</div>
							</div>

							<input type="hidden" id="getPassExitId" /> <input type="hidden"
								id="getPassEntryId" /> <input type="hidden" id="rowId" />

							<div class="row">
								<div class="col-lg-6" id="typeDiv">
									<div class="form-group">
										<label>Type</label>
										<div class="select">
											<select id="type" class="form-control"
												onblur="removeValid(event)" onchange="entryType()">
												<option value="">--Select--</option>
												<option value="loading">Loading</option>
												<option value="unloading">Unloading</option>
												<option value="both">Loading & Unloading</option>
												<option value="visiting">Visiting</option>
											</select>
										</div>
									</div>
								</div>
								<!-- <div class="col-md-6" id="poTypeDiv">
										<div class="form-group">
										<label for="Yes">
										<input type="radio" id="Yes" value="1" name="advanceReq" />
										With-Po
											<label for="No"> <input type="radio" id="No"
												value="0" name="advanceReq" checked  /> WithOut-Po
											</label>
										</div>
							</div> -->

								<div class="col-lg-4 mt-4" id="poTypeDiv">
									<div class="form-group">
										<div class="row mrtop" id="poDetails">
											<div class="col-md-5">
												<div class="radio-align">
													<span><input type="radio" id="withOutPo" value="0"
														checked name="checkbox1" onclick="openModal(0)"></span> <label
														class="lbl">Without Po</label>
												</div>
											</div>
											<div class="col-md-4">
												<div class="radio-align">
													<span><input type="radio" id="withPo" value="1"
														name="checkbox1" onclick="openModal(1)"></span> <label
														class="lbl">With Po</label>
												</div>
											</div>
										</div>

									</div>
								</div>

								<div class="col-lg-4 mt-4" id="invoiceTypeDiv">
									<div class="form-group">
										<div class="row mrtop" id="invoiceDetails">
											<div class="col-md-5">
												<div class="radio-align">
													<span><input type="radio" id="withOutInvoice"
														value="0" checked name="checkbox" onclick="openModal1(0)"></span>
													<label class="lbl">Without Invoice</label>
												</div>
											</div>
											<div class="col-md-4">
												<div class="radio-align">
													<span><input type="radio" id="withInvoice" value="1"
														name="checkbox" onclick="openModal1(1)"></span> <label
														class="lbl">With Invoice</label>
												</div>
											</div>
										</div>

									</div>
								</div>

							</div>
							<div class="row">
								<div class="col-md-3" id="poDiv">
									<div class="form-group">
										<label>Purchase Order No</label>
										<div class="select">
											<select onblur="removeValid(event)" id="poNo"
												class="form-control" onchange="getVendorandItemDetails()">
												<option value="">--Select--</option>
												<option th:each="c:${pOrderIdList}" th:value="${c.key}"
													th:text="${c.key}"></option>
											</select>
										</div>
									</div>
								</div>



								<div class="col-md-3" id="poExitDiv">
									<div class="form-group">
										<label>Sales Invoice No</label>
										<div class="select">
											<select onblur="removeValid(event)" id="poExitNo"
												onchange="getItemDetailsForExit()">
												<option value="">--Select--</option>
												<option th:each="c:${pOrderIdListForExit}"
													th:value="${c.key}" th:text="${c.key}"></option>
											</select>
										</div>
									</div>
								</div>

								<!-- <div class="col-md-3" id="chalanDiv">
									<div class="form-group">
										<label>Challan No.</label> <input type="text"
											class="form-control" id="challanNo" autocomplete="off" />
									</div>
								</div>
 -->
								<div class="col-md-3" id="entryD">
									<div class="form-group calendar_box">
										<label>Entry Date</label> <input type="text" id="date"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('date','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar"></i>
									</div>
								</div>
								<div class="col-md-3" id="entryT">
									<div class="form-group calendar_box">
										<label>Entry Time</label> <input type="text" id="time"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('time','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-time picker_calendar"
											id="toDateCalendarTime"></i>
									</div>
								</div>

								<div class="col-md-3" id="exitD">
									<div class="form-group calendar_box">
										<label>Exit Date</label> <input type="text" id="exitDate"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('exitDate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar1"></i>
									</div>
								</div>
								<div class="col-md-3" id="exitT">
									<div class="form-group calendar_box">
										<label>Exit Time</label> <input type="text" id="exitTime"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('exitTime','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-time picker_calendar"
											id="toDateCalendarTime1"></i>
									</div>
								</div>
								<div class="col-md-3" id="vendorDiv">
									<div class="form-group">
										<label>Vendor Name</label> <input type="text"
											class="form-control" id="vendorName" autocomplete="off" />
									</div>
								</div>
								<div class="col-md-3" id="customerDiv">
									<div class="form-group">
										<label>Customer Name</label> <input type="text"
											class="form-control" id="customerName" autocomplete="off" />
									</div>
								</div>

								<div class="col-md-3" id="transDiv">
									<div class="form-group">
										<div class="autocomplete">
											<label>Transport Name</label> <input type="text"
												id="transportName" class="form-control" autocomplete="off"
												onkeyup='getTransportList()' onblur="removeValid(event)">
										</div>
										<div id="suggesstion-boxtrans_" class="sugg-cls"></div>
									</div>
								</div>
								<!-- <div class="col-md-3" id="vendorDiv">
									<div class="form-group">
										<label>Vender Name</label> <input type="text"
											class="form-control" id="vender" autocomplete="off" />
									</div>
								</div> -->
								<input type="hidden" id="vendorId">

								<div class="col-md-3" id="vehiDiv">
									<div class="form-group">
										<div class="autocomplete">
											<label>Vehicle No</label> <input type="text" id="vehicleNo"
												class="form-control" autocomplete="off"
												onkeyup='getVehicleList()' onblur="removeValid(event)">
										</div>
										<div id="suggesstion-boxvehicle_" class="sugg-cls"></div>
									</div>
								</div>
								<div class="col-md-3" id="lrDiv">
									<div class="form-group">
										<label>LR No</label> <input type="text" class="form-control"
											id="lrNo" autocomplete="off" />
									</div>
								</div>
								<div class="col-md-3" id="drvrDiv">
									<div class="form-group">
										<div class="autocomplete">
											<label>Driver Name</label> <input type="text" id="driverName"
												class="form-control" autocomplete="off"
												onkeyup='getDriverList()' onblur="removeValid(event)">
										</div>
										<div id="suggesstion-boxdriver_" class="sugg-cls"></div>
									</div>
								</div>

								<div class="col-md-3" id="drvrNodiv">
									<div class="form-group">
										<label>Driver Mobile</label> <input type="text"
											class="form-control" id="driverMob" autocomplete="off"
											onkeyup="check1('driverMob')" maxLength="10">
									</div>
								</div>

								<div class="col-md-3" id="whlDiv">
									<div class="form-group">
										<label>No.Of Wheel</label>
										<div class="select">
											<select onblur="removeValid(event)" id="noOfWheel"
												class="form-control">
												<option value="null">--Select--</option>
												<option th:each="c:${noOfwheelerList}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>
								</div>
								<div class="col-md-3" id="dlDiv">
									<div class="form-group">
										<label>DL No.</label> <input type="text" class="form-control"
											id="dlNo" autocomplete="off" />
									</div>
								</div>

								<div class="col-md-3" id="dlDateDiv">
									<div class="form-group calendar_box">
										<label>DL Date</label> <input type="text" id="dlDate"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('dlDate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar2"></i>
									</div>
								</div>

								<div class="col-md-3" id="insuDiv">
									<div class="form-group calendar_box">
										<label>Insurance Date</label> <input type="text"
											id="insuranceDate" class="form-control"
											onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('insuranceDate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar3"></i>
									</div>
								</div>
								<div class="col-md-3" id="polNoDiv">
									<div class="form-group">
										<label>Pollution No.</label> <input type="text"
											class="form-control" id="polutionNo" autocomplete="off" />
									</div>
								</div>
								<div class="col-md-3" id="polDiv">
									<div class="form-group calendar_box">
										<label>Pollution Date</label> <input type="text"
											id="polutionDate" class="form-control"
											onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('polutionDate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar4"></i>
									</div>
								</div>

								<div class="col-md-3" id="fitDiv">
									<div class="form-group calendar_box">
										<label>Fitness Date</label> <input type="text"
											id="fitnessDate" class="form-control"
											onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('fitnessDate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar5"></i>
									</div>
								</div>
								<div class="col-md-3" id="rdtxDiv">
									<div class="form-group calendar_box">
										<label>Road Tax Valid</label> <input type="text" id="roadTax"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('roadTax','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar6"></i>
									</div>
								</div>
								<div class="col-md-3" id="tckDiv">
									<div class="form-group">
										<label>Truck Seal</label> <input type="text"
											class="form-control" id="truckSeal" autocomplete="off" />
									</div>
								</div>

								<div class="col-md-3" id="depoDiv">
									<div class="form-group">
										<div class="autocomplete">
											<label>DEPO Name</label> <input type="text" id="depoName"
												class="form-control" autocomplete="off"
												onkeyup='getDepoList()' onblur="removeValid(event)">
										</div>
										<div id="suggesstion-boxdepo_" class="sugg-cls"></div>
									</div>
								</div>
								<div class="col-md-3" id="visitD">
									<div class="form-group calendar_box">
										<label>Date</label> <input type="text" id="visitdate"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('visitdate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="DateCalendar7"></i>
									</div>
								</div>
								<div class="col-md-3" id="visitT">
									<div class="form-group calendar_box">
										<label>Time</label> <input type="text" id="visittime"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('visittime','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-time picker_calendar"
											id="toDateCalendarTime2"></i>
									</div>
								</div>

								<div class="col-md-3" id="visitN">
									<div class="form-group">
										<div class="autocomplete" style="width: 330px;">
											<label>Name</label> <input type="text" id="visitingName"
												class="form-control" autocomplete="off"
												onkeyup='getVisitList()' onblur="removeValid(event)">
										</div>
										<div id="suggesstion-boxvisit_" class="sugg-cls"></div>
									</div>
								</div>
								<div class="col-md-3" id="visitA">
									<div class="form-group">
										<label>Address</label>
										<textarea class="form-control" id="visitingAddress"
											autocomplete="off"></textarea>
									</div>
								</div>

								<div class="col-md-3" id="visitP">
									<div class="form-group">
										<label>Purpose</label>
										<textarea class="form-control" id="visitingPurpose"
											autocomplete="off"></textarea>
									</div>
								</div>
								<div class="col-md-3" id="visitTm">
									<div class="form-group">
										<label>To Meet</label> <input type="text" class="form-control"
											id="visitingTomeet" autocomplete="off" />
									</div>
								</div>
								<div class="col-md-3" id="visitPn">
									<div class="form-group">
										<label>Pass No</label> <input type="text" class="form-control"
											id="visitingPassno" autocomplete="off" />
									</div>
								</div>
								<div class="col-md-3" id="visitM">
									<div class="form-group">
										<label>Mobile</label> <input type="text" class="form-control"
											id="visitingMobile" autocomplete="off"
											onkeyup="check1('visitingMobile')" maxLength="10" />
									</div>
								</div>
								<div class="col-md-3" id="visitImg">
									<label style="margin-bottom: 10px;">Document</label>

									<div class="control-group position-r">
										<label class="custom-file-upload"
											style="margin-top: 0px;"> <i
											class="bi bi-cloud-arrow-up" onclick="openDocUploadModal()"></i>
										</label>
										<div class="controls">
											<input type="file" class="document" id="uploadDoc_0"
												accept=".jpeg, .jpg, .png, .pdf" name="userImage"
												onchange="saveMultiFileDoc(event)" />
										</div>
									</div>
									<input type="hidden" id="uploadHidden_0" class="uploadHidCls">
									<div id="uploadedBillDiv_0" align="center"
										class="uploadedBillCls" style="margin-top: 0px;"></div>
									<div id="imageName_0" class="imageName"
										style="max-width: 150px;"></div>
									<div id="validationDiv"></div>
								</div>

							</div>



							<div id="deleteAttachment" class="modal fade show"
								aria-modal="true">
								<div class="modal-dialog modal-confirm">
									<div class="modal-content">
										<div class="modal-header flex-column">
											<button type="button" class="close" data-dismiss="modal"
												aria-hidden="true" onclick="closeDeleteConfirm()">
												<i class="ti-close modal-close"></i>
											</button>
										</div>
										<div class="modal-body">
											<p>Do you really want to delete these records? This
												process cannot be undone.</p>
											<input type="hidden" id="dltValue">
										</div>
										<div class="modal-footer justify-content-center">

											<button type="button" class="cancel-btn" data-dismiss="modal"
												onclick="closeDeleteConfirm()">Cancel</button>
											<button type="button" class="delete-btn"
												onclick="deletAttachmentRow()">Delete</button>
										</div>
									</div>
								</div>
							</div>
							<!----------------------- side nav---------------------- -->

							<div class="d-flex justify-content-between flex-vcenter mt-4">
								<div>
									<div class="font-design" id="totalReq3">Item Details</div>
								</div>
								<div class="p-2">
									<button class="delete-btn" id="deleteChild"
										onclick="deleteDetailsOnclick()">DELETE</button>
									<button class="new-btn" id="new1" onclick="openNav()">NEW</button>

								</div>
							</div>
							<div id="mySidenav" class="sidenav">
								<div class="slidebox">
									<div class="row">
										<div class="chartbtnsec">
											<div align="right">
												<button class="cancel-btn" onclick="closeNav()">CANCEL</button>
												<button class="approve-btn" id="saveTableData"
													onclick="saveTableData()">SAVE</button>

											</div>
										</div>


										<div class="col-lg-12">
											<div class="form-group">
												<div class="autocomplete">
													<input type="hidden" id="editProduct"> <input
														type="hidden" id="itemId"> <label>Item
														Name</label> <input type="text" id="itemName"
														onblur="removeValid(event)" class="form-control"
														autocomplete="off" placeholder="Search.."
														onkeyup='getItemList()'>
												</div>
												<div id="suggesstion-box_" class="sugg-cls"></div>
											</div>
										</div>
										<!-- 			<div class="col-lg-6">
											<div class="form-group">
												<div class="autocomplete" >
													<input type="hidden" id="editProduct"> <label>Item
														Name</label> <input type="text" id="itemName"
														 placeholder="Search.." class="form-control" onkeyup='getItemQutotationList()'>
												</div>
											</div>
										</div> -->

										<div class="col-lg-6">
											<div class="form-group">
												<div class="autocomplete">
													<input type="hidden" id="itemId"> <label>SKU/Item
														Code</label> <input type="text" id="sku" class="form-control"
														readonly>
												</div>
											</div>
										</div>


										<div class="col-lg-6">
											<div class="form-group">
												<div class="autocomplete" style="width: auto">
													<label>HSN Code </label> <input type="text" id="hsnCode"
														class="form-control" readonly>
												</div>
											</div>
										</div>


										<div class="col-lg-6" id="unitDiv">
											<div class="form-group">
												<label>Unit</label> <select id="unit" class="form-control"
													onblur="removeValid(event)">
													<option value="">Select</option>
													<option th:each="c,iter:${unitList}" th:value="${c.key} "
														th:text="${c.name}"></option>
												</select>
											</div>
										</div>


										<div class="col-lg-6">
											<div class="form-group">
												<label>Quantity</label> <input type="text" id="quantity"
													class="form-control" onkeyup="addReceive()">
											</div>
										</div>
										<div class="col-lg-6">
											<div class="form-group">
												<label>Total Price</label><input type="text" id="lineTotal"
													class="form-control">
											</div>
										</div>
										<div class="col-lg-6" id="pendingQuantityDiv">
											<div class="form-group">
												<label>Pending Quantity</label> <input type="text"
													id="pendingQuantity" class="form-control" readonly>
											</div>
										</div>
										<div class="col-lg-6" id="receivingQuantityDiv">
											<div class="form-group">
												<label>Receiving Quantity</label><input type="text"
													id="receivingQuantity" class="form-control"
													onkeyup="checkforQty('receivingQuantity')" readonly>

											</div>
										</div>

										<div class="col-lg-6" id="receivedQuantityDiv">
											<div class="form-group">
												<label>Received Quantity</label> <input type="text"
													id="receivedQuantity" class="form-control" readonly>
											</div>
										</div>

										<div class="col-lg-6">
											<div class="form-group">
												<label>Challan/Invoice No</label> <input type="text"
													id="challanNo" class="form-control">
											</div>
										</div>



										<div class="col-md-6">
											<div class="form-group calendar_box">
												<label>Challan/Invoice Date</label> <input type="text"
													id="challanDate" class="form-control"
													onblur="removeValid(event)"
													th:attr="onkeyup=|formatDate('challanDate','${session.DATEFORMAT_JS}')|"
													readonly> <i class="ti-calendar picker_calendar"
													id="DateCalendar8"></i>
											</div>
										</div>



										<div class="col-lg-12">
											<div class="form-group">
												<label>Description</label>
												<textarea id="descriptionItem" class="form-controls"
													style="height: 50px;"> </textarea>

											</div>
										</div>



										<input type="hidden" id="gstRateTemp" />


									</div>
								</div>
							</div>

							<div id="myGridItem" style="width: 100%; height: 250px;"
								class="ag-theme-alpine"></div>
						</div>
					</div>

					<!-- approve gate-in modal start -->

					<div id="approveGateInModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to approve this gate in</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -10px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelApproveModalBtn();">No</button>
									<button type="button" class="approve-btn"
										onclick="approveGateInOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div>

					<!-- approve gate-out modal start -->

					<div id="approveGateOutModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to approve this gate out</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelApproveModalBtn1();">No</button>
									<button type="button" class="approve-btn"
										onclick="approveGateOutOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div>

					<!-- delete modal start for gate-in -->

					<div id="deleteGateinModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteGateInOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- delete modal start for gate-out -->

					<div id="deleteGateOutModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn1()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn1();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteGateOutOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- document upload modal start for gate-out -->

					<!-- <div id="docUploadModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm" style="max-width: 1100px">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to approve this gate out</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelApproveModalBtn1();">No</button>
									<button type="button" class="approve-btn"
										onclick="approveGateOutOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div> -->

					<div class="modal fade" id="docUploadModal">
						<div class="modal-dialog modal-lg" style="max-width: 500px" id="docUploadModal1">
							<div class="modal-content" style="width: 100%">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title" style="font-size: 16px" id="entry">
										<b>Document Upload: <span></span></b>
									</h4>
									<button id="close" type="button" class="btn btn-danger"
										data-bs-dismiss="modal">
										<i class="bi bi-x-lg"></i>
									</button>
									<button id="close1" type="button" class="btn btn-danger" onclick="stopCamera()">
										<i class="bi bi-x-lg"></i>
									</button>
								</div>
								<!-- Modal body -->
								<div class="modal-body" id="docUplaodModalBody"
									style="height: 200px; overflow-y: scroll;">
									<div class="vertical-line">

										<div>
											<div class="d-flex justify-content-around"
												style="padding: 0px 60px;">
												<div>
													<button
														style="font-size: 24px; padding: 20px; border: none; border-radius: 5px;" onclick="openCamera()">
														<i class="fa fa-camera"
															style="font-size: 80px; color: gray;"
															onmouseover="this.style.color='blue';"
															onmouseout="this.style.color='gray';"></i>
													</button>
													<label
														style="display: block; text-align: center; margin-top: 2px;">Camera
													</label>
												</div>
												<div>
													<label class="custom-file-upload" for="uploadDoc_0"
															style="font-size: 24px; padding: 20px; border: none; border-radius: 5px; background-color: buttonface;" >

															<i class="fa fa-upload"
																style="font-size: 80px; color: gray"
																onmouseover="this.style.color='blue';"
																onmouseout="this.style.color='gray';"></i>
														</label> 
														 <label
														style="display: block; text-align: center; margin-top: 2px;">Document
													</label>
												</div>
											</div>
										</div>


									</div>
								</div>
								<div id="docUplaodModalBody1">
								<div class="modal-body" 
									style="height: 400px; overflow-y: scroll;">
									<div class="vertical-line">

										<div class="d-flex justify-content-center" >
										<div id="video">
											<video  autoplay="true" id="videoElement" style="height: 350px;"></video>
											</div>
											<div id="imagex" style="height: 350px;">
											
											</div>
										</div>


									</div>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: 0px;">
									<button type="button" class="approve-btn" id= "upload" onclick="saveMultiFileDoc('cam')"
										>Upload</button>
									<button type="button" class="cancel-btn" data-dismiss="modal" id="retake"
										onclick="retake();">Retake</button>
									<button type="button" class="approve-btn" id="capture"
										onclick="capture()">Capture</button>
								</div>
								</div>
							</div>
						</div>
					</div>


					<!-- <input type="hidden" id="sessionId" th:value="${userId}"> -->
					<div class="row">
						<div id="myGrid" style="width: 100%; height: 500px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGrid1" style="width: 100%; height: 500px;"
							class="ag-theme-alpine"></div>
					</div>


				</div>
			</div>
		</div>
	</div>
</body>
</html>
