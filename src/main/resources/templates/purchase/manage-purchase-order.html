<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">

<head>
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

.autocomplete {
	position: relative;
	display: inline-block;
	width: 100%;
}

a.addCustnew {
	color: #fff;
	font-size: 13px !important;
}

/* ul li {
	margin: 0 !important;
	padding: 0 !important;
}

ul li p {
	margin: 0 !important;
	padding: 0 !important;
}
 */
.approve-btn1 {
	border: none;
	border-radius: 4px;
	font-size: 11px;
	background-color: #264c82;
	color: #fff;
	margin-left: 5px;
	text-transform: uppercase;
	width: 50px;
	height: 28px;
	line-height: 12px;
	float: right;
	text-transform: uppercase;
	cursor: pointer;
	white-space: normal;
}

.modal-content1 {
	position: relative;
	display: flex;
	flex-direction: column;
	width: 120%;
	pointer-events: auto;
	background-color: #fff;
	background-clip: padding-box;
	border: 1px solid rgba(0, 0, 0, .2);
	border-radius: 0.3rem;
	outline: 0;
}

.btn-primarynew {
	color: #fff !important;
	background-color: #0d6efd;
	border-color: #0d6efd;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

.form-group label {
	font-size: 12px;
	position: relative;
	top: 4px;
}

.holdCls {
	background-color: rgb(0, 143, 0);
}

.bg_white {
	background: #ffffff !important;
}

.blueClsWT {
	background: #0076ba;
	color: #fff;
}

.blueCls {
	background: #0076ba;
	color: #fff;
}

.blueClsWT::before {
	font-size: 8px;
	color: #FFF;
	content: '\e64c';
	font-family: 'themify';
	padding-right: 7px;
}
.modalbtn {
    width: auto!important;
    font-size: 11px!important;
    float: left!important;
    margin-left: 0!important;
    font-weight: 100;
}
.sugg-cls ul {
	height: 150px;
	overflow-x: scroll;
	position: relative;
}

.modal-body table td input[type=checkbox] {
	width: 0px;
	margin-right: 16px;
	position: relative;
	top: 0px;
	float: none;
}

.sugg-cls ul {
	height: 150px;
	overflow-x: scroll;
	position: relative;
}

ul#autocomplete-list1 {
	position: relative;
	z-index: 999;
}

ul#autocomplete-list1 li {
	position: relative;
	color: #fff;
	padding-left: 6px;
	background-color: #1f57a8;
	border-bottom: solid 1px #6189c2;
	padding-top: 5px;
	padding-bottom: 5px;
}

a.addCust {
	color: #fff;
}

.firstnode {
	color: #929292;
	border-top: 1px solid transparent !important;
	border-left: 1px solid transparent !important;
	border-bottom: 1px solid transparent !important;
	width: 320px;
	font-size: 12px;
	font-weight: 100;
}

.simple-tree-table-closed .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
	transform: rotate(90deg);
}

.simple-tree-table-opened .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
}

.simple-tree-table-icon {
	display: inline-block;
	width: 1.5em;
	line-height: 1.5em;
	margin: 0.1em;
	background-color: transparent;
	text-align: center;
	cursor: pointer;
}

.tptCls {
	background: transparnt;
}

.picker_calendar2 {
	cursor: pointer;
	position: absolute;
	top: 38px;
	right: 13px;
}

.font-small {
	font-size: 13px;
}

.billtxt {
	color: #777 !important;
	font-size: 14px;
	margin-top: 10px;
	text-transform: uppercase;
	display: block;
}

.fa {
	display: inline-block;
	font: normal normal normal 14px/1 FontAwesome;
	font-size: inherit;
	text-rendering: auto;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}
/* .btn-primarynew {
    color: #fff!important;
    background-color: #0d6efd;
    border-color: #0d6efd;
} */
/* .preserve-wrap{
display:none;
}
.preserve-wrap1{
display:block;
} */
.form-controls {
	font-family: 'Montserrat', sans-serif;
	display: block;
	width: 100%;
	font-size: 12px;
	color: #929292;
	background-color: transparent;
	background-clip: padding-box;
	border: 1px solid #d5d5d5;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
	line-height: 30px;
	border-radius: 0;
	padding: 0;
}

label.lbl {
	position: relative;
	top: -2px !important;
}

.mrtop {
	margin-top: 5px;
}
</style>
<script>
	$(document)
			.ready(

					function() {
						
						$("#organatioModal").show();
						$("#customerModal").hide();

						$("#documentDetails").hide();
						$('#docTbl').on('click', '.rmv1', function() {
							openDeleteConfirm();
							var value = $(this).parent("div").attr("id");
							$("#dltValue").val(value);
						});
						var gridDiv = document.querySelector('#myGrid');
						new agGrid.Grid(gridDiv, gridOptions);

						var gridDiv = document.querySelector('#item');
						new agGrid.Grid(gridDiv, itemOptions);

					
						//var Organization=sessionStorage.getItem("ORGANIZATION")
						$("#toDateCalendarDt").hide();
						$("#Cancel").hide();
						$("#addData").hide();
						$("#save").hide();

						$('#delete').attr("disabled", true);
						$('#closePurchaseorder').attr("disabled", true);

						$("#Cancel").click(function() {
							$('.loader').show();
							$("body").addClass("overlay");
							$("#reqTable").show();
							$(".btn-hs").show();
							$("#myGrid").show();
							$("#addData").hide();
							agGrid.simpleHttpRequest({
								url : "manage-purchase-order-through-ajax"
							}).then(function(data) {
								var len = data.length;
								$('#totalCandidate').find('span').html(len);
								gridOptions.api.setRowData(data);
							});
							 
							$("#poId").val('');
							$("#pohedId").html('');
							$("#reference").val('');
							$("#vendorId").val('');
							$("#vendorName").val('');
							$("#custGSTNo").val('');
							$("#qutValidDate").val('');
							$("#qutDescription").val('');
							$("#qutActive").val('');
							$("#qutUpdatedOn").val('');
							$("#itemId").val('');
							$("#itemName").val('');
							$("#quantity").val('');
							$("#unitPrice").val('');
							$("#discount").val('');
							$("#gstRate").val('');
							$("#lineTotal").val('');
							$("#subTotal").val('');
							$("#qIGST").val('');
							$("#qCGST").val('');
							$("#qSGST").val('');
							$("#grandTotal").val('');
							$("#taxType").val('');
							$("#sku").val('');
							$("#itemIgst").val();
							$("#itemCgst").val();
							$("#itemSgst").val();

							$('.loader').hide();
							$("body").removeClass("overlay");
						});
						gridOptions.api.setRowData();
						itemOptions.api.setRowData();
						
						agGrid.simpleHttpRequest({
							url : "manage-purchase-order-through-ajax"
						}).then(function(data) {
							var len = data.length;
							$('#totalCandidate').find('span').html(len);
							gridOptions.api.setRowData(data);
						});
						var dateFormat = localStorage.getItem("dateFormat");

						$("#toDateCalendar").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							minDate : new Date(),
							timepicker : false,
						}).on("change", function() {
							$('#qutValidDate').val($(this).val());
						})

						$('#qutValidDate').blur(function() {
							$("#toDateCalendar").val($(this).val());
						})

						$("#toDateCalendarpurchaseDate").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
						}).on("change", function() {
							$('#purchaseDate').val($(this).val());
						})

						$('#purchaseDate').blur(function() {
							$("#toDateCalendarpurchaseDate").val($(this).val());
						})

						$("#toDateCalendarDt").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
						}).on("change", function() {
							$('#poDate').val($(this).val());
						})

						$('#poDate').blur(function() {
							$("#toDateCalendarDt").val($(this).val());
						})

						$('#approvePorder').attr("disabled", true);
						//$('#excelupload').attr("disabled", true);
						$("#igstTR").hide();
						  $("#categoryBtn").click(function(){
						    	
						    	//closeModal();
						    	$("#myModall").modal('show');
						    	$('#addItemModel').modal('hide');
						    	getCategoryList();
						    	
						    })
						$("#browseBtn").click(function() {
							$("#itemName").val(null);
							$("#hsnCode").val(null);
							$("#unit").val(null);
							$("#itemNameTemp").val(null);
							$("#hsnCodeTemp").val(null);
							$("#unitTemp").val(null);
							$("#suggesstion-box_").hide();
							$("#myModal").modal('show');
							})
							
							$("#saveSKUData").click(function(){
    	
    	obj = {};
    	
    	obj.isEdit = $("#isEdit").val();
    	obj.productId = $("#productId").val();
    	obj.sku = $("#skuId").val();
    	obj.model = $("#model").val();
    	obj.manufacture = $("#manufacture").val();
    	obj.variationType = $("#variationType").val();
    	obj.variationValue = $("#variationValue").val();
    	obj.unit = $("#itemUnit").val();
    	var price = $("#salePrice").val();
    	price = price.replaceAll(",","");
    	obj.salePrice = price;
    	obj.saleTax = $("#saleTax").val();
    	obj.saleCess = $("#saleCess").val();
    	
    	$(".formValidation").remove();
		allValid = true;
	
		if( obj.manufacture == null || obj.manufacture == ""){
			allValid = false;
			validationModal("Item Name Required","manufacture");
		} 
		if( obj.unit == null || obj.unit == ""){
			var mode = $("#mode").val();
			if (mode=="PMODE00004"){
				allValid = true;
			}else{
				allValid = false;
				validationModal("UOM Required","itemUnit");
			}
		} 
		if( obj.salePrice == null || obj.salePrice == ""){
			allValid = false;
			validationModal("Sale Price Required","salePrice");
		}    	
		if(allValid) {
			submitProductDetails(obj);
		}    	
    })
      $("#selectCategory").click(function(){ 
    	  $('#addItemModel').modal('show');  
    	var id = $("#tempCategoryId").val();
		var lvl = $("#prLevelId").val();		
		if(id && lvl) {
			$("#prCategoryId").val(id);
			if(lvl == 'L1') {
				var textDesc = $("#lbl_"+id).text();
				$("#catDesc").text(textDesc);
			} else {
				var res = lvl.substring(1, 1000000);
				
				var lastText = $("#lbl_"+id).text();
				var textDesc = "";
				for(i = res; i > 1; i--) {
					var pUL = $("#"+id).attr("data-node-pid");
					//pUL = pUL.substring(3, 10000000000000);
					var newText = $("#lbl_"+pUL).text();
					console.log(newText+" "+i)
					textDesc =  newText+" > "+textDesc ; 
					id = pUL;
				}
				textDesc = textDesc + lastText;
				$("#catDesc").html(textDesc);
			}
		}
		$("#myModall").modal("hide");
		closeModall();
    })
						var dateFormat = localStorage.getItem("dateFormat");

						$("#dobidCalendar").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,

						}).on("change", function() {
							$('#dobid').val($(this).val());
						})
						$('#dobid').blur(function() {
							$("#dobidCalendar").val($(this).val());
						})
		    $("#savePurchaseDtls").click(function(){
    	
    	obj = {};
    	
    	obj.isEdit = $("#isEditPurchase").val();
    	obj.productId = $("#productId").val();
    	obj.sku = $("#skuPurchase").val();
    	obj.vendorId = $("#itemVendorId").val();
    	var price = $("#purchasePrice").val();
    	price = price.replaceAll(",","");
    	obj.salePrice = price;
    	obj.saleTax = $("#purchaseTax").val();
    	obj.saleCess = $("#purchaseCess").val();
    	obj.moq = $("#moq").val();
    	obj.editSKUId = $("#editSKUId").val();
    	obj.editVendorId = $("#editVendorId").val();
    	
    	
    	$(".formValidation").remove();
		allPurValid = true;
		if( $("#skuPurchase").val() == null || $("#skuPurchase").val() == ""){
			allPurValid = false;
			validationModal("SKU Required","skuPurchase");
		} 
		if( obj.vendorId == null || obj.vendorId == ""){
			allPurValid = false;
			validationModal("Vendor Required","itemVendorId");
		} 
		if( obj.salePrice == null || obj.salePrice == ""){
			allValid = false;
			validationModal("Purchase Price Required","purchasePrice");
		} 
		if( obj.moq == null || obj.moq == ""){
			allPurValid = false;
			validationModal("MOQ Required","moq");
		} 
    	
		if(allPurValid) {
			submitPurchaseDetails(obj);
		}
    	
    })				
	$("#skuPurchase").change(function(){
    	var sku = $(this).val();
    	$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
    	if(sku) {
    		obj = {};
    		obj.key = $("#productId").val();
    		obj.name = sku;
    		$.ajax({
				type : "POST",
				url : "manage-purchase-order-get-variant-dtls",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						$("#variantTypeSpan").text(response.body.key);
			    		$("#variantValueSpan").text(response.body.name);
			    		$("#variantUnitSpan").text(response.body.code);
					}
				}, error : function(data) {
					console.log(data)
				}
    		});
    	} else {
    		$("#variantTypeSpan").text("");
    		$("#variantValueSpan").text("");
    		$("#variantUnitSpan").text("");
    	}
    })					    
    $("#productSave").click(function(){
    	  
    	var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});  
         	 
        })
    
	
          obj = {};
   
            obj['productId'] = $("#productId").val();
            obj['productName'] = $("#productName").val();
            obj['brand'] = $("#itemBrand").val();
            obj['mode'] = $("#mode").val();
            obj['hsnCode'] = $("#hsnCodeProduct").val();
            obj['sicCode'] = $("#sicCode").val();
            obj['productStatus'] = $("input[name='isActive']:checked").val();
            obj['productCategory'] = $("#prCategoryId").val();
            obj['productCategoryText'] = $("#catDesc").text();
            obj['imgList'] = data;
            $(".formValidation").remove();
           allPValid = true;
    		if( $("#productName").val() == null || $("#productName").val() == ""){
    			allPValid = false;
    			validationModal("Product Name Required","productName");
    		} 
    	/* 	if( $("#itemBrand").val() == null || $("#itemBrand").val() == ""){
    			allPValid = false;
    			validationModal("Brand Required","itemBrand");
    		}  */
    		if( $("#mode").val() == null || $("#mode").val() == ""){
    			allPValid = false;
    			validationModal("Mode Required","mode");
    		} 
    		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
    			allPValid = false;
    			validationModal("HSN/SAC Code Required","hsnCodeProduct");
    		} 
    		var productId = $('#productheadId').html();
            if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            			submitProduct(obj);
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	submitProduct(obj);
              }
            	
            	
            }
         
    })

						/* 
						product category	 
						 */
						$("#browseBtn")
								.click(
										function() {

											$(".benefitChk").prop("checked",
													false);
											$("#productModName").val("");
											$("#brand").val("");
											$("#skuMod").val("");
											$("#modelMod").val("");
											$("#manufactureItemMod").val("");
											$("#variationTypeMod").val("");
											$("#variationValueMod").val("");
											$("#unitMod").val("");
											$("#productCategoryCBDiv").empty();
											$("#select_product").empty();
											$('.loader').show();
											$("body").addClass("overlay");
											$("#productDiv").modal("show");
											$
													.ajax({
														type : "POST",
														url : "manage-purchase-order-item-get-product-list",
														dataType : "json",
														contentType : "application/json",
														data : "a",
														success : function(
																response) {
															if (response.message == "success") {
																for (var i = 0; i < response.body.length; i++) {
																	var row = "";
																	if (response.body[i].categoryId == response.body[i].parentId) {
																		if (response.body[i].nodeCount > 0) {

																			row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		} else {
																			row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																					+ response.body[i].categoryId
																					+ '" value="'
																					+ response.body[i].categoryId
																					+ '" name="'
																					+ response.body[i].categoryName
																					+ '" onchange=selectCheckBox("'
																					+ response.body[i].categoryId
																					+ '","'
																					+ response.body[i].catLevel
																					+ '")>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																			
																					
																		}

																	} else {
																		if (response.body[i].nodeCount > 0) {
																			row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																			
																		} else {

																			row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																					+ response.body[i].categoryId
																					+ '" value="'
																					+ response.body[i].categoryId
																					+ '" name="'
																					+ response.body[i].categoryName
																					+ '" onchange=selectCheckBox("'
																					+ response.body[i].categoryId
																					+ '","'
																					+ response.body[i].catLevel
																					+ '")>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																			
																		}
																	}
																	$("#productCategoryCBDiv").append(row);

																  }

																$('.loader')
																		.hide();
																$("body")
																		.removeClass(
																				"overlay");

																$('#basic')
																		.simpleTreeTable(
																				{
																					expander : $('#expander'),
																					collapser : $('#collapser'),
																					store : 'session',
																					storeKey : 'simple-tree-table-basic'
																				});
															}
														},
														error : function(data) {
															//console.log(data)
															$('.loader').hide();
															$("body")
																	.removeClass(
																			"overlay");
															$("#productDiv")
																	.modal(
																			"show");
														}
													});
										})
										
										
						var ld = localStorage.getItem('ReqQuotationData');
						var data = JSON.parse(ld);
						console.log(data)
						if (data) {
							$("#delete").hide();
							$("#invoiceBtn").hide();
							$("#customerData").hide();
							$('#hideTbl').hide();
							$('#searchRowDiv').hide();
							$("#add").hide();
							$("#myGrid").hide();
							$("#save").show();
							$("#Cancel").show();
							$("#approvePorder").hide();
							$("#grn").hide();
							$("#documentDetails").show();
							$("#addData").show();
							$("#totalCandidate").hide();
							$("#dwnld").hide();
							$('#delete1').attr("disabled", true);
							$('#grn').attr("disabled", true);
							$("#upld").hide();
							$("#poId").val(data[0].poId);
							$("#salePackageId").val(data[0].salePackageId);
							if (data[0].qutActive == "0") {
								$("#qutActive").prop("checked", false);
							} else {
								$("#qutActive").prop("checked", true);
							}
							var appoveStatus=0;
							itemOptions.api.setRowData();
							if (appoveStatus=="0") {
								itemOptions.columnApi.setColumnVisible('pendingQty', false);
							}else{
								itemOptions.columnApi.setColumnVisible('pendingQty', true);
							}
							itemOptions.api.setRowData(data);
							$("#quotationId").val(data[0].quotationId);
							$("#qutationId").val(data[0].quotationId);
							$("#qutId").val(data[0].quotationId);
							getVendorDtls(data[0].vendorId, 'edit');
							getAddressDetails(data[0].vendorId);
							$("#qutValidDate").val(data[0].qutValidDate);
							var ref=data[0].reference;
							getReferenceList(data[0].vendorId,ref);
							$("#reference").val(ref)
							$("#qutationId").val(data[0].poId);
							$("#quotationDate").val(data[0].updatedOn);
							$("#paymentTermId").val(data[0].paymentTermId);
							$("#adjustment").val(data[0].adjustment);
							$("#tcsName").val(data[0].tcs);
							$("#tcsId").val(data[0].tcsId);
							$("#tcsAmount").val(data[0].tcsAmount);

							$("#terms").val(data[0].terms);
							$("#grandTotal").val(data[0].grandTotal);
							$("#qSGST").val(data[0].qSGST);
							$("#qCGST").val(data[0].qCGST);
							$("#subTotal").val(data[0].subTotal);
							$("#qutNo").val(data[0].qutNo);
							$("#vendorId").val(data[0].vendorId);
							$("#vendorName").val(data[0].vendorName);
							$("#qutValidDate").val(data[0].qutValidDate);
							$("#toDateCalendar").val(data[0].qutValidDate);
							$("#qutDescription").val(data[0].qutDescription);
							$("#taxType").val(data[0].taxType);
							$("#tcsDiv").hide();
							hideShowS();
							priceCalculation();					
							$("#doctbodyData").empty();
							if (data[0].documentList != null
									&& data[0].documentList != "") {
								for (var i = 0; i < data[0].documentList.length; i++) {
									var tbl = '<tr>'
											+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
											+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
											+ '<td><div class="form-group"> <input type="text" value="'+data[0].documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
											+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
											+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
											+ i
											+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
											+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+data[0].documentList[i].fileName+'" class="uploadHidCls">'
											+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
											+ data[0].documentList[i].action
											+ '</div></div>'
											+ '<div id="imageName_'+i+'" class="imageName">'
											+ data[0].documentList[i].fileName
											+ '</div>'
											+ '<input type="hidden" id="editId_'+i+'" value="'+ data[0].documentList[i].vendorRfqId+'">'
											+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
											+ '</tr>';
									$("#doctbodyData").append(tbl);
								}
							} else {
								var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
										+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
										+ '</tr>';
								$("#doctbodyData").append(tbl);
							}
							var date = (new Date()).toISOString().split('T')[0];
							var newDate = changeDateFormat(date);
							$("#purchaseDate").val(newDate);
							$.ajax({
								type : "GET",
								url : "manage-purchase-order-get-insertedid",
								success : function(response) {
									if (response.message == "success") {

										$("#purchageOrderReference").val(
												response.body[0].key);
									}
								},
								error : function(e) {
								}
							});
							localStorage.setItem('ReqQuotationData', null);
						} else {
							$("#poId").val('New');
						}
					});
	/* 	
	 Quotation 	
	 */
	var columnDefs = [
			{
				//headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left'
			},
			{
				headerName : "Purchase Order",
				field : "poId",
				width : 170,
				pinned: 'left',
				cellRenderer : function(params) {
					return '<a onclick=editPo("' + params.data.poId
					+','+params.data.appoveStatus +','+params.data.closeStatus
					+ '") href="javascript:void(0)">'
							+ params.data.poId + '</a>';
				}
			},
			{

				headerName : 'Po Date',
				field : "updatedOn",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				}
			},
			{
				headerName : 'Reference',
				field : "reference",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				}
			},
			{
				headerName : 'Vendor name',
				field : "vendorName",
				width : 150,
			},
			{

				headerName : 'Amount',
				field : "grandTotal",
				width : 150,
				type : 'rightAligned',
			},
			{
				headerName : 'Approve Status',
				field : "appoveStatus",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.appoveStatus =="Pending") { 
						return '<div style="color:#a9a9a9">Pending</div>';
					} else {
						return '<div style="color:#0642f5">Approved</div>';
					} 	
				}
			},
			{
				headerName : 'Close Status',
				field : "closeStatus",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.closeStatus =="Active") { 
						return '<div style="color:#a9a9a9">Active</div>';
					} else {
						return '<div style="color:#0642f5">Closed</div>';
					} 	
				}
				
			},
			{
				headerName : 'Invoice Status',
				field : "invoiceStatus",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.invoiceStatus == "Generated") {
						return '<div style="color:#008000">'
								+ params.data.invoiceStatus + '</div>';
					} else {
						return '<div style="color:#a9a9a9">'
								+ params.data.invoiceStatus + '</div>';
					}
				}
			},
			{
				headerName : 'Expected Delivery Date',
				field : "qutValidDate",
				width : 230,
				cellStyle : {
					textAlign : 'center'
				}
			},
			 {
				headerName : "PO PDF",
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					var s = "";
					s = ' <a href="#" class="grn-btn" onclick="poPdfDownload(\''
							+ params.data.poId
							+ '\')"><i class="ti ti-download"></i> PO </a>';
					return s;
				},
				width : 150,

			},
			{
				headerName : 'Project',
				field : "project",
				width : 180,
			} 
			,{
				headerName : 'Total Quantity',
				field : "totalQty",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				}
			},
			,{
				headerName : 'Received Quantity',
				field : "received",
				width : 150,
				hide : true,
				cellStyle : {
					textAlign : 'center'
				}
			},
			,{
				headerName : 'Pending Quantity',
				field : "pending",
				width : 150,
				hide : true,
				cellStyle : {
					textAlign : 'center'
				}
			},{
			headerName : 'SAP Purchase Order Id',
			field : "sapPOId",
			width : 150,
			hide:true,
			cellStyle : {
				textAlign : 'center'
			}
		  },{
			headerName : 'Created By',
			field : "createdBy",
			width : 150,
			cellStyle : {
				textAlign : 'center'
			}
		 }
			
			];

	function poPdfDownload(id) {
		window.open("/purchase/manage-purchase-order-pdf-downloads?invId="
				+ window.btoa(id), '_blank');

	}
	/* 
	 *
	 quotation item  
	
	 */

	var itemDefs = [
			{
				//headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left'

			},
			{
				headerName : "SlNo",
				field : "slNo",
				width : 70,
				pinned: 'left',
				cellRenderer : function(params) {
					if (params.data.slNo) {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)"><i class="bi bi-arrow-return-right">'
								+ params.data.slNo + '</a>';
					} else {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)"><i class="bi bi-arrow-return-right">'
								+ params.data.slNo + '</a>';
					}
				}
			},  {
				 headerName : 'SKU',
				field : "sku",
				width : 100,
				pinned: 'left',

				},  { 
				headerName : 'HSN Code',
				field : "hsnCode",
				width : 120,
				pinned: 'left',
				/* cellClass : function(params) {
					if (params.data.grnStatus === 'Generated') {
						return (params.data.grnStatus === 'Generated' ? 'blueClsWT' : 'tptCls');
					}
				} */
			}, {

				headerName : 'Item Name',
				field : "itemName",
				width : 175,
				pinned: 'left',
			}, {
				headerName : 'Item Id',
				field : "itemId",
				width : 100,
				hide : true,
			},{
				headerName : "Model/Size",
				field : "modelSize",
				width : 150,
			}, {
				headerName : 'Quantity',
				field : "quantity",
				type : 'rightAligned',
				width : 100,
				valueFormatter : currencyFormatter
			}, {

				headerName : 'Unit',
				field : "unitName",
				width : 70,
			}, {
				headerName : 'Unit',
				field : "unit",
				hide : true,

			}, {
				headerName : 'Brand',
				field : "brandName",
				hide : true,

			},{
				headerName : 'Unit Price',
				field : "unitPrice",
				type : 'rightAligned',
				width : 120,
				valueFormatter : currencyFormatter
			}, {
				headerName : 'Discount',
				field : "discount",
				type : 'rightAligned',
				width : 120,
				valueFormatter : currencyFormatter
			}, {
				headerName : 'Amount',
				field : "lineTotal",
				type : 'rightAligned',
				width : 100,
				valueFormatter : currencyFormatter,
				aggFunc : 'sum'
			}, {
				headerName : 'GST Rate',
				field : "gstRate",
				type : 'rightAligned',
				width : 100,
				valueFormatter : currencyFormatter
			}, {
				headerName : 'CGST',
				field : "itemCgst",
				type : 'rightAligned',
				width : 70,
			//valueFormatter : currencyFormatter
			}, {
				headerName : 'SGST',
				field : "itemSgst",
				type : 'rightAligned',
				width : 70,
			//valueFormatter : currencyFormatter
			}, {
				headerName : 'IGST',
				field : "itemIgst",
				type : 'rightAligned',
				width : 70,
			//valueFormatter : currencyFormatter
			}, {
				headerName : 'Taxable Amount',
				field : "taxableAmt",
				type : 'rightAligned',
				width : 170,
				//valueFormatter : currencyFormatter
			} ,
			{
			headerName : "Pending Quantity",
			field : "pendingQty",
			width : 173,
 
		},
		/*{
			headerName : "GRN Date",
			field : "grnDate",
			width : 110,
		},
		
		{
			headerName : "GRN Id",
			field : "grnId",
			width : 100,
		} */];

	var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'single',

		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},

		onSelectionChanged : rowSelect,

	};

	var itemOptions = {
		columnDefs : itemDefs,
		rowSelection : 'multiple',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},
		onSelectionChanged : rowSelectItem,
		getRowNodeId : function(data) {
			return data.slNo;
		}
	};

	

	var itemOptions = {
		columnDefs : itemDefs,
		rowSelection : 'multiple',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 100,
			height : 10
		},
		onSelectionChanged : rowSelectItem,
		getRowNodeId : function(data){
			return data.slNo;
		}
	};
	
	
	var columnDefs12 = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true
	},
	{
	    headerName: "Product Id",
	    field: "productId",
	    cellRenderer: function(params) {
	        return '<a onclick=openDetails("' + params.data.productId + '") href="javascript:void(0)">' + params.data.productId + '</a>';
	    }
	},
	{
		 headerName: "Product Name",
		    field: "productName",
		    width: 200,
	},
	{
		 headerName: "Brand",
		    field: "brand",
		    cellStyle: {textAlign: 'center'}
	   
	},
	{
	   
	    headerName: "Category",
	    field: "productCategoryText",
	    width: 200,
	},
	{
	    headerName: "Mode",
	    field: "mode",
	    cellStyle: {textAlign: 'center'}
	},
	{
		headerName: "Status",
	    field: "productStatus",
	    cellStyle: {textAlign: 'center'}
	},
	{
	  
	    headerName: "Created By",
	    field: "createdBy",
	    cellStyle: {textAlign: 'center'}
	},
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];	
	
	
	var gridOptions12 = {
			columnDefs: columnDefs12,
			rowSelection: 'multiple',
			defaultColDef: {
				sortable: true,
			    filter: true,
			    resizable: true,
			    width: 149,
			    height: 10
			},
			rowSelection: 'multiple',
			suppressRowClickSelection : true,
			onSelectionChanged: onSelectionChangedproduct12
};
	var columnSKUDefs = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true
	},
	{
	    headerName: "SKU",
	    field: "sku",
	    cellRenderer: function(params) {
	        return '<a onclick=openSKUDetails("' + params.data.sku + '","'+params.data.productId+'") href="javascript:void(0)">' + params.data.sku + '</a>';
	    }
	},
	{
	    headerName: "Manufacture Item",
	    field: "manufacture",
	    width: 200,
	},
	{
	    headerName: "Model",
	    field: "model"
	},
	{
	    headerName: "Variation Type",
	    field: "variationType"
	},
	{
	    headerName: "Variation Value",
	    field: "variationValue"
	},
	{
	    headerName: "UOM",
	    field: "unit"
	},
	{
	    headerName: "Unit Sale Price",
	    field: "sPrice",
	    cellStyle: {textAlign: 'right'}
	}, 
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];



	var skuOptions = {
	columnDefs: columnSKUDefs,
	rowSelection: 'multiple',
	defaultColDef: {
		sortable: true,
	    filter: true,
	    resizable: true,
	    width: 150,
	    height: 10
	},
	rowSelection: 'multiple',
	suppressRowClickSelection : true,
	onSelectionChanged: onSelectionChangedsku 
	};
	var columnPurchaseDefs = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true
	},
	{
	    headerName: "SKU",
	    field: "sku",
	    cellRenderer: function(params) {
	        return '<a onclick=openPurchaseDetails("' + params.data.sku + '","'+params.data.productId+'","'+params.data.vendorId+'") href="javascript:void(0)">' + params.data.sku + '</a>';
	    }
	},
	{
	    headerName: "Vendor Id",
	    field: "vendorId"
	},
	{
	    headerName: "Vendor Name",
	    field: "createdBy", //Here CreatedBy Variable is used for Vendor Name
	    width: 206,
	},
	{
	    headerName: "Variation Type",
	    field: "variationType"
	},
	{
	    headerName: "Variation Value",
	    field: "variationValue"
	},
	{
	    headerName: "UOM",
	    field: "unit"
	},
	{
	    headerName: "Unit Purchase Price",
	    field: "sPrice",
	    hide:true,
	    cellStyle: {textAlign: 'right'}
	},
	{
	    headerName: "MOQ",
	    field: "sMoq",
	    cellStyle: {textAlign: 'right'}
	},
	/* {
	    headerName: "Sale Tax",
	    field: "saleTax",
	    cellStyle: {textAlign: 'right'}
	},
	{
	    headerName: "Sale Cess",
	    field: "saleCess",
	    cellStyle: {textAlign: 'right'}
	}, */
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];
	var purchaseOptions = {
			columnDefs: columnPurchaseDefs,
			rowSelection: 'multiple',
			defaultColDef: {
				sortable: true,
			    filter: true,
			    resizable: true,
			    width: 149,
			    height: 10
			},
			rowSelection: 'multiple',
			suppressRowClickSelection : true,
			onSelectionChanged: onSelectionChangedvender 
	};
	
	function onSelectionChangedvender(){
		var selectedRows = purchaseOptions.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deletes').attr("disabled", false);
		        $('#newBtn1').attr("disabled", true);
		       
			
		}else{
			    $('#deletes').attr("disabled", true);
			    $('#newBtn1').attr("disabled", false);
		        
			   
				
		}
	}
	function openPurchaseDetails(skuid, id, vendorId) {
		$(".formValidation").remove();
		$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
		$("#skuPurchase").val("");
		$("#itemVendorId").val("");
		$("#purchasePrice").val("");
		$("#purchaseTax").val("");
		$("#purchaseCess").val("");
		$("#moq").val("");
		$("#isEditPurchase").val("");
		$("#editSKUId").val("");
		$("#editVendorId").val("");
		openVendor();
		if(id) {
			
			obj = {};
			
			obj.productId = id;
			obj.sku = skuid;
			obj.vendorId = vendorId;
			
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-get-purchase-details-edit",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						
						$("#variantTypeSpan").text(response.body.variationType);
						$("#variantValueSpan").text(response.body.variationValue);
						$("#variantUnitSpan").text(response.body.variationUnit);
						$("#skuPurchase").val(response.body.sku);
						$("#itemVendorId").val(response.body.vendorId);
						$("#purchasePrice").val(response.body.salePrice);
						$("#purchaseTax").val(response.body.saleTax);
						$("#purchaseCess").val(response.body.saleCess);
						$("#moq").val(response.body.moq);
						$("#isEditPurchase").val(response.body.isEdit);
						$("#editSKUId").val(response.body.sku);
						$("#editVendorId").val(response.body.vendorId);
					}
				}, error : function(data) {
					console.log(data)
				}
			});
		}
	}
	
	function onSelectionChangedproduct12(){
		var selectedRows =gridOptions12.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deleteproduct1').attr("disabled", false);
		        $('#newBtn1').attr("disabled", true);
				
		}else{
			    $('#deleteproduct1').attr("disabled", false);
			    $('#newBtn1').attr("disabled", false);
			
		}
	}	 
	
	 function onSelectionChangedsku(){
		var selectedRows =skuOptions.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deletess').attr("disabled", false);
		        $('#newBtn2').attr("disabled", true);
				
		}else{
			    $('#deletess').attr("disabled", true);
			    $('#newBtn2').attr("disabled", false);
			
		}
	}
	 
	function add() {

		$("#documentDetails").show();
		//alert($("#sessionOrganization1").val())
		$('#toDateCalendarDt').hide();
		$('#tcsDiv').hide();
		$('#approvePorder').hide();
		$('#closePurchaseorder').hide();
		$('#excelupload').hide();
		$('#delete1').attr("disabled", true);
		$('#grn').attr("disabled", true);
		$('#searchRowDiv').hide();
		$('#grn').hide();
		$('#delete').hide();
		$('#hideTbl').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
		$("#quotationhedId").html("");
		$("#quotationId").val("");
		$("#qutName").val("");
		$("#quotationDate").val("");
		$("#custId").val("");
		$("#custName").val("");
		$("#reference").val("");
		$("#salesPerson").val("");
		$("#dealName").val("");
		$("#qutValidDate").val("");
		$("#toDateCalendar").val("");
		$("#qutDescription").val("");
		$("#qutActive").val("");
		$("#qutCreatedBy").val("");
		$("#qutUpdatedOn").val("");
		$("#subTotal").val("");
		$("#grandTotal").val("");
		$("#slNo").val("");
		$("#sku").val("");
		$("#itemId").val("");
		$("#itemName").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		$("#discount").val("");
		$("#gstRate").val("");
		$("#lineTotal").val("");
		$("#qIGST").val("");
		$("#qCGST").val("");
		$("#qSGST").val("");
		$("#itemIgst").val();
		$("#itemCgst").val();
		$("#itemSgst").val();
		$("#project").val('');
		$("#reference").empty();
		var sessionOrganization1 = $("#sessionOrganization1").val();
		$("#organizationName").val(sessionOrganization1);
		var date = (new Date()).toISOString().split('T')[0];
		var newDate = changeDateFormat(date);
		$("#purchaseDate").val(newDate);
		$.ajax({
			type : "GET",
			url : "manage-purchase-order-get-insertedid",
			success : function(response) {
				if (response.message == "success") {

					$("#purchageOrderReference").val(response.body[0].key);
				}
			},
			error : function(e) {
			}
		});
		$("#doctbodyData").empty();
		var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
				+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
				+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
				+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
				+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
				+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
				+ '</tr>';
		$("#doctbodyData").append(tbl);
		$('#delete1').show();
		$('#delete1').attr("disabled", true);
		$('#newItem').show();
		itemOptions.api.setRowData('');
		
	}

	function changeDateFormat(inputDate) { // expects Y-m-d
		var splitDate = inputDate.split('-');
		if (splitDate.count == 0) {
			return null;
		}
		var year = splitDate[0];
		var month = splitDate[1];
		var day = splitDate[2];

		return day + '-' + month + '-' + year;
	}
	function Cancel() {
		var poId=$("#pohedId").html();
	
		$('.formValidation').remove();
		$("#pohedId").html('');
		$("#vendorName").val('');
		$("#vendorId").val('');
		$("#suggesstion-box1_").hide();
		$("#custGSTNo").val('');
		$("#qutValidDate").val('');
		$("#reference").val('');
		$("#paymentTermId").val('');
		$("#carrierId").val('');
		$('#approvePorder').show();
		$("#qutDescription").val('');
		$("#organizationName").val('');
		$("#customerName").val('');

		$("#terms").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#tcsAmount").val('');
		$("#tcsName").val('');
		$("#subTotal").val('');
		$("#qIGST").val('');
		$("#qCGST").val('');
		$("#qSGST").val('');
		$("#grandTotal").val('');
		$("#adjustment").val('');
		$("#taxType").val('');
		$("#itemIgst").val('');
		$("#itemCgst").val('');
		$("#itemSgst").val('');
		$("#searchRowDiv").show();
		$('#excelupload').show();
		$("#delete").show();
		$('.formValidation').remove();
		$("#add").show();
		$("#myGrid").show();
		$("#save").hide();
		$("#Cancel").hide();
		$("#addData").hide();
		$('#hideTbl').show();
		$("#totalCandidate").show();
		$("#dwnld").show();
		$("#upld").show();
		$("#documentDetails").hide();
		itemOptions.api.setRowData();
		$('#delete').attr("disabled", true);
		var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
				+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
				+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
				+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
				+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
				+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="custom-file-upload"></div> <input type="hidden" id="editId_0"> </td>'
				+ '</tr>';
		$("#doctbodyData").append(tbl);
		$('#delete').attr("disabled", true);
		$('#grn').show();
		$('#approvePorder').attr("disabled", true);
		$('#excelupload').attr("disabled", false);
		agGrid.simpleHttpRequest({
			url : "manage-purchase-order-through-ajax"
		}).then(function(data) {
			var len = data.length;
			$('#totalCandidate').find('span').html(len);
			gridOptions.api.setRowData(data);
		});
	
		gridOptions.api.setQuickFilter(null);
		$('#quickFilter').val('');
		document.getElementById('closeKey').style.display='none';
	}

	function openNav() {
		//$('#disDiv1').show();
		$("#sku").val("");
		$("#itemName").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		$("#discount").val("0");
		$("#gstRate").val("");
		$("#lineTotal").val("");
		$("#hsnCode").val("");
		$("#unit").val("");
		$("#editProduct").val("");
		$("#DIV").hide();
		var vendorValid = true;
		if ($("#vendorName").val() == null || $("#vendorName").val() == "") {
			vendorValid = false;
		}
		$("#save").hide();
		$("#Cancel").hide();
		if (vendorValid) {
			document.getElementById("mySidenav").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto; top:778px;";
			document.getElementById("main_content").style.width = "70%";
		} else {
			$("#messageParagraph").text("First Choose Vendor Name");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			$("#save").show();
			$("#Cancel").show();
		}
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
		document.getElementById("main_content").style.width = "100%";
		$('.formValidation').remove();
		$("#DIV").show();
		$("#sku").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#hsnCode").val('');
		$("#unit").val('');
		$("#modelSize").val('');
		$("#editProduct").val(null);
		$("#save").show();
		$("#Cancel").show();
	}

	/* //quotation item  table add */

	function saveTableData() {
		var editProduct = $("#editProduct").val();
		var item = {};
		var data = 1;
		var validation = true;

		
		if (item.itemName == null || item.itemName == "") {
			validation = validationUpdated("Item Name Required", 'itemName');
		}
		if (item.quantity == null || item.quantity == "") {
			validation = validationUpdated("Quantity Required", 'quantity');
		}
		if (item.unitPrice == null || item.unitPrice == "") {
			validation = validationUpdated("Unit Price Required", 'unitPrice');
		
		}
	
		if (item.gstRate == null || item.gstRate == "") {
			validation = validationUpdated("GST Rate Required", 'gstRate');
		}
		if (item.lineTotal == null || item.lineTotal == "") {
			validation = validationUpdated("Line Total Required", 'lineTotal');
		}

		if (validation) {
			item.slNo = data;
			itemOptions.api.forEachNode(function(rowNode, index) {
				if (!editProduct) {
					data = data + 1;
					item.slNo = data;
				}
				else{
					item.slNo = editProduct;
				}
				
			});
			item.itemId = $('#itemId').val();
			item.sku = $('#skuTemp').val();
			item.itemName = $('#itemName').val();
			item.itemId = $('#itemIdTemp').val();
			item.hsnCode = $('#hsnCode').val();
			item.unit = $('#unit').val();
			item.unitName = $("#unit option:selected").text();
			item.quantity = $('#quantity').val();
			item.unitPrice = $('#unitPrice').val();
			item.discount = $('#discount').val();
			item.gstRate = $('#gstRate').val();
			item.lineTotal = $('#lineTotal').val();
			item.pendingQty= $('#pendingQty').val();
			item.modelSize = $('#modelSize').val();
			var taxType1 = $("#taxType").val();
			if (taxType1 == 'true') {
				item.itemCgst = (item.lineTotal * item.gstRate) / 200;
				item.itemSgst = (item.lineTotal * item.gstRate) / 200;
				item.itemIgst = 0;
				item.taxableAmt = parseFloat(item.lineTotal) + item.itemCgst
						+ item.itemSgst;
				//item.taxableAmt=(taxableAmt).toFixed(2);
			} else {
				item.itemCgst = 0;
				item.itemSgst = 0;
				item.itemIgst=(item.lineTotal * item.gstRate)/ 100;
				item.taxableAmt=parseFloat(item.lineTotal)+ item.itemIgst;
			}

			//item.slNo = data;
			var quot = [];

			if (editProduct) {
				var rowNode = itemOptions.api.getRowNode(editProduct);
				rowNode.setData(item);
			} else {
				itemOptions.api.forEachNode(function(rowNode, index) {
					quot.push(rowNode.data);
				});
				quot.push(item)
				itemOptions.api.setRowData(quot);

			//	quot.push(item)
				//itemOptions.api.setRowData(quot);
				var sum = 0.0;
				var gstRate = 0.0;
				var qSGST = 0.0;
				var qCGST = 0.0;
				var qIGST = 0.0;
				var itemIgst = 0.0;
				var itemCgst = 0.0;
				var itemSgst = 0.0;
				var len = quot.length;
				for (var i = 0; i < len; i++) {
					sum = sum + parseFloat(quot[i].lineTotal);
					if (taxType1 == 'false') {
						quot[i].itemIgst = quot[i].lineTotal * quot[i].gstRate
								/ 100;
						qIGST = qIGST + quot[i].itemIgst;
						grandTotal = sum + qIGST;
					} else {
						quot[i].itemCgst = quot[i].lineTotal * quot[i].gstRate
								/ 200;
						quot[i].itemSgst = quot[i].lineTotal * quot[i].gstRate
								/ 200;

						qCGST = qCGST + quot[i].itemCgst;
						qSGST = qSGST + quot[i].itemSgst;
						grandTotal = sum + qCGST + qSGST;
					}
				}
				$("#subTotal").val(sum.toFixed(2));
				$("#qIGST").val(qIGST.toFixed(2));
				$("#qCGST").val(qCGST.toFixed(2));
				$("#qSGST").val(qSGST.toFixed(2));
				$("#grandTotal").val(grandTotal.toFixed(2))
			}
			priceCalculation()
			closeNav();
			$("#sku").val('');
			$("#itemId").val('');
			$("#itemName").val('');
			$("#quantity").val('');
			$("#unitPrice").val('');
			$("#discount").val('');
			$("#gstRate").val('');
			$("#lineTotal").val('');
			$("#hsnCode").val('');
			$("#unit").val('');
			$("#modelSize").val('');
			$("#editProduct").val(null);
		}

	}

	function priceCalculation() {
		var grid = [];
		itemOptions.api.forEachNode(function(rowNode, index) {

			grid.push(rowNode.data);
		});
		var len = grid.length;
		var val = 0;
		var val2 = 0;
		var val3 = 0;
		var val4 = 0;

		var taxType1 = $("#taxType").val();
		for (i = 0; i < len; i++) {
			if (taxType1 == 'true') {
				val2 = parseFloat(val2) + parseFloat(grid[i].itemSgst);
				val3 = parseFloat(val3) + parseFloat(grid[i].itemCgst);
				
			} else {
				//val2 = parseFloat(val2) + parseFloat(grid[i].itemSgst);
				//val3 = parseFloat(val3) + parseFloat(grid[i].itemCgst);
				val4 = parseFloat(val4) + parseFloat(grid[i].itemIgst);

			}

			val = parseFloat(val) + parseFloat(grid[i].lineTotal);
		}
		//tcsCalculation();
		//calculateAdjustment();

		var adj = 0.0;
		var tcsval = 0.0;
		adj = $("#adjustment").val();

		var tcs = $('#tcsName').val();
		if (tcs != '') {
			var tcsval = tcs.replace(/[^0-9]/g, '');
		}
		//var tcsval = 0.0;
		var tcsAmount = 0.0;
		tcsAmount = val * parseFloat(tcsval) / 100;
		var tcsamount1=Math.round(tcsAmount);
		$("#subTotal").val(val.toFixed(2));
		$("#qIGST").val(val4.toFixed(2));
		$("#qCGST").val(val3.toFixed(2));
		$("#qSGST").val(val2.toFixed(2));
		var gTotal = 0.0;

		gTotal = parseFloat(val) + parseFloat(val2) + parseFloat(val3)
				+ parseFloat(val4) + parseFloat(adj) + parseFloat(tcsAmount);
		var gTotal1= Math.round(gTotal);
		var adjustment=(gTotal1-gTotal);
		if(adjustment>0){
			$("#adjustment").val(adjustment.toFixed(2))	
		}
		else{
			var adjust=Math.abs(adjustment);
			$("#adjustment").val(adjust.toFixed(2))	
		}
		$("#grandTotal").val(gTotal1.toFixed(2))
		$("#tcsAmount").val(tcsamount1.toFixed(2))

	}

	/* //Quotation  table add */

	function save() {
		if (validFormData() && validProductData()) {
			var datas = [];
			var imageValid = true;
			var uploadList = [];
			$("#doctbodyData > tr").each(
					function() {
						var uFile = $(this).find(".document")[0].files[0];
						var fileName = $(this).find(".document").val();
						var data = [];
						var x = [];
						if (fileName != '' && fileName != 'undefined'
								&& fileName != null) {
							var lastIndex = fileName.lastIndexOf("\\");
							if (lastIndex >= 0) {
								fileName = fileName.substring(lastIndex + 1);
							}
							var reader = new FileReader();
							reader.readAsDataURL(uFile);

							reader.onload = function() {
								data = reader.result.split(",");
								x.push(data[1]);
							};
						} else {
							if ($("#poId").val()) {
								fileName = $(this).find(".uploadHidCls").val();
							} else {
								x = [];
							}

						}
						uploadData = {};
						uploadData['poId'] = $("#poId").val();
						uploadData['documnentName'] = $(this)
								.find(".docNoclss").val();
						uploadData['documentFile'] = x;
						uploadData['fileName'] = fileName;
						uploadData['imageNameEdit'] = $(this).find(".uploadHidCls").val();
					 /* 	if($(this).find(".docNoclss").val()!="" && $(this).find(".docNoclss").val()!='null' && fileName!="" && fileName!="null"){
							uploadList.push(uploadData);
							console.log(uploadData)
							
						}  */
						uploadList.push(uploadData);
						console.log(uploadData)
					});
			setTimeout(function() {

				itemOptions.api.forEachNode(function(rowNode, indrx) {

					var obj = rowNode.data;
					obj.poId = $("#pohedId").html();
					obj.quotationId = $("#quotationId").val();
					//obj.sapPOId = $("#sapPOId").val();
					obj.vendorId = $("#vendorId").val();
					obj.vendorName = $("#vendorName").val();
					obj.reference = $("#reference").val();
					obj.terms = $("#terms").val();
					obj.adjustment = $("#adjustment").val();
					obj.tcs = $("#tcsId").val();
					obj.tcsAmount = $("#tcsAmount").val();
					obj.qutValidDate = $("#qutValidDate").val();
					obj.qutDescription = $("#qutDescription").val();
					obj.subTotal = $("#subTotal").val();
					obj.grandTotal = $("#grandTotal").val();
					obj.paymentTermId = $("#paymentTermId").val();
					obj.carrierId = $("#carrierId").val();
					obj.taxType = $('#taxType').val();
					obj.qIGST = $('#qIGST').val();
					obj.qCGST = $('#qCGST').val();
					obj.qSGST = $('#qSGST').val();
					obj.project = $("#project").val();
					obj.projectName = $("#project").find('option:selected').text();
					obj.taxType = $('#taxType').val();

					obj.shippingDetails = $("input[name='checkbox']:checked")
							.val();
					
					obj.orgDetails = $('#organizationName').val();
					obj.custDetails = $('#customerName').val();
					obj.documentList = uploadList;

					console.log('Object', obj)
					datas.push(obj);

				});
				
				saveAllPo(datas);

			}, 1000)

		}
	}

	function saveAllPo(datas) {
		//	window.location.reload();

		$('.loader').show();
		//$("body").addClass("overlay");

		$.ajax({
			type : "POST",
			url : "manage-purchase-order-add",
			contentType : "application/json",
			data : JSON.stringify(datas),
			success : function(response) {
				if (response.message == "Success") {
					//$('.loader').hide();
					//$("body").removeClass("overlay");
					console.log(response.message)
					console.log('Data', JSON.stringify(datas))
					$('.loader').hide();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					$('#excelupload').show();
					$(".btn-hs").show();
					
					agGrid.simpleHttpRequest({
						url : "manage-purchase-order-through-ajax"
					}).then(function(data) {
						var len = data.length;
						$('#totalCandidate').find('span').html(len);
						gridOptions.api.setRowData(data);
					});
					Cancel();
				}

			},
			error : function(datas) {
				console.log(datas)
				$('.loader').hide();}
		})

	}

	function validFormData() {
		var allValid = true;

		if (!validationUpdated("Vendor Name Required", 'vendorName'))
			allValid = false;
	/* 	if (!validationUpdated("Expected Delivery Date Required",
				'qutValidDate'))
			allValid = false;
		if (!validationUpdated("Vendor Notes Required", 'qutDescription'))
			allValid = false; */
		return allValid;
	}

	function validProductData() {
		var item = null;
		itemOptions.api.forEachNode(function(rowNode, index) {
			item = item + rowNode.data;
		});
		if (item) {
			return true;
		} else {
			$("#messageParagraph").text("Please Add Item Details");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			return false;
		}
	}

	/* 
	Edit Quotation
	 */
	function editProduct(slNo) {
		$(".formValidation").remove();
		var status=$("#approveStatusField").val();
		if (status == '1') {
			return false;
		}
		var quotationId = $("#quotationhedId").html();
		var rowNode = itemOptions.api.getRowNode(slNo);

		//console.log(rowNode)
		openNav();
		$("#editProduct").val(slNo);
		$("#sku").val(rowNode.data.sku);
		$("#itemId").val(rowNode.data.itemId);
		$("#itemIdTemp").val(rowNode.data.itemId);
		$("#itemName").val(rowNode.data.itemName);
		$("#hsnCode").val(rowNode.data.hsnCode);
		$("#unit").val(rowNode.data.unit);
		$("#quantity").val(rowNode.data.quantity);
		$("#unitPrice").val(rowNode.data.unitPrice);
		$("#gstRate").val(rowNode.data.gstRate);
		$("#discount").val(rowNode.data.discount);
		$("#lineTotal").val(rowNode.data.lineTotal);
		$("#itemIgst").val(rowNode.data.itemIgst);
		$("#itemCgst").val(rowNode.data.itemCgst);
		$("#itemSgst").val(rowNode.data.itemSgst);
		$("#pendingQty").val(rowNode.data.pendingQty);
		$("#skuTemp").val(rowNode.data.sku);
		$("#brandName").val(rowNode.data.brandName);
		$("#modelSize").val(rowNode.data.modelSize);
		

	}
	document.addEventListener('DOMContentLoaded', function() {
		var gridDiv = document.querySelector('#myGrid1');
		new agGrid.Grid(gridDiv, gridOptions12);

	    var gridDiv = document.querySelector('#mySKUGrid');
	    new agGrid.Grid(gridDiv, skuOptions);
	    
	    var gridDiv = document.querySelector('#myPurchaseGrid');
	    new agGrid.Grid(gridDiv, purchaseOptions);
	});
	
	function skuProductCSV() {
		var dataset = [];
		skuOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		skuOptions.api.exportDataAsCsv(dataset);
	}
	function openNavItem() {
		$(".formValidation").remove();
		var productId = $("#productId").val();
		var productName = $("#productName").val();		
		$("#skudiv").hide();
		$("#skuPrdId").text(productId);
		$("#isEdit").val("");
		$("#skuId").val("");
		$("#model").val("");
		$("#manufacture").val(productName);
		$("#variationType").val("");
		$("#variationValue").val("");
		$("#itemUnit").val("");
		$("#salePrice").val("0");
		$("#saleTax").val("");
		$("#saleCess").val("");
		document.getElementById("mySidenavItem").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:431px;bottom:4px;";
		document.getElementById("main3").style.width = "70%";
	}
	function openSKUDetails(skuid, id) {
		$(".formValidation").remove();
		$("#isEdit").val("");
		document.getElementById('skuId').readOnly = true;
		
		$("#skuId").val("");
		$("#model").val("");
		$("#manufacture").val("");
		$("#variationType").val("");
		$("#variationValue").val("");
		$("#itemUnit").val("");
		$("#salePrice").val("");
		$("#saleTax").val("");
		$("#saleCess").val("");
		openNavItem();
		if(id) {
			
			obj = {};
			
			obj.key = id;
			obj.name = skuid;
			
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-get-sku-details",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						$("#skudiv").show(); 
						$("#isEdit").val(response.body.isEdit);
						$("#skuId").val(response.body.sku);
						$("#model").val(response.body.model);
						$("#manufacture").val(response.body.manufacture);
						$("#variationType").val(response.body.variationType);
						$("#variationValue").val(response.body.variationValue);
						$("#itemUnit").val(response.body.unit);
						$("#salePrice").val(response.body.salePrice);
						$("#saleTax").val(response.body.saleTax);
						$("#saleCess").val(response.body.saleCess);
					}
				}, error : function(data) {
					console.log(data)
				}
			});
		}
	}
	function closeNavSku() {
		$("#isEdit").val("");
		document.getElementById('skuId').readOnly = false;
		$("#skuId").val("");
		$("#model").val("");
		$("#manufacture").val("");
		$("#variationType").val("");
		$("#variationValue").val("");
		$("#itemUnit").val("");
		$("#salePrice").val("");
		$("#saleTax").val("");
		$("#saleCess").val("");
		document.getElementById("mySidenavItem").style.width = "0";
		document.getElementById("main3").style.width = "100%";
	}
	function openVendor() {
		closeNav();
		$(".formValidation").remove();
		var productId = $("#productId").val();
		$("#skuPurchasePrdId").text(productId);
		
		$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
		$("#skuPurchase").val("");
		$("#itemVendorId").val("");
		$("#purchasePrice").val("0");
		$("#purchaseTax").val("");
		$("#purchaseCess").val("");
		$("#moq").val("0");
		$("#isEditPurchase").val("");
		$("#editSKUId").val("");
		$("#editVendorId").val("");
		
		document.getElementById("myVendorSidenav").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:582px;bottom:-145px;";

		document.getElementById("main3").style.width = "70%";
	}
function closeVendor() {
		
		$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
		$("#skuPurchase").val("");
		$("#itemVendorId").val("");
		$("#purchasePrice").val("");
		$("#purchaseTax").val("");
		$("#purchaseCess").val("");
		$("#moq").val("");
		$("#isEditPurchase").val("");
		$("#editSKUId").val("");
		$("#editVendorId").val("");
		
		document.getElementById("myVendorSidenav").style.width = "0";
		document.getElementById("main3").style.width = "100%";
	}
	function deleteskuDtls(){
		$("#deleteSKU").modal('show');
		$("#addItemModel").modal('hide');
	}
	function cancelModalSKUDtls(){
		$("#deleteSKU").modal('hide');
	} 
	function editPo(id) {
		Cancel();
		var data = id.split(",");
		var poId= data[0];
		var appoveStatus = data[1];
		var closeStatus = data[2];
		
		$("#approveStatusField").val(appoveStatus);
		//$("#closeStatusField").val(closeStatus);
		$('#delete1').attr("disabled", true);
		$("#searchRowDiv").hide();
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#addData").show();
		$("#add").hide();
		$('#tcsDiv').hide();
		 if(appoveStatus=='Approved'){
			$("#save").hide();
			$('#grn').attr("disabled", true);
			$("#delete1").hide();
			$("#newItem").hide();
			 if(closeStatus=='Closed'){
				 $('#grn').hide();
			 }else{
				 $('#grn').attr("disabled", true);
			 }
		}
		else{
			$("#save").show();
			$('#grn').hide();
			$('#delete1').attr("disabled", true);
			$('#newItem').attr("disabled", false);
		} 
	/* 	
		 if(closeStatus=='Active'){
				$("#save").hide();
				$("#grn").show();
				$("#delete1").hide();
				$("#newItem").hide();
			}
			else{
				$("#save").show();
				$('#grn').hide();
				$('#delete1').attr("disabled", true);
				$('#newItem').attr("disabled", false);
			} */
		 
		$("#Cancel").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		//$("#addre").hide();
		$("#documentDetails").show();
		//openNav();

		agGrid
				.simpleHttpRequest({
					url : 'manage-purchase-order-edit-new?id=' + poId
				})
				.then(
						function(data) {
							console.log(JSON.stringify(data));

							$("#pohedId").html(data[0].poId);
							getVendorDtls(data[0].vendorId, 'edit');
							$("#poId").val(data[0].poId);
							$("#sapPOId").val(data[0].sapPOId);
							$("#qutValidDate").val(data[0].qutValidDate);
							$("#purchageOrderReference").val(data[0].poId);
							$("#purchaseDate").val(data[0].updatedOn);
							$("#paymentTermId").val(data[0].paymentTermId);
							$("#adjustment").val(data[0].adjustment);
							$("#tcsName").val(data[0].tcs);
							$("#tcsId").val(data[0].tcsId);
							$("#tcsAmount").val(data[0].tcsAmount);
							var ref=data[0].reference;
							getReferenceList(data[0].vendorId,ref);
							$("#reference").val(ref)
							getAddressDetails(data[0].vendorId);
							$("#terms").val(data[0].terms);
							$("#quotationId").val(data[0].quotationId);
							$("#grandTotal").val(data[0].grandTotal);
							$("#qSGST").val(data[0].qSGST);
							$("#qCGST").val(data[0].qCGST);
							$("#subTotal").val(data[0].subTotal);
							$("#carrierId").val(data[0].carrierId);
							$("#vendorId").val(data[0].vendorId);
							$("#vendorName").val(data[0].vendorName);
							$("#qutValidDate").val(data[0].qutValidDate);
							$("#toDateCalendar").val(data[0].qutValidDate);
							$("#qutDescription").val(data[0].qutDescription);
							$("#taxType").val(data[0].taxType);
							$("#project").val(data[0].project);
							hideShowS();
							$("#grandTotal").val(data[0].grandTotal);
							if (data[0].shippingDetails == 1) {
								$("#custDetails").prop('checked', true);
								openModal(1);
							} else {
								$("#orgDetails").prop('checked', true);
								openModal(0);
							}
							//$("#shippingDetails").val(data[0].shippingDetails);
							$("#organizationName").val(data[0].orgDetails);
							$("#customerName").val(data[0].custDetails);
							$("#qIGST").val(data[0].qIGST);
							itemOptions.api.setRowData();
							if (appoveStatus=="0") {
								itemOptions.columnApi.setColumnVisible('pendingQty', false);
							}else{
								itemOptions.columnApi.setColumnVisible('pendingQty', true);
							}
							itemOptions.api.setRowData(data);
							//EDIT GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
							/* 		var sum = 0.0;
									var gstRate = 0.0;
									var qSGST = 0.0;
									var qCGST = 0.0;
									var qIGST = 0.0;
									var len = data.length;
									for (var i = 0; i < len; i++) {
										sum = sum + data[i].lineTotal;

										//var taxType = $("#taxtype")
										//.val(data[0].taxType);

										if (data[0].taxType == 'false') {

											data[0].itemIgst = data[i].lineTotal
							 * data[i].gstRate / 100;
											qIGST = qIGST + data[0].itemIgst;

											grandTotal = sum + qIGST;
										} else {
											data[0].itemCgst = data[i].lineTotal
							 * data[i].gstRate / 200;
											data[0].itemSgst = data[i].lineTotal
							 * data[i].gstRate / 200;

											qCGST = qCGST + data[0].itemCgst;
											qSGST = qSGST + data[0].itemSgst;
											grandTotal = sum + qCGST + qSGST;
										}

									}

									$("#itemIgst").val(itemIgst);
									$("#itemCgst").val(itemCgst);
									$("#itemSgst").val(itemSgst);
									$("#subTotal").val(sum);
									$("#qIGST").val(qIGST);
									$("#qCGST").val(qCGST);
									$("#qSGST").val(qSGST); */
							//$("#grandTotal").val(grandTotal)
							$("#doctbodyData").empty();

							//console.log(JSON.stringify(data));
							//console.log('documentList========>>>>'+JSON.stringify(data[0].documentList));
							if (data[0].documentList != null
									&& data[0].documentList != "") {

								for (var i = 0; i < data[0].documentList.length; i++) {

									var tbl = '<tr>'
											+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
											+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
											+ '<td><div class="form-group"> <input type="text" value="'+data[0].documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
											+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
											+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
											+ i
											+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
											+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+data[0].documentList[i].fileName+'" class="uploadHidCls">'
											+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
											+ data[0].documentList[i].action
											+ '</div></div>'
											+ '<div id="imageName_'+i+'" class="imageName">'
											+ data[0].documentList[i].fileName
											+ '</div>'
											+ '<input type="hidden" id="editId_'+i+'" value="'+ data[0].documentList[i].vendorRfqId+'">'
											+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
											+ '</tr>';

									$("#doctbodyData").append(tbl);
								}
							} else {
								var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
										+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
										+ '</tr>';
								$("#doctbodyData").append(tbl);
							}

						});

	}

	function getEditTaxType(search) {

		$.ajax({
			type : "POST",
			url : "manage-purchase-order-get-vendor-list",
			dataType : 'json',
			contentType : 'application/json',
			data : search,
			success : function(response) {
				if (response.message == "success") {
					console.log("response data" + response.body[0].taxType)
					$("#taxType").val(response.body[0].taxType);
					//hideShowS();
				}
			},
			error : function(data) {
				console.log(data);
			}
		})
	}

	
	/* 
	Delete quotation
	 */
	function deletePurchaseorder() {

		$('#deleteQuot').modal('show');
	}
	function deleteItem() {

		$('#deleteProduct').modal('show');
	}

	function cancelModalBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteQuot').modal('hide');
	}

	function cancelModalProductBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteProduct').modal('hide');
	}

	function rowSelect() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		var selectedNodes = gridOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 var appoveStatus= selectedData.map(node => node.appoveStatus);
		if (rowCount > 0) {
			$('#add').attr("disabled", true);
			
			if(appoveStatus=='Approved'){
				$('#delete').attr("disabled", true);
				$('#approvePorder').attr("disabled", true);
				$('#closePurchaseorder').attr("disabled", false);
			}else{
				$('#delete').attr("disabled", false);
				$('#approvePorder').attr("disabled", false);
				$('#closePurchaseorder').attr("disabled", true);
			}
		} else {
			$('#add').attr("disabled", false);
			$('#delete').attr("disabled", true);
			$('#approvePorder').attr("disabled", true);
			$('#closePurchaseorder').attr("disabled", true);
		}
	}

	function closeModal1() {
		$("#myModal").modal('hide');
	}
	function rowSelectItem() {
		var selectedRows = itemOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});
		 var selectedNodes = itemOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 var grnStatus= selectedData.map(node => node.grnStatus);
		 var pendingQty= selectedData.map(node => node.pendingQty);
		if (rowCount > 0) {
			if(pendingQty=='0'){
				$('#grn').attr("disabled", true);
			}else{
				$('#grn').attr("disabled", false);
			} 
		//	$('#grn').attr("disabled", false);	
			$('#delete1').attr("disabled", false);
			$('#newItem').attr("disabled", true);
			}else{
				$('#grn').attr("disabled", true);	
				$('#newItem').attr("disabled", false);
				$('#delete1').attr("disabled", true);
		} 
 
	}
	function onQuickFilterChanged() {
		$(".ti-search srchicon").hide();
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
	// delete Quotation

	function deleteOnclick() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.poId;
		});
		if (selectedRowsString) {
			var item = {};
			item.poId = selectedRowsString;

			$.ajax({
				type : "POST",
				url : "manage-purchase-order-delete",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {

					$('#deleteQuot').modal('hide');

					$('#delete').attr("disabled", true);
					$('#add').attr("disabled", false);
					$('#dwnld').attr("disabled", false);
					$('#approvePorder').attr("disabled", true);
					if (response.message == "Success") {
						agGrid.simpleHttpRequest({
							url : 'manage-purchase-order-through-ajax'
						}).then(function(data) {
							gridOptions.api.setRowData(data);
							//console.log(JSON.stringify(data))
						});

						
						
					} else {

					}
				},
				error : function(data) {
					console.log(data)
				}
			})
		}

	}
	function deleteProductOnclick() {
		var selectedRows = itemOptions.api.getSelectedRows();
		itemOptions.api.applyTransaction({
			remove : selectedRows

		});
		cancelModalProductBtn();
		//DELETE GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
		var sum = $("#subTotal").val();
		var gstRate = $("#gstRate").val();
		var qCGST = $("#qCGST").val();
		var qSGST = $("#qSGST").val();

		var qIGST = $("#qIGST").val();
		var grandTotal = $("#grandTotal").val();
		var itemIgst = $("#itemIgst").val();
		var itemCgst = $("#itemCgst").val();
		var itemSgst = $("#itemSgst").val();
		var len = selectedRows.length;
		for (var i = 0; i < len; i++) {

			sum = sum - selectedRows[i].lineTotal;
			var taxType = $("#taxType").val()
			if (taxType == "true") {

				selectedRows[i].itemIgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 100;
				qIGST = qIGST - selectedRows[i].itemIgst;
				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qIGST;
				var gTotal1=Math.round(grandTotal);
				var adjustment=(gTotal1-grandTotal);
				
			} else {

				selectedRows[i].itemIgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 100;
				qIGST = qIGST - selectedRows[i].itemIgst;
				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qIGST;
				var gTotal1=Math.round(grandTotal);
				var adjustment=(gTotal1-grandTotal);
/* 
				selectedRows[i].itemCgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 200;
				selectedRows[i].itemSgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 200;
				alert(selectedRows[i].itemCgst)
				alert(selectedRows[i].itemCgst)

				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qCGST + qSGST; */

			}

		}

		$("#itemIgst").val(itemIgst);
		$("#itemCgst").val(itemCgst);
		$("#itemSgst").val(itemSgst);
		$("#subTotal").val(sum);
		$("#qIGST").val(qIGST.toFixed(2));
		$("#qCGST").val(qCGST);
		$("#qSGST").val(qSGST);
		$("#grandTotal").val(gTotal1.toFixed(2))
		if(adjustment>0){
			$("#adjustment").val(adjustment.toFixed(2))	
		}
		else{
			var adjust=Math.abs(adjustment);
			$("#adjustment").val(adjust.toFixed(2))	
		}
		tcsCalculation();
		//calculateAdjustment();
	}

	/* Vendor AutoSearch */

	function getVendorList() {
		var search = $("#vendorName").val();
		$("#addre").hide();
		
		if (search) {

			$.ajax({
						type : "POST",
						url : "manage-purchase-order-get-vendor-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:12px;"   class="autocompletedata cp" onClick="selectAutocompleteValue1(\''
												+ response.body[i].vendorId
												+ '\',\''
												+ response.body[i].vendorName
												+ '\',\''
												+ response.body[i].custGSTNo
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].vendorName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;background-color:#082958;color:#fff;"   onclick="AddVendor();"><a class="addCust" href="#">Add New Vendor</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValue()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddVendor();"><aclass="addCust" href="#">Add New Vendor</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			$("#suggesstion-box1_").hide();
		}
		
	}

	function selectAutocompleteValue1(vendorId, vendorName, custGSTNo, taxType) {

		if (vendorId) {

			$("#vendorId").val(vendorId);
			$("#vendorName").val(vendorName);
			$("#custGSTNo").val(custGSTNo);
			$("#taxType").val(taxType);
			$("#search").val(vendorName);
			$("#search").attr('data-procat', vendorId);
			$("#suggesstion-box1_").hide();
			$("#addre").show();
			hideShowS();
			getAddressDetails(vendorId)
			getReferenceList(vendorId,'');
			//priceCalculation();
		} else {

			$("#vendorId").val("");

			$("#vendorName").val("");
			$("#custGSTNo").val("");
			$("#taxType").val("");
			$("#search").val("");
			$("#search").attr('data-procat', "");
			$("#suggesstion-box1_").hide();

		}
	}
	function selectAutocompleteValue() {

		$("#vendorId").val("");
		$("#vendorName").val("");
		$("#custGSTNo").val("");
		$("#taxType").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box1_").hide();

	}

	function addnewAddress() {
		$('#addAddressModel').modal('show');
		$("#billingInfo").show();
		$("#countryb").val('');
		$("#statesb").val('');
		$("#cityb").val('');
		$("#street1b").val('');
		$("#street2b").val('');
		$("#zipCode").val('');
		$("#phoneb").val('');
		$("#faxb").val('');

	}
	function addnewAddress1() {
		$("#country1s").val('');
		$("#states1s").val('');
		$("#city1s").val('');
		$("#street11s").val('');
		$("#street21s").val('');
		$("#zipCode1s").val('');
		$("#phone1s").val('');
		$("#fax1s").val('');
		$('#addAddressModel1').modal('show');
		$("#shippingInfo").show();

	}
	function getReferenceList(vendorId,rid) {
		if (vendorId) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-getReferenceList?id=" + vendorId,
				success : function(response) {
					if (response.message == "success") {
						$("#reference").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#reference").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].key);
							$("#reference").append(option);
						}
						if(rid!="" || rid!=null || rid!="null"){
							$("#reference").val(rid);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#reference").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("salesOrderIdd");
			$("#reference").append(option);
			$("#reference").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
		}
	}
	function cancelBtn() {
		$('#addAddressModel').modal('hide');
		$("#billingInfo").hide();
	}
	function cancelBtn2() {
		$('#addAddressModel1').modal('hide');
		$("#shippingInfo").hide();
	}

	function AddVendor() {

		$(".formValidation").remove();
		$('#addVendorModel').modal('show');

	}
	function cancelBtn1() {
		$('#facebook').val(null);
		$('#city1').val(null);
		$(".formValidation").remove();
		$('#vendorId').val('');
		$('#salutation').val('');
		$('#vendorName1').val('');
		$('#companyName').val('');
		$('#vendorDisplayName').val('');
		$('#vendorEmail').val('');
		$('#vendorPhone').val('');
		$('#vendorMobile').val('');
		$('#vendorSkype').val('');
		$('#vendorDesignation').val('');
		$('#department').val('');
		$('#webSite').val('');
		$('#pan').val('');
		$('#currency').val('');
		$('#openingBalance').val('');
		$('#paymentTerms').val('');
		$('#tds').val('');
		$('#gstNumber').val('');
		$('#vendorCategory').val('');
		$('#whatsAppNo').val('');
		$('#tanNo').val('');
		
		$('#twitter').val('');
		$('#country').val('');
		$('#states').val('');
		$('#city').val('');
		$('#street1').val('');
		$('#street2').val('');
		$('#zipCoded').val('');
		$('#phone').val('');
		$('#fax').val('');
		$('#country1').val('');
		$('#states1').val('');
		$('#city').val('');
		$('#street11').val('');
		$('#street21').val('');
		$('#zipCode1').val('');
		$('#phone1').val('');
		$('#fax1').val('');
		$('#salutation1').val('');
		$('#firstName').val('');
		$('#lastName').val('');
		$('#emailAdd').val('');
		$('#mobile').val('');
		$('#beneficiaryName').val('');
		$('#bankName').val('');
		$('#accountNo').val('');
		$('#ifsc').val('');

		$('#remarks').val('');

		$('#addVendorModel').modal('hide');
	}
	//add Vendor Info

	function addVendorInfo() {
		var obj = {};
		obj.vendorId = $('#vendorId').text();
		obj.salutation = $('#salutation').val();
		obj.vendorName = $('#vendorName1').val();
		obj.companyName = $('#companyName').val();
		obj.vendorDisplayName = $('#vendorDisplayName').val();
		obj.vendorEmail = $('#vendorEmail').val();
		obj.vendorPhone = $('#vendorPhone').val();
		obj.vendorMobile = $('#vendorMobile').val();
		obj.vendorSkype = $('#vendorSkype').val();
		obj.vendorDesignation = $('#vendorDesignation').val();
		obj.department = $('#department').val();
		obj.webSite = $('#webSite').val();
		//obj.status = $('#status').val();

		obj.pan = $('#pan').val();
		obj.currency = $('#currency').val();
		obj.openingBalance = $('#openingBalance').val();
		obj.paymentTerms = $('#paymentTerms').val();
		obj.tds = $('#tds').val();
		obj.gstNumber = $('#gstNumber').val();
		obj.vendorCategory = $('#vendorCategory').val();
		obj.whatsAppNo = $('#whatsAppNo').val();
		obj.tanNo = $('#tanNo').val();
		obj.faceBook = $('#faceBook').val();
		obj.twitter = $('#twitter').val();

		obj.country = $('#country').val();
		obj.states = $('#states').val();
		obj.city = $('#city').val();
		obj.street1 = $('#street1').val();
		obj.street2 = $('#street2').val();
		obj.zipCode = $('#zipCoded').val();
		obj.phone = $('#phone').val();
		obj.fax = $('#fax').val();

		obj.country1 = $('#country1').val();
		obj.states1 = $('#states1').val();
		obj.city1 = $('#city').val();
		obj.street11 = $('#street11').val();
		obj.street21 = $('#street21').val();
		obj.zipCode1 = $('#zipCode1').val();
		obj.phone1 = $('#phone1').val();
		obj.fax1 = $('#fax1').val();

		obj.salutation1 = $('#salutation1').val();
		obj.firstName = $('#firstName').val();
		obj.lastName = $('#lastName').val();
		obj.emailAdd = $('#emailAdd').val();
		obj.mobile = $('#mobile').val();

		obj.beneficiaryName = $('#beneficiaryName').val();
		obj.bankName = $('#bankName').val();
		obj.accountNo = $('#accountNo').val();
		obj.ifsc = $('#ifsc').val();

		obj.remarks = $('#remarks').val();

		console.log("object on add vendor-----------" + JSON.stringify(obj));
		//return false;

		/* FORM VALIDATION STARTS*/

		var validation = true;

		if (obj.zipCoded == null || obj.zipCoded == "") {
			validation = validationUpdated("Zip Code Required", "zipCoded");
		}
		if (obj.companyName == null || obj.companyName == "") {
			validation = validationUpdated("Company Name Required",
					"companyName");
		}

		if (obj.pan == null || obj.pan == "") {
			validation = validationUpdated("PAN Card Required", "pan");
		}
		if (obj.country == null || obj.country == "") {
			validation = validationUpdated("Country Name Required", "country");
		}
		if (obj.states == null || obj.states == "") {
			validation = validationUpdated("States Name Required", "states");
		}
		if (obj.city == null || obj.city == "") {
			validation = validationUpdated("City Required", "city");
		}
		if (obj.street1 == null || obj.street1 == "") {
			validation = validationUpdated("Street Required", "street1");
		}

		/* FORM VALIDATION ENDS*/

		if (validation) {
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-adds",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.code == "Success") {
						console.log(response);
						$("#messageParagraph").text("Data Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$("#add").hide();
						$("#copy").show();
						$("#delete").hide();
						$("#totalReq").show();
						$("#myGrid").hide();
						$("#searchRowDiv").hide();
						$("#demo").hide();
						$("#addVendorModel").modal('hide');
						$(".formValidation").remove();
						
						cancelBtn1();

					}
				},
				error : function(data) {

					//console.log(data);
				}
			})
		}

	}

	function getVendorDtls(vendorId, id1) {
		$.ajax({
			type : "GET",
			url : "manage-purchase-order-get-vendor_state_data?id=" + vendorId
					+ "&type=" + id1,
			success : function(response) {
				if (response.message == "success") {

					var stateId = response.body[0].name;
					if (stateId == "st019") {

						$("#sgstTR").show();
						$("#cgstTR").show();
						$("#igstTR").hide();
						$("#taxType").val("false")
					} else {

						$("#sgstTR").hide();
						$("#cgstTR").hide();
						$("#igstTR").show();
						$("#taxType").val("true")
					}
				}
			},
			error : function(e) {
			}
		});
	}
	function closeAllNav(){
		closeNav()();
		//closeNav2();
	}
	function addVendorInfo2() {
		var obj = {};
		var Id = $("#vendorId").val();

		obj.vendorId = $("#vendorId").val();
		obj.country = $("#countryb").val();
		obj.states = $("#statesb").val();
		obj.city = $("#cityb").val();
		obj.street1 = $("#street1b").val();
		obj.street2 = $("#street2b").val();
		obj.zipCode = $("#zipCode").val();
		obj.phone = $("#phoneb").val();
		obj.fax = $("#faxb").val();

		var validation = true;

		/* if (obj.zipCode == null || obj.zipCode == "" || obj.zipCode =='0') {
			validation = validationUpdated("Zip Code Required", "zipCode");
		} */
		if (obj.countryb == null || obj.countryb == "") {
			validation = validationUpdated("County Required", "countryb");
		}
		if (obj.statesb == null || obj.statesb == "") {
			validation = validationUpdated("State Required", "statesb");
		}
		if (obj.cityb == null || obj.cityb == "") {
			validation = validationUpdated("City Required", "cityb");
		}
		if (obj.street1b == null || obj.street1b == "") {
			validation = validationUpdated("Street Required", "street1b");
		}
		if (obj.phoneb == null || obj.phoneb == "") {
			validation = validationUpdated("Phone No. Required", "phoneb");
		}
		if (validation) {
			$(".formValidation").remove();
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-add-cust-billingaddress",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "Success") {
						//getAddressDetails(Id)
						$("#messageParagraph").text(
								"Billing Address Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						getAddressDetails(Id);
						cancelBtn();

					}
				},
				error : function(data) {
				}
			})
		}
	}
	function addBrand() {
		var obj = {};
		obj.brandId = $("#brandId").val();
		obj.brandName = $("#brandName").val();
		obj.brandDesc = $("#brandDesc").val();
		var validation = true;

		if (obj.brandName == null || obj.brandName == "") {
			validation = validationUpdated("Brand Name Required", "brandName");
		}
		
		if (validation) {
			$(".formValidation").remove();
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-add-brand",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "Success") {
						$("#messageParagraph").text(
								"Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$('#brandModal').modal('hide');
						getBrandList();
					}
				},
				error : function(data) {
				}
			})
		}
	}	
	function getAddressDetails(vendorId) {
		//var Id=$("#custName").val();
		$.ajax({
			type : "GET",
			url : "manage-purchase-order-get-address?id=" + vendorId,

			async : false,
			success : function(response) {
				if (response.message == "Success") {

					console.log(response.body)
					$("#con").html(response.body.country);
					$("#bstate").html(response.body.states);
					$("#bcity").html(response.body.city);
					$("#bstreet1").html(response.body.street1);
					$("#bstreet2").html(response.body.street2);
					$("#bzipcode").html(response.body.zipCode);
					$("#bphone").html(response.body.phone);
					$("#bfax").html(response.body.fax);

					$("#con1").html(response.body.country1);
					$("#bstate1").html(response.body.states1);
					$("#bcity1").html(response.body.city1);
					$("#bstreet11").html(response.body.street11);
					$("#bstreet21").html(response.body.street21);
					$("#bzipcode1").html(response.body.zipCode1);
					$("#bphone1").html(response.body.phone1);
					$("#bfax1").html(response.body.fax1);

				}
			}
		});
	}

	function addVendorInfo1() {
		var obj = {};
		var Id = $("#vendorId").val();

		obj.vendorId = $("#vendorId").val();
		obj.country1 = $("#country1s").val();
		obj.states1 = $("#states1s").val();
		obj.city1 = $("#city1s").val();
		obj.street11 = $("#street11s").val();
		obj.street21 = $("#street21s").val();
		obj.zipCode1 = $("#zipCode1s").val();
		obj.phone1 = $("#phone1s").val();
		obj.fax1 = $("#fax1s").val();
		var validation = true;

		/* if (obj.zipCode1s == null || obj.zipCode1s == "") {
			validation = validationUpdated("Zip Code Required", "zipCode1s");
		} */
		if (obj.country1s == null || obj.country1s == "") {
			validation = validationUpdated("County Required", "country1s");
		}
		if (obj.states1s == null || obj.states1s == "") {
			validation = validationUpdated("State Required", "states1s");
		}
		if (obj.city1s == null || obj.city1s == "") {
			validation = validationUpdated("City Required", "city1s");
		}
		if (obj.street11s == null || obj.street11s == "") {
			validation = validationUpdated("Street Required", "street11s");
		}
		if (obj.phone1s == null || obj.phone1s == "") {
			validation = validationUpdated("Phone No. Required", "phone1s");
		}
		if (validation) {
			$(".formValidation").remove();
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-add-cust-shippingaddress",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "Success") {
						//getAddressDetails(Id)
						$("#messageParagraph").text(
								"Shipping Address Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						getAddressDetails(Id);
						cancelBtn2();
					}
				},
				error : function(data) {
				}
			})
		}
	}

	function getStateDetails() {

		var cname = $('#country').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states").append(option);
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetails1() {

		var cname = $('#country1').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetailsb() {

		var cname = $('#countryb').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#statesb").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#statesb").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#statesb").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#statesb").append(option);
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetailss() {

		var cname = $('#country1s').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states1s").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1s").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1s").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1s").append(option);
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDataOnEdit1(stateId) {
		var country = $("#country").val();
		if (country) {
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-stateList?id=" + country,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
						$("#states1").val(stateId);
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
		}
	}
	
	/* Item AutoSearch */

	function getItemQutotationList() {
		var search = $("#itemName").val();
		if (search) {
			$
					.ajax({
						type : "POST",
						url : "manage-purchase-order-get-item-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								if (response.body.length != 0) {
									$("#itemId").val("");
									$("#gstRate").val("");
									$("#sku").val("");
									$("#brandName").val("");
									$("#brandId").val("");
									$("#hsnCode").val("");
									$("#unit").val("");
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									for (var i = 0; i < response.body.length; i++) {
							content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValueItem1(\''
												+ response.body[i].sku
												+ '\',\''
												+ response.body[i].productId
												+ '\',\''
												+ window
														.btoa(response.body[i].productName)
												+ '\',\''
												+ response.body[i].brandId
												+ '\',\''
												+ window
														.btoa(response.body[i].brandName)
												+ '\',\''
												+ window
														.btoa(response.body[i].hsnCode)
												+ '\',\''
												+ window
														.btoa(response.body[i].unit)
												+ '\',\''
												
												+ window
														.btoa(response.body[i].gstRate)
												 + '\',\''
												  + window.btoa(response.body[i].model)
											   
												+ '\')">'
												/* + response.body[i].sku
												+ " - " */
												+ response.body[i].productName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
										+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);

								}
								else {
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px;font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"li onClick="selectAutocompleteValueItem()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
												+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#unit").val("");
			$("#suggesstion-box_").hide();
		}
	}
	/* 	function selectActive(id, sku, productId, productName, brandId, brandName,
	 prodCatId, prodCatName, hsnCode, unit, gstRate) {
	 $('.autocompletedata ').removeClass('productActive');
	 $("#" + id).addClass('productActive');
	 $("#itemNameTemp").val(window.atob(productName));
	 $("#itemIdTemp").val(productId);
	 $("#brandNameTemp").val(window.atob(brandName));
	 $("#brandIdTemp").val(brandId);
	 $("#skuTemp").val(sku);
	 $("#prodCatIdTemp").val(prodCatId);
	 $("#hsnCodeTemp").val(window.atob(hsnCode));
	 $("#unitTemp").val(window.atob(unit));
	 $("#gstRateTemp").val(window.atob(gstRate));
	 $("#prodCatNameTemp").val(window.atob(prodCatName));
	 $("#searchTemp").val(window.atob(productName))
	 } */
	function selectAutocompleteValueItem1(sku, productId, productName, brandId,
			brandName, hsnCode, unit, gstRate,model) {
		if (sku) {
			$("#sku").val(sku);
			$("#itemName").val(window.atob(productName));
			$("#itemId").val(productId);
			$("#itemIdTemp").val(productId);
			$("#brandName").val(window.atob(brandName));
			$("#brandId").val(brandId);
			$("#sku").val(sku);
			$("#skuTemp").val(sku);
			$("#hsnCode").val(window.atob(hsnCode));
			$("#model").val(window.atob(model));
			$("#unit").val(window.atob(unit));
			$("#gstRate").val(window.atob(gstRate));
			$("#itemName").attr('data-procat', itemId);
			$("#suggesstion-box_").hide();
			hideShowS();
		} else {
			$("#sku").val("");
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#model").val("");
			$("#unit").val("");
			$("#itemName").attr('data-procat', "");
			$("#suggesstion-box_").hide();

		}
	}
	function selectAutocompleteValueItem() {

		$("#itemId").val("");

		$("#gstRate").val("");
		$("#sku").val("");
		$("#itemName").val("");
		$("#itemName").attr('data-procat', "");
		$("#suggesstion-box_").hide();

	}

	function selectCheckBox(id, lvl) {
		if(id=='PCAT000004'){
			event.target.checked = false
			}
			else{
				var checkbox = document.getElementById('ccCheck_PCAT000004');
				var checkbox1 = document.getElementById('lbl_PCAT000004');
				checkbox.disabled = true;
				checkbox1.disabled = true;
				$('#lbl_PCAT000004').val(null);
				$('#ccCheck_PCAT000004').val(null);
			$("#select_product").empty();
		getProductByCategory();

		if (lvl == 'L1') {
			var textDesc = $("#lbl_" + id).text();
			$("#catDesc").text(textDesc);
		} else {
			var res = lvl.substring(1, 1000000);

			var lastText = $("#lbl_" + id).text();
			var textDesc = "";
			for (i = res; i > 1; i--) {
				var pUL = $("#lbl_" + id).parents("ul").attr("id");
				pUL = pUL.substring(3, 10000000000000);
				var newText = $("#lbl_" + pUL).text();
				textDesc = newText + " > " + textDesc;
				id = pUL;
			}
			textDesc = textDesc + lastText;
			$("#catDesc").text(textDesc);
		}
	}
	}
	function selectProductVal() {
		$("#itemName").val($("#itemNameTemp").val());
		$("#itemId").val($("#itemIdTemp").val());
		$("#brandName").val($("#brandNameTemp").val());
		$("#brandId").val($("#brandIdTemp").val());
		$("#category").val($("#prodCatIdTemp").val());
		$("#categoryName").val($("#prodCatNameTemp").val());
		$("#sku").val($("#skuTemp").val());
		$("#hsnCode").val($("#hsnCodeTemp").val());
		$("#unit").val($("#unitTemp").val());
		$("#search").val($("#itemNameTemp").val())
		$("#select_product").html('');
		$('#myModal').modal('hide');
		$("#gstRate").val($("#gstRateTemp").val());
	}
	function getCategoryList() {
		$('.loader').show();
		$("body").addClass("overlay");
		$("#productDiv").modal("show");
		$.ajax({
	        type: "POST",
	        url: "manage-purchase-order-get-total-list",
	        dataType: "json",
	        contentType: "application/json",
	        success: function(response) {
	        	if (response.message == "Success") {
	        		$("#costCeneterCBDiv").empty();
	            	for(var i = 0; i < response.body.length; i++) {
	            		var row = "";
	            		if(response.body[i].categoryId == response.body[i].parentId) {
	            			if(response.body[i].nodeCount > 0) {
	            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
	    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
	            			} else {
	            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
	    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +
	    						'" name="'+ response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
	            			}
	            			
	            		} else {
	            			if(response.body[i].nodeCount > 0) {
	            				row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
	    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
	            			} else {
	            				
	            					row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
	        						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +'" name="'+
	        						response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
	            			}
	            		}
						$("#costCeneterCBDiv").append(row);
						
	            	}
	        		
	        		var pcat = $("#prCategoryId").val();
	        		$(".benefitChk pc1-box").prop("checked", false);
	        		$("#ccCheck_"+pcat).prop("checked", false);
	            	
	            	$('.loader').hide();
	            	$("body").removeClass("overlay");
	            	
	            	$('#basic').simpleTreeTable({
	            	    expander: $('#expander'),
	            	    collapser: $('#collapser'),
	            	    store: 'session',
	            		storeKey: 'simple-tree-table-basic'
	            	});
	            }
	        }, error: function(data) {
	        	console.log(data)
	        	$('.loader').hide();
	        	$("body").removeClass("overlay");
	        	$("#productDiv").modal("show");
	        }
		});
	}
	function selectCheckBoxx(id,lvl) {
		if(id=='PCAT00000'){
			event.target.checked = false
			}else{
		$(".benefitChk").prop("checked", false);
		$("#ccCheck_"+id).prop("checked", true);
		$("#tempCategoryId").val(id);
		$("#prLevelId").val(lvl);
		 
	}}

	function getProductByCategory() {

		$("#select_product").empty();
		var valor = "";
		$('input.pc1-box[type=checkbox]').each(function() {
			if (this.checked)
				valor = valor + $(this).val() + ",";
		});
		if (valor) {
			$("#select_product").empty();
			$
					.ajax({
						type : "POST",
						url : "manage-purchase-order-item-product-by-cat",
						dataType : 'json',
						contentType : 'application/json',
						data : valor,
						success : function(response) {
							if (response.message == "success") {
								console.log(response.body)
								$("#select_product").empty();
								var content = '';
								for (var i = 0; i < response.body.length; i++) {

									content += '<div class="autocompletedata cp product-item" id="'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '" onClick=selectActive("'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '","'
											+ response.body[i].sku
											+ '","'
											+ response.body[i].productId
											+ '","'
											+ window
													.btoa(response.body[i].productName)
											+ '","'
											+ window
													.btoa(response.body[i].brandId)
											+ '","'
											+ window
													.btoa(response.body[i].brandName)
											+ '","'
											+ window
													.btoa(response.body[i].productCatId)
											+ '","'
											+ window
													.btoa(response.body[i].productCatName)
											+ '","'
											+ window
													.btoa(response.body[i].hsnCode)
											+ '","'
											+ window
													.btoa(response.body[i].unit)
											
											+ '","'
											+ window
													.btoa(response.body[i].gstRate)
											+ '","'
											+ window.btoa(response.body[i].model)
											+ '")>'
											/* + response.body[i].sku
											+ " - "
											+ response.body[i].brandName
											+ " - " */
											+ response.body[i].productName
											+ '</div>';
								}
								content += '</ul>';
								$("#select_product").show();
								$("#select_product").append(content);

								var itemId = $("#itemId").val();
								var skuId = $("#sku").html();

								if (itemId) {
									$("#" + itemId + "_" + skuId).addClass(
											'productActive');
								}

							}
						},
						error : function(data) {

						}
					})
		} else {
			$("#itemName").val(null);
			$("#hsnCode").val(null);
			$("#unit").val(null);
			$("#itemId").val(null);
			$("#select_product").empty();
		}
	}

	function selectActive(id, sku, productId, productName, brandId, brandName,
			prodCatId, prodCatName, hsnCode, unit,gstRate) {
		$('.autocompletedata ').removeClass('productActive');
		$("#" + id).addClass('productActive');
		$("#itemNameTemp").val(window.atob(productName));
		$("#itemIdTemp").val(productId);
		$("#brandNameTemp").val(window.atob(brandName));
		$("#brandIdTemp").val(window.atob(brandId));
		$("#skuTemp").val(sku);
		$("#gstRateTemp").val(window.atob(gstRate));
		$("#prodCatIdTemp").val(window.atob(prodCatId));
		$("#prodCatNameTemp").val(window.atob(prodCatName));
		$("#searchTemp").val(window.atob(productName))
		$("#hsnCodeTemp").val(window.atob(hsnCode));
		$("#unitTemp").val(window.atob(unit));

	}

	var totalLine;
	function calculateLineTotal() {
		var price = $("#unitPrice").val();
		var quantity = $("#quantity").val();
		var discount = $("#discount").val();
		var discountAmount = $("#discountAmount").val();

		if (discountAmount == '1') {
			if (price && quantity) {
				var mul = price * quantity;

				if (discount > mul) {

					$("#discount").val("0");
					totalLine = mul - discount;
					$("#lineTotal").val((mul).toFixed(2));
				} else {
					totalLine = mul - discount;
					$("#lineTotal").val((totalLine).toFixed(2));
				}

			} else {
				var mul = 0;
				$("#lineTotal").val((mul).toFixed(2));

			}
		} else {
			if (price && quantity) {
				var mul = price * quantity;
				if (discount > mul) {

					$("#discount").val("0");
					totalLine1 = (mul / 100) * discount;
					totalLine = mul - totalLine1;
					$("#lineTotal").val((mul).toFixed(2));
				} else {
					totalLine1 = (mul / 100) * discount;
					totalLine = mul - totalLine1;
					$("#lineTotal").val((totalLine).toFixed(2));
				}

			} else {
				var mul = 0;
				$("#lineTotal").val((mul).toFixed(2));

			}
		}

	}

	var grandTotal1 = $("#grandTotal").val();
	;
	/* function calculateAdjustment() {
		var adjustment = $("#adjustment").val();

		if (adjustment && grandTotal) {

			var add = parseFloat(adjustment) + parseFloat(grandTotal);

			$("#grandTotal").val((add).toFixed(3));

		} else {
			var add = 0;

			$("#grandTotal").val((grandTotal).toFixed(3));

		}

	} */

	function calculateAdjustment() {
		//var adjustment = $("#adjustment").val();

		if (/^\d+$/.test($("#adjustment").val())
				|| $("#adjustment").val() == '-'
				|| $("#adjustment").val() == ''
				|| /^\-?\d+((\.|\,)\d+)?$/.test($("#adjustment").val())) {
			var adjustment = $("#adjustment").val();
		} else {
			$("#adjustment").val(0);
		}

		var subTotal = $("#subTotal").val();
		var qSGST = $("#qSGST").val();
		var qCGST = $("#qCGST").val();
		var qIGST = $("#qIGST").val();
		var tcsAmount1 = $("#tcsAmount").val();
		var tcsAmount = 0;
		if (tcsAmount1 != '' && tcsAmount1 != null) {
			tcsAmount = tcsAmount1;
		}
		var grandTotal = parseFloat(subTotal) + parseFloat(qSGST)
				+ parseFloat(qCGST) + parseFloat(qIGST) + parseFloat(tcsAmount);

		var add = 0;

		if (/^\-?\d+((\.|\,)\d+)?$/.test(adjustment)) {

			add = parseFloat(adjustment) + parseFloat(grandTotal);

			$("#grandTotal").val((add).toFixed(2));

		} else {

			$("#grandTotal").val((grandTotal).toFixed(2));

		}

	}
// tcs calculation

	function tcsCalculation() {

		var tcsValue = $("#tcsValue").val();
		var subTotal = $("#subTotal").val();
		var grandTotal2 = $("#grandTotal").val();
		var adjustment = $("#adjustment").val();
		
		var qSGST = $("#qSGST").val();
		if (qSGST == "" || qSGST == null || qSGST == "null") {
			qSGST = 0;
			$("#qSGST").val(qSGST);
		}
		var qCGST = $("#qCGST").val();
		if (qCGST == "" || qCGST == null || qCGST == "null") {
			qCGST = 0;
			$("#qCGST").val(qCGST);
		}
		var qIGST = $("#qIGST").val();
		if (qIGST == "" || qIGST == null || qIGST == "null") {
			qIGST = 0;
			$("#qIGST").val(qIGST);
		}

		var tcsAmount = $("#tcsAmount").val();
		if (tcsAmount == "" || tcsAmount == null || tcsAmount == "null") {
			tcsAmount = 0;
			$("#tcsAmount").val(tcsAmount);
		}
		var grandTotal = $("#grandTotal").val();
		if (grandTotal == "" || grandTotal == null || grandTotal == "null") {
			grandTotal = 0;
			$("#grandTotal").val(grandTotal);
		}
		
		var totVal = parseFloat(subTotal) + parseFloat(qSGST)
				+ parseFloat(qCGST) + parseFloat(qIGST)+parseFloat(adjustment);
		
		if (tcsValue) {
			
			var tcs = (parseFloat(subTotal) * parseFloat(tcsValue)) / 100;
			var add = parseFloat(tcs) + parseFloat(totVal);
			$("#grandTotal").val((add).toFixed(2));
			$("#tcsAmount").val((tcs).toFixed(2));
		} else {
			
			var add = 0;
			$("#grandTotal").val((totVal).toFixed(2));
		}

	}


	var tcs = 0;
	function tcsBlank() {
		var tcsValue = $("#tcsValue").val();
		var tcsName = $("#tcsName").val();
		var gt = $("#grandTotal").val();
		var tcsAmount = $("#tcsAmount").val();

		if (tcsName == '') {
			$("#tcsValue").val('');
			$("#tcsId").val('');
			tcsCalculation()
			$("#tcsAmount").val(tcs);
		}

	}
	function toDataUrl(url, callback) {
	    var xhr = new XMLHttpRequest();
	    xhr.onload = function() {
	        var reader = new FileReader();
	        reader.onloadend = function() {
	            callback(reader.result);
	        }
	        reader.readAsDataURL(xhr.response);
	    };
	    xhr.open('GET', url);
	    xhr.responseType = 'blob';
	    xhr.send();
	}
	 
	function submitPurchaseDetails(dataset) {
	    console.log(dataset)
	   	  $.ajax({
	        type: "POST",
	          url: "manage-purchase-order-save-purchase-dtls",
	        	 dataType: 'json',
	        	    contentType: 'application/json',
	        	      data: JSON.stringify(dataset),
	        	      success: function(response) {
	        	
	                  if (response.message == "Success") {
	            	closeVendor();
	            	var productId = $("#productId").val();
	            	agGrid.simpleHttpRequest({
						url : 'manage-invoice-get-purchase-by-product?id='+productId 
					}).then(function(data) {
						console.log(data)
						purchaseOptions.api.setRowData(data);
					});
	            } else {
	                swal({
	                    title: response.code,
	                    text: response.message,
	                    type: "warning"
	                })
	            }
	        },
	        error: function(response) {
	            console.log(response);
	        }
	    })
	}
		function saveFile() {
			
			var uFile = $('#fileUpload')[0].files[0];
			var fileName = $('#fileUpload').val();
		console.log(uFile);
		console.log(fileName);

			var lastIndex = fileName.lastIndexOf("\\");
			if (lastIndex >= 0) {
				fileName = fileName.substring(lastIndex + 1);
			}
			var iURL = URL.createObjectURL(uFile);

			$('#imgemp').attr('src', '');
			$('#imgemp').attr('src', iURL);

			var fileData = new FormData();
			fileData.append('file', uFile);
			fileData.append('path', 'none');

			$.ajax({
				type : "POST",
				url : "manage-purchase-order-upload-fileprofuct",
				enctype : "multipart/form-data",
				contentType : false,
				data : fileData,
				processData : false,
				cache : false,
				success : function(response) {

				},
				error : function(e) {

				}
			});
			
		}
	function showDisplay() {
		var title = $('#companyName').val();

		$('#vendorDisplayName').val(title);
	}

	function tcscancelBtn() {
		$('#manageTCsModel').modal('hide');
		$("#collection").val('');
		$("#taxName").val('');
	    $("#rateId").val('');
	}

	function saveFile1(event) {
		var uFile = $(uploadDoc_0)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");
		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_0").html("");

		if (extension[1] == "jpg" || extension[1] == "png"
				|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o' style='color: blue'></i></a></div>";
		} else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o' style='color: red'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l'> </div>";
		}
		$("#uploadedBillDiv_0").html(LightImg);
		$("#imageName_0").html(fileName);
		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');
		$.ajax({
			type : "POST",
			url : "manage-purchase-order-upload-file1",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {
			},
			error : function(e) {

			}
		});
	}
	//TCS auto search

	function getTCSList() {
		var search = $("#tcsName").val();
		if (search) {
			$
					.ajax({
						type : "POST",
						url : "manage-purchase-order-get-tcs-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue3(\''
												+ response.body[i].tcsId
												+ '\',\''
												+ response.body[i].taxName
												+ '\',\''
												+ response.body[i].rateId
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].taxName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee1()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			$("#suggesstion-box3_").hide();
		}

	}

	function selectAutocompleteValuee1() {

		$("#tcsId").val("");

		$("#tcsName").val("");
		$("#custGSTNoo1").val("");
		$("#taxTypee1").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box3_").hide();

	}

	function selectAutocompleteValue3(tcsId, taxName, rateId, taxType) {

		$("#tcsId").val(tcsId);
		$("#tcsName").val(taxName);
		$("#tcsValue").val(rateId);
		$("#search").val(taxName);
		$("#search").attr('data-procat', tcsId);
		$("#suggesstion-box3_").hide();
		tcsCalculation();

	}
	function AddTCS() {

		$('#manageTCsModel').modal('show');
		$("#collection").val('');
		$("#rateId").val('');
		$("#taxName").val('');

	}

	function addtcsInfo1() {
		
		var obj = {};
		var Id = $("#tcsId").val();

		obj.salespersonId = $("#tcsId").val();
		obj.collection = $("#collection").val();
		obj.rateId = $("#rateId").val();
		obj.taxName = $("#taxName").val();
		
		var validation = true;
		if (obj.collection == null || obj.collection == "") {
			validation = validationUpdated("Select Collection",
					"collection");
		}
		
			if (obj.rateId == null || obj.rateId == "") {
			validation = validationUpdated("Enter Rate",
					"rateId");
		}
			if (obj.taxName == null || obj.taxName == "") {
				validation = validationUpdated("Enter Tax Name",
						"taxName");
			}

		$.ajax({
			type : "POST",
			url : "manage-purchase-order-add-tcs",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					//getSalessPersonList();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					$('#manageTCsModel').modal('hide');

				}
			},
			error : function(data) {
			}
		})

	}

	function checkEmpty() {
		var infofileName = true;
		$(".formValidation").remove();
		$('.docNoclss').each(function() {
			if ($(this).val() == null || $(this).val() == "") {
				infofileName = false;
				validationModal("Document Name Required", $(this).attr('id'));
			}
		});

		var mulDocInfo = true;
		if (infofileName) {
			$('#doctbodyData > tr').each(function() {
				if ($(this).closest('tr').find('.imageName').text()) {
					mulDocInfo = true;
				} else {
					mulDocInfo = false;
					$("#messageParagraph").text("Please Choose a File ");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					return false;
				}

			});
		}
		if (infofileName && mulDocInfo) {
			addMore1()
		}
	}
	function check1(fieldId) {
		var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');
		$("#" + fieldId).val(tempVal);
	}
	function ZipCode(fieldId) {
		var tempVal = $("#" + fieldId).val()
		var value = document.getElementById(fieldId).value;
		if(value.length=='5' || value.length=='6'){
			$("#" + fieldId).val(tempVal);
		}
		else{
			$("#messageParagraph").text("Please Enter valid ZipCode");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			$("#" + fieldId).val(null);
		}
		
if(tempVal==''){
	$("#messageParagraph").text("Please Enter valid ZipCode");
	$("#msgOkModal").removeClass("btn3");
	$("#msgOkModal").addClass("btn1");
	$("#msgModal").modal('show');
		}
	}
	
	function saveMultiFile(event) {

		var AssignItemQty = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var currentFldId = "#" + currentFldId;

		var uFile = $(currentFldId)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");

		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_" + counter).html("");
		if (extension[1] != null && extension[1] != "") {
			$("#uploadHidden_" + counter).val('');
		}
		if (extension[1] == "jpg" || extension[1] == "png"
				|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		} else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o'></i> </a></div>";
		} else if (extension[1] == "xls" || extension[1] == "xlsx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-excel-o'></i></a></div>";
		} else if (extension[1] == "doc" || extension[1] == "dox"
				|| extension[1] == "docx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-word-o'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l '> </div>";
		}
		var dltImg = "<i class='ti-close position-l rmv1'></i>";
		$("#uploadedBillDiv_" + counter).html(LightImg);
		$("#imageName_" + counter).html(fileName);
		$("#dltImage_" + counter).html(dltImg);

		$("#dltImage_" + counter).addClass("custom-file-delete");
		//$("#dltImage_" + counter).removeClass("custom-file-delete");
		$("#clickImg_" + counter).removeClass("ti-plus");
		$("#clickImg_" + counter).addClass("ti-pencil");
		//$("#dltImage_0").hide();
	}

	function closeModall() {
		$("#myModall").modal("hide");
		$("#myModall").modal("empty");
	}
	function addMore1() {
		var lengthOfTableRow = $("#doctbodyData").children('tr').length;
		var cloneHtml = $("#docTbl tbody tr:first").clone();

		$("#docTbl tbody").append($("#docTbl tbody tr:first").clone());
		$("#myTable tbody tr td:last").html("");
		//var addMore = '<button type="button" class="btn btn-primary tr_clone_add" name="add" onclick="addMore1();"><span class="ti-plus"></span></button>&nbsp;'

		$("#docTbl tbody tr:last").find(".documentclss").val("");
		$("#docTbl tbody tr:last").find(".docNoclss").val("");
		$("#docTbl tbody tr:last").find(".documentclssup").val("");
		$("#docTbl tbody tr:last").find(".uploadedBillCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").val('');
		$("#docTbl tbody tr:last").find(".imageName").empty();
		var j = 0;
		$("#docTbl > #doctbodyData > tr").each(function(i) {

			var selectInput = $(this).find('select');
			var textInput = $(this).find('input');
			var fileInput = $(this).find('file');
			var divInput = $(this).find('div');
			var label = $(this).find('label');
			var iInput = $(this).find('i');
			selectInput.eq(0).attr('id', "docid_" + i);

			textInput.eq(1).attr('id', "docnoid_" + i);
			textInput.eq(2).attr('id', "uploadDoc_" + i);
			label.eq(1).attr('for', "uploadDoc_" + i);
			textInput.eq(3).attr('id', "uploadHidden_" + i);
			divInput.eq(4).attr('id', "uploadedBillDiv_" + i);
			divInput.eq(5).attr('id', "imageName_" + i);
		//	divInput.eq(6).attr('id', "dltImage_" + i);
			iInput.eq(0).attr('id', "clickImg_" + i);
			j++;
		})
		$("#clickImg_" + (j - 1)).removeClass("ti-pencil");
		$("#clickImg_" + (j - 1)).addClass("ti-plus");

	}

	/* save document file for excel*/
	function saveMultiFileForExelUpload(event) {
		$(".formValidation").remove();
		var uFile = $(uploadDocForExcel_0)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");
		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDivForExcel_0").html("");

		if (extension[1] == "xls" || extension[1] == "xlsx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-excel-o'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l'> </div>";
		}
		$("#uploadedBillDivForExcel_0").html(LightImg);
		$("#imageNameForExcel_0").html(fileName);
		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');
		$.ajax({
			type : "POST",
			url : "manage-purchase-order-upload-file",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {

			},
			error : function(e) {

			}
		});
	}
	
	//Upload  po
	
	var dataset = [];
	function saveUploadData() {
		var data = {};
		var validation = true;
		dataset.push(data);
		var udata = $("#imageNameForExcel_0").html();
		if (udata == null || udata == "") {
			validation = validationUpdated("Please Upload Excel",
					"validationDiv");
		}
		if (validation) {
			$(".formValidation").remove();
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-save-excelData",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(dataset),
				success : function(response) {
					if (response.message == "Success") {
						$("#uploadedBillDivForExcel_0").html("");
						$("#imageNameForExcel_0").html("");
						$("#messageParagraph").text(
								"PO Uploaded Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$('#uploadModal').modal('hide');
						
						agGrid.simpleHttpRequest({
							url : "manage-purchase-order-through-ajax"
						}).then(function(data) {
							var len = data.length;
							$('#totalCandidate').find('span').html(len);
							gridOptions.api.setRowData(data);
						});
					} else {
						$("#messageParagraph").text(
								"Duplicate PO Entry");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$('#uploadModal').modal('hide');
						$("#uploadedBillDivForExcel_0").html("");
						$("#imageNameForExcel_0").html("");
					}
				},
				error : function(response) {
					console.log(response);
				}
			})
		}

	}

	function uploadDetails() {
		$('#uploadModal').modal('toggle');
	}
	function closeUploadModal() {
		$('#uploadModal').modal('hide');
		//location.reload();
	}
	function checkForDuplicateEntry(event) {
		var document = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var count = 0;
		$(".docNoclss").each(function() {
			if (document == $(this).val()) {
				count++;
			}
		})
		if (count >= 2) {
			$("#messageParagraph").text("Document Name Already Entered");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');

			return false;
		} else {
			return true;
		}

	}
	function approvePorder() {
		$('#approvePurchaseorder').modal('show');
	}

    function cancelApproveModalBtn() {
		$('#approvePurchaseorder').modal('hide');
	}
    
    function closePurchaseorder() {
		$('#closePurchaseorderModal').modal('show');
	}

    function cancelPurchaseorderModal() {
		$('#closePurchaseorderModal').modal('hide');
	}
	
	function openDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('show');
	}
	//for closeing modal box for dlt ind product
	function closeDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('hide');
	}

	function deletAttachmentRow() {
		var lengthOfTableRow1 = 0;
		$("#docTbl > #doctbodyData > tr").each(function() {
			lengthOfTableRow1 = lengthOfTableRow1 + 1;
		})
		var id = $("#dltValue").val();
		$("#" + id).closest('tr').remove();
		closeDeleteConfirm();
		if (lengthOfTableRow1 == 1) {
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0"></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);
		}
	}

	function downloadDetails() {
		var dataset = [];
		gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptions.api.exportDataAsCsv(dataset);
	}

	function openModal(id) {
		if (id == 0) {
			$("#organatioModal").show();
			$("#customerModal").hide();
		} else if (id == 1) {
			$("#customerModal").show();
			$("#organatioModal").hide();
		} else {
			$("#customerModal").hide();
			$("#organatioModal").hide();
		}

	}

	/*
	 * taxtype fn
	 */
	function hideShowS() {
		var taxType1 = $("#taxType").val();
		if (taxType1 == 'true') {
			$('#igstTR').hide();
			$('#cgstTR').show();
			$('#sgstTR').show();
		} else {
			$('#igstTR').show();
			$('#cgstTR').hide();
			$('#sgstTR').hide();
		}
	}

	function copyAsBillingAdd() {
		var country = $('#country').val();
		var states = $('#states').val();
		var city = $('#city').val();
		var street1 = $('#street1').val();
		var street2 = $('#street2').val();
		var zipCode = $('#zipCoded').val();
		var phone = $('#phone').val();
		var fax = $('#fax').val();

		$('#country1').val(country);
		//$('#states1').val(states);
		getStateDataOnEdit1(states);
		$('#city1').val(city);
		$('#street11').val(street1);
		$('#street21').val(street2);
		$('#zipCode1').val(zipCode);
		$('#phone1').val(phone);
		$('#fax1').val(fax);
	}
	
	function createGRN() {
		var selectedRows = itemOptions.api.getSelectedRows();
		var selectedRowsString = '';
		var sku = "";
		for (var i = 0; i < selectedRows.length; i++) {
			sku = sku + '"' + selectedRows[i].sku + '",';
		}
		sku = sku.substring(0, sku.length - 1);
		var id = $("#pohedId").html();
		if (sku) {
			sessionStorage.setItem('activity', 'ACT0218');
			
			agGrid.simpleHttpRequest({
				url : 'manage-purchase-order-get-GRNdata?id=' + id + "&sku=" + sku
			}).then(function(data) {
				localStorage.setItem('ReqGRNData', JSON.stringify(data));
				itemOptions.api.setRowData(data);
				window.location.href = "/purchase/manage-invoice"
			});
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}
	}
	  function approveOnclick() {
			
			var selectedRows = gridOptions.api.getSelectedRows();
			var selectedRowsString = '';
			selectedRows.forEach(function(selectedRow, index) {
				if (index > 0) {
					selectedRowsString += ',';
				}
				selectedRowsString += selectedRow.poId;
			});
			var poId = selectedRowsString;
			
			var approveStatus = 1;
			$('#approvePurchaseorder').modal('show');
			$('.loader').show();
			
		$.ajax({
			type : "GET",
			url : "manage-purchase-order-approve-th-ajax?approveStatus=" + approveStatus + "&poId=" + poId ,
			async : false,
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("Purchase Order Approved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					
					$('#approvePurchaseorder').modal('hide');
					$("#total").show();
					$("#totalCandidate").show();
					$("#btndiv").show();

					$("#reqTable").show();
					$('#add').attr("disabled", false);
					$('#delete').attr("disabled", true);
					$('#approvePorder').attr("disabled", true);
					$('#dwnld').show();
					$("#addData").hide();
					$("#myGrid").show();
					$('#approvePorder').attr("disabled", true);
					$("#searchRowDiv").show();
					$("#reqTable").show();
					agGrid.simpleHttpRequest({
						url : "manage-purchase-order-through-ajax"
					}).then(function(data) {
						var len = data.length;
						$('#totalCandidate').find('span').html(len);
						gridOptions.api.setRowData(data);
					});
					
				}else{
					$('.loader').hide();
					$('#approvePurchaseorder').modal('show');
				}
				
			},
			error : function(data) {
			}
		});
	}
	  
	  
	  function closeOnclick() {
			
			var selectedRows = gridOptions.api.getSelectedRows();
			var selectedRowsString = '';
			selectedRows.forEach(function(selectedRow, index) {
				if (index > 0) {
					selectedRowsString += ',';
				}
				selectedRowsString += selectedRow.poId;
			});
			var poId = selectedRowsString;
			
			var closeStatus = 1;
			$('#closePurchaseorderModal').modal('show');
			$('.loader').show();
			
		$.ajax({
			type : "GET",
			url : "manage-purchase-order-close-th-ajax?closeStatus=" + closeStatus + "&poId=" + poId ,
			async : false,
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("Purchase Order Close Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					
					$('#closePurchaseorderModal').modal('hide');
					$("#total").show();
					$("#totalCandidate").show();
					$("#btndiv").show();

					$("#reqTable").show();
					$('#add').attr("disabled", false);
					$('#delete').attr("disabled", true);
					$('#approvePorder').attr("disabled", true);
					$('#dwnld').show();
					$("#addData").hide();
					$("#myGrid").show();
					$('#approvePorder').attr("disabled", true);
					$("#searchRowDiv").show();
					$("#reqTable").show();
					agGrid.simpleHttpRequest({
						url : "manage-purchase-order-through-ajax"
					}).then(function(data) {
						var len = data.length;
						$('#totalCandidate').find('span').html(len);
						gridOptions.api.setRowData(data);
					});
					
				}else{
					$('.loader').hide();
					$('#closePurchaseorderModal').modal('show');
				}
				
			},
			error : function(data) {
			}
		});
	} 
	  
	  
	  
	  
	  
	  
	  
	  
	  var pmailValid;
	  function pmailVal() {
			var mail1 = $('#vendorEmail').val();
			  var mid =  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
			  var mail =mail1.toLowerCase();
				$('#vendorEmail').val(mail);
			if (mail != "") {
				if (mid.test(mail)) {
					$("#error3").hide();
					pmailValid = true;
				
					return true;
				} else {
					$("#error3").show();
					$("#error3").html("Please enter a valid email id.");
					pmailValid = false;
					return false;
				}

			} else {
				$("#error3").hide();
				pmailValid = true;
				return true;
			}

		}	
	  var pmailValid;
	  function pmailValadd() {
			var mail1 = $('#emailAdd').val();
			  var mid =  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
			  var mail =mail1.toLowerCase();
				$('#emailAdd').val(mail);
			if (mail != "") {
				if (mid.test(mail)) {
					$("#error6").hide();
					pmailValid = true;
				
					return true;
				} else {
					$("#error6").show();
					$("#error6").html("Please enter a valid email id.");
					pmailValid = false;
					return false;
				}

			} else {
				$("#error6").hide();
				pmailValid = true;
				return true;
			}

		}  
	  
		var pancardValid;

		function pancardVal() {
			var pancard = $('#pan').val();

			var pancardid = /([A-Z]){5}([0-9]){4}([A-Z]){1}$/;
			var format = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;

			if (pancard != '' && pancard.toUpperCase() === pancard
					&& !format.test(pancard)) {
				if (pancardid.test(pancard)) {
					$("#error4").hide();
					pancardValid = true;
					return true;
				} else {

					$("#error4").show();
					$("#error4").html("Please enter a valid pan card no.");
					//  $('#panno').val("");
					pancardValid = false;
					return false;
				}

			} else {
				 $("#error4").hide();
				$('#pan').val("");
				pancardValid = false;
				return false;

			}

		}
		
		// gst no  validation
		
		var GSTValid;
	function ValidateGSTNumber() {
		 var gstNumber = $('#gstNo').val();
        var expr = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (gstNumber != ""){
        if (expr.test(gstNumber)) {
        	 $("#error5").hide();
        	  GSTValid = true;
	            return true;
        }else{
        	
        	 $("#error5").show();
             $("#error5").html("Please enter  valid GST Number.");
             GSTValid = false;
             return false;
        }
        }else {
        	
        	 $('#gstNo').val("");
        	 $("#error5").hide();
        	 GSTValid = true;
	         return true;
	    }
    }
	
		function getGstData() {
			var gstNo = $("#gstNumber").val();
			if (gstNo.length == 15) {
				$('.loader').show();
				$
						.ajax({
							type : "GET",
							url : "manage-vendor-getgstno?id=" + gstNo,
							success : function(response) {
								const obj = JSON.parse(response.body);
								if (obj.error == false) {
									$("#gstNumber").val(obj.data.gstin);
									$("#vendorName").val(obj.data.lgnm);
									$("#vendorDisplayName").val(obj.data.lgnm);
									$("#city").val(obj.data.pradr.addr.loc);
									$("#street1").val(
											obj.data.pradr.addr.bno + ', '
													+ obj.data.pradr.addr.bnm);
									$("#street2").val(obj.data.pradr.addr.st);
									$("#zipCode").val(obj.data.pradr.addr.pncd);
									$('#country').val('cntry001');
									getStateDataOnGST(obj.data.pradr.addr.stcd,
											'cntry001');
									$('#states').val();
									$('.loader').hide();
								} else {
									$("#messageParagraph").text("Please Enter Valid GST No.");
									$("#msgOkModal").removeClass("btn3");
									$("#msgOkModal").addClass("btn1");
									$("#msgModal").modal('show');

									$("#gstNo").val('');
									$('.loader').hide();
								}
							},
							error : function(e) {

							}
						});
			} else {

				//$("#gstNumber").val('');

			}
		}		
 function getRefItemDetails(){
		var refId=$("#reference").val();
		var taxType1 = $("#taxType").val();
		agGrid.simpleHttpRequest({
			url : 'manage-purchase-order-getReferenceItemDetails?id=' + refId+"&taxType1=" + taxType1,
		   }).then(function(data) {
			console.log(data)
		itemOptions.api.setRowData(data);
			saveTableData();
			priceCalculation();
	});

	}

 function deletepurchaseDtls(){
	 $("#deleteSKUPrd").modal('show');
	 $("#addItemModel").modal('hide');
	}
function cancelModalSKUPrdDtls(){
	$("#deleteSKUPrd").modal('hide');
	$("#addItemModel").modal('show');
}

 function AddProduct() {

	 $('#addItemModel').modal('show');
     $('#myGrid1').show();
      $('#deleteproduct1').attr("disabled", true);
      $("#productName").val("");
	    $("#itemBrand").val("");
	    $("#mode").val("");
	    $("#hsnCodeProduct").val("");
	    $("#sicCode").val("");
	    
      agGrid.simpleHttpRequest({
  		url : 'manage-purchase-order-get-sku-listing?type='+"Purchase"
  	}).then(function(data) {
  		var len = data.length;
  		$('#totalReq').find('span').html(len);
  		console.log(data)
  		gridOptions12.api.setRowData(data);
  	}); 
      getVendorListForProduct();      
	}
 function profileSelect(){
	
		$('#next').show();
		//$("#productSave").hide();
		$(".formValidation").remove();
		$('#newId').hide();
		$("#profile").show();
		$("#productheadId").html(null);
		$("#prCategoryId").val("");
		$("#tempCategoryId").val("");
		$("#prLevelId").val("");
		$("#productId").val("");
		$("#catDesc").text("");
		$("#vertical").empty();
		var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
		$("#vertical").append(img);
		$("#productName").val("");
	    $("#brand").val("");
	    $("#mode").val("");
	    $("#hsnCode").val("");
	    $("#sicCode").val("");
	    $("#fileedit").val("");
	    $("#main3").hide();
	   // $("#myPurchaseGrid").empty();
	    $("#prodStatus").prop("checked",false);
	   // closeNav();
	    closeVendor();
	    getBrandList();
	    $('#deletess').attr("disabled", true);
		  $('#deletes').attr("disabled", true);
	    skuOptions.api.setRowData();
	    purchaseOptions.api.setRowData();
	    $('#productSave').hide();
	    deleteFile();
	    
	}

	
	function next(){
		$("#next").show();
		$("#main").show();
		$("#profile").show();	
		$("#productSave").hide();	
		$("#accordionExample23").hide();	
		var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});        	 
        })   

        obj = {};
        obj['productId'] = $("#productId").val();
        obj['productName'] = $("#productName").val();
        obj['brand'] = $("#itemBrand").val();
        obj['mode'] = $("#mode").val();
        obj['hsnCode'] = $("#hsnCodeProduct").val();
        obj['sicCode'] = $("#sicCode").val();
        obj['productStatus'] = $("input[name='isActive']:checked").val();
        obj['productCategory'] = $("#prCategoryId").val();
        obj['productCategoryText'] = $("#catDesc").text();
        obj['imgList'] = data;
        $(".formValidation").remove();
        allPValid = true;
		if( $("#productName").val() == null || $("#productName").val() == ""){
			allPValid = false;
			validationModal("Product Name Required","productName");
		} 
		if( $("#mode").val() == null || $("#mode").val() == ""){
			allPValid = false;
			validationModal("Mode Required","mode");
		}
		/* if( $("#itemBrand").val() == null || $("#itemBrand").val() == ""){
			allPValid = false;
			validationModal("Brand Required","itemBrand");
		} */
		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
			allPValid = false;
			validationModal("HSN/SAC Code Required","hsnCodeProduct");
		}
    	var productId = $('#productheadId').html();
    		
          if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            			submitProduct(obj);
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	  submitProduct(obj);
              }
            	
            	
            }		
	}
	function getVendorListForProduct() {
		var id=0;
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$.ajax({
				type : "GET",
				url : "manage-purchase-order-get-VendorList?id=" + id,
				success : function(response) {
					if (response.message == "success") {
						$("#itemVendorId").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#itemVendorId").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#itemVendorId").append(option);
						}
						if(rid!="" || rid!=null || rid!="null"){
							$("#itemVendorId").val(rid);
						}
					}
				},
				error : function(e) {
				}
			});	
	}
	 function addNewBrand(){
			$('#brandModal').modal('show');
		} 
	 function cancelBtn2(){
			$('#brandModal').modal('hide');
		}
	 function getBrandList() {
			var rid='';
				 		var id=0;
				 			var option = $("<option></option>");
				 			$(option).val(null);
				 			$(option).html("Select");
				 			$.ajax({
				 				type : "GET",
				 				url : "view-product-get-brandList?id=" + id,
				 				//url : "view-product-get-brandList",
				 				success : function(response) {
				 					if (response.message == "success") {
				 						$("#itemBrand").empty();
				 						var option = $("<option></option>");
				 						$(option).val(null);
				 						$(option).html("Select");
				 						$("#itemBrand").append(option);
				 						for (var i = 0; i < response.body.length; i++) {
				 							var option = $("<option></option>");
				 							$(option).val(response.body[i].key);
				 							$(option).html(response.body[i].name);
				 							$("#itemBrand").append(option);
				 						}
				 						if(rid!="" || rid!=null || rid!="null"){
				 							$("#itemBrand").val(rid);
				 						}
				 					}
				 				},
				 				error : function(e) {
				 				}
				 			});	
				 	}	
	function cancelItemModel() {
		$('#addItemModel').modal('hide');
		}
	function profilecancelbtn(){
		$("#reqTable").hide();
		deleteFile();
		$("#newId").show();
		$("#save").show();
		$("#Cancel").show();
		//$(".btn-hs").show();
		$("#profile").hide();
		$("#productCategoryCBDiv").attr("df","0");
		$("#prCategoryId").val("");
		$("#tempCategoryId").val("");
		$("#prLevelId").val("");
		$("#catDesc").text("");
		$("#vertical").empty();
		var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
		$("#vertical").append(img);
		$("#reqTable").hide();	
		$('#addItemModel').modal('hide');
	}
	function deleteFile() {
		$("#reqTable").hide();
		$("#searchRowDiv").hide();
		$('#fileUpload').val("");
		$('#imgemp').attr('src', '');
		$('#imgemp').attr('src', '../assets/images/noimage.jpg');

		var fileData = new FormData();
	console.log('fileData',fileData)
		fileData.append('file', 'none');
		fileData.append('path', 'none');
	console.log('File',fileData.append('file', 'none'))
	console.log('Pathh',fileData.append('path', 'none'))

		$.ajax({
			type : "POST",
			url : "manage-purchase-order-delete-fileproduct",
			enctype : "multipart/form-data",
			contentType : false,
			/* data        : fileData, */
			processData : false,
			cache : false,
			success : function(response) {
			},
			error : function(e) {

			}
		});
	}
	function submitProductDetails(dataset) {
	    console.log(dataset)
	    $.ajax({
	    	 type: "POST",
	         url: "manage-purchase-order-save-sku-dtls",
	         dataType: 'json',
	         contentType: 'application/json',
	         data: JSON.stringify(dataset),
	        success: function(response) {
	            if (response.message == "Success") {
	            	closeNavSku();
	            	//$("#addItemModel").modal('hide');
	            	var productId = $("#productId").val();
	            	agGrid.simpleHttpRequest({
						url : 'manage-purchase-order-get-sku-by-product?id='+productId
					}).then(function(data) {
						console.log(data)
						skuOptions.api.setRowData(data);
						
						$("#skuPurchase").empty();
						$("#skuPurchase").append("<option value>Select</option>");
						for(var i = 0; i < data.length; i++) {
							$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
						}
					});
	            	
	            } else {
	                swal({
	                    title: response.code,
	                    text: response.message,
	                    type: "warning"
	                })
	            }
	        },
	        error: function(response) {
	            console.log(response);
	        }
	    })
	}
	function openDetails(id) {
		$('.formValidation').remove();
		//newPage();
		$("#next").hide();
		$('#main3').show();
		$("#profile").show();
		$('#myGrid1').hide();
		$("#productId").val("");
		$("#productName").val("");
		$("#brand").val("");
		$("#mode").val("");
		$("#prodStatus").prop("checked",false);
		$("#prCategoryId").val("");
		$("#tempCategoryId").val("");
		$("#prLevelId").val("");
		$("#catDesc").text("");
		
		
		profileSelect();
		if(id) {
			$.ajax({
				type : "POST",
				url : "manage-purchase-order-get-product-details",
				dataType : 'json',
				contentType : 'application/json',
				data : id,
				success : function(response) {
					if (response.message == "success") {
						$("#productSave").show();
						//console.log(response);
						$("#productheadId").html(response.body.productId);
						$("#productId").val(response.body.productId);
						$("#productName").val(response.body.productName);
						$("#itemBrand").val(response.body.brand);
						$("#mode").val(response.body.mode);
						if(response.body.productStatus == "1") {
							$("#prodStatus").prop("checked",true);
						} else {
							$("#prodStatus").prop("checked",false);
						}
						
						$("#prCategoryId").val(response.body.productCategory);
						$("#catDesc").text(response.body.productCategoryText);
						$("#hsnCodeProduct").val(response.body.hsnCode);
						//$("#sicCode").val(response.body.sicCode);				
						$('#imgemp').attr('src', '');
						if(response.body.pImgName!=null && response.body.pImgName!="") {
							$('#imgemp').attr('src', response.body.pImgName);
							//$("#fileedit").val(response.body.pImgName);
						} else {
							$('#imgemp').attr('src', '../assets/images/noimage.jpg');
							//$("#fileedit").val("");
						}
						
						agGrid.simpleHttpRequest({
							url : 'manage-purchase-order-get-sku-by-product?id='+response.body.productId
						}).then(function(data) {
							console.log(data)
							skuOptions.api.setRowData(data);
							
							$("#skuPurchase").empty();
							$("#skuPurchase").append("<option value>Select</option>");
							for(var i = 0; i < data.length; i++) {
								
								$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
							}
						});
						
						agGrid.simpleHttpRequest({
							url : 'manage-purchase-order-get-purchase-by-product?id='+response.body.productId 
						}).then(function(data) {
							console.log(data)
							purchaseOptions.api.setRowData(data);
						});
						
					}
				}, error : function(data) {
					console.log(data)
				}
			});
		}
		$('#main3').show();
		$('#next').hide();
	}
	
	function deletepurchase(){
		
		 var selectedNodes = purchaseOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 sku= selectedData.map(node => node.sku);
			var id = $('#productId').val();
		$.ajax({
				type : "GET",
				url : "manage-purchase-order-purchase-delete?id="+ sku,
				success : function(response) {
				if (response.message == "Success") {
					 $('#newBtn1').attr("disabled", false);
					 $('#deletes').attr("disabled", true);
					
					closeNav();
					 $("#newBtn1").show();
					agGrid.simpleHttpRequest({
						url : 'manage-purchase-order-get-purchase-by-product?id=' + id
					}).then(function(data) {
						purchaseOptions.api.setRowData(data);
					});
				    cancelModalSKUPrdDtls();
					 $("#newBtn1").show();
				}
				},
				error : function(data) {
				console.log(data);
				}
			})
		
	}
	function deleteskud(){
		 var selectedNodes = skuOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 sku= selectedData.map(node => node.sku);
			var id = $('#productId').val();
		
		$.ajax({
				type : "GET",
				url : "manage-purchase-order-deletesku?id="+ sku,
				success : function(response) {
				if (response.message == "Success") {
					$("#addItemModel").modal('show');
					 $('#newBtn2').attr("disabled", false);
					 $('#deletess').attr("disabled", true);				
					agGrid.simpleHttpRequest({
						url : 'manage-purchase-order-get-sku-by-product?id='+ id
					}).then(function(data) {
						console.log(data)
						skuOptions.api.setRowData(data);						
						$("#skuPurchase").empty();
						$("#skuPurchase").append("<option value>Select</option>");
						for(var i = 0; i < data.length; i++) {
							$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
						}
					});
					closeNavSku();
					cancelModalSKUDtls();
				}
				},
				error : function(data) {
				console.log(data);
				}
			})
		
	}
	
	function submitProduct(dataset) {
	    console.log(dataset)
	    $.ajax({
	    	 type: "POST",
	         url: "manage-purchase-order-products-save",
	         dataType: 'json',
	         contentType: 'application/json',
	         data: JSON.stringify(dataset),
	        success: function(response) {
	            if (response.message == "Success") {
	            	//returnPage();
	            	var productIdd = $('#productId').val();
					if(productIdd!=""){
						$("#messageParagraph").text("Data Saved Successfully");
		            	$("#msgOkModal").removeClass("btn3");
		            	$("#msgOkModal").addClass("btn1");
		            	$("#msgModal").modal('show');
		            	$("#productheadId").html(null);
						profilecancelbtn();
					}else{
	            	$('.loader').hide();
	            	$("body").removeClass("overlay");
	            	 /* $("#messageParagraph").text("Data Saved Successfully");
	            	$("#msgOkModal").removeClass("btn3");
	            	$("#msgOkModal").addClass("btn1");
	            	$("#msgModal").modal('show'); */
	            	$("#productId").val(response.body.productId);
	            	$("#productheadId").html(response.body.productId);
	            	$("#main3").show();
	            	$("#productSave").show();
	            	$("#profile").show();
	            	$("#next").hide();
	            	$("#accordionExample23").show();
	     		    $("#headingOne1").show();
					}
	            } else {
	            	$('.loader').hide();
	            	$("body").removeClass("overlay");
	                swal({
	                    title: response.code,
	                    text: response.message,
	                    type: "warning"
	                })
	            }
	        },
	        error: function(response) {
	        	$('.loader').hide();
	        	$("body").removeClass("overlay");
	            console.log(response);
	        }
	    }) 
	}
	
	function checkNumeric(fieldId) {

		var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');

		const input = document.getElementById(fieldId);
		const position = input.selectionStart;
		if (tempVal.slice(-1) == ' ') {
			$("#" + fieldId).empty();
			tempVal = '';
		}
		$("#" + fieldId).val(tempVal);
	}
</script>
</head>

<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">

						<div class="d-flex justify-content-between" id="reqTable"
							style="display: none;">

							<div class="col-md-4 btn-hs" id="total">
								<div class="font-design" id="totalCandidate">
									Purchase Order LIST (<span></span>)
								</div>
							</div>

							<div class="col-md-4 btn-hs" id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

							<div class="col-md-4 buttonsec btn-hs" id="btndiv">
								<button class="download-btn" id=dwnld
									onclick="downloadDetails()">Download</button>
								<button onclick="add()" class="new-btn" id="add">New</button>
								<button onclick="deletePurchaseorder()" class="delete-btn"
									id="delete">delete</button>
								<button onclick="approvePorder()" class="approve-btn"
									id="approvePorder">approve</button>
								<!-- <button onclick="closePurchaseorder()" class="delete-btn"
									id="closePurchaseorder">Close</button>
								 <button onclick="uploadDetails()" class="upload-btn"
									id="excelupload">Upload</button> -->

							</div>
						</div>

						<!-- <input type="text" id="sessionOrganization" th:value="${org}" /> -->
						<input type="hidden" id="sessionOrganization1"
							th:value="${session.ORGANIZATION_DIVISION}" /> <input type="hidden"
							id="sessionId" th:value="${userId}" /> <input type="hidden"
							id="sessionName" th:value="${userName}" /> <input type="hidden"
							id="hrRole" th:value="${hrRole}" /> <input type="hidden"
							id="sessionRole" th:value="${userRole}" /> <input type="hidden"
							id="adRole" th:value="${adRole}" />

						<div id="myGrid" style="height: 500px; width: 100%;"
							class="ag-theme-alpine"></div>
						<div class="collapse" id="addData">
							<div class="innerstickybg" id="headingItem">
								<div class="row">

									<div class="col-md-3">
										Purchase Order ID: <span id="pohedId"></span>
									</div>
									<div class="col-md-6">
										<div id="statusDiv">
											<!-- 	<div class="hr4"></div>
											<div class="main-div">
												<div class="section2">
													<div id="createdDiv" class="green-box">
														<div class="green-box-heading">CREATED</div>
														<div class="date" id="createdDate"></div>
													</div>
												</div>
												<div class="section3">
													<div id="activeDiv" class="green-box">
														<div class="green-box-heading">ACTIVE</div>
														<div class="date" id="activeDate"></div>
													</div>
												</div>
												<div class="section4">
													<div id="completeDiv" class="grey-box">
														<div class="green-box-heading">COMPLETE</div>
														<div class="date" id="completeDate"></div>
													</div>
												</div>


											</div> -->
										</div>
									</div>
									<div class="col-md-3" align="right">
										<button class="cancel-btn" id="Cancel" onClick="Cancel()">Cancel</button>
										<button class="approve-btn" id="save" onclick="save()">Save</button>
									</div>
								</div>
							</div>
							<div class="row innersticky_contentgap" id="mainPage">
								<input type="hidden" id="poId">

								<div class="col-lg-3">

									<div class="form-group">
										<div class="autocomplete" style="width: 100%;">
											<label>Vendor Name</label> <input type="text" id="vendorName"
												placeholder="Search Here.." class="form-control"
												onkeyup='getVendorList()'><input type="hidden"
												id="vendorId"> <input type="hidden" id="custGSTNo">
											<input type="hidden" id="taxType">
										</div>
										<div id="suggesstion-box1_" class="sugg-cls"></div>

									</div>
									<div class="row" id=addre>
										<div class="col-md-6">
											<span class="billtxt" id="billingAdd">Billing Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd1" onclick="addnewAddress()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>


											</address>
											<div class="preserve-wrap1">
												<span id='con'></span><br> <span id='bstate'></span><br>
												<span id='bcity'></span><br> <span id='bstreet1'></span><br>
												<span id='bstreet2'></span><br> <span id='bzipcode'></span><br>
												<span id='bphone'></span><br> <span id='bfax'></span><br>
											</div>
										</div>
										<div class="col-md-6">
											<span class="billtxt" id="shippingAdd">Shipping
												Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd" onclick="addnewAddress1()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>
											</address>
											<div class="preserve-wrap1">
												<span id='con1'></span><br> <span id='bstate1'></span><br>
												<span id='bcity1'></span><br> <span id='bstreet11'></span><br>
												<span id='bstreet21'></span><br> <span id='bzipcode1'></span><br>
												<span id='bphone1'></span><br> <span id='bfax1'></span><br>

											</div>
										</div>
									</div>

								</div>


								<div class="col-lg-3">
									<div class="form-group">
										<label>Purchase Order Id</label><input type="text"
											id="purchageOrderReference" class="form-control" readonly>
									</div>
								</div>

								<div class="col-lg-3">

									<label>Quotation Id</label> <input type="text" id="quotationId"
										class="form-control" readonly>

								</div>
								<!-- <div class="col-lg-3">
									<label>Po Date</label> <input type="text" id="purchaseDate"
										class="form-control" readonly>
								</div>
								 -->

								<div class="col-lg-3">
									<div class="form-group calendar_box">
										<label>Po Date</label> <input type="text" id="purchaseDate"
											class="form-control"
											th:attr="onkeyup=|formatDate('purchaseDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="toDateCalendarpurchaseDate"></i>
									</div>
								</div>
								<!--  <div class="col-lg-3">
									<div class="form-group">
										<label>Sap Purchase Order Id</label><input type="text"
											id="sapPOId" class="form-control">
									</div>
								</div> -->
								
								<div class="col-lg-3">
									<div class="form-group">
										<label>Project</label>
										<div class="select">
											<select id="project">
											    <option value="">Select</option>
												<option th:each="c:${ProjectList}" th:value='${c.key}'
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>
								</div>
								<input type="hidden" id="approveStatusField"> <input
									type="hidden" id="closeStatusField">
								<div class="col-lg-3">
									<div class="form-group calendar_box">
										<label>Expected Delivery Date</label> <input type="text"
											id="qutValidDate" class="form-control"
											th:attr="onkeyup=|formatDate('qutValidDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar" id="toDateCalendar"></i>
									</div>
								</div>

								<div class="col-lg-3">
									<div class="form-group">
										<label>Reference</label>
										<div class="select">
											<select id="reference" onchange="getRefItemDetails()">
												<option value="">Select</option>
											</select>
										</div>
									</div>
								</div>

								<!-- 	<div class="col-lg-3">
									<div class="form-group">
										<label>Payment Term</label>
										<div class="select">
											<select id="paymentTermId" onblur="removeValid(event)">
												<option value="">Select</option>
												<option th:each="c,iter:${PaytermList}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>

								</div> -->

								<div class="col-lg-3">
									<label>Payment Term(Days)</label> <input type="text"
										id="paymentTermId" onkeyup="checkNumeric('paymentTermId');"
										class="form-control">
								</div>

								<div class="col-lg-3">
									<div class="form-group">
										<label>Mode Of Transport</label>
										<div class="select">
											<select id="carrierId" onblur="removeValid(event)">
												<option value="">Select</option>
												<option th:each="c,iter:${CarrierLists}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>

								</div>

								<div class="col-lg-3">
									<div class="form-group">

										<label>Shipping Details</label>
										<div class="row mrtop" id="shippingDetails">
											<div class="col-md-5">
												<div class="radio-align">
													<span><input type="radio" id="orgDetails" value="0"
														checked name="checkbox" onclick="openModal(0)"></span> <label
														class="lbl">Organization</label>
												</div>
											</div>
											<div class="col-md-4">
												<div class="radio-align">
													<span><input type="radio" id="custDetails" value="1"
														name="checkbox" onclick="openModal(1)"></span> <label
														class="lbl">Other</label>
												</div>
											</div>
										</div>


										<div class="row">
											<div class="col-lg-12" id="organatioModal">

												<div class="form-group">
													<div class="autocomplete" style="width: 100%;">
														<label>Organization Name</label> <input type="text"
															id="organizationName" placeholder="Organization Name"
															class="form-control" readonly>

													</div>


												</div>
											</div>
											<div class="col-lg-12" id="customerModal">

												<div class="form-group">
													<div class="autocomplete" style="width: 100%;">

														<label>Other Details</label>
														<textarea id="customerName" class="form-control"></textarea>


													</div>


												</div>
											</div>
										</div>



									</div>
								</div>


								<div class="col-lg-12">
									<div class="form-group">
										<label>Vendor Notes</label>
										<textarea id="qutDescription" class="mt-2 form-controls"> </textarea>

									</div>
								</div>



							</div>


							<div id="main_content">
								<div class="accordion-item mt-4" id="accordionExample">
									<h2 class="accordion-header" id="headingOne">
										<button class="accordion-button" type="button"
											data-bs-toggle="collapse" data-bs-target="#collapseOne"
											aria-expanded="false" aria-controls="collapseOne">
											Item Details</button>
									</h2>

									<div id="collapseOne" class="accordion-collapse collapse show"
										aria-labelledby="headingOne"
										data-bs-parent="#accordionExample">
										<div class="accordion-body">

											<div class="row">

												<div class="col-md-4 btn-hs1">
													<div class="font-design"></div>
												</div>
												<div class="col-md-8 butttonsec">

													<button class="new-btn" id="newItem" onclick="openNav()">NEW</button>
													<button class="delete-btn" id="delete1"
														onclick="deleteItem()">Delete</button>
													<button class="new-btn" id="grn" onclick="createGRN()">
														GRN Receive</button>
												</div>
											</div>
											<div id="item" style="width: 100%; height: 200px;"
												class="ag-theme-alpine"></div>


										</div>

									</div>
								</div>


								<div id="mySidenav" class="sidenav">
									<div class="slidebox">
										<div class="row">
											<div class="chartbtnsec">
												<div align="right">
													<button class="cancel-btn" onclick="closeNav()">CANCEL</button>
													<button class="approve-btn" id="saveTableData"
														onclick="saveTableData()">SAVE</button>

												</div>
											</div>

											<div class="col-lg-12 mrt_6">
												<div class="form-group">
													<button id="browseBtn" class="browse-btn">Browse</button>
												</div>
											</div>

											<div class="col-lg-12">
												<div class="form-group">
													<div class="autocomplete">
														<input type="hidden" id="editProduct"> <input
															type="hidden" id="itemId"> <label>Item
															Name</label> <input type="text" id="itemName"
															onblur="removeValid(event)" class="form-control"
															onkeyup='getItemQutotationList()'>
													</div>
													<div id="suggesstion-box_" class="sugg-cls"></div>
												</div>
											</div>

											<div class="col-lg-6">
												<div class="form-group">
													<div class="autocomplete" style="width: auto">
														<label>HSN Code </label> <input type="text" id="hsnCode"
															onblur="removeValid(event)" class="form-control"
															onkeyup='getItemQutotationList()'>
													</div>
													<div id="suggesstion-boxx_" class="sugg-cls"></div>
												</div>
											</div>


											<div class="col-lg-6">
												<div class="form-group">
													<label>Unit</label>
													<div class="select">
														<select id="unit" onblur="removeValid(event)">
															<option value="">Select</option>
															<option th:each="c,iter:${unitList}" th:value="${c.key}"
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>

											</div>

											<div class="col-lg-6">
												<div class="form-group">
													<label>Brand</label> <input type="text" id="brandName"
														class="form-control" onblur="removeValid(event)">
												</div>
											</div>

											<div class="col-lg-6">
												<div class="form-group">
													<label>Model/Size</label> <input type="text"
														class="form-control transparenttxtbox" id="modelSize">
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>Quantity</label> <input type="text" id="quantity"
														class="form-control" onblur="removeValid(event)"
														onkeyup="calculateLineTotal();getGSTRateCal()">
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>Unit Price</label><input type="text" id="unitPrice"
														class="form-control" onblur="removeValid(event)"
														onkeyup="calculateLineTotal();getGSTRateCal()">
												</div>
											</div>
											<input type="hidden" id="pendingQty" />

											<div class="col-lg-4">
												<div class="form-group">
													<label>Discount</label>
													<div class="d-flex">
														<input type="text" id="discount" class="form-control"
															onkeyup="calculateLineTotal();getGSTRateCal()">

													</div>

												</div>
											</div>
											<div class="col-lg-2">
												<div class="form-group">
													<div class="select"
														style="width: 60px; position: relative; top: 24px; right: 15px;">
														<select id="discountAmount" class="form-control"
															onkeyup="calculateLineTotal();getGSTRateCal()">
															<option value="0" selected>%</option>
															<option value="1">₹</option>
														</select>
													</div>
												</div>
											</div>


											<input type="hidden" id="gstRateTemp" />
											<div class="col-lg-6">
												<div class="form-group">
													<label>GST Rate</label><input type="text" id="gstRate"
														onblur="removeValid(event)" class="form-control"
														onkeyup="getGSTRateCal()">
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>Line Total</label> <input type="text" id="lineTotal"
														onblur="removeValid(event)" class="form-control">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>


							<div class="row" id=gstCalS>
								<div class="col-lg-7">


									<!--accordion start-->
									<div class="accordion-item mt-4" id="accordionExample2">
										<div class="accordion-item" id="documentDetails">
											<h2 class="accordion-header" id="headingTwoo"
												onclick="closeAllNav()">

												<button class="accordion-button collapsed" type="button"
													data-bs-toggle="collapse" data-bs-target="#collapseTwoo"
													aria-expanded="false" aria-controls="collapseTwoo">
													Attach Files To PO</button>

											</h2>
											<div id="collapseTwoo" class="accordion-collapse collapse"
												aria-labelledby="headingTwoo"
												data-bs-parent="#accordionExample">
												<div class="accordion-body">


													<div class="row">
														<div class="col-md-4 btn-hs1">
															<div class="font-design"></div>
														</div>
														<div class="col-md-8 butttonsec">
															<!--   <button class="download-btn" onclick="rfqCSV()">Download</button> -->
															<button class="new-btn" id="saveAttachmentBtn"
																onclick="checkEmpty();">Add Document</button>

														</div>
													</div>

													<table id="docTbl" cellspacing="7" cellpadding="7">
														<thead>
															<tr class="tr_clone">
																<!-- <th align="center"></th> -->

																<th width="320">Document Name</th>
																<th width="380">Attachment</th>


															</tr>
														</thead>
														<tbody id="doctbodyData">
															<tr>
																<td style="display: none" align="center" class="pdb-24"><input
																	class="checkCls" type="checkbox" id="check2"><label
																	for="check2"></label></td>
																<td style="display: none"><div class="form-group">


																		<select class="form-control documentclss" id="docid_0"
																			onblur="removeValid(event);">
																			<option value="">--Select--</option>
																			<option th:each="c,iter:${documentTypeList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div></td>
																<td><div class="form-group">
																		<input type="text" value=""
																			class="form-control docNoclss"
																			onblur="checkForDuplicateEntry(event)" id="docnoid_">
																	</div></td>

																<td>
																	<div class="control-group position-r">
																		<label class="custom-file-upload" for="uploadDoc_0"
																			id="uploadFor_0"> <i id="clickImg_0"
																			class="ti-plus"></i>
																		</label>
																		<div class="controls">

																			<input type="file" class="document" id="uploadDoc_0"
																				name="userImage" accept="image/*"
																				onchange="saveMultiFile(event)" />

																		</div>
																	</div> <input type="hidden" id="uploadHidden_0"
																	class="uploadHidCls">
																	<div id="uploadedBillDiv_0" align="center"
																		class="uploadedBillCls"></div>
																	<div id="imageName_0" class="imageName"></div>
																	<div id="dltImage_0"></div>
																</td>

															</tr>


														</tbody>
													</table>

												</div>
											</div>
										</div>
									</div>
									<!--accordion end-->

									<div class="form-group">
										<label style="margin-bottom: 10px;">Terms & Conditions</label>
										<textarea id="terms" class="mt-2 form-controls"
											style="height: 129px;"> </textarea>
									</div>

								</div>
								<div class="col-lg-5 mt-4" id="DIV">
									<table style="width: 100%">
										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Sub Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="subTotal" class="form-control"
																readonly>
														</div>
													</div>
												</div>
											</th>

										</tr>
										<tr class="tbl-box" id="sgstTR">
											<th>
												<div class="row">
													<div class="col-lg-4">SGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qSGST" class="form-control"
																readonly> <input type=hidden id="itemIgst">
														</div>
													</div>
												</div>
											</th>

										</tr>

										<tr id="cgstTR">
											<th>

												<div class="row">
													<div class="col-lg-4">CGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qCGST" class="form-control"
																readonly> <input type=hidden id="itemSgst">
														</div>
													</div>
												</div>
											</th>

										</tr>
										<tr class="tbl-box" id="igstTR">
											<th>
												<div class="row">
													<div class="col-lg-4">IGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qIGST" class="form-control"
																readonly> <input type=hidden id="itemCgst">
														</div>
													</div>
												</div>
											</th>
										</tr>

										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Adjustment:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="adjustment" class="form-control"
																onkeyup="calculateAdjustment();" value='0' readonly>
														</div>
													</div>
												</div>

											</th>

										</tr>


										<tr>
											<th>
												<div class="row" id="tcsDiv">
													<div class="col-lg-4">TCS:</div>
													<div class="col-lg-5">
														<div class="form-group">
															<input type="text" class="form-control" id="tcsName"
																placeholder="TCS" onkeyup="getTCSList(); tcsBlank()"
																autocomplete="off"> <input type="hidden"
																id="tcsId">
														</div>
														<input type=hidden id="tcsValue">
														<div id="suggesstion-box3_" class="sugg-cls"></div>
													</div>

													<div class="col-lg-3">
														<div class="form-group">
															<input type="text" class="form-control" id="tcsAmount"
																onkeyup="getTCSList();" readonly> <input
																type="hidden" id="tcsId">
														</div>
													</div>
												</div>
											</th>
										</tr>

										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Grand Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="grandTotal" class="form-control"
																readonly>
														</div>
													</div>
												</div>

											</th>

										</tr>



									</table>

								</div>
							</div>
						</div>
					</div>
					<!-- approve modal start -->

					<div id="approvePurchaseorder" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to approve this purchase order</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelApproveModalBtn();">No</button>
									<button type="button" class="approve-btn"
										onclick="approveOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div>


					<!-- close modal start -->

					<div id="closePurchaseorderModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to close this purchase order</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelPurchaseorderModal();">No</button>
									<button type="button" class="approve-btn"
										onclick="closeOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div>
					<!-- delete modal start -->
					<div id="deleteQuot" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- delete item start	 -->
					<div id="deleteProduct" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalProductBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalProductBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteProductOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="myModal">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">Select Product</h4>
									<button type="button" class="close cp" data-dismiss="modal"
										onclick="closeModal1()">&times;</button>
								</div>

								<!-- Modal body -->
								<div class="modal-body modal-cat1">
									<div class="row">

										<div class="col-md-6" df="0"
											style="height: 300px; overflow-y: scroll;">
											<table id="basic">
												<tbody id="productCategoryCBDiv"></tbody>
											</table>


										</div>
										<div class="col-md-6" id="productCategorySelectDiv" df="0"
											style="border-left: 1px solid #ccc; height: 300px; overflow-y: scroll;">
											<div>
												<div class="productlist">Select Product</div>
												<div id="select_product"></div>
												<input type="hidden" id="itemNameTemp" /> <input
													type="hidden" id="hsnCodeTemp" /> <input type="hidden"
													id="itemNameTemp" /> <input type="hidden" id="itemIdTemp" />
												<input type="hidden" id="brandNameTemp" /> <input
													type="hidden" id="brandIdTemp" /> <input type="hidden"
													id="skuTemp" /> <input type="hidden" id="hsnCodeTemp" />
												<input type="hidden" id="unitTemp" /> <input type="hidden"
													id="gstRateTemp" /> <input type="hidden"
													id="prodCatIdTemp" /> <input type="hidden"
													id="prodCatNameTemp" />
											</div>
										</div>
									</div>
								</div>

								<!-- Modal footer -->
								<div class="modal-footer">
									<div class="chartbtnsec">
										<button class="approve-btn" onclick="selectProductVal()">SELECT</button>
										<button class="cancel-btn" data-dismiss="modal"
											onclick="closeModal1()">CANCEL</button>
									</div>
								</div>

							</div>
						</div>
					</div>



					<div class="modal fade" id="manageTCsModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">


								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="tcsInfo">
										<div class="card-title">
											<h4>Manage TCS</h4>
										</div>
										<div class="row">
											<input type="hidden" id="tcsId">



											<div class="col-md-4">
												<div class="form-group">
													<label>Nature Of Collection</label>
													<div class="select">
														<select class="form-control" id="collection">
															<option th:value=null>--Select--</option>
															<option th:each="c:${collectionList}" th:value="${c.key}"
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Rate(%)</label> <input type="text"
														class="form-control" id="rateId" placeholder="Rate(%)">
												</div>
											</div>



											<div class="col-md-4">
												<div class="form-group">
													<input type="hidden" id="collectionId"> <label>Tax
														Name</label> <input type="text" class="form-control" id="taxName"
														placeholder="Tax Name">
												</div>
											</div>
										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="canceltcs"
													onclick="tcscancelBtn()">CANCEL</button>
												<button class="btn1" id="saveTcs" onclick="addtcsInfo1()">SAVE</button>

											</div>
										</div>
									</div>


								</div>
							</div>
						</div>
					</div>

					<div id="uploadModal" class="modal fade">
						<div class="modal-dialog">
							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title">PO Upload Details</h4>
									<button type="button" class="download-btn"
										onclick="window.location.href='https:/origroup.nerp.in/FileUpload/Oriclean Product Data.xlsx'">Download
										Template</button>
									<!-- onclick="window.location.href='https:/origroup.nerp.in/FileUpload/Oriclean Product Data.xlsx'" -->
									<button type="button" class="close"
										onclick="closeUploadModal()" aria-label="Close">
										<i class="ti-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<!-- text input -->
									<div class="row">
										<div class="col-md-12">
											<label style="margin-bottom: 10px;">Upload PO-Excel</label>
											<div class="control-group position-r">
												<label class="custom-file-upload" for="uploadDocForExcel_0">
													<i class="ti-plus"></i>
												</label>
												<div class="controls">
													<input type="file" class="document"
														id="uploadDocForExcel_0" name="userImage"
														accept=".xls,.xlsx"
														onchange="saveMultiFileForExelUpload(event)" />
												</div>
											</div>
											<input type="hidden" id="uploadHidden_0" class="uploadHidCls">
											<div id="uploadedBillDivForExcel_0" align="center"
												class="uploadedBillCls"></div>
											<div id="imageNameForExcel_0" class="imageName"></div>
										</div>
										<div id="validationDiv"></div>
									</div>
								</div>
								<div class="modal-footer justify-content-left">
									<button type="button" class="approve-btn" data-dismiss="modal"
										aria-hidden="true" onclick="saveUploadData()">Save</button>
								</div>
							</div>
						</div>
					</div>

					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model end@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

					<div class="modal fade" id="myModall">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">Select Product Category</h4>
									<button type="button" class="close cp" onclick="closeModall();"
										data-dismiss="modal">&times;</button>
								</div>

								<!-- Modal body -->

								<div class="modal-body modal-cat">
									<div class="row">
										<table id="basicc">
											<tbody id="costCeneterCBDiv"></tbody>
										</table>
									</div>
								</div>

								<!-- Modal footer -->

								<div class="modal-footer">
									<button class="cancel-btn" data-dismiss="modal"
										onclick="closeModall();">Cancel</button>
									<button class="approve-btn" id="selectCategory">Select</button>
								</div>

							</div>
						</div>
					</div>


					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model start@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
					<!-- <div class="modal fade" id="addItemModel"> -->
					<div class="modal fade" id="addItemModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">

							<div class="modal-content1">

								<!-- Modal body -->
								<div class="modal-body">

									<div class="maincontentsec">
										<div class="content_padding">
											<div id="newId">
												<div class="row" id="reqTable">
													<!-- <button type="button" class="close cp" onclick="closeModall();"
										data-dismiss="modal">&times;</button> -->
													<div class="d-flex justify-content-between">
														<div class="btn-hs col-md-4" id="total">
															<div class="font-design" id="totalReq">
																Product List (<span></span>)
															</div>
														</div>

														<div class="col-md-4  btn-hs" id="searchRowDiv1">
															<div class="input-style">
																<input type="text" placeholder="Search.." name="search"
																	class="searchboxinput" onkeyup="cancelBar12()"
																	oninput="onQuickFilterChanged12()" id="quickFilter12"
																	autocomplete="off">
																<div class="searchicon">
																	<a href="javascript:void(0)"><span
																		style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
																		id="closeKey"
																		onclick="gridOptions12.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
																		class="close_i"><i class="ti-close srchicon"></i></span></a><a
																		href="javascript:void(0)"><i
																		class="ti-search srchicon"></i></a>
																</div>
															</div>
														</div>
														<div class=" col-md-4 butttonsec btn-hs" id="btndiv">
															<!-- <button class="upload-btn">Upload</button> -->
															<button class="download-btn" onclick="totalProductCSV();">Download</button>
															<button class="delete-btn" onclick="deleteProduct();"
																id="deleteproduct1">DELETE</button>
															<button class="new-btn" id="newBtn1"
																onclick="profileSelect()">NEW</button>
														</div>
													</div>
												</div>
												<div id="myGrid1" style="width: 100%; height: 500px;"
													class="ag-theme-alpine"></div>
											</div>




											<div id="profile" class="collapse">
												<div class="row">
													<div class="col-md-6 btn-hs"></div>
													<div class="col-md-12">
														Product ID: <span id="productheadId"></span>
													</div>
													<div class="col-md-12" align="right">

														<button class="cancel-btn" onclick="profilecancelbtn()"
															id="profilecancelbtn">Cancel</button>
														<button class="approve-btn" id="productSave">Save</button>
													</div>
													<div class="col-md-4">
														<div class="demo">
															<div class="item">
																<div class="clearfix" style="max-width: 360px">
																	<div class="hvrbox">
																		<input type="hidden" id="fileedit" /> <img
																			src="../assets/images/noimage.jpg" id="imgemp"
																			alt="Location" class="hvrbox-layer_bottom img-fluid">

																		<div class="hvrbox-layer_top">
																			<div class="hvrbox-text">
																				<!-- <span><i class="fa fa-pencil-square-o"></i></span> -->
																				<input type="file" id="fileUpload"
																					onchange="saveFile();" /> <span><label
																					for="fileUpload"><i class="fa fa-camera"
																						style="cursor: pointer; font-size: 16px;"></i> <!-- <i class="fa fa-pencil-square-o"></i> --></label></span>
																				<span><i class="fa fa-trash red"
																					onclick="deleteFile();"></i></span>
																			</div>
																		</div>
																	</div>

																</div>
															</div>

														</div>
													</div>
													<div class="col-md-8">
														<div class="row">
															<div class="col-md-12">
																<input type="hidden" id="productId"> <input
																	type="text" name="code" value="" id="productName"
																	maxLength="50" placeholder="Product Name"
																	class="form-control_big">

															</div>
														</div>
														<div class="row">
															<div class="col-lg-3">
																<div class="form-group">
																	<label>Brand</label>
																	<div class="select">
																		<select id="itemBrand">
																			<option value="">Select</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-1">
																<div class="form-group">
																	<label class="custom-file-upload3" for="uploadDoc34_0"
																		style="margin-top: 18px;" onclick="addNewBrand()">
																		<i class="ti-plus"></i> Add
																	</label>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>Mode</label>
																	<div class="select">
																		<select class="" id="mode"
																			onblur="removeValid(event);">
																			<option value="">Select</option>
																			<option th:each="c,iter:${modeList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div>
																</div>
															</div>
															<div class="col-md-2">
																<div class="form-group" style="margin-top: 28px;">
																	<input type="checkbox" name="isActive"
																		style="margin-top: 2px;" id="prodStatus" value="1">
																	<label>Active</label>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>HSN/SAC</label> <input type="text" value=""
																		placeholder="HSN/SAC" class="form-control"
																		id="hsnCodeProduct" onkeyup="check1('hsnCode')"
																		maxLength="8" onblur="removeValid(event);">
																</div>
															</div>
														</div>
														<label></label>
														<div class="row">
															<div class="col-md-3">
																<button class="approve-btn modalbtn" id="categoryBtn">Select
																	Category</button>
																<input type="hidden" id="prCategoryId"> <input
																	type="hidden" id="tempCategoryId"> <input
																	type="hidden" id="prLevelId">
															</div>
															<div class="col-md-9 catdiv">
																<div class="breadcrumb" id="catDesc"></div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-12" align="right">
													<button class="approve-btn" onclick="next()" id="next">Next</button>
												</div>

												<div id="main3">
													<div class="accordion mt-4" id="accordionExample23">

														<div class="accordion-item mt-4">
															<h2 class="accordion-header" id="headingOne1">
																<!-- 	onclick="closeAllNav()"> -->
																<button class="accordion-button collapsed" type="button"
																	data-bs-toggle="collapse"
																	data-bs-target="#collapseOne1" aria-expanded="false"
																	aria-controls="collapseOne1">Product Details</button>

															</h2>
															<div id="collapseOne1"
																class="accordion-collapse collapse mt-4"
																aria-labelledby="headingOne1"
																data-bs-parent="accordionExample23">
																<div class="accordion-body">

																	<div id="mySidenavItem" class="sidenav">
																		<div class="slidebox" style="margin: 0px !important;">
																			<div class="row">
																				<div class="col-md-10">
																					<div class="edit">
																						Product Id: <span id="skuPrdId"></span>
																					</div>
																				</div>
																				<div class="col-md-2">
																					<div class="arrow">
																						<a href="javascript:void(0)" class="closebtn"
																							onclick="closeNavSku()"><i
																							class="ti-arrow-right"></i></a>
																					</div>
																				</div>
																			</div>
																			<div class="chartbtnsec">
																				<div align="right">
																					<button class="cancel-btn" onclick="closeNavSku()">CANCEL</button>

																					<button class="approve-btn" id="saveSKUData">SAVE</button>
																				</div>
																			</div>
																			<div class="clearfix"></div>
																			<input type="hidden" id="isEdit">
																			<div class="row">

																				<div class="col-lg-12" id="skudiv">
																					<div class="form-group">
																						<label>SKU</label> <input type="text" value=""
																							placeholder="" class="form-control" id="skuId"
																							onblur="removeValid(event);" maxLength="8">
																					</div>
																				</div>
																				<div class="col-lg-12">
																					<div class="form-group">
																						<label>Model</label> <input type="text" value=""
																							placeholder="" class="form-control" id="model"
																							onblur="removeValid(event);">
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<div class="form-group">
																						<label>Manufacture Item</label> <input type="text"
																							value="" placeholder="" class="form-control"
																							id="manufacture" onblur="removeValid(event);">
																					</div>
																				</div>

																			</div>

																			<div class="row">
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>Variation Type</label>
																						<div class="select">
																							<select class="" id="variationType"
																								onblur="removeValid(event);">
																								<option value="">Select</option>
																								<option th:each="c,iter:${variationTypeList}"
																									th:value="${c.key}" th:text="${c.name}"></option>
																							</select>
																						</div>

																					</div>
																				</div>
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>Variation Value</label> <input type="text"
																							value="" onblur="removeValid(event);"
																							placeholder="" class="form-control"
																							id="variationValue">
																					</div>
																				</div>

																			</div>

																			<div class="row">
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>UOM</label>
																						<div class="select">
																							<select class="" id="itemUnit"
																								onblur="removeValid(event);">
																								<option value="">Select</option>
																								<option th:each="c,iter:${unitList}"
																									th:value="${c.key}" th:text="${c.name}"></option>
																							</select>
																						</div>
																					</div>
																				</div>
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>Unit Sale Price</label> <input type="text"
																							value="" onclick="salaryBack(event)"
																							onblur="removeValid(event);salaryCheck(event)"
																							placeholder="" class="form-control"
																							id="salePrice">
																					</div>
																				</div>
																			</div>
																		</div>
																	</div>


																	<div id="myVendorSidenav" class="sidenav">
																		<div class="slidebox">
																			<div class="row">
																				<div class="col-md-10">
																					<div class="edit">
																						Product Id: <span id="skuPurchasePrdId"></span>
																					</div>
																				</div>
																				<div class="col-md-2">
																					<div class="arrow">
																						<a href="javascript:void(0)" class="closebtn"
																							onclick="closeVendor()"><i
																							class="ti-arrow-right"></i></a>
																					</div>
																				</div>
																			</div>
																			<div class="chartbtnsec">
																				<div align="right">
																					<button class="cancel-btn" onclick="closeVendor()">CANCEL</button>
																					<!-- <button class="btn3">DELETE</button> -->
																					<button class="approve-btn" id="savePurchaseDtls">SAVE</button>
																				</div>
																			</div>
																			<div class="clearfix"></div>

																			<div class="row">
																				<div class="col-lg-12">
																					<div class="form-group">
																						<label>SKU</label>
																						<div class="select">
																							<input type="hidden" id="isEditPurchase">
																							<input type="hidden" id="editSKUId"> <input
																								type="hidden" id="editVendorId"> <select
																								id="skuPurchase" onblur="removeValid(event);">
																								<option value="">Select</option>
																							</select>
																						</div>
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-lg-6">
																					<div class="form-group">
																						<span class="slide-span">Variation Type: </span><span
																							id="variantTypeSpan" class="slide-span-text"></span>
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<div class="form-group">
																						<span class="slide-span">Variation Value: </span><span
																							id="variantValueSpan" class="slide-span-text"></span>
																					</div>
																				</div>

																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<div class="form-group">
																						<span class="slide-span">Variation Unit: </span><span
																							id="variantUnitSpan" class="slide-span-text"></span>
																					</div>
																				</div>

																			</div>

																			<div class="row">
																				<!-- 						<div class="col-md-12">
																					<div class="form-group">
																						<label>Vendor</label>
																						<div class="select">
																							<select id="itemVendorId" class=""
																								onblur="removeValid(event);">
																								<option value="">Select</option>
																								<option th:each="c,iter:${vendorList}"
																									th:value="${c.key}" th:text="${c.name}"></option>
																							</select>
																						</div>

																					</div>
																				</div> -->

																				<div class="col-lg-12">
																					<div class="form-group">
																						<label>Vendor</label>
																						<div class="select">
																							<select id="itemVendorId">
																								<option value="">Select</option>
																							</select>
																						</div>
																					</div>
																				</div>
																			</div>
																			<input type="hidden" id="purchasePrice">
																			<div class="row">
																				<!-- 	<div class="col-md-6">
																		<div class="form-group">
																			<label>Unit Purchase Price</label> <input type="text"
																				value="" placeholder="" class="form-control"
																				id="purchasePrice"
																				onblur="removeValid(event);salaryCheck(event)"
																				onclick="salaryBack(event)">
																		</div>
																	</div> -->




																				<div class="col-md-12">
																					<div class="form-group">
																						<label>MOQ</label> <input type="text" value=""
																							placeholder="" class="form-control" id="moq"
																							onblur="removeValid(event);">
																					</div>
																				</div>

																			</div>
																		</div>
																	</div>

																	<div class="row">
																		<div class="col-md-4 btn-hs1">
																			<div class="font-design"></div>
																		</div>
																		<div class="col-md-8 butttonsec">
																			<!-- <button class="upload-btn">Upload</button> -->
																			<button class="download-btn"
																				onclick="skuProductCSV();">Download</button>
																			<!-- <div class="buttongap"></div> -->
																			<button class="delete-btn" data-toggle="modal"
																				id="deletess" data-target="#delete"
																				onclick="deleteskuDtls()">DELETE</button>
																			<button class="new-btn" id="newBtn2"
																				onclick="openNavItem()">NEW</button>
																		</div>

																	</div>
																	<div class="row">
																		<div class="col-md-12">
																			<div id="mySKUGrid"
																				style="width: 100%; height: 100px;"
																				class="ag-theme-alpine"></div>
																		</div>
																	</div>
																	<br>
																	<div class="row">
																		<div class="col-md-4 btn-hs1">
																			<div class="font-design"></div>
																		</div>
																		<div class="col-md-8 butttonsec">
																			<!-- <button class="upload-btn" id="uploads">Upload</button> -->
																			<button class="download-btn" id="downloads"
																				onclick="purchaseProductCSV();">Download</button>
																			<!-- 	<div class="buttongap"></div> -->
																			<button class="delete-btn" data-toggle="modal"
																				data-target="#delete" id="deletes"
																				onclick="deletepurchaseDtls()">DELETE</button>
																			<button class="new-btn" id="newBtn1"
																				onclick="openVendor()">NEW</button>
																		</div>
																	</div>
																	<div class="row">
																		<div class="col-md-12">
																			<div id="myPurchaseGrid"
																				style="width: 100%; height: 100px;"
																				class="ag-theme-alpine"></div>
																		</div>
																	</div>
																</div>
															</div>
														</div>

													</div>
												</div>

											</div>
										</div>
									</div>
								</div>

							</div>

						</div>
					</div>


					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Vendor Model end@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->


					<div class="modal fade" id="addVendorModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal body -->
								<div class="modal-body">
									<div class="innerstickybg">
										<div class="d-flex justify-content-between" id="main">
											<div class="col-md-3" id="idDiv">
												Vendor ID: <span id="vendorId"></span>
											</div>
											<div>
												<span class="taskInfo">Vendor Information</span>
											</div>

										</div>
									</div>
									<div class="innercontent">
										<div class="row">


											<div class="col-lg-4">
												<div class="form-group">
													<label>Salutation</label>
													<div class="select">
														<select id="salutation" onblur="removeValid(event)">
															<option value="">Select</option>
															<option th:each="c,iter:${SalutationLists}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>

											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Name</label> <input type="text"
														class="form-control" id="vendorName1"
														placeholder="Vendor Name">
													<!-- 	onblur="showDisplay()" -->
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Company Name</label> <input type="text"
														class="form-control" id="companyName"
														placeholder="Company Name" onchange="showDisplay()">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Display Name</label> <input type="text"
														class="form-control" id="vendorDisplayName"
														placeholder="Vendor Display Name" disabled>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Category</label>
													<div class="select">
														<select id="vendorCategory" onblur="removeValid(event)">
															<option value="">Select</option>
															<option th:each="c,iter:${CategoryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>

											</div>



											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Email</label> <input type="text"
														onblur="removeValid(event)" autocomplete="off"
														name="personalmail" value="" placeholder="Vendor Email"
														class="form-control" id="vendorEmail"
														onkeyup="pmailVal();"> <span id="error3"
														class="formValidation1" style="color: red;"></span>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Phone</label> <input type="text"
														class="form-control" id="vendorPhone" placeholder="Phone"
														onkeyup="check1('vendorPhone')" maxLength="10">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Mobile</label> <input type="text"
														class="form-control" id="vendorMobile"
														placeholder="Mobile" onkeyup="check1('vendorMobile')"
														maxLength="10">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Skype</label> <input type="text"
														class="form-control" id="vendorSkype"
														placeholder="Vendor Skype">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Designation</label> <input type="text"
														class="form-control" id="vendorDesignation"
														placeholder="Vendor Designation">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Website</label> <input type="text"
														class="form-control" id="webSite" placeholder="Website">
												</div>
											</div>

										</div>


									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo"
												aria-expanded="true" aria-controls="collapseTwo">
												Other Details</button>
										</h2>
										<div id="collapseTwo" class="accordion-collapse collapse hide"
											aria-labelledby="headingTwo"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>PAN</label> <input type="text" autocomplete="off"
																onblur="removeValid(event)" name="panno" value=""
																placeholder="PAN" class="form-control" id="pan"
																maxLength="11" onkeyup="pancardVal();"> <span
																id="error4" class="formValidation1" style="color: red;"></span>

														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Currency</label>
															<div class="select">
																<select id="currency">
																	<option value="">Select</option>
																	<option value="INR RUPPEE">INR RUPEE</option>
																	<!-- <option value="AED-UAE Dirham">AED-UAE Dirham</option>
												    <option value="AUD-Australian Doller">AUD-Australian Dollar</option>
												    <option value="CAD-Canadian Doller">CAD-Canadian Dollar</option>
												    <option value="CNY-Yuan Renminbi">CNY-Yuan Renminbi</option>
												    <option value="EUR-Euro">EUR-Euro</option>
												    <option value="GBP-Pound Sterlin">GBP-Pound Sterlin</option>
												    <option value="JPY-Japanese Yen">JPY-Japanese Yen</option>
												    <option value="SAR-Saudi Riyal">SAR-Saudi Riyal</option>
												    <option value="USD-United State Doller">USD-United State Dollar</option>
												    <option value="ZAR-South Africa Rand">ZAR-South Africa Rand</option> -->
																</select>
															</div>
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Opening Balance</label> <input type="text"
																class="form-control" id="openingBalance"
																placeholder="Opening Balance">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Payment Terms</label>
															<div class="select">
																<select id="paymentTerms" onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option th:each="c,iter:${PaymentTermList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>

													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>TDS</label> <input type="text"
																class="form-control" id="tds" placeholder="TDS">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">

															<label>GST No.</label>
															<div class="d-flex">
																<div>
																	<input type="text" class="form-control" id="gstNo"
																		placeholder="GST No" onkeyup="ValidateGSTNumber()"
																		maxlength="15" onblur="removeValid(event)"> <span
																		id="error5" class="formValidation1"
																		style="color: red;"></span>
																</div>

																<div style="margin-top: 7px;">
																	<button class="approve-btn1" id=approveGst
																		onclick="getGstData()">GST</button>
																</div>
															</div>
														</div>
													</div>




													<div class="col-md-4">
														<div class="form-group">
															<label>WhatsApp No.</label> <input type="text"
																class="form-control" id="whatsAppNo"
																placeholder="WhatsApp No" onkeyup="check1('whatsAppNo')"
																maxLength="10">
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>TAN Number</label> <input type="text"
																class="form-control" id="tanNo" placeholder="TAN Number">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Facebook</label> <input type="text"
																class="form-control" id="facebook"
																placeholder="Facebook">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Twitter</label> <input type="text"
																class="form-control" id="twitter" placeholder="Twitter">
														</div>
													</div>


												</div>

											</div>
										</div>
									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
												aria-expanded="true" aria-controls="collapseTwo2">
												Billing Address Details</button>
										</h2>
										<div id="collapseTwo2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>Country</label>
															<div class="select">
																<select id="country" onchange="getStateDetails()"
																	onblur="removeValid(event)">
																	<option th:value="NULL">Select Country</option>
																	<option th:each="c,iter:${countryList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>State</label>
															<div class="select">
																<select id="states" onblur="removeValid(event)">
																	<option th:value="NULL">Select State</option>
																	<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
																</select> <span class="focus"></span>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>City</label> <input type="text"
																onblur="removeValid(event)" class="form-control"
																id="city" placeholder="City">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Street 1</label> <input type="text"
																onblur="removeValid(event)" class="form-control"
																id="street1" placeholder="Street 1">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Street 2</label> <input type="text"
																onblur="removeValid(event)" class="form-control"
																id="street2" placeholder="Street 2">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Zip Code</label> <input type="text"
																onblur="removeValid(event)" class="form-control"
																id="zipCoded" placeholder="Zip Code"
																onkeyup="check1('zipCoded')"
																onchange="ZipCode('zipCoded')" maxLength="6">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Phone</label> <input type="text"
																onblur="removeValid(event)" class="form-control"
																id="phone" placeholder="Phone" onkeyup="check1('phone')"
																maxLength="10">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Fax</label> <input type="text"
																onblur="removeValid(event)" class="form-control"
																id="fax" placeholder="Fax">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
												aria-expanded="true" aria-controls="collapseTwo2">
												Shipping Address Details</button>
											<div class="btnbill">
												<button class="btn btn-primarynew"
													onclick="copyAsBillingAdd()">Copy As Billing
													Address</button>
											</div>
										</h2>
										<div id="collapseTwo2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>Country</label>
															<div class="select">
																<select id="country1" onchange="getStateDetails1()">
																	<option th:value="NULL">Select Country</option>
																	<option th:each="c,iter:${countryList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>State</label>
															<div class="select">
																<select id="states1">
																	<option th:value="NULL">Select State</option>

																</select> <span class="focus"></span>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>City</label> <input type="text"
																class="form-control" id="city1" placeholder="City">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Street1</label> <input type="text"
																class="form-control" id="street11"
																placeholder="Street 1">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Street 2</label> <input type="text"
																class="form-control" id="street21"
																placeholder="Street 2">
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>Zip Code</label> <input type="text"
																class="form-control" id="zipCode1"
																onblur="removeValid(event)" placeholder="Zip Code"
																onkeyup="check1('zipCode1')"
																onchange="ZipCode('zipCode1')" maxLength="6">
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>Phone</label> <input type="text"
																class="form-control" id="phone1" placeholder="Phone"
																onkeyup="check1('phone1')" maxLength="10">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Fax</label> <input type="text"
																class="form-control" id="fax1" placeholder="Fax">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>

									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo3">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo3"
												aria-expanded="true" aria-controls="collapseTwo3">
												Contact Person Details</button>
										</h2>
										<div id="collapseTwo3"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo3"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Salutation</label>
															<div class="select">
																<select id="salutation1" onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option th:each="c,iter:${SalutationLists}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>

													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>First Name</label> <input type="text"
																class="form-control" id="firstName"
																placeholder="first Name">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Last Name</label> <input type="text"
																class="form-control" id="lastName"
																placeholder="last Name">
														</div>
													</div>



													<div class="col-md-4">
														<div class="form-group">
															<label>Email Address</label> <input type="text"
																onblur="removeValid(event)" autocomplete="off"
																name="personalmaill" value="" placeholder="Email"
																class="form-control" id="emailAdd"
																onkeyup="pmailValadd();"> <span id="error6"
																class="formValidation1" style="color: red;"></span>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Mobile</label> <input type="text"
																class="form-control" id="mobile" placeholder="Mobile"
																onkeyup="check1('mobile')" maxLength="10">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo4">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
												aria-expanded="true" aria-controls="collapseTwo4">
												Bank Details</button>
										</h2>
										<div id="collapseTwo4"
											class="accordion-collapse collapse hide"
											aria-labelledby="headingTwo4"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">


													<div class="col-md-4">
														<div class="form-group">
															<label>Beneficiary Name</label> <input type="text"
																class="form-control" id="beneficiaryName"
																placeholder="Beneficiary Name">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Bank Name</label> <input type="text"
																class="form-control" id="bankName"
																placeholder="Bank Name">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Account No</label> <input type="text"
																class="form-control" id="accountNo"
																placeholder="Account No" onkeyup="check1('accountNo')"
																maxLength="20">
														</div>
													</div>
													<!-- 

													<div class="col-md-4">
														<div class="form-group">
															<label>Re-Enter Account No</label> <input type="text"
																class="form-control" id="reEnterAccountNo"
																placeholder="Re-Enter Account No">
														</div>
													</div>
 -->

													<div class="col-md-4">
														<div class="form-group">
															<label>IFSC</label> <input type="text"
																class="form-control" id="ifsc" placeholder="IFSC">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>

									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo4">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
												aria-expanded="true" aria-controls="collapseTwo4">
												Remark Details</button>
										</h2>
										<div id="collapseTwo4"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo4"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-md-8">
														<div class="modal-inrheading">Remarks</div>
														<div class="position-text">
															<textarea rows="4" cols="100" id="remarks"
																onkeyup="textCount(event)"></textarea>
															<div id="charNumSN" class="txtcounter" align="right">

															</div>
														</div>
													</div>


												</div>

											</div>
										</div>
									</div>

									<div class="row mt-4">
										<div class="form-group">

											<button class="btn3" id="cancel" onclick="cancelBtn1()">CANCEL</button>
											<button class="btn1" id="save" onclick="addVendorInfo()">SAVE</button>

										</div>
									</div>

								</div>

							</div>

						</div>
					</div>


					<div id="deleteAttachment" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="closeDeleteConfirm()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
									<input type="hidden" id="dltValue">
								</div>
								<div class="modal-footer justify-content-center">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="closeDeleteConfirm()">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deletAttachmentRow()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					
					<div id="deleteSKUPrd" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalSKUPrdDtls()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalSKUPrdDtls();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deletepurchase()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div id="deleteSKU" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalSKUDtls();">Cancel</button>
									<button type="button" class="delete-btn" onclick="deleteskud()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="addAddressModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header flex-column"></div>
								<!-- 	Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="billingInfo">
										<div class="card-title">
											<h4>Billing Address</h4>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="countryb" onblur="removeValid(event)"
															onchange="getStateDetailsb()">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="statesb" onblur="removeValid(event)">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														onblur="removeValid(event)" id="cityb" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="street1b" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="street2b" placeholder="Street 2">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="zipCode" placeholder="Zip Code"
														onkeyup="check1('zipCode')" onchange="ZipCode('zipCode')"
														maxLength="6">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="phoneb" placeholder="Phone" onkeyup="check1('phoneb')"
														maxLength="10">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														onblur="removeValid(event)" id="faxb" placeholder="Fax">
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">
												<button class="delete-btn" id="cancel" onclick="cancelBtn()">CANCEL</button>
												<button class="btn1" id="save" onclick="addVendorInfo2()">SAVE</button>

											</div>
										</div>
									</div>



								</div>
							</div>
						</div>
					</div>

					<div class="modal fade" id="brandModal">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px; max-width: 600px">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<div class="modal-header"></div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingInfo">
										<div class="card-title">
											<h4>Add Brand Details</h4>
										</div>
										<div class="row">

											<div class="col-md-6">
												<div class="form-group">
													<label>Name</label> <input type="hidden" id="brandId">
													<input type="text" class="form-control transparenttxtbox"
														placeholder="" id="brandName" onblur="removeValid(event);">
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>Description</label>
													<textarea class="form-control" id="brandDesc"
														onblur="removeValid(event);"></textarea>
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="cancel"
													onclick="cancelBtn2()">CANCEL</button>
												<button class="btn1" id="save" onclick="addBrand()">SAVE</button>

											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="modal fade" id="addAddressModel1">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<div class="modal-header flex-column"></div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingInfo">
										<div class="card-title">
											<h4>Shipping Address</h4>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="country1s" onchange="getStateDetailss()"
															onblur="removeValid(event)">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="states1s" onblur="removeValid(event)">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														onblur="removeValid(event)" id="city1s" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="street11s" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="street21s" placeholder="Street 2">
												</div>
											</div>




											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														onblur="removeValid(event)" class="form-control"
														id="zipCode1s" placeholder="Zip Code"
														onkeyup="check1('zipCode1s')"
														onchange="ZipCode('zipCode1s')" maxLength="6">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														class="form-control" id="phone1s" placeholder="Phone"
														onblur="removeValid(event)" onkeyup="check1('phone1s')"
														maxLength="10">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														onblur="removeValid(event)" id="fax1s" placeholder="Fax">
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="cancel"
													onclick="cancelBtn2()">CANCEL</button>
												<button class="btn1" id="save" onclick="addVendorInfo1()">SAVE</button>

											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>



				</div>
			</div>

		</div>
	</div>
</body>
</html>