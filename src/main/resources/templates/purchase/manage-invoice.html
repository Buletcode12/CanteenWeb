<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

label.lbl {
	position: relative;
	top: -2px !important;
}

.modalbtn {
	width: auto !important;
	font-size: 11px !important;
	float: left !important;
	margin-left: 0 !important;
	font-weight: 100;
}

.btn-primarynew {
	color: #fff !important;
	background-color: #0d6efd;
	border-color: #0d6efd;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

.autocomplete {
	position: relative;
	display: inline-block;
	width: 100%;
}

.form-group label {
	font-size: 12px;
	position: relative;
	top: 4px;
}

.holdCls {
	background-color: rgb(0, 143, 0);
}

.bg_white {
	background: #ffffff !important;
}

.blueClsWT {
	background: #0076ba;
	color: #fff;
}

.blueCls {
	background: #0076ba;
	color: #fff;
}

.blueClsWT::before {
	font-size: 8px;
	color: #FFF;
	content: '\e64c';
	font-family: 'themify';
	padding-right: 7px;
}

.modal-body table td input[type=checkbox] {
	width: 0px;
	margin-right: 16px;
	position: relative;
	top: 0px;
	float: none;
}

.modal-content1 {
	position: relative;
	display: flex;
	flex-direction: column;
	width: 120%;
	pointer-events: auto;
	background-color: #fff;
	background-clip: padding-box;
	border: 1px solid rgba(0, 0, 0, .2);
	border-radius: 0.3rem;
	outline: 0;
}

.firstnode {
	color: #929292;
	border-top: 1px solid transparent !important;
	border-left: 1px solid transparent !important;
	border-bottom: 1px solid transparent !important;
	width: 320px;
	font-size: 12px;
	font-weight: 100;
}

.simple-tree-table-closed .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
	transform: rotate(90deg);
}

.sugg-cls ul {
	height: 150px;
	overflow-x: scroll;
	position: relative;
}

ul#autocomplete-list1 {
	position: relative;
	z-index: 999;
}

ul#autocomplete-list1 li {
	position: relative;
	color: #fff;
	padding-left: 6px;
	background-color: #1f57a8;
	border-bottom: solid 1px #6189c2;
	padding-top: 5px;
	padding-bottom: 5px;
}

a.addCust {
	color: #fff;
}

.simple-tree-table-opened .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
}

.simple-tree-table-icon {
	display: inline-block;
	width: 1.5em;
	line-height: 1.5em;
	margin: 0.1em;
	background-color: transparent;
	text-align: center;
	cursor: pointer;
}

.tptCls {
	background: transparnt;
}

/*  .picker_calendar2 {
	cursor: pointer;
	position: absolute;
	top: 316px;
	right: 19px;
}

.picker_calendar3 {
	cursor: pointer;
	position: absolute;
	top: 375px;
	right: 691px;
} */
.font-small {
	font-size: 13px;
}

.billtxt {
	color: #777 !important;
	font-size: 14px;
	margin-top: 10px;
	text-transform: uppercase;
	display: block;
}

.fa {
	display: inline-block;
	font: normal normal normal 14px/1 FontAwesome;
	font-size: inherit;
	text-rendering: auto;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

.form-controls {
	font-family: 'Montserrat', sans-serif;
	display: block;
	width: 100%;
	font-size: 12px;
	color: #929292;
	background-color: transparent;
	background-clip: padding-box;
	border: 1px solid #d5d5d5;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
	line-height: 30px;
	border-radius: 0;
	padding: 0;
}
</style>
<script>
	$(document)
			.ready(

					function() {

						$("#organatioModal").hide();
						$("#customerModal").hide();

						$("#documentDetails").hide();
						$('#docTbl').on('click', '.rmv1', function() {
							openDeleteConfirm();
							var value = $(this).parent("div").attr("id");
							$("#dltValue").val(value);
						});
						var gridDiv = document.querySelector('#myGrid');
						new agGrid.Grid(gridDiv, gridOptions);
						
						
						
						var gridDiv = document.querySelector('#item');
						new agGrid.Grid(gridDiv, itemOptions);

						$("#toDateCalendarDt").hide();
						$("#Cancel").hide();
						$("#addData").hide();
						$("#save").hide();
						$('#reqAppvBtn').attr("disabled", true);
						$('#delete').attr("disabled", true);
						$('#salesOrder').attr("disabled", true);
						$('#qaRequest').attr("disabled", true);
						//$("#noDiv").hide();
						//$("#dateDiv").hide();
						$("#Cancel").click(function() {
							$('.loader').show();
							$("body").addClass("overlay");
							$("#reqTable").show();
							$(".btn-hs").show();
							$("#myGrid").show();
							$("#addData").hide();
							agGrid.simpleHttpRequest({
								url : "manage-invoice-through-ajax"
							}).then(function(data) {
								var len = data.length;
								$('#totalCandidate').find('span').html(len);
								gridOptions.api.setRowData(data);
							});
							$("#invoiceId").val('');
							$("#invoiceheadId").html('');
							
							$("#vendorId").val('');
							$("#vendorName").val('');
							$("#custGSTNo").val('');
							$("#qutValidDate").val('');
							$("#qutDescription").val('');
							$("#qutActive").val('');
							$("#qutUpdatedOn").val('');
							$("#itemId").val('');
							$("#itemName").val('');
							$("#quantity").val('');
							$("#unitPrice").val('');
							$("#discount").val('');
							$("#gstRate").val('');
							$("#lineTotal").val('');
							$("#subTotal").val('');
							$("#qIGST").val('');
							$("#qCGST").val('');
							$("#qSGST").val('');
							$("#grandTotal").val('');
							$("#taxType").val('');
							$("#sku").val('');
							$("#itemIgst").val();
							$("#itemCgst").val();
							$("#itemSgst").val();

							$('.loader').hide();
							$("body").removeClass("overlay");
						});
						gridOptions.api.setRowData();
						itemOptions.api.setRowData();

						agGrid.simpleHttpRequest({
							url : "manage-invoice-through-ajax"
						}).then(function(data) {
							var len = data.length;
							$('#totalCandidate').find('span').html(len);
							gridOptions.api.setRowData(data);
						});
						var dateFormat = localStorage.getItem("dateFormat");

						$("#toDateCalendar").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
						}).on("change", function() {
							$('#qutValidDate').val($(this).val());
						})

						$('#qutValidDate').blur(function() {
							$("#toDateCalendar").val($(this).val());
						})

						$("#toDateCalendarInvoice").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
							//minDate : new Date(),
						}).on("change", function() {
							$('#invoiceDate').val($(this).val());
						})

						$('#invoiceDate').blur(function() {
							$("#toDateCalendarInvoice").val($(this).val());
						})

						
						$("#challanDateCalendar").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
							//minDate : new Date(),
						}).on("change", function() {
							$('#challanDate').val($(this).val());
						})

						$('#challanDate').blur(function() {
							$("#challanDateCalendar").val($(this).val());
						})

					

						$("#toDateCalendarDelivery").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
							minDate : new Date(),
						}).on("change", function() {
							$('#challan_dt').val($(this).val());
						})

						$('#challan_dt').blur(function() {
							$("#toDateCalendarDelivery").val($(this).val());
						})

				
                       $('#approveGrnReceipt').attr("disabled", true);
						$("#igstTR").hide();

						$("#browseBtn").click(function() {
							$("#itemName").val(null);
							$("#hsnCode").val(null);
							$("#unit").val(null);
							$("#itemNameTemp").val(null);
							$("#hsnCodeTemp").val(null);
							$("#unitTemp").val(null);
							$("#suggesstion-box_").hide();
							$("#myModal").modal('show');
						})
						/* 
						product category	 
						 */
						$("#browseBtn")
								.click(
										function() {

											$(".benefitChk").prop("checked",
													false);
											$("#productModName").val("");
											$("#brand").val("");
											$("#skuMod").val("");
											$("#modelMod").val("");
											$("#manufactureItemMod").val("");
											$("#variationTypeMod").val("");
											$("#variationValueMod").val("");
											$("#unitMod").val("");

											$('.loader').show();
											$("body").addClass("overlay");
											$("#productDiv").modal("show");
											$
													.ajax({
														type : "POST",
														url : "manage-invoice-item-get-product-list",
														dataType : "json",
														contentType : "application/json",
														data : "a",
														success : function(
																response) {
															if (response.message == "success") {
																for (var i = 0; i < response.body.length; i++) {
																	var row = "";
																	if (response.body[i].categoryId == response.body[i].parentId) {
																		if (response.body[i].nodeCount > 0) {

																			row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		} else {
																			row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																					+ response.body[i].categoryId
																					+ '" value="'
																					+ response.body[i].categoryId
																					+ '" name="'
																					+ response.body[i].categoryName
																					+ '" onchange=selectCheckBox("'
																					+ response.body[i].categoryId
																					+ '","'
																					+ response.body[i].catLevel
																					+ '")>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		}

																	} else {
																		if (response.body[i].nodeCount > 0) {
																			row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		} else {

																			row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																					+ response.body[i].categoryId
																					+ '" value="'
																					+ response.body[i].categoryId
																					+ '" name="'
																					+ response.body[i].categoryName
																					+ '" onchange=selectCheckBox("'
																					+ response.body[i].categoryId
																					+ '","'
																					+ response.body[i].catLevel
																					+ '")>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		}
																	}
																	$(
																			"#productCategoryCBDiv")
																			.append(
																					row);

																}

																$('.loader')
																		.hide();
																$("body")
																		.removeClass(
																				"overlay");

																$('#basic')
																		.simpleTreeTable(
																				{
																					expander : $('#expander'),
																					collapser : $('#collapser'),
																					store : 'session',
																					storeKey : 'simple-tree-table-basic'
																				});
															}
														},
														error : function(data) {
															$('.loader').hide();
															$("body")
																	.removeClass(
																			"overlay");
															$("#productDiv")
																	.modal(
																			"show");
														}
													});
										})

						/*
						 *  po fn 
						 */

						$("#saveTableDataSale")
								.click(
										function() {
											var obj = {};
											obj.quotationId = $(
													"#quotationIdnew").val();
											obj.poNo = $("#poNo").val();
											obj.poDate = $("#poDate").val();
											obj.filePoSale = $("#fileUpload")
													.val();
											

											var validation = true;

											if (obj.poNo == null
													|| obj.poNo == "") {
												validation = validationUpdated(
														"PO No Requied", "poNo");
												
											}

											if (obj.poDate == null
													|| obj.poDate == "") {
												validation = validationUpdated(
														"PO Date Requied",
														"poDate");
												console
														.log("validat Email name "
																+ validation)
											}
											$('.loader').show();
											
											if (validation) {
												$
														.ajax({
															type : "POST",
															url : "manage-invoice-po-add",
															contentType : "application/json",
															data : JSON
																	.stringify(obj),

															success : function(
																	response) {
																console
																		.log(response);
																if (response.message == "Success") {
																	closeNavSale();
																	agGrid
																			.simpleHttpRequest(
																					{
																						url : "manage-invoice-through-ajax"
																					})
																			.then(
																					function(
																							data) {
																						gridOptions.api
																								.setRowData(data);
																					});
																	$('.loader').hide();
																}
															},
															error : function(
																	data) {

																console
																		.log(data);
																$('.loader').hide();
															}
														})
											}

										})
										
									$("#categoryBtn").click(function(){
						    	
						    	//closeModal();
						    	$("#myModall").modal('show');
						    	$('#addItemModel').modal('hide');
						    	getCategoryList();
						    	
						    })
						    
						       $("#selectCategory").click(function(){ 
    	  $('#addItemModel').modal('show');  
    	var id = $("#tempCategoryId").val();
		var lvl = $("#prLevelId").val();		
		if(id && lvl) {
			$("#prCategoryId").val(id);
			if(lvl == 'L1') {
				var textDesc = $("#lbl_"+id).text();
				$("#catDesc").text(textDesc);
			} else {
				var res = lvl.substring(1, 1000000);
				
				var lastText = $("#lbl_"+id).text();
				var textDesc = "";
				for(i = res; i > 1; i--) {
					var pUL = $("#"+id).attr("data-node-pid");
					//pUL = pUL.substring(3, 10000000000000);
					var newText = $("#lbl_"+pUL).text();
					console.log(newText+" "+i)
					textDesc =  newText+" > "+textDesc ; 
					id = pUL;
				}
				textDesc = textDesc + lastText;
				$("#catDesc").html(textDesc);
			}
		}
		$("#myModall").modal("hide");
		closeModall();
    })
				
        $("#skuPurchase").change(function(){
    	var sku = $(this).val();
    	$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
    	if(sku) {
    		obj = {};
    		obj.key = $("#productId").val();
    		obj.name = sku;
    		$.ajax({
				type : "POST",
				url : "manage-invoice-get-variant-dtls",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						$("#variantTypeSpan").text(response.body.key);
			    		$("#variantValueSpan").text(response.body.name);
			    		$("#variantUnitSpan").text(response.body.code);
					}
				}, error : function(data) {
					console.log(data)
				}
    		});
    	} else {
    		$("#variantTypeSpan").text("");
    		$("#variantValueSpan").text("");
    		$("#variantUnitSpan").text("");
    	}
    })
    
     $("#savePurchaseDtls").click(function(){
    	
    	obj = {};
    	
    	obj.isEdit = $("#isEditPurchase").val();
    	obj.productId = $("#productId").val();
    	obj.sku = $("#skuPurchase").val();
    	obj.vendorId = $("#itemVendorId").val();
    	var price = $("#purchasePrice").val();
    	price = price.replaceAll(",","");
    	obj.salePrice = price;
    	obj.saleTax = $("#purchaseTax").val();
    	obj.saleCess = $("#purchaseCess").val();
    	obj.moq = $("#moq").val();
    	obj.editSKUId = $("#editSKUId").val();
    	obj.editVendorId = $("#editVendorId").val();
    	
    	
    	$(".formValidation").remove();
		allPurValid = true;
		if( $("#skuPurchase").val() == null || $("#skuPurchase").val() == ""){
			allPurValid = false;
			validationModal("SKU Required","skuPurchase");
		} 
		if( obj.vendorId == null || obj.vendorId == ""){
			allPurValid = false;
			validationModal("Vendor Required","itemVendorId");
		} 
		if( obj.salePrice == null || obj.salePrice == ""){
			allValid = false;
			validationModal("Purchase Price Required","purchasePrice");
		} 
		if( obj.moq == null || obj.moq == ""){
			allPurValid = false;
			validationModal("MOQ Required","moq");
		} 
    	
		if(allPurValid) {
			submitPurchaseDetails(obj);
		}
    	
    })
        $("#productSave").click(function(){
    	  
    	var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});  
         	 
        })
    
	
          obj = {};
   
            obj['productId'] = $("#productId").val();
            obj['productName'] = $("#productName").val();
            obj['brand'] = $("#itemBrand").val();
            obj['mode'] = $("#mode").val();
            obj['hsnCode'] = $("#hsnCodeProduct").val();
            obj['sicCode'] = $("#sicCode").val();
            obj['productStatus'] = $("input[name='isActive']:checked").val();
            obj['productCategory'] = $("#prCategoryId").val();
            obj['productCategoryText'] = $("#catDesc").text();
            obj['imgList'] = data;
            $(".formValidation").remove();
           allPValid = true;
    		if( $("#productName").val() == null || $("#productName").val() == ""){
    			allPValid = false;
    			validationModal("Product Name Required","productName");
    		} 
    		/* if( $("#itemBrand").val() == null || $("#itemBrand").val() == ""){
    			allPValid = false;
    			validationModal("Brand Required","itemBrand");
    		}  */
    		if( $("#mode").val() == null || $("#mode").val() == ""){
    			allPValid = false;
    			validationModal("Mode Required","mode");
    		} 
    		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
    			allPValid = false;
    			validationModal("HSN/SAC Code Required","hsnCodeProduct");
    		} 
    		var productId = $('#productheadId').html();
            if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            			
	            			submitProduct(obj);
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	submitProduct(obj);
              }
            	
            	
            }
         
    })
    
    					
$("#saveSKUData").click(function(){
    	
    	obj = {};
    	
    	obj.isEdit = $("#isEdit").val();
    	obj.productId = $("#productId").val();
    	obj.sku = $("#skuId").val();
    	obj.model = $("#model").val();
    	obj.manufacture = $("#manufacture").val();
    	obj.variationType = $("#variationType").val();
    	obj.variationValue = $("#variationValue").val();
    	obj.unit = $("#itemUnit").val();
    	var price = $("#salePrice").val();
    	price = price.replaceAll(",","");
    	obj.salePrice = price;
    	obj.saleTax = $("#saleTax").val();
    	obj.saleCess = $("#saleCess").val();
    	
    	$(".formValidation").remove();
		allValid = true;
	
		if( obj.manufacture == null || obj.manufacture == ""){
			allValid = false;
			validationModal("Item Name Required","manufacture");
		} 
		if( obj.unit == null || obj.unit == ""){
			var mode = $("#mode").val();
			if (mode=="PMODE00004"){
				allValid = true;
			}else{
				allValid = false;
				validationModal("UOM Required","itemUnit");
			}
		} 
		if( obj.salePrice == null || obj.salePrice == ""){
			allValid = false;
			validationModal("Sale Price Required","salePrice");
		}    	
		if(allValid) {
			submitProductDetails(obj);
		}    	
    })

				var ld = localStorage.getItem('ReqGRNData');
						var data = JSON.parse(ld);
						console.log(data)
						if (data) {
	                    	$("#documentDetails").show();
		                    $('#toDateCalendarDt').hide();
		                    $('#delete1').attr("disabled", true);
		                    $('#pVarification').hide();
		                    $('#addMoreDetails').attr("disabled", true);
		                    $('#searchRowDiv').hide();
		                    $('#tcsDiv').hide();
		                    $('#salesOrder').hide();
		                    $('#delete').hide();
		                    $('#delete1').hide();
		                    $('#hideTbl').hide();
		                    $('#approveGrnReceipt').hide();
		                    $("#add").hide();
		                    $("#qaRequest").hide();
		                    $("#myGrid").hide();
		                    $("#addNewAdd1").hide();
		                    $("#addNewAdd").hide();
		                    $("#save").show();
		                    $("#Cancel").show();
		                    $("#addData").show();
		                    $("#totalCandidate").hide();
		                    $("#dwnld").hide();
		                    $("#upld").hide();
		                    $("#addre").show();
		                    $("#newItem").hide();
		                    $("#vendorName").val(data[0].vendorName);
		                    getVendorDtls(data[0].vendorId, 'edit');
		                    getAddressDetails(data[0].vendorId);
		                    $("#pohedId").html(data[0].poId);
		                    $("#poId").val(data[0].poId);
		                    $("#qutValidDate").val(data[0].qutValidDate);
		                    $("#reference").val(data[0].reference);
		                    $("#purchageOrderReference").val(data[0].poId);
		                    $("#purchaseDate").val(data[0].updatedOn);
		                    $("#paymentTermId").val(data[0].paymentTermId);
		                    $("#adjustment").val(data[0].adjustment);
		                    $("#tcsName").val(data[0].tcs);
		                    $("#tcsId").val(data[0].tcsId);
		                    $("#project").val(data[0].project);
		                    $("#tcsAmount").val(data[0].tcsAmount);
		                    $("#terms").val(data[0].terms);
		                    $("#grandTotal").val(data[0].grandTotal);
		                    $("#qSGST").val(data[0].qSGST);
		                    $("#qCGST").val(data[0].qCGST);
		                    $("#subTotal").val(data[0].subTotal);
		                    $("#carrierId").val(data[0].carrierId);
		                    $("#vendorId").val(data[0].vendorId);
		                    $("#qutValidDate").val(data[0].qutValidDate);
		                    $("#toDateCalendar").val(data[0].qutValidDate);
		                    $("#qutDescription").val(data[0].qutDescription);
		                    $("#taxType").val(data[0].taxType);
		                    $("#vehicleNo").val(data[0].vehicle_no);
		                    $("#driverName").val(data[0].driver_name);
		                    $("#driverMobile").val(data[0].driver_mobile);
		                    $("#gatePassNo").val(data[0].gatePass);
		                    
		                    hideShowS();
		                    $("#grandTotal").val(data[0].grandTotal);
		                    if (data[0].shippingDetails == 1) {
		                    	$("#custDetails").prop('checked', true);
		                    	openModal(1);
		                    } else {
		                    	$("#orgDetails").prop('checked', true);
		                    	openModal(0);
		                    }
		                    //$("#shippingDetails").val(data[0].shippingDetails);
		                    $("#organizationName").val(data[0].orgDetails);
		                    $("#customerName").val(data[0].custDetails);
		                    $("#qIGST").val(data[0].qIGST);
		                    itemOptions.api.setRowData();
		                    var varifyStatus=0;
		                   
							if (varifyStatus=="0") {
								itemOptions.columnApi.setColumnVisible('varifyStatus', false);
								itemOptions.columnApi.setColumnVisible('qaTestStatus', false);
							}else{
								itemOptions.columnApi.setColumnVisible('varifyStatus', true);
								itemOptions.columnApi.setColumnVisible('qaTestStatus', true);
							}
							
							var vehicle_No = data[0].vehicle_no;
							
				/* 				if (vehicle_No == "" || vehicle_No == null) {
									itemOptions.columnApi.setColumnVisible('challan_no', false);
									itemOptions.columnApi.setColumnVisible('challan_dt', false);
									$("#challan_no").show();
									$("#challan_dt").show();
								}else{
									itemOptions.columnApi.setColumnVisible('challan_no', true);
									itemOptions.columnApi.setColumnVisible('challan_dt', true);
									$("#challan_no").hide();
									$("#challan_dt").hide();
								} */
							itemOptions.api.setRowData(data);
								console.log("dataset for challan-------",JSON.stringify(data[0]));
								var date = (new Date()).toISOString().split('T')[0];
								var newDate = changeDateFormat(date);
								$("#invoiceDate").val(newDate);

								$.ajax({
									type : "GET",
									url : "manage-invoice-get-insertedid",
									success : function(response) {
										if (response.message == "success") {
											
											$("#invoiceReferenceId").val(response.body[0].key);
										}
									},
									error : function(e) {
									}
								});
								$("#doctbodyData").empty();
								if (data[0].documentList != null
										&& data[0].documentList != "") {
									for (var i = 0; i < data[0].documentList.length; i++) {
										var tbl = '<tr>'
												+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
												+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
												+ '<td><div class="form-group"> <input type="text" value="'+data[0].documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
												+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
												+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
												+ i
												+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
												+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+data[0].documentList[i].fileName+'" class="uploadHidCls">'
												+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
												+ data[0].documentList[i].action
												+ '</div></div>'
												+ '<div id="imageName_'+i+'" class="imageName">'
												+ data[0].documentList[i].fileName
												+ '</div>'
												+ '<input type="hidden" id="editId_'+i+'" value="'+ data[0].documentList[i].vendorRfqId+'">'
												+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
												+ '</tr>';

										$("#doctbodyData").append(tbl);
									}
								} else {
									var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
											+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
											+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
											+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
											+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
											+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
											+ '</tr>';
									$("#doctbodyData").append(tbl);
								}
							localStorage.setItem('ReqGRNData', null);
						} else {
							$("#purchageOrderReference").val('New');
						}

					});

	/* 
	
	 Quotation 
	
	 */

	var columnDefs = [
			{
				headerCheckboxSelection : false,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left',
				

			},
			{
				headerName : "GRN Id",
				field : "invoiceId",
				width : 120,
				pinned: 'left',
				cellRenderer : function(params) {
					return '<a onclick=editInvoice("' + params.data.invoiceId
					+'","'+params.data.poId+'","'+params.data.appoveStatus+'") href="javascript:void(0)">'
							+ params.data.invoiceId + '</a>';
				}
			}, {
				headerName : 'Po Id',
				field : "poId",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				headerName : 'Vendor name',
				field : "vendorName",
				width : 250,

			}, /* {
			

				headerName : 'Invoice No',
				field : "invoiceNo",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				}
			}, */ {
				headerName : 'Date',
				field : "updatedOn",
				width : 130,
				cellStyle : {
					textAlign : 'center'
				}
			}, {

				headerName : 'Approve Status',
				field : "appoveStatus",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.appoveStatus =="Pending") { 
						return '<div style="color:#a9a9a9">Pending</div>';
					} else {
						return '<div style="color:#0642f5">Approved</div>';
					} 	
				}
			},{

				headerName : 'Amount',
				field : "grandTotal",
				width : 110,
				type : 'rightAligned',
				
			/* }, {
				headerName : "Invoice",
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					var s = "";
					s = ' <a href="#" class="grn-btn" onclick="invoicePdfDownload(\''+params.data.invoiceId+'\')"><i class="ti ti-download"></i> Invoice </a>';
					return s;
				},
				width: 250, */

			},{
				headerName : 'Project',
				field : "project",
				width : 180,
			},
			{

				headerName : 'Description',
				field : "qutDescription",
				width : 180,
			},{

				
				headerName : 'Terms And Condition',
				field : "terms",
				width :200,
			},{

				headerName : 'QA Status',
				field : "qaStatus",
				width : 150,
				hide : true,
				cellStyle : {
					textAlign : 'center'
				},
				 cellRenderer : function(params) {
					if (params.data.qaStatus =="Pending") { 
						return '<div style="color:#a9a9a9">Pending</div>';
					} else {
						return '<div style="color:#0642f5">Requested</div>';
					} 	
				} 
			},{			
				headerName : 'Due date',
				field : "qutValidDate",
				width : 150,
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				
				headerName : 'Created By',
				field : "createdBy",
				width : 150,
			}, ];
	
/* 	function invoicePdfDownload(id) {
		window.open("/purchase/manage-invoice-pdf-downloads?invId="+ window.btoa(id), '_blank'); 
		
	} */
	

	var itemDefs = [
			{
				//headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left',

			},
			{
				headerName : "SlNo",
				field : "slNo",
				width : 70,
				pinned: 'left',
		 	 	cellRenderer : function(params) {
					if (approveSts1=="Approved") {
						return '<div>'+params.data.slNo+'</div><i class="bi bi-arrow-return-right">';
					} else {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)"><i class="bi bi-arrow-return-right">'
								+ params.data.slNo + '</a>';
					}
				} 
			}, {
				  headerName : 'SKU',
				field : "sku",
				width : 100,
				pinned: 'left',
				
			}, {  
				headerName : 'HSN Code',
				field : "hsnCode",
				width : 120,
				pinned: 'left',
			}, {
				headerName : 'Item Name',
				field : "itemName",
				width : 175,
				pinned: 'left',
			}, {
				headerName : 'Item Id',
				field : "itemId",
				width : 100,
				hide : true,
			}, {
				headerName : "Model/Size",
				field : "modelSize",
				width : 150,
			}, {
				headerName : 'Quantity',
				field : "quantity",
				type : 'rightAligned',
				width : 100,
				//valueFormatter : currencyFormatter
			}, {

				headerName : 'Unit',
				field : "unitName",
				width : 70,
			}, {
				headerName : 'Unit',
				field : "unit",
				hide : true,

			}, {
				headerName : 'Unit Price',
				field : "unitPrice",
				type : 'rightAligned',
				width : 120,
			//	valueFormatter : currencyFormatter
			}, {
				headerName : 'Discount',
				field : "discount",
				type : 'rightAligned',
				width : 120,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Amount',
				field : "lineTotal",
				type : 'rightAligned',
				width : 100,
				
				aggFunc : 'sum'
				
			}, {
				headerName : 'GST Rate',
				field : "gstRate",
				type : 'rightAligned',
				width : 100,
				
			}, {
				headerName : 'CGST',
				field : "itemCgst",
				type : 'rightAligned',
				width : 70,
				
			}, {
				headerName : 'SGST',
				field : "itemSgst",
				type : 'rightAligned',
				width : 70,
				
			}, {
				headerName : 'IGST',
				field : "itemIgst",
				type : 'rightAligned',
				width : 70,
				
			}, {
				headerName : 'Taxable Amount',
				field : "taxableAmt",
				type : 'rightAligned',
				width : 170,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Pending Quantity',
				field : "pendingQuantity",
				type : 'rightAligned',
				width : 153,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Receiving Quantity',
				field : "receivingQuantity",
				type : 'rightAligned',
				width : 153,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Received Quantity',
				field : "receivedQuantity",
				type : 'rightAligned',
				width : 153,
				//valueFormatter : currencyFormatter
			},{
				headerName : 'QA Test Status',
				field : "qaTestStatus",
				width : 170,
				cellStyle : {
					textAlign : 'center'
				},
				 cellRenderer : function(params) {
					if (params.data.qaTestStatus == "Accepted") {
						return '<div style="color:#008000">'
								+ params.data.qaTestStatus + '</div>';
					}  else if (params.data.qaTestStatus == "Rejected") {
						return '<div style="color:#ff8242">'
								+ params.data.qaTestStatus + '</div>';
					}  else  {
						return '<div style="color:#a9a9a9">'
						+ params.data.qaTestStatus + '</div>';
					}
				} 
				 
			},{
				headerName : 'Physical Varification',
				field : "varifyStatus",
				width : 170,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.varifyStatus == "Verified") {
						return '<div style="color:#008000">'
								+ params.data.varifyStatus + '</div>';
					} else {
						return '<div style="color:#a9a9a9">'
								+ params.data.varifyStatus + '</div>';
					}
				}
				
			}, {
				headerName : 'challan no/invoice no',
				field : "challan_no",
				width : 120,
			},{
				headerName : 'challan date/invoice date',
				field : "challan_dt",
				width : 150,
			},{
				headerName : 'Description',
				field : "description",
				type : 'leftAligned',
				width : 153,
				
			}, ];

	var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'single',

		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},
		onSelectionChanged : rowSelect,

	};

	var itemOptions = {
		columnDefs : itemDefs,
		rowSelection : 'multiple',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 100,
			height : 10
		},
		onSelectionChanged : rowSelectItem,
		getRowNodeId : function(data){
			return data.slNo;
		}
	};
	
	
	var columnDefs12 = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true
	},
	{
	    headerName: "Product Id",
	    field: "productId",
	    cellRenderer: function(params) {
	        return '<a onclick=openDetails("' + params.data.productId + '") href="javascript:void(0)">' + params.data.productId + '</a>';
	    }
	},
	{
		 headerName: "Product Name",
		    field: "productName",
		    width: 200,
	},
	{
		 headerName: "Brand",
		    field: "brand",
		    cellStyle: {textAlign: 'center'}
	   
	},
	{
	   
	    headerName: "Category",
	    field: "productCategoryText",
	    width: 200,
	},
	{
	    headerName: "Mode",
	    field: "mode",
	    cellStyle: {textAlign: 'center'}
	},
	{
		headerName: "Status",
	    field: "productStatus",
	    cellStyle: {textAlign: 'center'}
	},
	{
	  
	    headerName: "Created By",
	    field: "createdBy",
	    cellStyle: {textAlign: 'center'}
	},
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];	
	
	
	var gridOptions12 = {
			columnDefs: columnDefs12,
			rowSelection: 'multiple',
			defaultColDef: {
				sortable: true,
			    filter: true,
			    resizable: true,
			    width: 149,
			    height: 10
			},
			rowSelection: 'multiple',
			suppressRowClickSelection : true,
			onSelectionChanged: onSelectionChangedproduct12
			};
	
	var columnSKUDefs = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true
	},
	{
	    headerName: "SKU",
	    field: "sku",
	    cellRenderer: function(params) {
	        return '<a onclick=openSKUDetails("' + params.data.sku + '","'+params.data.productId+'") href="javascript:void(0)">' + params.data.sku + '</a>';
	    }
	},
	{
	    headerName: "Manufacture Item",
	    field: "manufacture",
	    width: 200,
	},
	{
	    headerName: "Model",
	    field: "model"
	},
	{
	    headerName: "Variation Type",
	    field: "variationType"
	},
	{
	    headerName: "Variation Value",
	    field: "variationValue"
	},
	{
	    headerName: "UOM",
	    field: "unit"
	},
	{
	    headerName: "Unit Sale Price",
	    field: "sPrice",
	    cellStyle: {textAlign: 'right'}
	}, 
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];



	var skuOptions = {
	columnDefs: columnSKUDefs,
	rowSelection: 'multiple',
	defaultColDef: {
		sortable: true,
	    filter: true,
	    resizable: true,
	    width: 150,
	    height: 10
	},
	rowSelection: 'multiple',
	suppressRowClickSelection : true,
	onSelectionChanged: onSelectionChangedsku 
	};

	var columnPurchaseDefs = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true
	},
	{
	    headerName: "SKU",
	    field: "sku",
	    cellRenderer: function(params) {
	        return '<a onclick=openPurchaseDetails("' + params.data.sku + '","'+params.data.productId+'","'+params.data.vendorId+'") href="javascript:void(0)">' + params.data.sku + '</a>';
	    }
	},
	{
	    headerName: "Vendor Id",
	    field: "vendorId"
	},
	{
	    headerName: "Vendor Name",
	    field: "createdBy", //Here CreatedBy Variable is used for Vendor Name
	    width: 206,
	},
	{
	    headerName: "Variation Type",
	    field: "variationType"
	},
	{
	    headerName: "Variation Value",
	    field: "variationValue"
	},
	{
	    headerName: "UOM",
	    field: "unit"
	},
	{
	    headerName: "Unit Purchase Price",
	    field: "sPrice",
	    hide:true,
	    cellStyle: {textAlign: 'right'}
	},
	{
	    headerName: "MOQ",
	    field: "sMoq",
	    cellStyle: {textAlign: 'right'}
	},
	/* {
	    headerName: "Sale Tax",
	    field: "saleTax",
	    cellStyle: {textAlign: 'right'}
	},
	{
	    headerName: "Sale Cess",
	    field: "saleCess",
	    cellStyle: {textAlign: 'right'}
	}, */
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];
	var purchaseOptions = {
			columnDefs: columnPurchaseDefs,
			rowSelection: 'multiple',
			defaultColDef: {
				sortable: true,
			    filter: true,
			    resizable: true,
			    width: 149,
			    height: 10
			},
			rowSelection: 'multiple',
			suppressRowClickSelection : true,
			onSelectionChanged: onSelectionChangedvender 
			};
	function onSelectionChangedvender(){
		var selectedRows = purchaseOptions.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deletes').attr("disabled", false);
		        $('#newBtn1').attr("disabled", true);
		       
			
		}else{
			    $('#deletes').attr("disabled", true);
			    $('#newBtn1').attr("disabled", false);
		        
			   
				
		}
	}
	
	
	function onSelectionChangedproduct12(){
		var selectedRows =gridOptions12.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deleteproduct1').attr("disabled", false);
		        $('#newBtn1').attr("disabled", true);
				
		}else{
			    $('#deleteproduct1').attr("disabled", false);
			    $('#newBtn1').attr("disabled", false);
			
		}
	}	 
	
	function onSelectionChangedsku(){
		var selectedRows =skuOptions.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deletess').attr("disabled", false);
		        $('#newBtn2').attr("disabled", true);
				
		}else{
			    $('#deletess').attr("disabled", true);
			    $('#newBtn2').attr("disabled", false);
			
		}
	}
	function add() {
		$("#noDiv").hide();
		$("#dateDiv").hide();
		approveSts1 = "";
		$("#documentDetails").show();
		$("#addre").hide();
		$('#tcsDiv').hide();
		$('#toDateCalendarDt').hide();
		$('#pVarification').attr("disabled", true);
		$('#addMoreDetails').attr("disabled", true);
		$('#searchRowDiv').hide();
		$('#salesOrder').hide();
		$('#delete').hide();
		$('#hideTbl').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$('#approveGrnReceipt').hide();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
		$("#quotationhedId").html("");
		$("#quotationId").val("");
		$("#qutName").val("");
		$("#quotationDate").val("");
		$("#custId").val("");
		$("#custName").val("");
		$("#reference").val("");
		$("#project").val("");
		$("#salesPerson").val("");
		$("#dealName").val("");
		$("#qutValidDate").val("");
		$("#toDateCalendar").val("");
		$("#qutDescription").val("");
		$("#qutActive").val("");
		$("#qutCreatedBy").val("");
		$("#qutUpdatedOn").val("");
		$("#subTotal").val("");
		$("#grandTotal").val("");
		$("#slNo").val("");
		$("#sku").val("");
		$("#itemId").val("");
		$("#itemName").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		$("#discount").val("");
		$("#gstRate").val("");
		$("#lineTotal").val("");
		$("#qIGST").val("");
		$("#qCGST").val("");
		$("#qSGST").val("");
		$("#itemIgst").val();
		$("#itemCgst").val();
		$("#itemSgst").val();
		var sessionOrganization1 = $("#sessionOrganization1").val();
		$("#organizationName").val(sessionOrganization1);
		$("#organatioModal").show();
		$("#qaRequest").hide();
		var date = (new Date()).toISOString().split('T')[0];
		var newDate = changeDateFormat(date);
		$('#delete1').attr("disabled", true);
		$("#invoiceDate").val(newDate);
		var po=$("#poId").val();
		if(po=="" || po=="null" ||po==null){
			$('#delete1').show();
			$('#newItem').show();
			$('#pVarification').hide();
			$('#addMoreDetails').hide();
		}else{
			$('#delete1').hide();
			$('#newItem').hide();
			$('#pVarification').hide();
			$('#addMoreDetails').hide();
		}
		

		$.ajax({
			type : "GET",
			url : "manage-invoice-get-insertedid",
			success : function(response) {
				if (response.message == "success") {
					
					$("#invoiceReferenceId").val(response.body[0].key);
				}
			},
			error : function(e) {
			}
		});
		$("#doctbodyData").empty();
		var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
				+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
				+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
				+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
				+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
				+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
				+ '</tr>';
		$("#doctbodyData").append(tbl);
	}

	function openDetails(id) {
		$('.formValidation').remove();
		//newPage();
		$("#next").hide();
		$('#main3').show();
		$("#profile").show();
		$('#myGrid1').hide();
		$("#productId").val("");
		$("#productName").val("");
		$("#brand").val("");
		$("#mode").val("");
		$("#prodStatus").prop("checked",false);
		$("#prCategoryId").val("");
		$("#tempCategoryId").val("");
		$("#prLevelId").val("");
		$("#catDesc").text("");
		
		$('.loader').show();
		profileSelect();
		if(id) {
			$.ajax({
				type : "POST",
				url : "manage-invoice-get-product-details",
				dataType : 'json',
				contentType : 'application/json',
				data : id,
				success : function(response) {
					if (response.message == "success") {
						$("#productSave").show();
						//console.log(response);
						$("#productheadId").html(response.body.productId);
						$("#productId").val(response.body.productId);
						$("#productName").val(response.body.productName);
						$("#itemBrand").val(response.body.brand);
						$("#mode").val(response.body.mode);
						if(response.body.productStatus == "1") {
							$("#prodStatus").prop("checked",true);
						} else {
							$("#prodStatus").prop("checked",false);
						}
						
						$("#prCategoryId").val(response.body.productCategory);
						$("#catDesc").text(response.body.productCategoryText);
						$("#hsnCodeProduct").val(response.body.hsnCode);
						//$("#sicCode").val(response.body.sicCode);				
						$('#imgemp').attr('src', '');
						if(response.body.pImgName!=null && response.body.pImgName!="") {
							$('#imgemp').attr('src', response.body.pImgName);
							//$("#fileedit").val(response.body.pImgName);
						} else {
							$('#imgemp').attr('src', '../assets/images/noimage.jpg');
							//$("#fileedit").val("");
						}
						
						agGrid.simpleHttpRequest({
							url : 'manage-invoice-get-sku-by-product?id='+response.body.productId
						}).then(function(data) {
							console.log(data)
							skuOptions.api.setRowData(data);
							
							$("#skuPurchase").empty();
							$("#skuPurchase").append("<option value>Select</option>");
							for(var i = 0; i < data.length; i++) {
								
								$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
							}
						});
						
						agGrid.simpleHttpRequest({
							url : 'manage-invoice-get-purchase-by-product?id='+response.body.productId 
						}).then(function(data) {
							console.log(data)
							purchaseOptions.api.setRowData(data);
						});
						$('.loader').hide();
					}
				}, error : function(data) {
					console.log(data)
					$('.loader').hide();
				}
			});
		}
		$('#main3').show();
		$('#next').hide();
	}	
	function changeDateFormat(inputDate){ 
	    var splitDate = inputDate.split('-');
	    if(splitDate.count == 0){
	        return null;
	    }
	    var year = splitDate[0];
	    var month = splitDate[1];
	    var day = splitDate[2]; 

	    return day + '-' + month + '-' + year;
	}
	function Cancel() {
		$("#invoiceheadId").html('');
		$("#vendorName").val('');
		$("#vendorId").val('');
		$("#poId").val('');
		$("#invoiceDate").val('');
		$("#invoiceNo").val('');
		$("#vehicleNo").val('');
		$("#driverName").val('');
		$("#driverMobile").val('');
		$("#eWayBillingNo").val('');
		$("#modeTermsPayment").val('');
		$("#exptdeliveryDate").val('');
		$('#addMoreDetails').show();
		$('#pVarification').show();
		$('#qaRequest').show();
		$("#suggesstion-box1_").hide();
		$("#custGSTNo").val('');
		$("#qutValidDate").val('');
		$("#reference").val('');
		$("#paymentTermId").val('');
		$("#carrierId").val('');

		$("#qutDescription").val('');
		$("#organizationName").val('');
		$("#customerName").val('');
		$("#receivingDocType").val('');
		$("#challanNum").val('');
		$("#challanDate").val('');

		$("#terms").val('');

		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#tcsAmount").val('');
		$("#tcsName").val('');
		$("#subTotal").val('');
		$("#qIGST").val('');
		$("#qCGST").val('');
		$("#qSGST").val('');
		$("#grandTotal").val('');
		$("#adjustment").val('');
		$("#taxType").val('');
		$("#itemIgst").val('');
		$("#itemCgst").val('');
		$("#itemSgst").val('');
		$("#searchRowDiv").show();
		$("#salesOrder").show();
		$("#delete").show();
		$('.formValidation').remove();
		$("#add").show();
		$("#myGrid").show();
		$("#save").hide();
		$("#Cancel").hide();
		$("#addData").hide();
		$('#hideTbl').show();
		$("#totalCandidate").show();
		$("#dwnld").show();
		$("#upld").show();
		$("#documentDetails").hide();
		itemOptions.api.setRowData();

		$('#delete').attr("disabled", true);
		$('#approvePorder').attr("disabled", true);
		$('#qaRequest').attr("disabled", true);
		
		agGrid.simpleHttpRequest({
			url : "manage-invoice-through-ajax"
		}).then(function(data) {
			var len = data.length;
			$('#totalCandidate').find('span').html(len);
			gridOptions.api.setRowData(data);
		});
		gridOptions.api.setQuickFilter(null);
		$('#quickFilter').val('');
		document.getElementById('closeKey').style.display='none';
	}

	function openNav() {
		$("#sku").val("");
		$("#itemName").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		$("#discount").val("0");
		$("#gstRate").val("");
		$("#lineTotal").val("");
		$("#hsnCode").val("");
		$("#unit").val("");
		$("#editProduct").val("");
		$("#skuDiv").show();
		$("#hsnCodeDiv").show();
		$("#unitDiv").show();
		$("#unitPriceDiv").show();
		$("#gstRateDiv").show();
		$("#discountDiv").show();
		$("#lineTotalDiv").show();
		$("#browseBtnDiv").show();
		$("#pendingQuantityDiv").hide();
		
		$("#receivingQuantityDiv").hide();
		$("#receivedQuantityDiv").hide();
		$("#descriptionDiv").show();
		var challanNum = $("#challanNum").val();
		var challanDate = $("#challanDate").val();
		$("#challan_no").val(challanNum);
		$("#challan_dt").val(challanDate);
		$("#challanDt").hide();
		$("#challanNo").hide();
		document.getElementById('itemName').disabled = false;
		document.getElementById('hsnCode').disabled = true;
		document.getElementById('quantity').disabled = false;
		document.getElementById('pendingQuantity').disabled = true;
		document.getElementById('receivedQuantity').disabled = true;
		var vendorValid = true;
		if ($("#vendorName").val() == null || $("#vendorName").val() == "") {
			vendorValid = false;
		}
		$("#save").hide();
		$("#Cancel").hide();
		if(vendorValid){
		document.getElementById("mySidenav").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto; top:820px;";
		document.getElementById("main_content").style.width = "70%";
		}else{
			$("#messageParagraph").text("First Choose Vendor Name");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			$("#save").show();
			$("#Cancel").show();
		}
		$("#subtotalDiv").hide();
		//$("#save").hide();
		
	}
	function getVendorListForProduct() {
		var id=0;
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$.ajax({
				type : "GET",
				url : "manage-invoice-get-VendorList?id=" + id,
				success : function(response) {
					if (response.message == "success") {
						$("#itemVendorId").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#itemVendorId").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#itemVendorId").append(option);
						}
						if(rid!="" || rid!=null || rid!="null"){
							$("#itemVendorId").val(rid);
						}
					}
				},
				error : function(e) {
				}
			});	
	}	
	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
		document.getElementById("main_content").style.width = "100%";
		$('.formValidation').remove();
		$("#sku").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#hsnCode").val('');
		$("#unit").val('');
		$("#modelSize").val('');
		$("#editProduct").val(null);
		$("#subtotalDiv").show();
		
		var appoveStatus=$("#approveStatus").val();
		if(appoveStatus=="Approved"){
		$("#save").hide();
		$("#Cancel").hide();
		}
		else{
			$("#save").show();
			$("#Cancel").show();
		}
	}
	
	function openNav1() {
		openNav()
		$("#skuDiv").hide();		
		$("#hsnCodeDiv").show();
		$("#unitDiv").show();		
		$("#unitPriceDiv").show();
		$("#gstRateDiv").show();
		$("#discountDiv").show();
		$("#lineTotalDiv").show();
		$("#browseBtnDiv").hide();
		$("#challanNo").show();
		$("#challanDt").show();
		$("#pendingQuantityDiv").show();
		$("#receivingQuantityDiv").show();
		$("#receivedQuantityDiv").show();
		$("#descriptionDiv").show();
		$("#subtotalDiv").hide();
		 var selectedNodes = itemOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		
		$("#editProduct").val(selectedData.map(node => node.slNo));
		$("#sku").val(selectedData.map(node => node.sku));
		$("#itemIdTemp").val(selectedData.map(node => node.itemId));
		$("#itemName").val( selectedData.map(node => node.itemName));
		$("#hsnCode").val(selectedData.map(node => node.hsnCode));
		$("#unit").val( selectedData.map(node => node.unit));
		$("#modelSize").val( selectedData.map(node => node.modelSize));
		$("#quantity").val(selectedData.map(node => node.quantity));
		$("#unitPrice").val(selectedData.map(node => node.unitPrice));
		$("#gstRate").val( selectedData.map(node => node.gstRate));
		$("#discount").val(selectedData.map(node => node.discount));
		$("#lineTotal").val(selectedData.map(node => node.lineTotal));
		$("#itemIgst").val(selectedData.map(node => node.itemIgst));
		$("#itemCgst").val(selectedData.map(node => node.itemCgst));
		$("#itemSgst").val( selectedData.map(node => node.itemSgst));
		$("#pendingQuantity").val( selectedData.map(node => node.pendingQuantity));
		$("#receivingQuantity").val(selectedData.map(node => node.receivingQuantity));
		$("#receivedQuantity").val( selectedData.map(node => node.receivedQuantity));
		$("#description").val( selectedData.map(node => node.description));
		
		var cn=selectedData.map(node => node.challan_no);
		if(cn=="null" || cn=="" || cn==null){
			$("#challan_no").val($("#challanNum").val());
			$("#challan_dt").val($("#challanDate").val());
		}else{
			$("#challan_no").val(cn);
			$("#challan_dt").val(selectedData.map(node => node.challan_dt));	
		}

	}


	/*
	sidenav fn
	 */
	function salesOrder() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		var selectedRowsStringnew = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
				selectedRowsStringnew += ',';
			}
			selectedRowsString += selectedRow.quotationId;
			selectedRowsStringnew += selectedRow.custName;

		});
		if (selectedRowsString) {
			var item = {};
			item.quotationIdnew = selectedRowsString;
			$("#quotationIdnew").val(selectedRowsString);
		} 

		if (selectedRowsStringnew) {
			var item = {};
			item.custIdnew = selectedRowsStringnew;
			$("#custIdnew").val(selectedRowsStringnew);

		} 

	}

	/* //quotation item  table add */
function saveTableData() {
	var editProduct = $("#editProduct").val();
	var item = {};
	var data = 1;
	var pId = $("#poId").val();
	var validation = true;

		if (item.itemName == null || item.itemName == "") {
			validation = validationUpdated("Item Name Required", 'itemName');
		}
		if (item.quantity == null || item.quantity == "") {
			validation = validationUpdated("Quantity Required", 'quantity');
		}
		if (item.unitPrice == null || item.unitPrice == "") {
			validation = validationUpdated("Unit Price Required", 'unitPrice');
		}
		if (item.discount == null || item.discount == "") {
			validation = validationUpdated("Discount Required", 'discount');
		}
		if (item.gstRate == null || item.gstRate == "") {
			validation = validationUpdated("GST Rate Required", 'gstRate');
		}
		if (item.lineTotal == null || item.lineTotal == "") {
			validation = validationUpdated("Line Total Required", 'lineTotal');
		}
	/* 	if (item.challan_no == null || item.challan_no == "") {
			validation = validationUpdated("Challan No Required", 'challan_no');
		}
		if (item.challan_dt == null || item.challan_dt == "") {
			validation = validationUpdated("Challan Dt Required", 'challan_dt');
		} */
		if (validation) {
			item.slNo = data;
			itemOptions.api.forEachNode(function(rowNode, index) {
				if (!editProduct) {
					data = data + 1;
					item.slNo = data;
				}
				else{
					item.slNo = editProduct;
				}				
			});
			
			item.itemId = $('#itemId').val();
			item.sku = $('#sku').val();
			item.itemName = $('#itemName').val();
			item.itemId = $('#itemIdTemp').val();
			item.hsnCode = $('#hsnCode').val();
			item.unit = $('#unit').val();
			
			item.unitName = $("#unit option:selected").text();
			item.quantity = $('#quantity').val();
			item.unitPrice = $('#unitPrice').val();
			item.discount = $('#discount').val();
			item.gstRate = $('#gstRate').val();
			item.lineTotal = $('#lineTotal').val();
			
			item.description = $('#description').val();
			item.challan_no = $('#challan_no').val();
			item.challan_dt = $('#challan_dt').val();
			item.varifyStatus = $('#varifyStatus').val();
			item.qaTestStatus = $('#qaTestStatus').val();
			item.description = $('#description').val();
			item.modelSize = $('#modelSize').val();
			
			if(pId=="" || pId=="WithOutPo"){
				//item.pendingQuantity =$('#pendingQuantity').val() ;
				item.pendingQuantity =0 ;
				item.receivingQuantity = $('#quantity').val();
				item.receivedQuantity = 0;
			}else{
				item.pendingQuantity = $('#pendingQuantity').val();
				item.receivingQuantity = $('#receivingQuantity').val();
				item.receivedQuantity = $('#receivedQuantity').val();
			}
			var taxType1= $("#taxType").val();
			if (taxType1 == 'true') {
				item.itemCgst = (item.lineTotal*item.gstRate)/200;
				item.itemSgst = (item.lineTotal*item.gstRate)/200;
				item.itemIgst=0;
				item.taxableAmt=parseFloat(item.lineTotal)+item.itemCgst+item.itemSgst;
			}else{
				item.itemCgst = 0;
				item.itemSgst = 0;
				item.itemIgst = (item.lineTotal*item.gstRate)/100;
				item.taxableAmt=parseFloat(item.lineTotal)+item.itemIgst;
			}
			var quot = [];
			if (editProduct) {
				var rowNode = itemOptions.api.getRowNode(editProduct);
				rowNode.setData(item);
			} else {
				itemOptions.api.forEachNode(function(rowNode, index) {
					quot.push(rowNode.data);
				});
				quot.push(item)
				itemOptions.api.setRowData(quot);
			}
			priceCalculation()
			closeNav();
			$("#sku").val('');
			$("#itemId").val('');
			$("#itemName").val('');
			$("#quantity").val('');
			$("#unitPrice").val('');
			$("#discount").val('');
			$("#gstRate").val('');
			$("#lineTotal").val('');
			$("#hsnCode").val('');
			$("#unit").val('');
			$("#modelSize").val('');
			$("#editProduct").val(null);
		}
	}
	
function priceCalculation() {
	var grid = [];
	itemOptions.api.forEachNode(function(rowNode, index) {

		grid.push(rowNode.data);
	});
	var len = grid.length;
	var val = 0;
	var val2 = 0;
	var val3 = 0;
	var val4 = 0;

	var taxType1 = $("#taxType").val();
	for (i = 0; i < len; i++) {
		if (taxType1 == 'true') {
			val2 = parseFloat(val2) + parseFloat(grid[i].itemSgst);
			val3 = parseFloat(val3) + parseFloat(grid[i].itemCgst);
			
		} else {
			//val2 = parseFloat(val2) + parseFloat(grid[i].itemSgst);
			//val3 = parseFloat(val3) + parseFloat(grid[i].itemCgst);
			val4 = parseFloat(val4) + parseFloat(grid[i].itemIgst);

		}

		val = parseFloat(val) + parseFloat(grid[i].lineTotal);
	}
	//tcsCalculation();
	//calculateAdjustment();

	var adj = 0.0;
	var tcsval = 0.0;
	adj = $("#adjustment").val();

	var tcs = $('#tcsName').val();
	if (tcs != '') {
		var tcsval = tcs.replace(/[^0-9]/g, '');
	}
	//var tcsval = 0.0;
	var tcsAmount = 0.0;
	tcsAmount = val * parseFloat(tcsval) / 100;
	var tcsamount1=Math.round(tcsAmount);
	$("#subTotal").val(val.toFixed(2));
	$("#qIGST").val(val4.toFixed(2));
	$("#qCGST").val(val3.toFixed(2));
	$("#qSGST").val(val2.toFixed(2));
	var gTotal = 0.0;

	gTotal = parseFloat(val) + parseFloat(val2) + parseFloat(val3)
			+ parseFloat(val4) + parseFloat(adj) + parseFloat(tcsAmount);
	var gTotal1= Math.round(gTotal);
	var adjustment=(gTotal1-gTotal);
	if(adjustment>0){
		$("#adjustment").val(adjustment.toFixed(2))	
	}
	else{
		var adjust=Math.abs(adjustment);
		$("#adjustment").val(adjust.toFixed(2))	
	}
	$("#grandTotal").val(gTotal1.toFixed(2))
	$("#tcsAmount").val(tcsamount1.toFixed(2))

}
	/*
	 * taxtype fn
	 */
		function hideShowS() {
			var taxType1 = $("#taxType").val();
			if (taxType1 == 'true') {
				$('#igstTR').hide();
				$('#cgstTR').show();
				$('#sgstTR').show();
			} else {
				$('#igstTR').show();
				$('#cgstTR').hide();
				$('#sgstTR').hide();
			}
		}
	
	/* //Quotation  table add */

	function save() {
		
			var datas = [];
			var imageValid = true;
			var uploadList = [];
			$("#doctbodyData > tr").each(
					function() {
						var uFile = $(this).find(".document")[0].files[0];
						var fileName = $(this).find(".document").val();
						var data = [];
						var x = [];
						if (fileName != '' && fileName != 'undefined'
								&& fileName != null) {
							var lastIndex = fileName.lastIndexOf("\\");
							if (lastIndex >= 0) {
								fileName = fileName.substring(lastIndex + 1);
							}
							var reader = new FileReader();
							reader.readAsDataURL(uFile);

							reader.onload = function() {
								data = reader.result.split(",");
								x.push(data[1]);
							};
						} else {
							if ($("#invoiceId").val()) {
								fileName = $(this).find(".uploadHidCls").val();
							} else {
								x = [];
							}

						}
						uploadData = {};
						uploadData['varificationId'] = $("#varificationId").val();
						uploadData['documnentName'] = $(this)
								.find(".docNoclss").val();
						uploadData['documentFile'] = x;
						uploadData['fileName'] = fileName;
						uploadData['imageNameEdit'] = $(this).find(
								".uploadHidCls").val();
					/* 	if($(this).find(".docNoclss").val()!="" && $(this).find(".docNoclss").val()!='null' && fileName!="" && fileName!="null"){
							uploadList.push(uploadData);
							console.log("DOCC",uploadData)
							
						} */
						uploadList.push(uploadData);
						console.log("DOCC",uploadData)

					});
			if (validFormData()) {
			if (itemOptions.api.getDisplayedRowCount() > 0) {
				var count = 0;
				itemOptions.api.forEachNode(function(rowNode, indrx) {
					var obj = rowNode.data;
					var challanNo = rowNode.data.challan_no;
		 
		/* 			if (challanNo == "undefined" || challanNo ==null || challanNo ==""){
						count++;    
					}else{ */
					
	          		obj.invoiceId = $("#invoiceheadId").html();
					obj.vendorId = $("#vendorId").val();
					obj.vendorName = $("#vendorName").val();
					obj.qutValidDate = $("#qutValidDate").val();
					obj.paymentTermId = $("#paymentTermId").val();
					var pId = $("#poId").val();
					if(pId!=""){
						obj.poId= $("#poId").val();
					}
					if(pId==""){
						obj.poId= "WithOutPo";
					}
					obj.invoiceNo = $("#invoiceNo").val();
					obj.adjustment = $("#adjustment").val();
					obj.tcs = $("#tcsId").val();
					obj.tcsAmount = $("#tcsAmount").val();
					obj.eWayBillingNo = $("#eWayBillingNo").val();
					obj.modeTermsPayment = $("#modeTermsPayment").val();
					obj.transporterId = $("#transporterId").val();
					obj.transporterName = $("#transporterName").val();
					obj.subTotal = $("#subTotal").val();
					obj.grandTotal = $("#grandTotal").val();
					obj.qIGST = $('#qIGST').val();
					obj.qCGST = $('#qCGST').val();
					obj.qSGST = $('#qSGST').val();
					obj.reference = $('#reference').val();
					obj.carrierId = $('#carrierId').val();
					obj.vehicleNo = $('#vehicleNo').val();
					obj.driverName = $('#driverName').val();
					obj.driverMobile = $('#driverMobile').val();
					obj.shippingDetails= $("input[name='checkbox']:checked").val();
					obj.orgDetails = $('#organizationName').val();
					obj.custDetails = $('#customerName').val();
					obj.exptdeliveryDate = $('#exptdeliveryDate').val();
					obj.qutDescription = $('#qutDescription').val();
					obj.terms = $('#terms').val();
					obj.taxType = $('#taxType').val();
					obj.gatePass = $('#gatePassNo').val();
					obj.receivingDocType = $('#receivingDocType').val();
					obj.challanNum = $('#challanNum').val();
					obj.challanDate = $('#challanDate').val();
					obj.invoiceDate = $('#invoiceDate').val();
					obj.project = $("#project").val();
					obj.projectName = $("#project").find('option:selected').text();
					obj.documentList = uploadList;
					console.log('Object', obj);
					datas.push(obj);
				});
				 console.log('datas', datas);
				 saveAllInvoice(datas);
/* 				if(count>0){
					
	          		$("#messageParagraph").text("Add Challan Details First.");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					}
				 else {
					 console.log('datas', datas);
					 saveAllInvoice(datas);
				   }  */
			}else {
				$("#messageParagraph").text("Please Add Item Details");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
				return false;
			}
		}
		
	}
	//saveTableDataSale()
	function saveAllInvoice(datas) {
		//window.location.reload();
		
		$('.loader').show();
		$("body").addClass("overlay");
		
		$
				.ajax({
					type : "POST",
					url : "manage-invoice-add",
					contentType : "application/json",
					data : JSON.stringify(datas),
					success : function(response) {
						if (response.message == "Success") {
							$('.loader').hide();
							$("body").removeClass("overlay");
							
							$("#messageParagraph").text(
									"Data Saved Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
							
							$("#total").show();
							$("#totalCandidate").show();
							$("#btndiv").show();

							$("#reqTable").show();
							$('#add').show();
							$('#delete').show();
							$('#approveGrnReceipt').show();
							$('#qaRequest').show();
							$('#dwnld').show();
							$("#addData").hide();
							$("#myGrid").show();

							$("#searchRowDiv").show();
							$("#reqTable").show();
							Cancel();

						}

					},
					error : function(datas) {
						console.log(datas)
					}
				})

	}

	function validFormData() {
		var allValid = true;

		if (!validationUpdated("Vendor Name Required", 'vendorName'))
			allValid = false;
	if (!validationUpdated("Receiving Document Type Required",
				'receivingDocType')) 
			allValid = false; 
	var dty=$('#receivingDocType').val();
	if(dty=="Delivery Challan" || dty=="Tax Invoice"){
		if (!validationUpdated("Challan/Invoice No Required",
		'challanNum')) 
			allValid = false; 
		if (!validationUpdated("Challan/Invoice Date Required",
		'challanDate')) 
			allValid = false; 
	}else{
		
	}
		/* if (!validationUpdated("Challan Date Required", 'exptdeliveryDate'))
			allValid = false;
		if (!validationUpdated("Challan No Required",
				'invoiceNo'))
			allValid = false; */

		return allValid;
	}

	function validProductData() {
		var item = null;
		itemOptions.api.forEachNode(function(rowNode, index) {
			item = item + rowNode.data;
		});
		if (item) {
			return true;
		} else {
			$("#messageParagraph").text("Please Add Item Details");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			return false;
		}
	}

	/* 
	Edit Quotation
	 */
	function editProduct(slNo) {
		
		var quotationId = $("#quotationhedId").html();
		var rowNode = itemOptions.api.getRowNode(slNo);

		
		openNav();
		$("#editProduct").val(slNo);
		$("#sku").val(rowNode.data.sku);
		$("#itemId").val(rowNode.data.itemId);
		$("#itemName").val(rowNode.data.itemName);
		$("#hsnCode").val(rowNode.data.hsnCode);
		$("#unit").val(rowNode.data.unit);
		$("#quantity").val(rowNode.data.quantity);
		$("#unitPrice").val(rowNode.data.unitPrice);
		$("#gstRate").val(rowNode.data.gstRate);
		$("#discount").val(rowNode.data.discount);
		$("#lineTotal").val(rowNode.data.lineTotal);
		$("#itemIgst").val(rowNode.data.itemIgst);
		$("#itemCgst").val(rowNode.data.itemCgst);
		$("#itemSgst").val(rowNode.data.itemSgst);
		$("#modelSize").val(rowNode.data.modelSize);
		
	}

var approveSts1 = "";
	function editInvoice(invid,po,st) {
		
		Cancel();
		//var data = id.split(",");
		var invoiceId=invid;
		var POid=po;
		var appoveStatus = st;
		approveSts1 = appoveStatus;
		$("approveStatus").val(appoveStatus);
		$('#delete1').attr("disabled", true);
		$('#pVarification').attr("disabled", true);
		$('#addMoreDetails').attr("disabled", true);
		$('#newItem').attr("disabled", false);
		$("#searchRowDiv").hide();
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#addData").show();
		$("#add").hide();
		$("#addNewAdd1").hide();
        $("#addNewAdd").hide();
        $("#qaRequest").hide();
		$("#Cancel").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").show();
		$("#documentDetails").show();
		$('#tcsDiv').hide();
		$("#challanNo").show();
		$("#challanDt").show();
		if(appoveStatus=='Approved'){
			$("#save").hide();
			$('#pVarification').attr("disabled", true);
			$("#delete1").hide();
			$("#addMoreDetails").hide();
			$("#newItem").hide();
		}
		else{
	if(POid=="null" || POid=="" || POid=="WithOutPo"){
			$("#save").show();
			$('#pVarification').hide();
			$("#delete1").show();
			$('#delete1').attr("disabled", true);
			$("#addMoreDetails").attr("disabled", true);
			$("#newItem").show();
			
		}else{
			$("#save").show();
			$('#pVarification').hide();
			$("#delete1").hide();
			$('#delete1').attr("disabled", true);
			$("#addMoreDetails").attr("disabled", true);
			$("#newItem").hide();
		}
		} 
		$('.loader').show();
		agGrid.simpleHttpRequest({
					url : 'manage-invoice-edit-new?id=' + invoiceId
				}).then(
						function(data) {
							
							getPoList(data[0].vendorId,'edit',data[0].poId);
							
							$("#challanNum").val(data[0].challanNum);
					        $("#challanDate").val(data[0].challanDate);
					        
							$("#invoiceheadId").html(data[0].invoiceId);
						
							$("#vendorId").val(data[0].vendorId);
							getVendorDtls(data[0].vendorId, 'edit');
			                getAddressDetails(data[0].vendorId);
							$("#vendorName").val(data[0].vendorName);
							$("#invoiceId").val(data[0].invoiceId);
							$("#poId").val(data[0].poId);
							$("#qutValidDate").val(data[0].qutValidDate);
							$("#paymentTermId").val(data[0].paymentTermId);
							$("#invoiceNo").val(data[0].invoiceNo);
							$("#invoiceReferenceId").val(data[0].invoiceId);
							$("#invoiceDate").val(data[0].updatedOn);
							$("#reference").val(data[0].reference);
							$("#carrierId").val(data[0].carrierId);
							$("#vehicleNo").val(data[0].vehicleNo);
							$("#driverName").val(data[0].driverName);
							$("#project").val(data[0].project);
							$("#driverMobile").val(data[0].driverMobile);
							$("#eWayBillingNo").val(data[0].eWayBillingNo);
							$("#modeTermsPayment").val(data[0].modeTermsPayment);
							
							if(data[0].shippingDetails==1){
								$("#custDetails").prop('checked', true);
								openModal(1);
							}else{
								$("#orgDetails").prop('checked', true);
								openModal(0);
							}
							$("#organizationName").val(data[0].orgDetails);
							$("#customerName").val(data[0].custDetails);
							$("#exptdeliveryDate").val(data[0].exptdeliveryDate);
							$("#qutDescription").val(data[0].qutDescription);
					        $("#terms").val(data[0].terms);
					        $("#transporterId").val(data[0].transporterId);
					        $("#transporterName").val(data[0].transporterName);
					        $("#receivingDocType").val(data[0].receivingDocType);
					        
					         var adjustment=data[0].adjustment;
					         var subTotal=data[0].subTotal;
							$("#adjustment").val(adjustment.toFixed(2));
							$("#tcsName").val(data[0].tcs);
							$("#tcsId").val(data[0].tcsId);
							$("#tcsAmount").val(data[0].tcsAmount);
							$("#taxType").val(data[0].taxType);
							hideShowS();
							//receivingDocType();
							$("#qIGST").val(data[0].qIGST);
							
							$("#qSGST").val(data[0].qSGST);
							$("#qCGST").val(data[0].qCGST);
							$("#subTotal").val(subTotal.toFixed(2));
							$("#grandTotal").val(data[0].grandTotal);
							
							itemOptions.api.setRowData();
							
		                    var varifyStatus1=data[0].varifyStatus;
							if (appoveStatus=="Approved") {
								itemOptions.columnApi.setColumnVisible('varifyStatus',true);
							}else{
								itemOptions.columnApi.setColumnVisible('varifyStatus',false );
							}
							itemOptions.api.setRowData(data);
							$("#doctbodyData").empty();
							if (data[0].documentList != null
									&& data[0].documentList != "") {

								for (var i = 0; i < data[0].documentList.length; i++) {
									


									var tbl = '<tr>'
											+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
											+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
											+ '<td><div class="form-group"> <input type="text" value="'+data[0].documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
											+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
											+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
											+ i
											+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
											+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+data[0].documentList[i].fileName+'" class="uploadHidCls">'
											+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
											+ data[0].documentList[i].action
											+ '</div></div>'
											+ '<div id="imageName_'+i+'" class="imageName">'
											+ data[0].documentList[i].fileName
											+ '</div>'
											+ '<input type="hidden" id="editId_'+i+'" value="'+ data[0].documentList[i].vendorRfqId+'">'
											+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
											+ '</tr>';

									$("#doctbodyData").append(tbl);
								}
							} else {
								var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
										+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
										+ '</tr>';
								$("#doctbodyData").append(tbl);
							}
							$('.loader').hide();
						});
	}

	function getEditTaxType(search) {
		$('.loader').show();
		$.ajax({
			type : "POST",
			url : "manage-invoice-get-vendor-list",
			dataType : 'json',
			contentType : 'application/json',
			data : search,
			success : function(response) {
				if (response.message == "success") {
					
					$("#taxType").val(response.body[0].taxType);
					$('.loader').hide();
				}
			},
			error : function(data) {
				console.log(data);
				$('.loader').hide();
			}
		})
	}

	/* 
	Delete quotation
	 */
	function deleteGRN() {

		$('#deleteQuot').modal('show');
	}
	function deleteItem() {

		$('#deleteProduct').modal('show');
	}

	function cancelModalBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteProduct').modal('hide');
		$('#deleteQuot').modal('hide');
	}

	function cancelModalProductBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteProduct').modal('hide');
	}
	

var invoiceId = "";
	function rowSelect() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});
		var selectedNodes = gridOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 var appoveStatus = selectedData.map(node => node.appoveStatus);
		 var qaStatus= selectedData.map(node => node.qaStatus);
		 var poId= selectedData.map(node => node.poId);
		 invoiceId= selectedData.map(node => node.invoiceId);
		if (rowCount > 0) {
			$('#add').attr("disabled", true);
			if(appoveStatus=='Approved'){
				$('#delete').attr("disabled", true);
				$('#approveGrnReceipt').attr("disabled", true);
				if(poId=="" || poId=="WithOutPo"){
				if(qaStatus=='Requested'){
					$('#qaRequest').attr("disabled", true);
				}else{
					$('#qaRequest').attr("disabled", true);
				}}else{
				if(qaStatus=='Requested'){
					$('#qaRequest').attr("disabled", true);
				}else{
					$('#qaRequest').attr("disabled", false);
				}
				}
			}else{
				$('#delete').attr("disabled", false);
				$('#approveGrnReceipt').attr("disabled", false);
				$('#qaRequest').attr("disabled", true);
			}
		} else {
			$('#add').attr("disabled", false);
			$('#delete').attr("disabled", true);
			$('#approveGrnReceipt').attr("disabled", true);
			$('#qaRequest').attr("disabled", true);
		}
	}
	function YesPV(){
		$('#pVarification').attr("disabled", false);
	}
	function NOPV(){
		$('#pVarification').attr("disabled", true);
		itemOptions.api.deselectAll();
	}
	function closeModal1() {
		$("#myModal").modal('hide');
	}
 	 function rowSelectItem() {
 		 var approve = approveSts1;
		var selectedRows = itemOptions.api.getSelectedRows();
		var invoiceId=$("#invoiceheadId").text();
		var rowCount = 0;
		var poId= $("#poId").val();
		if(approve == 'Approved'){
			$('#delete1').attr("disabled", true);
			$('#addMoreDetails').attr("disabled", true);
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
			var qaTestStatus = selectedRow.qaTestStatus;
			var varifyStatus3 = selectedRow.varifyStatus;
				
			
								if(qaTestStatus == "" || qaTestStatus == null || qaTestStatus == 'Pending' ){
									  if(poId=="WithOutPo"){
										  $('#pVarification').attr("disabled", false); 
									  }else{
											$('#viewPVMsg').text("");
											$('#viewPV').modal('toggle');
											$('#viewPVMsg').text("Test Result Not Received !!.Do You Want To Physical Verification Without QA Test Result?");
											$('#pVarification').attr("disabled", true);
											//itemOptions.api.deselectAll();
									  }
									}else{
										  if(varifyStatus3 == "Verified" && approve == 'Approved'){
												$("#messageParagraph").text("Already Requested For Physical Verification.");
												$("#msgOkModal").removeClass("btn3");
												$("#msgOkModal").addClass("btn1");
												$("#msgModal").modal('show');
												$('#pVarification').attr("disabled", true);
												itemOptions.api.deselectAll(selectedRow);
											}else{
											} 
									}
 
		});
		}else{
			
			selectedRows.forEach(function(selectedRow, index) {
				rowCount = rowCount + 1;
			});
			 var selectedNodes = itemOptions.api.getSelectedNodes();
			 var selectedData = selectedNodes.map(node => node.data);
			 var receivedQuantity= selectedData.map(node => node.receivedQuantity);
			 
			 var varifyStatus= selectedData.map(node => node.varifyStatus);
			 var qaTestStatus= selectedData.map(node => node.qaTestStatus);
 
			 var receivedQuantity1=receivedQuantity[0];
			 var receivedQuantity2=receivedQuantity[1];
			 
			 var varifyStatus1=varifyStatus[0]
			 var varifyStatus2=varifyStatus[1]
			if (rowCount > 0) {
				if(poId=="WithOutPo" || poId=="null" || poId==""){
					$('#delete1').attr("disabled", false);
					$('#newItem').attr("disabled", true);
					$('#addMoreDetails').attr("disabled", true);
				}else{
					$('#delete1').attr("disabled", true);
					$('#newItem').attr("disabled", false);
					$('#addMoreDetails').attr("disabled", false);
				}
				  if(receivedQuantity1 >0 || receivedQuantity2 >0){
					  if(varifyStatus=="Not-Verified"){
						  $('#pVarification').attr("disabled", false);  
					  }
				}
				else{
					//$('#pVarification').attr("disabled", true);
				} 
				  if(varifyStatus=="Verified"){
					  $('#pVarification').attr("disabled", true);
				  }
			}else {
				$('#newItem').attr("disabled", false);
				$('#delete1').attr("disabled", true);
				$('#pVarification').attr("disabled", true);
				$('#addMoreDetails').attr("disabled", true);
			}
		     if(rowCount > 1){
				$('#addMoreDetails').attr("disabled", true);
				 if(receivedQuantity1 >0 || receivedQuantity2 >0){					
						$('#pVarification').attr("disabled", false);
					}
					else{
						$('#pVarification').attr("disabled", true);
					} 
			}
		}	
	
	}  

	function onQuickFilterChanged() {
		$(".ti-search srchicon").hide();
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}
	function onQuickFilterChanged12() {
		$(".ti-search srchicon").hide();
		gridOptions12.api
				.setQuickFilter(document.getElementById('quickFilter12').value);
	}
	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
	function cancelBar12() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";
		if ($('#quickFilter12').val() == null || $('#quickFilter12').val() == "") {
			id.style.display = "none";
		}
	}
	// delete Quotation

	function deleteOnclick() {
		
		$('.loader').show();
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.invoiceId;
		});
		if (selectedRowsString) {
			var item = {};
			item.poId = selectedRowsString;

			$.ajax({
				type : "POST",
				url : "manage-invoice-delete",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {

					$('#deleteQuot').modal('hide');
					$('#salesOrder').attr("disabled", true);
					$('#delete').attr("disabled", true);
					$('#add').attr("disabled", false);
					$('#dwnld').attr("disabled", false);
					$('#approveGrnReceipt').attr("disabled", true);
					if (response.message == "Success") {
						agGrid.simpleHttpRequest({
							url : 'manage-invoice-through-ajax'
						}).then(function(data) {
							gridOptions.api.setRowData(data);
							
						});

					} else {

					}
					$('.loader').hide();
				},
				error : function(data) {
					console.log(data)
					$('.loader').hide();
				}
			})
		}

	}
	function deleteProductOnclick() {
		var selectedRows = itemOptions.api.getSelectedRows();
		itemOptions.api.applyTransaction({
			remove : selectedRows

		});
		cancelModalProductBtn();
		//DELETE GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
		var sum = $("#subTotal").val();
		var gstRate = $("#gstRate").val();
		var qCGST = $("#qCGST").val();
		var qSGST = $("#qSGST").val();

		var qIGST = $("#qIGST").val();
		var grandTotal = $("#grandTotal").val();
		var itemIgst = $("#itemIgst").val();
		var itemCgst = $("#itemCgst").val();
		var itemSgst = $("#itemSgst").val();
		var len = selectedRows.length;
		for (var i = 0; i < len; i++) {

			sum = sum - selectedRows[i].lineTotal;
			var taxType = $("#taxType").val()
			if (taxType == "true") {

				selectedRows[i].itemIgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 100;
				qIGST = qIGST - selectedRows[i].itemIgst;
				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qIGST;
				var gTotal1=Math.round(grandTotal);
				var adjustment=(gTotal1-grandTotal);
				
			} else {

				selectedRows[i].itemIgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 100;
				qIGST = qIGST - selectedRows[i].itemIgst;
				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qIGST;
				var gTotal1=Math.round(grandTotal);
				var adjustment=(gTotal1-grandTotal);


			}

		}

		$("#itemIgst").val(itemIgst);
		$("#itemCgst").val(itemCgst);
		$("#itemSgst").val(itemSgst);
		$("#subTotal").val(sum);
		$("#qIGST").val(qIGST.toFixed(2));
		$("#qCGST").val(qCGST);
		$("#qSGST").val(qSGST);
		$("#grandTotal").val(gTotal1.toFixed(2))
		if(adjustment>0){
			$("#adjustment").val(adjustment.toFixed(2))	
		}
		else{
			var adjust=Math.abs(adjustment);
			$("#adjustment").val(adjust.toFixed(2))	
		}
		tcsCalculation();
		//calculateAdjustment();
	}
	/* Vendor AutoSearch */

	function getVendorList() {
		$('.loader').show();
		var search = $("#vendorName").val();
		$("#addre").hide();
		if (search) {

			$
					.ajax({
						type : "POST",
						url : "manage-invoice-get-vendor-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:12px;"  class="autocompletedata cp" onClick="selectAutocompleteValue1(\''
												+ response.body[i].vendorId
												+ '\',\''
												+ response.body[i].vendorName
												+ '\',\''
												+ response.body[i].custGSTNo
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].vendorName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;background-color:#082958;color:#fff;" onclick="AddVendor();"><a class="addCust" href="#">Add New Vendor</a>'
											+ '</li>';
									content += '</ul>';
									
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;      background-color: #0909e4;" onClick="selectAutocompleteValue()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddVendor();"><a class="addCust" href="#">Add New Vendor</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);
								}
								$('.loader').hide();
							}
						},
						error : function(data) {
							console.log(data);
							$('.loader').hide();
						}
					})
		} else {
			$("#suggesstion-box1_").hide();
		}

	}

	function selectAutocompleteValue1(vendorId, vendorName, custGSTNo, taxType) {
		if (vendorId) {
			$("#vendorId").val(vendorId);
			$("#vendorName").val(vendorName);
			$("#custGSTNo").val(custGSTNo);
			$("#taxType").val(taxType);
			$("#search").val(vendorName);
			$("#search").attr('data-procat', vendorId);
			$("#suggesstion-box1_").hide();
			$("#addre").show();
			hideShowS();
			 getAddressDetails(vendorId)
			  getPoList(vendorId,"add","");
		} else {

			$("#vendorId").val("");

			$("#vendorName").val("");
			$("#custGSTNo").val("");
			$("#taxType").val("");
			$("#search").val("");
			$("#search").attr('data-procat', "");
			$("#suggesstion-box1_").hide();

		}
	}
	function selectAutocompleteValue() {

		$("#vendorId").val("");
		$("#vendorName").val("");
		$("#custGSTNo").val("");
		$("#taxType").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box1_").hide();

	}
	function addnewAddress() {
		$('#addAddressModel').modal('show');
		$("#billingInfo").hide();
		$("#countryb").val('');
		$("#statesb").val('');
		$("#cityb").val('');
		$("#street1b").val('');
		$("#street2b").val('');
		$("#zipCodeb").val('');
		$("#phoneb").val('');
		$("#faxb").val('');
		$('#addAddressModel').modal('show');
		$("#billingInfo").show();

	}
	function addnewAddress1() {
		$("#country1s").val('');
		$("#states1s").val('');
		$("#city1s").val('');
		$("#street11s").val('');
		$("#street21s").val('');
		$("#zipCode1s").val('');
		$("#phone1s").val('');
		$("#fax1s").val('');
		$('#addAddressModel1').modal('show');
		$("#shippingInfo").show();

	}

		function cancelBtn() {
			$('#addAddressModel').modal('hide');
			$("#billingInfo").hide();
			}
		function cancelBtn23() {
			$('#addAddressModel1').modal('hide');
			$("#shippingInfo").hide();
			}
	
	function getVendorDtls(vendorId,id1){
		
		$.ajax({type : "GET",
			url : "manage-invoice-get-vendor_state_data?id="+ vendorId+"&type="+id1,
					success : function(response) {
						if (response.message == "success") {
						
						
						var stateId=response.body[0].name;
						if(stateId=="st019"){
							
							$("#sgstTR").show();
							$("#cgstTR").show();
							$("#igstTR").hide();
							$("#taxType").val("false")
						}else{
							
							$("#sgstTR").hide();
							$("#cgstTR").hide();
							$("#igstTR").show();
							$("#taxType").val("true")
						}
						}
					},
					error : function(e) { 
					}
				}); 
	} 

	/* Item AutoSearch */

function getItemQutotationList() {
	$('.loader').show();
		var search = $("#itemName").val();
		if (search) {
			$
					.ajax({
						type : "POST",
						url : "manage-invoice-order-get-item-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								if (response.body.length != 0) {
									$("#itemId").val("");
									$("#gstRate").val("");
									$("#sku").val("");
									$("#brandName").val("");
									$("#brandId").val("");
									$("#hsnCode").val("");
									$("#unit").val("");
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									for (var i = 0; i < response.body.length; i++) {
							content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValueItem1(\''
												+ response.body[i].sku
												+ '\',\''
												+ response.body[i].productId
												+ '\',\''
												+ window
														.btoa(response.body[i].productName)
												+ '\',\''
												+ response.body[i].brandId
												+ '\',\''
												+ window
														.btoa(response.body[i].brandName)
												+ '\',\''
												+ window
														.btoa(response.body[i].hsnCode)
												+ '\',\''
												+ window
														.btoa(response.body[i].unit)
												+ '\',\''
												
												+ window
														.btoa(response.body[i].gstRate)
												 + '\',\''
												  + window.btoa(response.body[i].model)
											   
												+ '\')">'
												/* + response.body[i].sku
												+ " - " */
												+ response.body[i].productName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
										+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);

								}
								else {
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px;font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"li onClick="selectAutocompleteValueItem()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
												+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);
								}
								$('.loader').hide();
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#unit").val("");
			$("#suggesstion-box_").hide();
		}
	}

function selectAutocompleteValueItem1(sku, productId, productName, brandId,
		brandName, hsnCode, unit, gstRate,model) {
	if (sku) {
		$("#sku").val(sku);
		$("#itemName").val(window.atob(productName));
		$("#itemId").val(productId);
		$("#itemIdTemp").val(productId);
		$("#brandName").val(window.atob(brandName));
		$("#brandId").val(brandId);
		$("#sku").val(sku);
		$("#skuTemp").val(sku);
		$("#hsnCode").val(window.atob(hsnCode));
		$("#model").val(window.atob(model));
		$("#unit").val(window.atob(unit));
		$("#gstRate").val(window.atob(gstRate));
		$("#itemName").attr('data-procat', itemId);
		$("#suggesstion-box_").hide();
		hideShowS();
	} else {
		$("#sku").val("");
		$("#itemId").val("");
		$("#itemName").val("");
		$("#gstRate").val("");
		$("#sku").val("");
		$("#brandName").val("");
		$("#brandId").val("");
		$("#hsnCode").val("");
		$("#model").val("");
		$("#unit").val("");
		$("#itemName").attr('data-procat', "");
		$("#suggesstion-box_").hide();

	}
}
function selectAutocompleteValueItem() {

	$("#itemId").val("");

	$("#gstRate").val("");
	$("#sku").val("");
	$("#itemName").val("");
	$("#itemName").attr('data-procat', "");
	$("#suggesstion-box_").hide();

}

	function selectCheckBox(id, lvl) {
		
		$("#select_product").empty();
		getProductByCategory();

		

		if (lvl == 'L1') {
			var textDesc = $("#lbl_" + id).text();
			$("#catDesc").text(textDesc);
		} else {
			var res = lvl.substring(1, 1000000);

			var lastText = $("#lbl_" + id).text();
			var textDesc = "";
			for (i = res; i > 1; i--) {
				var pUL = $("#lbl_" + id).parents("ul").attr("id");
				pUL = pUL.substring(3, 10000000000000);
				var newText = $("#lbl_" + pUL).text();
				textDesc = newText + " > " + textDesc;
				id = pUL;
			}
			textDesc = textDesc + lastText;
			$("#catDesc").text(textDesc);
		}
	}

	function selectProductVal() {
		$("#itemName").val($("#itemNameTemp").val());
		$("#item").val($("#itemIdTemp").val());
		$("#brandName").val($("#brandNameTemp").val());
		$("#brandId").val($("#brandIdTemp").val());
		$("#category").val($("#prodCatIdTemp").val());
		$("#categoryName").val($("#prodCatNameTemp").val());
		$("#sku").val($("#skuTemp").val());
		$("#hsnCode").val($("#hsnCodeTemp").val());
		$("#unit").val($("#unitTemp").val());
		$("#search").val($("#itemNameTemp").val())
		$("#select_product").html('');
		$('#myModal').modal('hide');
	}


	function getProductByCategory() {
		$('.loader').show();
		$("#select_product").empty();
		var valor = "";
		$('input.pc1-box[type=checkbox]').each(function() {
			if (this.checked)
				valor = valor + $(this).val() + ",";
		});
		if (valor) {
			$("#select_product").empty();
			$
					.ajax({
						type : "POST",
						url : "manage-invoice-item-product-by-cat",
						dataType : 'json',
						contentType : 'application/json',
						data : valor,
						success : function(response) {
							if (response.message == "success") {
								console.log(response.body)
								$("#select_product").empty();
								var content = '';
								for (var i = 0; i < response.body.length; i++) {

									content += '<div class="autocompletedata cp product-item" id="'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '" onClick=selectActive("'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '","'
											+ response.body[i].sku
											+ '","'
											+ response.body[i].productId
											+ '","'
											+ window
													.btoa(response.body[i].productName)
											+ '","'
											+ window
													.btoa(response.body[i].brandId)
											+ '","'
											+ window
													.btoa(response.body[i].brandName)
											+ '","'
											+ window
													.btoa(response.body[i].productCatId)
											+ '","'
											+ window
													.btoa(response.body[i].productCatName)
											+ '","'
											+ window
													.btoa(response.body[i].hsnCode)
											+ '","'
											+ window
													.btoa(response.body[i].unit)
											+ '","'
											+ window
													.btoa(response.body[i].gstRate)
											+ '","'
											+ window.btoa(response.body[i].model)
											+ '")>'
											/* + response.body[i].sku
											+ " - "
											+ response.body[i].brandName
											+ " - " */
											+ response.body[i].productName
											+ '</div>';
								}
								content += '</ul>';
								$("#select_product").show();
								$("#select_product").append(content);

								var itemId = $("#itemId").val();
								var skuId = $("#sku").html();

								if (itemId) {
									$("#" + itemId + "_" + skuId).addClass(
											'productActive');
								}
								$('.loader').hide();
							}
						},
						error : function(data) {
							$('.loader').hide();
						}
					})
		} else {
			$("#itemName").val(null);
			$("#hsnCode").val(null);
			$("#unit").val(null);
			$("#itemId").val(null);
			$("#select_product").empty();
		}
	}

	function selectActive(id, sku, productId, productName, brandId, brandName,
			prodCatId, prodCatName, hsnCode, unit,gstRate) {
		$('.autocompletedata ').removeClass('productActive');
		$("#" + id).addClass('productActive');
		$("#itemNameTemp").val(window.atob(productName));
		$("#itemIdTemp").val(productId);
		$("#brandNameTemp").val(window.atob(brandName));
		$("#brandIdTemp").val(window.atob(brandId));
		$("#skuTemp").val(sku);
		$("#sku").val(sku);
		$("#gstRateTemp").val(window.atob(gstRate));
		$("#prodCatIdTemp").val(window.atob(prodCatId));
		$("#prodCatNameTemp").val(window.atob(prodCatName));
		$("#searchTemp").val(window.atob(productName))
		$("#hsnCodeTemp").val(window.atob(hsnCode));
		$("#unitTemp").val(window.atob(unit));
		
	}

	//calculate Amount=(quantity*unitPrice)-Discount
	var totalLine;
	function calculateLineTotal() {
		var price = $("#unitPrice").val();
		var quantity = $("#quantity").val();
		var discount = $("#discount").val();
		var discountAmount = $("#discountAmount").val();

		if (discountAmount == '1') {
			if (price && quantity) {
				var mul = price * quantity;

				if (discount > mul) {

					$("#discount").val("0");
					totalLine = mul - discount;
					$("#lineTotal").val((mul).toFixed(2));
				} else {
					totalLine = mul - discount;
					$("#lineTotal").val((totalLine).toFixed(2));
				}
			} else {
				var mul = 0;
				$("#lineTotal").val((mul).toFixed(2));
			}
		} else {
			if (price && quantity) {
				var mul = price * quantity;
				if (discount > mul) {
					$("#discount").val("0");
					totalLine1 = (mul / 100) * discount;
					totalLine = mul - totalLine1;
					$("#lineTotal").val((mul).toFixed(2));
				} else {
					totalLine1 = (mul / 100) * discount;
					totalLine = mul - totalLine1;
					$("#lineTotal").val((totalLine).toFixed(2));
				}
			} else {
				var mul = 0;
				$("#lineTotal").val((mul).toFixed(2));
			}
		}
	}
	var grandTotal1 = $("#grandTotal").val();	
	function calculateAdjustment() {
		//var adjustment = $("#adjustment").val();
		if (/^\d+$/.test($("#adjustment").val())
				|| $("#adjustment").val() == '-'
				|| $("#adjustment").val() == ''
				|| /^\-?\d+((\.|\,)\d+)?$/.test($("#adjustment").val())) {
			var adjustment = $("#adjustment").val();
		} else {
			$("#adjustment").val(0);
		}
		var subTotal = $("#subTotal").val();
		var qSGST = $("#qSGST").val();
		var qCGST = $("#qCGST").val();
		var qIGST = $("#qIGST").val();
		var tcsAmount1 = $("#tcsAmount").val();
		var tcsAmount = 0;
		if (tcsAmount1 != '' && tcsAmount1 != null) {
			tcsAmount = tcsAmount1;
		}
		var grandTotal = parseFloat(subTotal) + parseFloat(qSGST)
				+ parseFloat(qCGST) + parseFloat(qIGST) + parseFloat(tcsAmount);
		var add = 0;
		if (/^\-?\d+((\.|\,)\d+)?$/.test(adjustment)) {
			add = parseFloat(adjustment) + parseFloat(grandTotal);
			$("#grandTotal").val((add).toFixed(2));
		} else {
			$("#grandTotal").val((grandTotal).toFixed(2));
		}
	}
	// tcs calculation
	function tcsCalculation() {

		var tcsValue = $("#tcsValue").val();
		var subTotal = $("#subTotal").val();
		var grandTotal2 = $("#grandTotal").val();
		var adjustment = $("#adjustment").val();
		
		var qSGST = $("#qSGST").val();
		if (qSGST == "" || qSGST == null || qSGST == "null") {
			qSGST = 0;
			$("#qSGST").val(qSGST);
		}
		var qCGST = $("#qCGST").val();
		if (qCGST == "" || qCGST == null || qCGST == "null") {
			qCGST = 0;
			$("#qCGST").val(qCGST);
		}
		var qIGST = $("#qIGST").val();
		if (qIGST == "" || qIGST == null || qIGST == "null") {
			qIGST = 0;
			$("#qIGST").val(qIGST);
		}
		var tcsAmount = $("#tcsAmount").val();
		if (tcsAmount == "" || tcsAmount == null || tcsAmount == "null") {
			tcsAmount = 0;
			$("#tcsAmount").val(tcsAmount);
		}
		var grandTotal = $("#grandTotal").val();
		if (grandTotal == "" || grandTotal == null || grandTotal == "null") {
			grandTotal = 0;
			$("#grandTotal").val(grandTotal);
		}
		
		var totVal = parseFloat(subTotal) + parseFloat(qSGST)
				+ parseFloat(qCGST) + parseFloat(qIGST)+parseFloat(adjustment);
		
		if (tcsValue) {
			
			var tcs = (parseFloat(subTotal) * parseFloat(tcsValue)) / 100;
			var add = parseFloat(tcs) + parseFloat(totVal);
			$("#grandTotal").val((add).toFixed(2));
			$("#tcsAmount").val((tcs).toFixed(2));
		} else {
			
			var add = 0;
			$("#grandTotal").val((totVal).toFixed(2));
		}

	}
	var tcs = 0;
	function tcsBlank() {
		var tcsValue = $("#tcsValue").val();
		var tcsName = $("#tcsName").val();
		var gt = $("#grandTotal").val();
		var tcsAmount = $("#tcsAmount").val();
		if (tcsName == '') {
			$("#tcsValue").val('');
			$("#tcsId").val('');
			tcsCalculation()
			$("#tcsAmount").val(tcs);
		}
	}
	/*
	image upload fn
	 */

	function saveFileq() {

		var uFile = $('#fileUpload')[0].files[0];
		var fileName = $('#fileUpload').val();
		var iURL = URL.createObjectURL(uFile);
		var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		$("#uploadedBillDiv_").html(LightImg);
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var iURL = URL.createObjectURL(uFile);

		$('#imgLoc').attr('src', '');
		$('#imgLoc').attr('src', iURL);

		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');

		$.ajax({
			type : "POST",
			url : "manage-invoice-upload-file",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {

			},
			error : function(e) {

			}
		});
	}

	function showDisplay(){
		var title = $('#companyName').val();
		$('#vendorDisplayName').val(title);
	}
	//add Vendor Info
	function addVendorInfo() {
		$('.loader').show();
		var obj = {};
		obj.vendorId = $('#vendorId').text();
		obj.salutation = $('#salutation').val();
		obj.vendorName = $('#vendorrName').val();
		obj.companyName = $('#companyName').val();
		obj.vendorDisplayName = $('#vendorDisplayName').val();
		obj.vendorEmail = $('#vendorEmail').val();
		obj.vendorPhone = $('#vendorPhone').val();
		obj.vendorMobile = $('#vendorMobile').val();		
		obj.vendorSkype = $('#vendorSkype').val();
		obj.vendorDesignation = $('#vendorDesignation').val();
		obj.department = $('#department').val();
		obj.webSite = $('#webSite').val();	
		
		obj.pan = $('#pan').val();
		obj.currency = $('#currency').val();
		obj.openingBalance = $('#openingBalance').val();
		obj.paymentTerms = $('#paymentTerms').val();
		obj.tds = $('#tds').val();
		obj.gstNumber = $('#gstNumber').val();
		obj.vendorCategory = $('#vendorCategory').val();
		obj.whatsAppNo = $('#whatsAppNo').val();
		obj.tanNo = $('#tanNo').val();
		obj.faceBook = $('#faceBook').val();
		obj.twitter = $('#twitter').val();		
		obj.country = $('#country').val();
		obj.states = $('#states').val();
		
		obj.city = $('#city').val();
		obj.street1 = $('#street1').val();
		obj.street2 = $('#street2').val();
		obj.zipCode = $('#zipCode').val();
		obj.phone = $('#phone').val();
		obj.fax = $('#fax').val();		
		obj.country1 = $('#country1').val();
		obj.states1 = $('#states1').val();
		obj.city1 = $('#city').val();
		obj.street11 = $('#street11').val();
		obj.street21 = $('#street21').val();
		obj.zipCode1 = $('#zipCode1').val();
		obj.phone1 = $('#phone1').val();
		obj.fax1 = $('#fax1').val();
				
		obj.salutation1 = $('#salutation1').val();
		obj.firstName = $('#firstName').val();
		obj.lastName = $('#lastName').val();
		obj.emailAdd = $('#emailAdd').val();
		obj.mobile = $('#mobile').val();		
		obj.beneficiaryName = $('#beneficiaryName').val();
		obj.bankName = $('#bankName').val();
		obj.accountNo = $('#accountNo').val();
		obj.ifsc = $('#ifsc').val();		
		obj.remarks = $('#remarks').val();

	
		/* FORM VALIDATION STARTS*/

		var validation = true;

		if (obj.zipCode == null || obj.zipCode == "") {
			validation = validationUpdated("Zip Code Required", "zipCode");
		}
		
		if (obj.companyName == null || obj.companyName == "") {
			validation = validationUpdated("Company Name Required", "companyName");
		}
		
		if (obj.pan == null || obj.pan == "") {
			validation = validationUpdated("PAN Card Required", "pan");
		}
		if (obj.country == null || obj.country == "") {
			validation = validationUpdated("Country Name Required", "country");
		}
		if (obj.states == null || obj.states == "") {
			validation = validationUpdated("States Name Required", "states");
		}
		 if (obj.city == null || obj.city == "") {
			validation = validationUpdated("City Required", "city");
		}
		if (obj.street1 == null || obj.street1 == "") {
			validation = validationUpdated("Street Required", "street1");
		} 
		/* FORM VALIDATION ENDS*/

		if (validation) {
			$.ajax({
				type : "POST",
				url : "manage-invoice-adds",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.code == "Success") {
						console.log(response);

						$("#add").hide();
						$("#copy").show();
						$("#delete").hide();
						$("#totalReq").show();
						$("#myGrid").hide();
						$("#searchRowDiv").hide();
						$("#demo").hide();
						$("#addVendorModel").modal('hide');
						$('.loader').hide();
					}
				},
				error : function(data) {					
				}
			})
		}
	}

	function addCustomerInfo2() {
		
		$('.loader').show();
		var obj = {};
		var Id = $("#vendorId").val();

		obj.vendorId = $("#vendorId").val();
		obj.country = $("#countryb").val();
		obj.states = $("#statesb").val();
		obj.city = $("#cityb").val();
		obj.street1 = $("#street1b").val();
		obj.street2 = $("#street2b").val();
		obj.zipCode = $("#zipCodeb").val();
		obj.phone = $("#phoneb").val();
		obj.fax = $("#faxb").val();
		
		var validation = true;
		
		   if (obj.zipCodeb == null || obj.zipCodeb == "") {
				validation = validationUpdated("Zip Code Required",
						"zipCodeb");
			}  
		   if (obj.countryb == null || obj.countryb == "") {
				validation = validationUpdated("Country Required",
						"countryb");
			}  
		   if (obj.statesb == null || obj.statesb == "") {
				validation = validationUpdated("State Required",
						"statesb");
			}  
		   if (obj.cityb == null || obj.cityb == "") {
				validation = validationUpdated("City Required",
						"cityb");
			}  
		   if (obj.street1b == null || obj.street1b == "") {
				validation = validationUpdated("Street1 Required",
						"street1b");
			}
		   /* if (obj.phoneb == null || obj.phoneb == "") {
				validation = validationUpdated("Phone Required",
						"phoneb");
			}
		   if (obj.faxb == null || obj.faxb == "") {
				validation = validationUpdated("Fax Required",
						"faxb");
			} */
		   if (obj.street2b == null || obj.street2b == "") {
				validation = validationUpdated("Street2 Required",
						"street2b");
			}
		   if (validation) {
		$.ajax({
			type : "POST",
			url : "manage-invoice-add-cust-billingaddress",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					$("#billingInfo").hide();
					cancelBtn();
					getAddressDetails(Id);
				}
			},
			error : function(data) {
			}
		})
		   }
	}

	function addCustomerInfo1() {
		$('.loader').show();
		var obj = {};
		var Id = $("#vendorId").val();

		obj.vendorId = $("#vendorId").val();
		obj.country1 = $("#country1s").val();
		obj.states1 = $("#states1s").val();
		obj.city1 = $("#city1s").val();
		obj.street11 = $("#street11s").val();
		obj.street21 = $("#street21s").val();
		obj.zipCode1 = $("#zipCode1s").val();
		obj.phone1 = $("#phone1s").val();
		obj.fax1 = $("#fax1s").val();
		
		var validation = true;
		
		   if (obj.zipCode1s == null || obj.zipCode1s == "") {
				validation = validationUpdated("Zip Code Required","zipCode1s");
			} 		 
		   if (obj.country1s == null || obj.country1s == "") {
				validation = validationUpdated("Country Required","country1s");
			}  
		   if (obj.states1s == null || obj.states1s == "") {
				validation = validationUpdated("State Required","states1s");
			}  
		   if (obj.city1s == null || obj.city1s == "") {
				validation = validationUpdated("City Required","city1s");
			}  
		   if (obj.street11s == null || obj.street11s == "") {
				validation = validationUpdated("Street1 Required","street11s");
			}
		  /*  if (obj.phone1s == null || obj.phone1s == "") {
				validation = validationUpdated("Phone Required","phone1s");
			}
		   if (obj.fax1s == null || obj.fax1s == "") {
				validation = validationUpdated("Fax Required","fax1s");
			} */
		   if (obj.street21s == null || obj.street21s == "") {
				validation = validationUpdated("Street2 Required","street21s");
			}		   
		   if (validation) {
		    $.ajax({
			type : "POST",
			url : "manage-invoice-add-cust-shippingaddress",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					cancelBtn23();
					getAddressDetails(Id);
				}
			},
			error : function(data) {
				$('.loader').hide();
			
			}
		})
		   }

	}

	function getStateDetails() {

		var cname = $('#country').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
		
			$.ajax({
				type : "GET",
				url : "manage-invoice-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states").append(option);
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
		}
	}

	function getStateDetails1() {

		var cname = $('#country1').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
			$.ajax({
				type : "GET",
				url : "manage-invoice-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
		}
	}

	function getStateDetailsb() {

		var cname = $('#countryb').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
			$.ajax({
				type : "GET",
				url : "manage-invoice-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#statesb").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#statesb").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#statesb").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#statesb").append(option);
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
		}
	}

	function getStateDetailss() {

		var cname = $('#country1s').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
			$.ajax({
				type : "GET",
				url : "manage-invoice-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states1s").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1s").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1s").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1s").append(option);
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			
		}
	}

	function copyAsBillingAdd() {

		var country = $('#country').val();
		var states = $('#states').val();
		var city = $('#city').val();
		var street1 = $('#street1').val();
		var street2 = $('#street2').val();
		var zipCode = $('#zipCode').val();
		var phone = $('#phone').val();
		var fax = $('#fax').val();

		$('#country1').val(country);
		$('#states1').val(states);
		getStateDataOnEdit1(states);
		$('#city1').val(city);
		$('#street11').val(street1);
		$('#street21').val(street2);
		$('#zipCode1').val(zipCode);
		$('#phone1').val(phone);
		$('#fax1').val(fax);
	}

	function getStateDataOnEdit1(stateId) {
		var country = $("#country").val();
		if (country) {
			$.ajax({
				type : "GET",
				url : "manage-invoice-stateList?id=" + country,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
						$("#states1").val(stateId);
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
		}
	}

	function AddVendor() {
		$('.formValidation').remove();
		$("#salutation").val("");
		$("#vendorName").val("");
		$("#companyName").val("");
		$("#vendorEmail").val("");
		$("#vendorCategory").val("");
		$("#vendorDisplayName").val("");
		$("#vendorPhone").val("");
		$("#vendorMobile").val("");
		$("#vendorSkype").val("");
		$("#vendorDesignation").val("");
		$("#webSite").val("");
		$("#zipCode").val("");
		$("#zipCode1").val("");
		$("#lastName").val("");
		$("#emailAdd").val("");
		$("#mobile").val("");
		$("#beneficiaryName").val("");
		$("#bankName").val("");
		$("#accountNo").val("");
		$("#ifsc").val("");
		$("#remarks").val("");
		$("#states1").val("");
		$("#city").val("");
		$("#street11").val("");
		$("#street21").val("");
		$("#phone1").val("");
		$("#fax1").val("");
		$("#salutation1").val("");
		$("#firstName").val("");
		$("#twitter").val("");
		$("#country").val("");
		$("#states").val("");
		$("#city").val("");
		$("#city1").val("");
		$("#states").val("");
		$("#states1").val("");
		$("#street1").val("");
		$("#phone").val("");
		$("#fax").val("");
		$("#country1").val("");
		$("#faceBook").val("");
		$("#tanNo").val("");
		$("#whatsAppNo").val("");
		$("#vendorCategory").val("");
		$("#gstNumber").val("");
		$("#tds").val("");
		$("#paymentTerms").val("");
		$("#openingBalance").val("");
		$("#department").val("");
		$("#webSite").val("");
		$("#pan").val("");
		$("#currency").val("");
		$('#addVendorModel').modal('show');

	}

	function cancelBtn1() {
		 $(".formValidation").remove();
		 $('#vendorId').val('');
		 $('#salutation').val('');
		 $('#vendorName1').val('');
		 $('#companyName').val('');
		 $('#vendorDisplayName').val('');
		 $('#vendorEmail').val('');
		 $('#vendorPhone').val('');
		 $('#vendorMobile').val('');
		 $('#vendorSkype').val('');
		 $('#vendorDesignation').val('');
		 $('#department').val('');
		 $('#webSite').val('');
		 $('#pan').val('');
		 $('#currency').val('');
		 $('#openingBalance').val('');
		 $('#paymentTerms').val('');
		 $('#tds').val('');
		 $('#gstNumber').val('');
		 $('#vendorCategory').val('');
		 $('#whatsAppNo').val('');
		 $('#tanNo').val('');
		 $('#faceBook').val('');
		 $('#twitter').val('');
		 $('#country').val('');
		 $('#states').val('');
		 $('#city').val('');
		 $('#street1').val('');
		 $('#street2').val('');
		 $('#zipCoded').val('');
		 $('#phone').val('');
		 $('#fax').val('');
		 $('#country1').val('');
		 $('#states1').val('');
		 $('#city').val('');
		 $('#street11').val('');
		 $('#street21').val('');
		 $('#zipCode1').val('');
		 $('#phone1').val('');
		 $('#fax1').val('');
         $('#salutation1').val('');
		 $('#firstName').val('');
		 $('#lastName').val('');
		 $('#emailAdd').val('');
		 $('#mobile').val('');
		 $('#beneficiaryName').val('');
		 $('#bankName').val('');
		 $('#accountNo').val('');
		 $('#ifsc').val('');
		 $('#remarks').val('');
		 $('#addVendorModel').modal('hide');
	}
	function cancelBtn() {
		$('#addAddressModel').modal('hide');
		$("#shippingInfo").hide();
	}
	function cancelBtn23() {
		$('#addAddressModel1').modal('hide');
		$("#shippingInfo").hide();
	}
	function tcscancelBtn() {
		$('#manageTCsModel').modal('hide');
	}

	function getAddressDetails(vendorId) {
		$.ajax({
			type : "GET",
			url : "manage-invoice-get-address?id=" + vendorId,

			async : false,
			success : function(response) {
				if (response.message == "Success") {
					$("#con").html(response.body.country);
					$("#bstate").html(response.body.states);
					$("#bcity").html(response.body.city);
					$("#bstreet1").html(response.body.street1);
					$("#bstreet2").html(response.body.street2);
					$("#bzipcode").html(response.body.zipCode);
					$("#bphone").html(response.body.phone);
					$("#bfax").html(response.body.fax);
					$("#con1").html(response.body.country1);
					$("#bstate1").html(response.body.states1);
					$("#bcity1").html(response.body.city1);
					$("#bstreet11").html(response.body.street11);
					$("#bstreet21").html(response.body.street21);
					$("#bzipcode1").html(response.body.zipCode1);
					$("#bphone1").html(response.body.phone1);
					$("#bfax1").html(response.body.fax1);

				}
			}
		});
	}

	function saveFile1(event) {
		var uFile = $(uploadDoc_0)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");
		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_0").html("");

		if (extension[1] == "jpg" || extension[1] == "png"
				|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o' style='color: blue'></i></a></div>";
		} else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o' style='color: red'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l'> </div>";
		}
		$("#uploadedBillDiv_0").html(LightImg);
		$("#imageName_0").html(fileName);
		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');
		$.ajax({
			type : "POST",
			url : "manage-invoice-upload-file1",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {
			},
			error : function(e) {

			}
		});
	}
	//TCS auto search

	function getTCSList() {
		var search = $("#tcsName").val();

		if (search) {

			$
					.ajax({
						type : "POST",
						url : "manage-invoice-get-tcs-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list3" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue3(\''
												+ response.body[i].tcsId
												+ '\',\''
												+ response.body[i].taxName
												+ '\',\''
												+ response.body[i].rateId
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].taxName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
								
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list3">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee1()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}else {
			$("#suggesstion-box3_").hide();
		}

	}

	function selectAutocompleteValuee1() {

		$("#tcsId").val("");

		$("#tcsName").val("");
		$("#custGSTNoo1").val("");
		$("#taxTypee1").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box3_").hide();

	}

	function selectAutocompleteValue3(tcsId, taxName, rateId, taxType) {

		$("#tcsId").val(tcsId);
		$("#tcsName").val(taxName);
		
		$("#tcsValue").val(rateId);
		$("#taxTypee1").val(taxType);
		$("#search").val(taxName);
		$("#search").attr('data-procat', tcsId);
		$("#suggesstion-box3_").hide();	
		tcsCalculation();
	}
	function AddTCS() {

		$('#manageTCsModel').modal('show');

	}

	function addtcsInfo1() {
		$('.loader').show();
		var obj = {};
		var Id = $("#tcsId").val();

		obj.salespersonId = $("#tcsId").val();
		obj.collection = $("#collection").val();
		obj.rateId = $("#rateId").val();
		obj.taxName = $("#taxName").val();

		$.ajax({
			type : "POST",
			url : "manage-invoice-add-tcs",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					
					$('#manageTCsModel').modal('hide');

				}
			},
			error : function(data) {
				
				$('.loader').hide();
			}
		})

	}

	function checkEmpty() {
		var infofileName = true;
		$(".formValidation").remove();
		$('.docNoclss').each(function() {
			if ($(this).val() == null || $(this).val() == "") {
				infofileName = false;
				validationModal("Document Name Required", $(this).attr('id'));
			}
		});

		var mulDocInfo = true;
		if (infofileName) {
			$('#doctbodyData > tr').each(function() {
				if ($(this).closest('tr').find('.imageName').text()) {
					mulDocInfo = true;
				} else {
					mulDocInfo = false;
					$("#messageParagraph").text("Please Choose a File ");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					return false;
				}

			});
		}
		if (infofileName && mulDocInfo) {
			addMore1()
		}
	}

	function saveMultiFile(event) {
		var AssignItemQty = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var currentFldId = "#" + currentFldId;

		var uFile = $(currentFldId)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");

		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_" + counter).html("");
		if (extension[1] != null && extension[1] != "") {
			$("#uploadHidden_" + counter).val('');
		}
		if (extension[1] == "jpg" || extension[1] == "png"
				|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		} else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o'></i> </a></div>";
		} else if (extension[1] == "xls" || extension[1] == "xlsx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-excel-o'></i></a></div>";
		} else if (extension[1] == "doc" || extension[1] == "dox"
				|| extension[1] == "docx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-word-o'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l '> </div>";
		}
		var dltImg = "<i class='ti-close position-l rmv1'></i>";
		$("#uploadedBillDiv_" + counter).html(LightImg);
		$("#imageName_" + counter).html(fileName);
		$("#dltImage_" + counter).html(dltImg);

		$("#dltImage_" + counter).addClass("custom-file-delete");
		$("#clickImg_" + counter).removeClass("ti-plus");
		$("#clickImg_" + counter).addClass("ti-pencil");

	}
	function addMore1() {

		var lengthOfTableRow = $("#doctbodyData").children('tr').length;
		var cloneHtml = $("#docTbl tbody tr:first").clone();

		$("#docTbl tbody").append($("#docTbl tbody tr:first").clone());
		$("#myTable tbody tr td:last").html("");

		$("#docTbl tbody tr:last").find(".documentclss").val("");
		$("#docTbl tbody tr:last").find(".docNoclss").val("");
		$("#docTbl tbody tr:last").find(".documentclssup").val("");
		$("#docTbl tbody tr:last").find(".uploadedBillCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").val('');
		$("#docTbl tbody tr:last").find(".imageName").empty();
		var j = 0;
		$("#docTbl > #doctbodyData > tr").each(function(i) {

			var selectInput = $(this).find('select');
			var textInput = $(this).find('input');
			var fileInput = $(this).find('file');
			var divInput = $(this).find('div');
			var label = $(this).find('label');
			var iInput = $(this).find('i');
			selectInput.eq(0).attr('id', "docid_" + i);

			textInput.eq(1).attr('id', "docnoid_" + i);
			textInput.eq(2).attr('id', "uploadDoc_" + i);
			label.eq(1).attr('for', "uploadDoc_" + i);
			textInput.eq(3).attr('id', "uploadHidden_" + i);
			divInput.eq(4).attr('id', "uploadedBillDiv_" + i);
			divInput.eq(5).attr('id', "imageName_" + i);
		//	divInput.eq(6).attr('id', "dltImage_" + i);
			iInput.eq(0).attr('id', "clickImg_" + i);
			j++;
		})
		$("#clickImg_" + (j - 1)).removeClass("ti-pencil");
		$("#clickImg_" + (j - 1)).addClass("ti-plus");

	}

	function checkForDuplicateEntry(event) {
		var document = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var count = 0;
		$(".docNoclss").each(function() {
			if (document == $(this).val()) {
				count++;
			}
		})
		if (count >= 2) {
			$("#messageParagraph").text("Document Name Already Entered");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');

			return false;
		} else {
			return true;
		}

	}
	function openDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('show');
	}
	//for closeing modal box for dlt ind product
	function closeDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('hide');
	}

	function deletAttachmentRow() {
		var lengthOfTableRow1 = 0;
		$("#docTbl > #doctbodyData > tr").each(function() {
			lengthOfTableRow1 = lengthOfTableRow1 + 1;
		})
		var id = $("#dltValue").val();
		$("#" + id).closest('tr').remove();
		closeDeleteConfirm();
		if (lengthOfTableRow1 == 1) {
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0"></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);
		}
	}

	function downloadDetails() {
		var dataset = [];
		gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptions.api.exportDataAsCsv(dataset);
	}

	function openModal(id) {
		if (id == 0) {
			$("#organatioModal").show();
			$("#customerModal").hide();
		} else if (id == 1) {
			$("#customerModal").show();
			$("#organatioModal").hide();
		} else {
			$("#customerModal").hide();
			$("#organatioModal").hide();
		}

	}
	
	function getPoList(vendorId,id1,id2){
		$('.loader').show();
			if (vendorId) { 
				var option = $("<option></option>");
				$(option).val(null);
				$(option).html("Select");
				
				$.ajax({type : "GET",
					url : "manage-invoice-polist?id="+ vendorId+"&type="+id1,
							success : function(response) {
								if (response.message == "success") {
									$('.loader').hide();
							
									$("#poId").empty();
									var option = $("<option></option>");
									$(option).val(null);
									$(option).html("Select");
									$("#poId").append(option);
									for (var i = 0; i < response.body.length; i++) {
										var option = $("<option></option>");
										$(option).val(response.body[i].name);
										$(option).html(response.body[i].name);
										$("#poId").append(option);
									}
								 	if(id2 !=""){
								 		$("#poId").val(id2);
									}
									
								}
							},
							error : function(e) { 
								$('.loader').hide();}
						});
			} else {
				$("#poId").empty();
				var option = $("<option></option>");
				$(option).val(null);
				$(option).html("poId");
				$("#poId").append(option);
				$("#poId").empty();
				var option = $("<option></option>");
				$(option).val(null);
				$(option).html("Select");
				
			}
		}	
	
		function checkforQty(fieldId) {
			 var pending=parseFloat($("#pendingQuantity").val());
				var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');
				if( tempVal <= pending)		
				{
					$("#" + fieldId).val(tempVal);
				
				}
				else{
					
					$("#messageParagraph").text(
					"Please add less than or same Receiving Quantity as Pending Quantity");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					$("#" + fieldId).val(null);
					
				}
			
			}
		 function check1(fieldId) {
				var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');
				$("#" + fieldId).val(tempVal);
			}	 

		function pVarification() {
		
			var selectedRows = itemOptions.api.getSelectedRows();
			var selectedRowsString = '';
			var sku = "";
			for (var i = 0; i < selectedRows.length; i++) {
				sku = sku + '"' + selectedRows[i].sku + '",';
			}
			var hsnCode = sku.substring(0, sku.length - 1);
			
			var id = $("#invoiceheadId").html();
			if (hsnCode) {
				sessionStorage.setItem('activity', 'ACT0029');
				
				agGrid.simpleHttpRequest({
					url : 'manage-invoice-edit-forGrnReturn?id=' + id  + "&hsnCode=" + hsnCode 
				}).then(function(data) {
					localStorage.setItem('ReqGRNvarifyData', JSON.stringify(data));
					itemOptions.api.setRowData(data);
					window.location.href = "/purchase/physical-verification"
				});
			} else {
				$("#alert").modal('show');
				document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
			}	
		}
		
		function cancelGrnVal() {
			$('#myModal1').modal('hide');
		}	
		function saveReturnNote() {
			var returnNote = {};			
			returnNote.invoiceId = $("#invoiceId").val();
			returnNote.itemId = $("#itemId").val();
			returnNote.receivingQuantity = $("#rtnQty").val();
			returnNote.description = $("#rtndesc").val();			
			generateReturnNote(returnNote);
		}	
		function generateReturnNote(returnNote) {
			$.ajax({
				type : "POST",
				url : "manage-invoice-generate-return-ajax",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(returnNote),
				success : function(response) {
					$('.loader').hide();
					if (response.message == "Success") {
						$("#myModal1").modal('hide');
					} else {
						
					}
				},
				error : function(data) { 
					$("#myModal1").modal('hide');
				}
			}) 

		}		
		function approveGrnReceipt() {
			$('#approveGrnReceiptModal').modal('show');
		}

	    function cancelApproveModalBtn() {
			$('#approveGrnReceiptModal').modal('hide');
		}
  function approveOnclick() {
	  $('.loader').show();
			var selectedRows = gridOptions.api.getSelectedRows();
			var selectedRowsString = '';
			selectedRows.forEach(function(selectedRow, index) {
				if (index > 0) {
					selectedRowsString += ',';
				}
				selectedRowsString += selectedRow.invoiceId;
			});
			var invoiceId = selectedRowsString;
			
			var approveStatus = 1;
			$('#approveGrnReceiptModal').modal('show');
			
		$.ajax({
			type : "GET",
			url : "manage-invoice-approve-th-ajax?approveStatus=" + approveStatus + "&invoiceId=" + invoiceId ,
			async : false,
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("GRN Receipt Approved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					
					$('#approveGrnReceiptModal').modal('hide');
					$("#total").show();
					$("#totalCandidate").show();
					$("#btndiv").show();
					$('#approveGrnReceipt').attr("disabled", true);
					$('#qaRequest').attr("disabled", true);
					$("#reqTable").show();
					$('#add').attr("disabled", false);
					$('#delete').attr("disabled", true);
					$('#approvePorder').attr("disabled", true);
					$('#dwnld').show();
					$("#addData").hide();
					$("#myGrid").show();

					$("#searchRowDiv").show();
					$("#reqTable").show();
					agGrid.simpleHttpRequest({
						url : "manage-invoice-through-ajax"
					}).then(function(data) {
						var len = data.length;
						$('#totalCandidate').find('span').html(len);
						gridOptions.api.setRowData(data);
					});
					
				}else{
					$('.loader').hide();
					$('#approveGrnReceiptModal').modal('show');
				}
				
			},
			error : function(data) {
				$('.loader').hide();}
		});
	}
  
// var datas=[];
  function qaRequest(){
	  var datas = [];
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.invoiceId;
		});
		var invoiceId = selectedRowsString;
	      agGrid.simpleHttpRequest({
					url : 'manage-invoice-edit-new?id=' + invoiceId
				}).then(function(data) {
			for (element of data)
			{
				var obj = {};
				obj.invoice_id = element.invoiceId;
				obj.purchase_order = element.poId;
				obj.vechile_no = element.vehicleNo;
				obj.driver_name = element.driverName;
				obj.driver_mobile = element.driverMobile;
				obj.sku_id = element.sku;
				obj.hsn_no = element.hsnCode;
				obj.item_name = element.itemName;
				obj.quantity = element.receivedQuantity;
				obj.unit = element.unitName;
				obj.vendor_name = element.vendorId;
				obj.challan_no = element.invoiceNo;
				//console.log(obj);
				datas.push(obj);
			}
			submitReq(datas);
	
		});
  }
  
  function submitReq(datas) {
	  $('.loader').show();
		 $.ajax({
			type : "POST",
			url : "manage-invoice-add-qarequest",
			dataType : "json",
			contentType : "application/json",
			data : JSON.stringify(datas),
			success : function(response) {
				console.log(response)
				
				if (response.code=="success") {
					cancelQaRequestModal();
					$('.loader').hide();
					$('#qaRequest').attr("disabled", true);
					$("#messageParagraph").text("QA Requested");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					Cancel();
					agGrid.simpleHttpRequest({
						url : "manage-invoice-through-ajax"
					}).then(function(data) {
						var len = data.length;
						$('#totalCandidate').find('span').html(len);
						gridOptions.api.setRowData(data);
					});
					
				} else {
					$('.loader').hide();
					$("#messageParagraph").text(response.message);
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
				}
			},
			error : function(data) {
				$('.loader').hide();
			}
		}) 
} 
  
  function showQaRequestModal() {
		$('#qaRequestModal').modal('show');
}
  
  
  function cancelQaRequestModal(){
	  $('#qaRequestModal').modal('hide');
	  
  }
	function checkNumeric(fieldId) {

		var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');

		const input = document.getElementById(fieldId);
		const position = input.selectionStart;
		if (tempVal.slice(-1) == ' ') {
			$("#" + fieldId).empty();
			tempVal = '';
		}
		$("#" + fieldId).val(tempVal);
	}
	function receivingDocType(){
		var value= $("#receivingDocType").val();
		$("#challanNum").val('');
		$("#challanDate").val('');
	if(value=="Delivery Challan" || value=="Tax Invoice" ){
		$("#noDiv").show();
		$("#dateDiv").show();
	}else{
		$("#noDiv").hide();
		$("#dateDiv").hide();
	}
}
	function AddProduct() {
		
		     $('#addItemModel').modal('show');
		     $('#myGrid1').show();
		      $('#deleteproduct1').attr("disabled", true);
		      $("#productName").val("");
			    $("#itemBrand").val("");
			    $("#mode").val("");
			    $("#hsnCodeProduct").val("");
			    $("#sicCode").val("");
		      agGrid.simpleHttpRequest({
		  		url : 'manage-invoice-get-sku-listing?type='+"Purchase"
		  	}).then(function(data) {
		  		var len = data.length;
		  		$('#totalReq').find('span').html(len);
		  		console.log(data)
		  		gridOptions12.api.setRowData(data);
		  	}); 
		      getVendorListForProduct();      
		      
	}
	
	function deleteFile() {
		
		
		$('#fileUpload').val("");
		$('#imgemp').attr('src', '');
		$('#imgemp').attr('src', '../assets/images/noimage.jpg');

		var fileData = new FormData();
	console.log('fileData',fileData)
		fileData.append('file', 'none');
		fileData.append('path', 'none');
	console.log('File',fileData.append('file', 'none'))
	console.log('Pathh',fileData.append('path', 'none'))

		$.ajax({
			type : "POST",
			url : "view-product-delete-file",
			enctype : "multipart/form-data",
			contentType : false,
			/* data        : fileData, */
			processData : false,
			cache : false,
			success : function(response) {
			},
			error : function(e) {

			}
		});
	}	
	 function profileSelect(){
			
			$('#next').show();
			//$("#productSave").hide();
			$(".formValidation").remove();
			$('#newId').hide();
			$("#profile").show();
			$("#productheadId").html(null);
			$("#prCategoryId").val("");
			$("#tempCategoryId").val("");
			$("#prLevelId").val("");
			$("#productId").val("");
			$("#catDesc").text("");
			$("#vertical").empty();
			var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
			$("#vertical").append(img);
			$("#productName").val("");
		    $("#brand").val("");
		    $("#mode").val("");
		    $("#hsnCode").val("");
		    $("#sicCode").val("");
		    $("#fileedit").val("");
		    $("#main3").hide();
		   // $("#myPurchaseGrid").empty();
		    $("#prodStatus").prop("checked",false);
		   // closeNav();
		    closeVendor();
		    $('#deletess').attr("disabled", true);
			  $('#deletes').attr("disabled", true);
		    skuOptions.api.setRowData();
		    purchaseOptions.api.setRowData();
		    $('#productSave').hide();
		    deleteFile();
		    getBrandList();
		}
	 
	 function addNewBrand(){
			$('#brandModal').modal('show');
		} 
	 function cancelBtn2(){
			$('#brandModal').modal('hide');
		}
	 function getBrandList() {
	var rid='';
		 		var id=0;
		 			var option = $("<option></option>");
		 			$(option).val(null);
		 			$(option).html("Select");
		 			$.ajax({
		 				type : "GET",
		 				url : "view-product-get-brandList?id=" + id,
		 				//url : "view-product-get-brandList",
		 				success : function(response) {
		 					if (response.message == "success") {
		 						$("#itemBrand").empty();
		 						var option = $("<option></option>");
		 						$(option).val(null);
		 						$(option).html("Select");
		 						$("#itemBrand").append(option);
		 						for (var i = 0; i < response.body.length; i++) {
		 							var option = $("<option></option>");
		 							$(option).val(response.body[i].key);
		 							$(option).html(response.body[i].name);
		 							$("#itemBrand").append(option);
		 						}
		 						if(rid!="" || rid!=null || rid!="null"){
		 							$("#itemBrand").val(rid);
		 						}
		 					}
		 				},
		 				error : function(e) {
		 				}
		 			});	
		 	}			     
		function cancelItemModel() {
			$('#addItemModel').modal('hide');
			}
		
		function getCategoryList() {
			$('.loader').show();
			$("body").addClass("overlay");
			$("#productDiv").modal("show");
			$.ajax({
		        type: "POST",
		        url: "manage-invoice-get-total-list",
		        dataType: "json",
		        contentType: "application/json",
		        success: function(response) {
		        	if (response.message == "Success") {
		        		$("#costCeneterCBDiv").empty();
		            	for(var i = 0; i < response.body.length; i++) {
		            		var row = "";
		            		if(response.body[i].categoryId == response.body[i].parentId) {
		            			if(response.body[i].nodeCount > 0) {
		            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
		    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
		            			} else {
		            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
		    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +
		    						'" name="'+ response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
		            			}
		            			
		            		} else {
		            			if(response.body[i].nodeCount > 0) {
		            				row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
		    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
		            			} else {
		            				
		            					row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
		        						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +'" name="'+
		        						response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
		            			}
		            		}
							$("#costCeneterCBDiv").append(row);
							
		            	}
		        		
		        		var pcat = $("#prCategoryId").val();
		        		$(".benefitChk pc1-box").prop("checked", false);
		        		$("#ccCheck_"+pcat).prop("checked", false);
		            	
		            	$('.loader').hide();
		            	$("body").removeClass("overlay");
		            	
		            	$('#basic').simpleTreeTable({
		            	    expander: $('#expander'),
		            	    collapser: $('#collapser'),
		            	    store: 'session',
		            		storeKey: 'simple-tree-table-basic'
		            	});
		            }
		        }, error: function(data) {
		        	console.log(data)
		        	$('.loader').hide();
		        	$("body").removeClass("overlay");
		        	$("#productDiv").modal("show");
		        }
			});
		}
		
		function selectCheckBoxx(id,lvl) {
			if(id=='PCAT00000'){
				event.target.checked = false
				}else{
			$(".benefitChk").prop("checked", false);
			$("#ccCheck_"+id).prop("checked", true);
			$("#tempCategoryId").val(id);
			$("#prLevelId").val(lvl);
			 
		}}
		function closeVendor() {
			
			$("#variantTypeSpan").text("");
			$("#variantValueSpan").text("");
			$("#variantUnitSpan").text("");
			$("#skuPurchase").val("");
			$("#itemVendorId").val("");
			$("#purchasePrice").val("");
			$("#purchaseTax").val("");
			$("#purchaseCess").val("");
			$("#moq").val("");
			$("#isEditPurchase").val("");
			$("#editSKUId").val("");
			$("#editVendorId").val("");
			
			document.getElementById("myVendorSidenav").style.width = "0";
			document.getElementById("main3").style.width = "100%";
		}		
		function closeNavSku() {
			$("#isEdit").val("");
			document.getElementById('skuId').readOnly = false;
			$("#skuId").val("");
			$("#model").val("");
			$("#manufacture").val("");
			$("#variationType").val("");
			$("#variationValue").val("");
			$("#itemUnit").val("");
			$("#salePrice").val("");
			$("#saleTax").val("");
			$("#saleCess").val("");
			document.getElementById("mySidenavItem").style.width = "0";
			document.getElementById("main3").style.width = "100%";
		}
		function closeModall() {
			$("#myModall").modal("hide");
			$("#myModall").modal("empty");
		}
		
		function profilecancelbtn(){
			$("#reqTable").hide();
			deleteFile();
			$("#newId").show();
			$("#save").show();
			$("#Cancel").show();
			//$(".btn-hs").show();
			$("#profile").hide();
			$("#productCategoryCBDiv").attr("df","0");
			$("#prCategoryId").val("");
			$("#tempCategoryId").val("");
			$("#prLevelId").val("");
			$("#catDesc").text("");
			$("#vertical").empty();
			var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
			$("#vertical").append(img);
			$("#reqTable").hide();	
			$('#addItemModel').modal('hide');
			//$("#addData").show();
		}

		function deleteFile() {
			$("#reqTable").hide();
			$("#searchRowDiv").hide();
			$('#fileUpload').val("");
			$('#imgemp').attr('src', '');
			$('#imgemp').attr('src', '../assets/images/noimage.jpg');

			var fileData = new FormData();
		console.log('fileData',fileData)
			fileData.append('file', 'none');
			fileData.append('path', 'none');
		console.log('File',fileData.append('file', 'none'))
		console.log('Pathh',fileData.append('path', 'none'))

			$.ajax({
				type : "POST",
				url : "manage-invoice-delete-fileproduct",
				enctype : "multipart/form-data",
				contentType : false,
				/* data        : fileData, */
				processData : false,
				cache : false,
				success : function(response) {
				},
				error : function(e) {

				}
			});
		}
		
	function saveFile() {
			
			var uFile = $('#fileUpload')[0].files[0];
			var fileName = $('#fileUpload').val();
		console.log(uFile);
		console.log(fileName);

			var lastIndex = fileName.lastIndexOf("\\");
			if (lastIndex >= 0) {
				fileName = fileName.substring(lastIndex + 1);
			}
			var iURL = URL.createObjectURL(uFile);

			$('#imgemp').attr('src', '');
			$('#imgemp').attr('src', iURL);

			var fileData = new FormData();
			fileData.append('file', uFile);
			fileData.append('path', 'none');

			$.ajax({
				type : "POST",
				url : "manage-invoice--upload-fileprofuct",
				enctype : "multipart/form-data",
				contentType : false,
				data : fileData,
				processData : false,
				cache : false,
				success : function(response) {

				},
				error : function(e) {

				}
			});
			
		}
	function toDataUrl(url, callback) {
	    var xhr = new XMLHttpRequest();
	    xhr.onload = function() {
	        var reader = new FileReader();
	        reader.onloadend = function() {
	            callback(reader.result);
	        }
	        reader.readAsDataURL(xhr.response);
	    };
	    xhr.open('GET', url);
	    xhr.responseType = 'blob';
	    xhr.send();
	}
	

	function submitPurchaseDetails(dataset) {
	    console.log(dataset)
	    $('.loader').show();
	   	  $.ajax({
	        type: "POST",
	          url: "manage-invoice-save-purchase-dtls",
	        	 dataType: 'json',
	        	    contentType: 'application/json',
	        	      data: JSON.stringify(dataset),
	        	      success: function(response) {
	        	
	                  if (response.message == "Success") {
	            	closeVendor();
	            	$('.loader').hide();
	            	var productId = $("#productId").val();
	            	agGrid.simpleHttpRequest({
						url : 'manage-invoice-get-purchase-by-product?id='+productId 
					}).then(function(data) {
						console.log(data)
						purchaseOptions.api.setRowData(data);
					});
	            } else {
	                swal({
	                    title: response.code,
	                    text: response.message,
	                    type: "warning"
	                })
	                $('.loader').hide();
	            }
	        },
	        error: function(response) {
	            console.log(response);
	        }
	    })
	}
	function submitProductDetails(dataset) {
	    console.log(dataset)
	    $('.loader').hide();
	    $.ajax({
	    	 type: "POST",
	         url: "manage-invoice-save-sku-dtls",
	         dataType: 'json',
	         contentType: 'application/json',
	         data: JSON.stringify(dataset),
	        success: function(response) {
	            if (response.message == "Success") {
	            	closeNavSku();
	            	$("#addItemModel").modal('show');
	            	var productId = $("#productId").val();
	            	agGrid.simpleHttpRequest({
						url : 'manage-invoice-get-sku-by-product?id='+productId
					}).then(function(data) {
						console.log(data)
						skuOptions.api.setRowData(data);
						
						$("#skuPurchase").empty();
						$("#skuPurchase").append("<option value>Select</option>");
						for(var i = 0; i < data.length; i++) {
							$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
						}
					});
	            	$('.loader').hide();
	            } else {
	                swal({
	                    title: response.code,
	                    text: response.message,
	                    type: "warning"
	                })
	                $('.loader').hide();}
	        },
	        error: function(response) {
	            console.log(response);
	            $('.loader').hide();}
	    })
	}
	
	function openPurchaseDetails(skuid, id, vendorId) {
		$(".formValidation").remove();
		$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
		$("#skuPurchase").val("");
		$("#itemVendorId").val("");
		$("#purchasePrice").val("");
		$("#purchaseTax").val("");
		$("#purchaseCess").val("");
		$("#moq").val("");
		$("#isEditPurchase").val("");
		$("#editSKUId").val("");
		$("#editVendorId").val("");
		openVendor();
		if(id) {
			
			obj = {};
			
			obj.productId = id;
			obj.sku = skuid;
			obj.vendorId = vendorId;
			
			$.ajax({
				type : "POST",
				url : "manage-invoice-get-purchase-details-edit",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						
						$("#variantTypeSpan").text(response.body.variationType);
						$("#variantValueSpan").text(response.body.variationValue);
						$("#variantUnitSpan").text(response.body.variationUnit);
						$("#skuPurchase").val(response.body.sku);
						$("#itemVendorId").val(response.body.vendorId);
						$("#purchasePrice").val(response.body.salePrice);
						$("#purchaseTax").val(response.body.saleTax);
						$("#purchaseCess").val(response.body.saleCess);
						$("#moq").val(response.body.moq);
						$("#isEditPurchase").val(response.body.isEdit);
						$("#editSKUId").val(response.body.sku);
						$("#editVendorId").val(response.body.vendorId);
					}
				}, error : function(data) {
					console.log(data)
				}
			});
		}
	}	
	function next(){
		$("#next").show();
		$("#main").show();
		$("#profile").show();	
		$("#productSave").hide();	
		$("#accordionExample23").hide();	
		var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});        	 
        })   

        obj = {};
        obj['productId'] = $("#productId").val();
        obj['productName'] = $("#productName").val();
        obj['brand'] = $("#itemBrand").val();
        obj['mode'] = $("#mode").val();
        obj['hsnCode'] = $("#hsnCodeProduct").val();
        obj['sicCode'] = $("#sicCode").val();
        obj['productStatus'] = $("input[name='isActive']:checked").val();
        obj['productCategory'] = $("#prCategoryId").val();
        obj['productCategoryText'] = $("#catDesc").text();
        obj['imgList'] = data;
        $(".formValidation").remove();
        allPValid = true;
		if( $("#productName").val() == null || $("#productName").val() == ""){
			allPValid = false;
			validationModal("Product Name Required","productName");
		} 
		if( $("#mode").val() == null || $("#mode").val() == ""){
			allPValid = false;
			validationModal("Mode Required","mode");
		}
		/* if( $("#itemBrand").val() == null || $("#itemBrand").val() == ""){
			allPValid = false;
			validationModal("Brand Required","itemBrand");
		} */
		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
			allPValid = false;
			validationModal("HSN/SAC Code Required","hsnCodeProduct");
		}
    	var productId = $('#productheadId').html();
    		
          if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            			submitProduct(obj);
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	  submitProduct(obj);
              }
            	
            	
            }		
	}
	
	function submitProduct(dataset) {
	    console.log(dataset)
	    $('.loader').show();
	    $.ajax({
	    	 type: "POST",
	         url: "manage-invoice-products-save",
	         dataType: 'json',
	         contentType: 'application/json',
	         data: JSON.stringify(dataset),
	        success: function(response) {
	            if (response.message == "Success") {
	            	//returnPage();
	            	var productIdd = $('#productId').val();
					if(productIdd!=""){
						$("#messageParagraph").text("Data Saved Successfully");
		            	$("#msgOkModal").removeClass("btn3");
		            	$("#msgOkModal").addClass("btn1");
		            	$("#msgModal").modal('show');
		            	$("#productheadId").html(null);
						profilecancelbtn();
					}else{
	            	
	            	$("body").removeClass("overlay");
	            	 /* $("#messageParagraph").text("Data Saved Successfully");
	            	$("#msgOkModal").removeClass("btn3");
	            	$("#msgOkModal").addClass("btn1");
	            	$("#msgModal").modal('show'); */
	            	$("#productId").val(response.body.productId);
	            	$("#productheadId").html(response.body.productId);
	            	$("#main3").show();
	            	$("#productSave").show();
	            	$("#profile").show();
	            	$("#next").hide();
	            	$("#accordionExample23").show();
	     		    $("#headingOne1").show();
					}
					$('.loader').hide();
	            } else {
	            	$('.loader').hide();
	            	$("body").removeClass("overlay");
	                swal({
	                    title: response.code,
	                    text: response.message,
	                    type: "warning"
	                })
	            }
	        },
	        error: function(response) {
	        	$('.loader').hide();
	        	$("body").removeClass("overlay");
	            console.log(response);
	        }
	    }) 
	}	
	function deleteskuDtls(){
		$("#deleteSKU").modal('show');
		$("#addItemModel").modal('hide');
	}
	function cancelModalSKUDtls(){
		$("#deleteSKU").modal('hide');
		$("#addItemModel").modal('show');
	} 
	function deletepurchaseDtls(){
		 $("#deleteSKUPrd").modal('show');
		 $("#addItemModel").modal('hide');
		}
	function cancelModalSKUPrdDtls(){
		$("#deleteSKUPrd").modal('hide');
		$("#addItemModel").modal('show');
	}

	function deletepurchase(){
		$('.loader').show();
			 var selectedNodes = purchaseOptions.api.getSelectedNodes();
			 var selectedData = selectedNodes.map(node => node.data);
			 sku= selectedData.map(node => node.sku);
				var id = $('#productId').val();
			$.ajax({
					type : "GET",
					url : "manage-invoice-purchase-delete?id="+ sku,
					success : function(response) {
					if (response.message == "Success") {
						$('.loader').hide();
						 $('#newBtn1').attr("disabled", false);
						 $('#deletes').attr("disabled", true);
						
						closeNav();
						 $("#newBtn1").show();
						agGrid.simpleHttpRequest({
							url : 'manage-invoice-get-purchase-by-product?id=' + id
						}).then(function(data) {
							purchaseOptions.api.setRowData(data);
						});
					    cancelModalSKUPrdDtls();
						 $("#newBtn1").show();
					}
					},
					error : function(data) {
					console.log(data);
					}
				})
			
		}
	function deleteskud(){
		 var selectedNodes = skuOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 sku= selectedData.map(node => node.sku);
			var id = $('#productId').val();
			$('.loader').show();
		$.ajax({
				type : "GET",
				url : "manage-invoice-deletesku?id="+ sku,
				success : function(response) {
				if (response.message == "Success") {
					
					$('.loader').hide();
					$("#addItemModel").modal('show');
					 $('#newBtn2').attr("disabled", false);
					 $('#deletess').attr("disabled", true);				
					agGrid.simpleHttpRequest({
						url : 'manage-invoice-get-sku-by-product?id='+ id
					}).then(function(data) {
						console.log(data)
						skuOptions.api.setRowData(data);						
						$("#skuPurchase").empty();
						$("#skuPurchase").append("<option value>Select</option>");
						for(var i = 0; i < data.length; i++) {
							$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
						}
					});
					closeNavSku();
					cancelModalSKUDtls();
				}
				},
				error : function(data) {
				console.log(data);
				$('.loader').hide();
				}
			})
		
	}
	
	document.addEventListener('DOMContentLoaded', function() {
		var gridDiv = document.querySelector('#myGrid1');
		new agGrid.Grid(gridDiv, gridOptions12);

		
	    var gridDiv = document.querySelector('#mySKUGrid');
	    new agGrid.Grid(gridDiv, skuOptions);
	    
	    var gridDiv = document.querySelector('#myPurchaseGrid');
	    new agGrid.Grid(gridDiv, purchaseOptions);
	    
	});
	
	function skuProductCSV() {
		var dataset = [];
		skuOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		skuOptions.api.exportDataAsCsv(dataset);
	}
	function openNavItem() {
		$(".formValidation").remove();
		var productId = $("#productId").val();
		var productName = $("#productName").val();		
		$("#skudiv").hide();
		$("#skuPrdId").text(productId);
		$("#isEdit").val("");
		$("#skuId").val("");
		$("#model").val("");
		$("#manufacture").val(productName);
		$("#variationType").val("");
		$("#variationValue").val("");
		$("#itemUnit").val("");
		$("#salePrice").val("0");
		$("#saleTax").val("");
		$("#saleCess").val("");
		document.getElementById("mySidenavItem").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:431px;bottom:4px;";
		document.getElementById("main3").style.width = "70%";
	}
	function openVendor() {
		closeNav();
		$(".formValidation").remove();
		var productId = $("#productId").val();
		$("#skuPurchasePrdId").text(productId);
		
		$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
		$("#variantUnitSpan").text("");
		$("#skuPurchase").val("");
		$("#itemVendorId").val("");
		$("#purchasePrice").val("0");
		$("#purchaseTax").val("");
		$("#purchaseCess").val("");
		$("#moq").val("0");
		$("#isEditPurchase").val("");
		$("#editSKUId").val("");
		$("#editVendorId").val("");
		
		document.getElementById("myVendorSidenav").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:582px;bottom:-145px;";

		document.getElementById("main3").style.width = "70%";
	}
	function openSKUDetails(skuid, id) {
		$(".formValidation").remove();
		$("#isEdit").val("");
		document.getElementById('skuId').readOnly = true;
		
		$("#skuId").val("");
		$("#model").val("");
		$("#manufacture").val("");
		$("#variationType").val("");
		$("#variationValue").val("");
		$("#itemUnit").val("");
		$("#salePrice").val("");
		$("#saleTax").val("");
		$("#saleCess").val("");
		openNavItem();
		if(id) {
			
			obj = {};
			
			obj.key = id;
			obj.name = skuid;
			
			$.ajax({
				type : "POST",
				url : "manage-invoice-get-sku-details",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						$("#skudiv").show(); 
						$("#isEdit").val(response.body.isEdit);
						$("#skuId").val(response.body.sku);
						$("#model").val(response.body.model);
						$("#manufacture").val(response.body.manufacture);
						$("#variationType").val(response.body.variationType);
						$("#variationValue").val(response.body.variationValue);
						$("#itemUnit").val(response.body.unit);
						$("#salePrice").val(response.body.salePrice);
						$("#saleTax").val(response.body.saleTax);
						$("#saleCess").val(response.body.saleCess);
					}
				}, error : function(data) {
					console.log(data)
				}
			});
		}
	}
	
	
	function addBrand() {
		var obj = {};
		obj.brandId = $("#brandId").val();
		obj.brandName = $("#brandName").val();
		obj.brandDesc = $("#brandDesc").val();
		var validation = true;

		if (obj.brandName == null || obj.brandName == "") {
			validation = validationUpdated("Brand Name Required", "brandName");
		}
		
		if (validation) {
			$(".formValidation").remove();
			$.ajax({
				type : "POST",
				url : "manage-invoice-add-brand",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "Success") {
						$("#messageParagraph").text(
								"Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$('#brandModal').modal('hide');
						getBrandList();
					}
				},
				error : function(data) {
				}
			})
		}
	}	
</script>
</head>

<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">

						<div class="d-flex justify-content-between" id="reqTable"
							style="display: none;">

							<div class="col-md-4 btn-hs" id="total">
								<div class="font-design" id="totalCandidate">
									Invoice LIST (<span></span>)
								</div>
							</div>

							<div class="col-md-4 btn-hs" id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

							<div class="col-md-4 buttonsec btn-hs" id="btndiv">
								<button class="download-btn" id=dwnld
									onclick="downloadDetails()">Download</button>
								<button onclick="add()" class="new-btn" id="add">New</button>
								<button onclick="deleteGRN()" class="delete-btn" id="delete">delete</button>
								<button onclick="approveGrnReceipt()" class="approve-btn"
									id="approveGrnReceipt">approve</button>
								<button class="approve-btn" id="qaRequest"
									onclick="showQaRequestModal()">QA Request</button>

							</div>
						</div>
						<input type="hidden" id="sessionOrganization1"
							th:value="${session.ORGANIZATION}" /> <input type="hidden"
							id="sessionId" th:value="${userId}" /> <input type="hidden"
							id="sessionName" th:value="${userName}" /> <input type="hidden"
							id="hrRole" th:value="${hrRole}" /> <input type="hidden"
							id="sessionRole" th:value="${userRole}" /> <input type="hidden"
							id=cancelModalBtn() " adRole" th:value="${adRole}" />

						<div id="myGrid" style="height: 500px; width: 100%;"
							class="ag-theme-alpine"></div>
						<div class="collapse" id="addData">
							<div class="innerstickybg" id="headingItem">
								<div class="row">

									<div class="col-md-3">
										GRN ID: <span id="invoiceheadId"></span>
									</div>
									<div class="col-md-6">
										<div id="statusDiv">
											<!-- <div class="hr4"></div>
											<div class="main-div">
												<div class="section2">
													<div id="createdDiv" class="green-box">
														<div class="green-box-heading">CREATED</div>
														<div class="date" id="createdDate"></div>
													</div>
												</div>
												<div class="section3">
													<div id="activeDiv" class="green-box">
														<div class="green-box-heading">ACTIVE</div>
														<div class="date" id="activeDate"></div>
													</div>
												</div>
												<div class="section4">
													<div id="completeDiv" class="grey-box">
														<div class="green-box-heading">COMPLETE</div>
														<div class="date" id="completeDate"></div>
													</div>
												</div>


											</div> -->
										</div>
									</div>
									<div class="col-md-3" align="right">
										<button class="cancel-btn" id="Cancel" onClick="Cancel()">Cancel</button>
										<button class="approve-btn" id="save" onclick="save()">Save</button>
									</div>
								</div>
							</div>



							<div class="row innersticky_contentgap" id="mainPage">
								<input type="hidden" id="InvoiceId"><input type="hidden"
									id="purchaseOrderId">

								<div class="col-lg-3">

									<div class="form-group">
										<div class="autocomplete" style="width: 100%;">
											<label>Vendor Name</label> <input type="text" id="vendorName"
												placeholder="Vendor Name" class="form-control"
												onkeyup='getVendorList()'><input type="hidden"
												id="vendorId"> <input type="hidden" id="custGSTNo">
											<input type="hidden" id="taxType">
										</div>
										<div id="suggesstion-box1_" class="sugg-cls"></div>

									</div>
									<div class="row" id=addre>
										<div class="col-md-6">
											<span class="billtxt" id="billingAdd">Billing Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd1" onclick="addnewAddress()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>


											</address>
											<div class="preserve-wrap1">
												<span id='con'></span><br> <span id='bstate'></span><br>
												<span id='bcity'></span><br> <span id='bstreet1'></span><br>
												<span id='bstreet2'></span><br> <span id='bzipcode'></span><br>
												<span id='bphone'></span><br> <span id='bfax'></span><br>
											</div>
										</div>
										<div class="col-md-6">
											<span class="billtxt" id="shippingAdd">Shipping
												Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd" onclick="addnewAddress1()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>
											</address>
											<div class="preserve-wrap1">
												<span id='con1'></span><br> <span id='bstate1'></span><br>
												<span id='bcity1'></span><br> <span id='bstreet11'></span><br>
												<span id='bstreet21'></span><br> <span id='bzipcode1'></span><br>
												<span id='bphone1'></span><br> <span id='bfax1'></span><br>

											</div>
										</div>
									</div>

								</div>


								<div class="col-lg-3">
									<div class="form-group">
										<label>Purchase Order Id</label><input type="text" id="poId"
											class="form-control" readonly>
									</div>
								</div>

								<div class="col-lg-3">
									<div class="form-group">
										<label>GRN Id#</label><input type="text"
											id="invoiceReferenceId" class="form-control" readonly>
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Project</label>
										<div class="select">
											<select id="project">
												<option value="">--Select--</option>
												<option th:each="c:${ProjectList}" th:value='${c.key}'
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>
								</div>

								<!-- <div class="col-lg-3">
									<label>Date</label> <input type="text" id="invoiceDate"
										class="form-control" readonly>
								</div> -->

								<div class="col-lg-3">
									<div class="form-group calendar_box">
										<label>GRN-Receipt Date</label> <input type="text"
											id="invoiceDate" class="form-control"
											th:attr="onkeyup=|formatDate('purchaseDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="toDateCalendarInvoice"></i>
									</div>
								</div>

								<div class="col-lg-3">
									<div class="form-group calendar_box">
										<label>Due Date</label> <input type="text" id="qutValidDate"
											class="form-control"
											th:attr="onkeyup=|formatDate('qutValidDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar" id="toDateCalendar"></i>
									</div>
								</div>
								<!-- 	<div class="col-lg-3">
									<div class="form-group">
										<label>Payment Term</label>
										<div class="select">
											<select id="paymentTermId" onblur="removeValid(event)">
												<option value="">Select</option>
												<option th:each="c,iter:${PaytermList}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>

								</div> -->

								<div class="col-lg-3">
									<div class="form-group">
										<label>Payment Term(Days)</label> <input type="text"
											id="paymentTermId" onkeyup="checkNumeric('paymentTermId');"
											class="form-control">
									</div>
								</div>
								<!-- 		<div class="col-lg-3" id="challan_no">
									<div class="form-group">
										<label>Challan No</label><input type="text" id="invoiceNo"
											placeholder="Invoice No" class="form-control"
											onblur="removeValid(event)">
									</div>
								</div>

								<div class="col-lg-3" id="challan_dt">
									<div class="form-group calendar_box">
										<label>Challan Date</label> <input type="text"
											id="exptdeliveryDate" class="form-control"
											onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('exptdeliveryDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="toDateCalendarDelivery"></i>
									</div>
								</div> -->


								<div class="col-lg-3">
									<div class="form-group">
										<label>Mode Of Transport</label>
										<div class="select">
											<select id="carrierId" onblur="removeValid(event)">
												<option value="">Select</option>
												<option th:each="c,iter:${CarrierLists}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>

								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Transporter Id</label><input type="text"
											id="transporterId" class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Transporter Name</label><input type="text"
											id="transporterName" class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Delivery Vehicle No</label><input type="text"
											id="vehicleNo" class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Driver Name</label><input type="text" id="driverName"
											class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Driver Mobile</label><input type="text"
											id="driverMobile" class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>E-Way Billing No</label><input type="text"
											id="eWayBillingNo" class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Reference</label><input type="text" id="reference"
											placeholder="Reference" class="form-control">
									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">

										<label>Shipping Details</label>
										<div class="row mrtop" id="shippingDetails">
											<div class="col-md-5">
												<div class="radio-align">
													<span><input type="radio" id="orgDetails" value="0"
														checked name="checkbox" onclick="openModal(0)"></span> <label
														class="lbl">Organization</label>
												</div>
											</div>
											<div class="col-md-4">
												<div class="radio-align">
													<span><input type="radio" id="custDetails" value="1"
														name="checkbox" onclick="openModal(1)"></span> <label
														class="lbl">Other</label>
												</div>
											</div>
										</div>


										<div class="row">
											<div class="col-lg-12" id="organatioModal">

												<div class="form-group">
													<div class="autocomplete" style="width: 100%;">
														<label>Organization Name</label> <input type="text"
															id="organizationName" placeholder="Organization Name"
															class="form-control" readonly>

													</div>


												</div>
											</div>
											<div class="col-lg-12" id="customerModal">

												<div class="form-group">
													<div class="autocomplete" style="width: 100%;">
														<label>Other Details</label>
														<textarea id="customerName" class="form-control"></textarea>

													</div>


												</div>
											</div>
										</div>



									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Receiving Document Type</label>
										<div class="select">
											<select id="receivingDocType" onchange="receivingDocType()"
												onblur="removeValid(event)">
												<option value="">Select</option>
												<option value="Delivery Challan">Delivery Challan</option>
												<option value="Tax Invoice">Tax Invoice</option>
												<option value="Verbal">Verbal</option>

											</select>
										</div>
									</div>
								</div>

								<div class="col-lg-3" id="noDiv">
									<div class="form-group">
										<label>Challan/Invoice No</label><input type="text"
											id="challanNum" class="form-control">
									</div>
								</div>

								<div class="col-lg-3" id="dateDiv">
									<div class="form-group calendar_box">
										<label>Challan/Invoice Date</label> <input type="text"
											id="challanDate" class="form-control"
											th:attr="onkeyup=|formatDate('challanDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="challanDateCalendar"></i>
									</div>
								</div>


								<div class="col-lg-9">
									<div class="form-group">
										<label>Notes</label>
										<textarea id="qutDescription" class="mt-2 form-controls"> </textarea>

									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label></label><input type="hidden" id="gatePassNo"
											class="form-control">
									</div>
								</div>


							</div>



							<div id="main_content">
								<div class="accordion-item mt-4" id="accordionExample">
									<h2 class="accordion-header" id="headingOne">
										<button class="accordion-button" type="button"
											data-bs-toggle="collapse" data-bs-target="#collapseOne"
											aria-expanded="false" aria-controls="collapseOne">
											Item Details</button>
									</h2>

									<div id="collapseOne" class="accordion-collapse collapse show"
										aria-labelledby="headingOne"
										data-bs-parent="#accordionExample">
										<div class="accordion-body">

											<div class="row">

												<div class="col-md-4 btn-hs1">
													<div class="font-design"></div>
												</div>
												<div class="col-md-8 butttonsec">

													<button class="new-btn" id="newItem" onclick="openNav()">NEW</button>
													<button class="delete-btn" id="delete1"
														onclick="deleteItem()">Delete</button>
													<button class="new-btn" id="addMoreDetails"
														onclick="openNav1()">Receiving Details</button>
													<button class="new-btn" id="pVarification"
														onclick="pVarification()">Physical Verification</button>
												</div>
											</div>
											<div id="item" style="width: 100%; height: 200px;"
												class="ag-theme-alpine"></div>


										</div>

									</div>
								</div>

								<div id="mySidenav" class="sidenav">
									<div class="slidebox">
										<div class="row">
											<div class="chartbtnsec">
												<div align="right">
													<button class="cancel-btn" onclick="closeNav()">CANCEL</button>
													<button class="approve-btn" id="saveTableData"
														onclick="saveTableData()" value=0>SAVE</button>
												</div>
											</div>

											<!-- <div class="col-lg-6" id="skuDiv">
												<div class="form-group">
													<label>Stock Keeping Unit</label> <input type="text"
														id="sku" class="form-control" disabled="true">
														<div id="suggesstion-box_" class="sugg-cls"></div>
												</div>
											</div> -->
											<input type="hidden" id="sku"> <input type="hidden"
												id="qaTestStatus"> <input type="hidden"
												id="varifyStatus">
											<div class="col-lg-12" id="browseBtnDiv">
												<div class="form-group">
													<button id="browseBtn" class="browse-btn">Browse</button>
												</div>
											</div>
											<div class="col-lg-12" id="itemNameDiv">
												<div class="form-group">
													<div class="autocomplete">
														<input type="hidden" id="editProduct"> <input
															type="hidden" id="itemId"> <label>Item
															Name</label> <input type="text" id="itemName"
															class="form-control" onkeyup='getItemQutotationList()'>
													</div>
													<div id="suggesstion-box_" class="sugg-cls"></div>
												</div>
											</div>

											<div class="col-lg-6" id="hsnCodeDiv">
												<div class="form-group">
													<div class="autocomplete" style="width: auto">
														<label>HSN Code </label> <input type="text" id="hsnCode"
															class="form-control" onkeyup='getItemQutotationList()'>
													</div>
													<div id="suggesstion-boxx_" class="sugg-cls"></div>
												</div>
											</div>
											<div class="col-lg-6" id="unitDiv">
												<div class="form-group">
													<label>Unit</label>
													<div class="select">
														<select id="unit" onblur="removeValid(event)">
															<option value="">Select</option>
															<option th:each="c,iter:${unitList}" th:value="${c.key}"
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>Model/Size</label> <input type="text"
														class="form-control transparenttxtbox" id="modelSize">
												</div>
											</div>
											<div class="col-lg-6" id="quantityDiv">
												<div class="form-group">
													<label>Quantity</label> <input type="text" id="quantity"
														class="form-control" onkeyup="calculateLineTotal();">
												</div>
											</div>
											<div class="col-lg-6" id="unitPriceDiv">
												<div class="form-group">
													<label>Unit Price</label><input type="text" id="unitPrice"
														class="form-control" onkeyup="calculateLineTotal();">
												</div>
											</div>


											<div class="col-lg-6" id="discountDiv">
												<div class="form-group">
													<label>Discount</label>
													<div class="d-flex">
														<input type="text" id="discount" class="form-control"
															onkeyup="calculateLineTotal();">
														<div class="select" style="width: 60px;">
															<select id="discountAmount" class="form-control"
																onkeyup="calculateLineTotal();">
																<option value="0" selected>%</option>
																<option value="1">₹</option>
															</select>
														</div>

													</div>
												</div>
											</div>

											<div class="col-lg-6" id="gstRateDiv">
												<div class="form-group">
													<label>GST Rate</label><input type="text" id="gstRate"
														class="form-control">
												</div>
											</div>

											<div class="col-lg-6" id="lineTotalDiv">
												<div class="form-group">
													<label>Line Total</label> <input type="text" id="lineTotal"
														class="form-control">
												</div>
											</div>
											<div class="col-lg-6" id="pendingQuantityDiv">
												<div class="form-group">
													<label>Pending Quantity</label> <input type="text"
														id="pendingQuantity" class="form-control">
												</div>
											</div>
											<div class="col-lg-6" id="receivingQuantityDiv">
												<div class="form-group">
													<label>Receiving Quantity</label><input type="text"
														id="receivingQuantity" class="form-control"
														onkeyup="checkforQty('receivingQuantity')">

												</div>
											</div>

											<div class="col-lg-6" id="receivedQuantityDiv">
												<div class="form-group">
													<label>Received Quantity</label> <input type="text"
														id="receivedQuantity" class="form-control">
												</div>
											</div>

											<div class="col-lg-6" id="challanNo">
												<div class="form-group">
													<label>Challan No</label><input type="text" id="challan_no"
														class="form-control" onblur="removeValid(event)">
												</div>
											</div>

											<div class="col-lg-6" id="challanDt">
												<div class="form-group calendar_box">
													<label>Challan Date</label> <input type="text"
														id="challan_dt" class="form-control"
														onblur="removeValid(event)"
														th:attr="onkeyup=|formatDate('challan_dt','${session.DATEFORMAT_JS}')|">
													<i class="ti-calendar picker_calendar"
														id="toDateCalendarDelivery"></i>
												</div>
											</div>

											<div class="col-lg-12" id="descriptionDiv">
												<div class="form-group">
													<label>Description</label>
													<textarea id="description" class="mt-2 form-controls"> </textarea>

												</div>
											</div>
										</div>
									</div>
								</div>

							</div>


							<div class="row" id=gstCalS>
								<div class="col-lg-7">


									<!--accordion start-->
									<div class="accordion-item mt-4" id="accordionExample2">
										<div class="accordion-item" id="documentDetails">
											<h2 class="accordion-header" id="headingTwoo"
												onclick="closeNav()">

												<button class="accordion-button collapsed" type="button"
													data-bs-toggle="collapse" data-bs-target="#collapseTwoo"
													aria-expanded="false" aria-controls="collapseTwoo">
													Attach Invoice File</button>

											</h2>
											<div id="collapseTwoo" class="accordion-collapse collapse"
												aria-labelledby="headingTwoo"
												data-bs-parent="#accordionExample">
												<div class="accordion-body">


													<div class="row">
														<div class="col-md-4 btn-hs1">
															<div class="font-design"></div>
														</div>
														<div class="col-md-8 butttonsec">
															<!--   <button class="download-btn" onclick="rfqCSV()">Download</button> -->
															<button class="new-btn" id="saveAttachmentBtn"
																onclick="checkEmpty();">Add Document</button>

														</div>
													</div>

													<table id="docTbl" cellspacing="7" cellpadding="7">
														<thead>
															<tr class="tr_clone">
																<!-- <th align="center"></th> -->

																<th width="320">Document Name</th>
																<th width="380">Attachment</th>


															</tr>
														</thead>
														<tbody id="doctbodyData">
															<tr>
																<td style="display: none" align="center" class="pdb-24"><input
																	class="checkCls" type="checkbox" id="check2"><label
																	for="check2"></label></td>
																<td style="display: none"><div class="form-group">


																		<select class="form-control documentclss" id="docid_0"
																			onblur="removeValid(event);">
																			<option value="">--Select--</option>
																			<option th:each="c,iter:${documentTypeList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div></td>
																<td><div class="form-group">
																		<input type="text" value=""
																			class="form-control docNoclss"
																			onblur="checkForDuplicateEntry(event)" id="docnoid_">
																	</div></td>

																<td>
																	<div class="control-group position-r">
																		<label class="custom-file-upload" for="uploadDoc_0"
																			id="uploadFor_0"> <i id="clickImg_0"
																			class="ti-plus"></i>
																		</label>
																		<div class="controls">

																			<input type="file" class="document" id="uploadDoc_0"
																				name="userImage" accept="image/*"
																				onchange="saveMultiFile(event)" />

																		</div>
																	</div> <input type="hidden" id="uploadHidden_0"
																	class="uploadHidCls">
																	<div id="uploadedBillDiv_0" align="center"
																		class="uploadedBillCls"></div>
																	<div id="imageName_0" class="imageName"></div>
																	<div id="dltImage_0"></div>
																</td>

															</tr>


														</tbody>
													</table>

												</div>
											</div>
										</div>
									</div>
									<!--accordion end-->



									<div class="form-group">
										<label style="margin-bottom: 10px;">Terms & Conditions</label>
										<textarea id="terms" class="mt-2 form-controls"
											style="height: 129px;"> </textarea>

									</div>


								</div>
								<div class="col-lg-5 mt-4" id="subtotalDiv">
									<table style="width: 100%">
										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Sub Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="subTotal" class="form-control"
																readonly>
														</div>
													</div>
												</div>
											</th>

										</tr>
										<tr class="tbl-box" id="sgstTR">
											<th>
												<div class="row">
													<div class="col-lg-4">SGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qSGST" class="form-control"
																readonly> <input type=hidden id="itemIgst">
														</div>
													</div>
												</div>
											</th>

										</tr>

										<tr id="cgstTR">
											<th>

												<div class="row">
													<div class="col-lg-4">CGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qCGST" class="form-control"
																readonly> <input type=hidden id="itemSgst">
														</div>
													</div>
												</div>
											</th>

										</tr>

										<tr class="tbl-box" id="igstTR">
											<th>
												<div class="row">
													<div class="col-lg-4">IGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qIGST" class="form-control"
																readonly> <input type=hidden id="itemCgst">
														</div>
													</div>
												</div>
											</th>
										</tr>

										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Adjustment:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="adjustment" class="form-control"
																onkeyup="calculateAdjustment();" value='0' readonly>
														</div>
													</div>
												</div>

											</th>

										</tr>
										<tr>
											<th>
												<div class="row" id="tcsDiv">
													<div class="col-lg-4">TCS:</div>
													<div class="col-lg-5">
														<div class="form-group">
															<input type="text" class="form-control" id="tcsName"
																placeholder="TCS" autocomplete="off"
																onkeyup="getTCSList(); tcsBlank()" readonly> <input
																type="hidden" id="tcsId" value='0' readonly>
														</div>
														<input type=hidden id="tcsValue">
														<div id="suggesstion-box3_" class="sugg-cls"></div>
													</div>

													<div class="col-lg-3">
														<div class="form-group">
															<input type="text" class="form-control" id="tcsAmount"
																onkeyup="getTCSList();" readonly> <input
																type="hidden" id="tcsId">
														</div>
													</div>
												</div>

											</th>

										</tr>

										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Grand Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="grandTotal" class="form-control"
																readonly>
														</div>
													</div>
												</div>

											</th>

										</tr>



									</table>


									<!-- <div class="col-md-12">
										<div class="form-group">
											<label>TCS</label> <input type="text"
												class="form-control" id="tcsName"
												placeholder="TCS" onkeyup="getTCSList();">
											<input type="hidden" id="tcsId">
										</div>
										<div id="suggesstion-box3_" class="sugg-cls"></div>
									</div> -->
								</div>
							</div>


							<!-- <div class="row innersticky_contentgap">
								<div class="col-lg-8">
									<div class="form-group">
										<label style="margin-bottom: 10px;">Terms & Conditions</label>
										<textarea id="terms" class="mt-4"> </textarea>

									</div>
								</div>
							</div> -->



						</div>




					</div>

					<!-- delete modal start -->
					<div id="deleteQuot" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- delete item start	 -->
					<div id="deleteProduct" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalProductBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteProductOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="myModal">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">Select Product</h4>
									<button type="button" class="close cp" data-dismiss="modal"
										onclick="closeModal1()">&times;</button>
								</div>

								<!-- Modal body -->
								<div class="modal-body modal-cat">
									<div class="row">

										<div class="col-md-6" df="0"
											style="height: 300px; overflow-y: scroll;">
											<table id="basic">
												<tbody id="productCategoryCBDiv"></tbody>
											</table>


										</div>
										<div class="col-md-6" id="productCategorySelectDiv" df="0"
											style="border-left: 1px solid #ccc;">
											<div>
												<div class="productlist">Select Product</div>
												<div id="select_product"></div>
												<input type="hidden" id="itemNameTemp" /> <input
													type="hidden" id="hsnCodeTemp" /> <input type="hidden"
													id="itemNameTemp" /> <input type="hidden" id="itemIdTemp" />
												<input type="hidden" id="brandNameTemp" /> <input
													type="hidden" id="brandIdTemp" /> <input type="hidden"
													id="skuTemp" /> <input type="hidden" id="hsnCodeTemp" />
												<input type="hidden" id="unitTemp" /> <input type="hidden"
													id="gstRateTemp" /> <input type="hidden"
													id="prodCatIdTemp" /> <input type="hidden"
													id="prodCatNameTemp" />
											</div>
										</div>
									</div>
								</div>

								<!-- Modal footer -->
								<div class="modal-footer">
									<div class="chartbtnsec">
										<button class="approve-btn" onclick="selectProductVal()">SELECT</button>
										<button class="cancel-btn" data-dismiss="modal"
											onclick="closeModal1()">CANCEL</button>
									</div>
								</div>

							</div>
						</div>
					</div>



					<div class="modal fade" id="manageTCsModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<!-- <div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div> -->
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="tcsInfo">
										<div class="card-title">
											<h4>Manage TCS</h4>
										</div>
										<div class="row">
											<input type="hidden" id="tcsId">

											<!-- <div class="col-md-4">
															<div class="form-group">
																<label>Nature Of Collection</label>
																<div class="select">
																	<select id="collection" onchange="getStateDetails1()">
																		<option th:value="NULL">Select Country</option>
																		<option th:each="c,iter:${countryList}"
																			th:value="${c.key}" th:text="${c.name}"></option>
																	</select>
																</div>
															</div>
														</div> -->

											<div class="col-md-4">
												<div class="form-group">
													<label>Nature Of Collection</label>
													<div class="select">
														<select class="form-control" id="collection">
															<option th:value=null>--Select--</option>
															<option th:each="c:${collectionList}" th:value="${c.key}"
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Rate(%)</label> <input type="text"
														class="form-control" id="rateId" placeholder="Rate(%)">
												</div>
											</div>



											<div class="col-md-4">
												<div class="form-group">
													<input type="hidden" id="collectionId"> <label>Tax
														Name</label> <input type="text" class="form-control" id="taxName"
														placeholder="Tax Name">
												</div>
											</div>
										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="canceltcs"
													onclick="tcscancelBtn()">CANCEL</button>
												<button class="btn1" id="saveTcs" onclick="addtcsInfo1()">SAVE</button>

											</div>
										</div>
									</div>


								</div>
							</div>
						</div>
					</div>

					<div id="deleteAttachment" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="closeDeleteConfirm()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
									<input type="hidden" id="dltValue">
								</div>
								<div class="modal-footer justify-content-center">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="closeDeleteConfirm()">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deletAttachmentRow()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="myModal1">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">GRN RETURN LIST</h4>
									<button type="button" class="close cp" data-dismiss="modal"
										onclick="cancelGrnVal()">&times;</button>
								</div>

								<!-- Modal body -->
								<div class="modal-body">
									<div class="row">
										<div class="col-md-4">
											<div class="form-group">
												<input type="hidden" id="invoiceId"> <input
													type="hidden" id="itemId"> <label>Item Name</label>
												<input type="text" class="form-control" id="rtnitemName"
													placeholder="Item Name" readonly>
											</div>
										</div>
										<div class="col-md-4">
											<div class="form-group">
												<label>Quantity</label> <input type="text"
													class="form-control" id="totalQty" readonly>
											</div>
										</div>
										<div class="col-md-4">
											<div class="form-group">
												<label>Unit</label> <input type="text" class="form-control"
													id="rtnUnit" readonly>
											</div>
										</div>
										<div class="col-md-4">
											<div class="form-group">
												<label>Returned Quantity</label> <input type="text"
													class="form-control" id="returnedQty" readonly>
											</div>
										</div>
										<div class="col-md-4">
											<div class="form-group">
												<label>Return Quantity</label> <input type="text"
													class="form-control" id="rtnQty">
											</div>
										</div>
										<div class="col-md-4">
											<div class="form-group">
												<label>Description</label>
												<textarea class="form-control" id="rtndesc">
													</textarea>
											</div>
										</div>
									</div>
								</div>

								<!-- Modal footer -->
								<div class="modal-footer">
									<div class="chartbtnsec">
										<button class="approve-btn" onclick="saveReturnNote()">CREATE
											RETURN</button>
										<button class="cancel-btn" data-dismiss="modal"
											onclick="cancelGrnVal()">CANCEL</button>
									</div>
								</div>

							</div>
						</div>
					</div>
					<div class="modal fade" id="addAddressModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header flex-column"></div>
								<!-- 	Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="billingInfo">
										<div class="card-title">
											<h4>Billing Address</h4>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="countryb" onchange="getStateDetailsb()">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="statesb">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														id="cityb" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														class="form-control" id="street1b" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														class="form-control" id="street2b" placeholder="Street 2">
												</div>
											</div>



											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCodeb" placeholder="Zip Code"
														maxlength="6">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														class="form-control" id="phoneb" placeholder="Phone"
														onkeyup="check1('phoneb')" maxLength="10">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														id="faxb" placeholder="Fax">
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="cancel" onclick="cancelBtn()">CANCEL</button>
												<button class="btn1" id="save" onclick="addCustomerInfo2()">SAVE</button>

											</div>
										</div>
									</div>



								</div>
							</div>
						</div>
					</div>

					<input type="hidden" id="approveStatus" />
					<div class="modal fade" id="addAddressModel1">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<div class="modal-header flex-column"></div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingInfo">
										<div class="card-title">
											<h4>Shipping Address</h4>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="country1s" onchange="getStateDetailss()">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="states1s">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														id="city1s" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														class="form-control" id="street11s" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														class="form-control" id="street21s" placeholder="Street 2">
												</div>
											</div>



											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCode1s" maxlength="6"
														placeholder="Zip Code">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														class="form-control" id="phone1s" placeholder="Phone"
														onkeyup="check1('phone1s')" maxLength="10">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														id="fax1s" placeholder="Fax">
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="cancel"
													onclick="cancelBtn23()">CANCEL</button>
												<button class="btn1" id="save" onclick="addCustomerInfo1()">SAVE</button>

											</div>
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>
					<!-- approve modal start -->

					<div id="approveGrnReceiptModal" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to approve this estimate receipt</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelApproveModalBtn();">No</button>
									<button type="button" class="approve-btn"
										onclick="approveOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div>
					<div id="qaRequestModal" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to request QA?</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelQaRequestModal();">No</button>
									<button type="button" class="approve-btn" onclick="qaRequest()">Yes</button>
								</div>
							</div>
						</div>
					</div>

					<div id="deleteSKU" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalSKUDtls();">Cancel</button>
									<button type="button" class="delete-btn" onclick="deleteskud()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<div id="deleteSKUPrd" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalSKUPrdDtls()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -15px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalSKUPrdDtls();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deletepurchase()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model start@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
					<div class="modal fade" id="addItemModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content1">


								<div class="modal-body">

									<div class="maincontentsec">
										<div class="content_padding">
											<div id="newId">
												<div class="row" id="reqTable">
													<div class="d-flex justify-content-between">
														<div class="btn-hs col-md-4" id="total">
															<div class="font-design" id="totalReq">
																Product List (<span></span>)
															</div>
														</div>

														<div class="col-md-4  btn-hs" id="searchRowDiv1">
															<div class="input-style">
																<input type="text" placeholder="Search.." name="search"
																	class="searchboxinput" onkeyup="cancelBar12()"
																	oninput="onQuickFilterChanged12()" id="quickFilter12"
																	autocomplete="off">
																<div class="searchicon">
																	<a href="javascript:void(0)"><span
																		style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
																		id="closeKey"
																		onclick="gridOptions12.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
																		class="close_i"><i class="ti-close srchicon"></i></span></a><a
																		href="javascript:void(0)"><i
																		class="ti-search srchicon"></i></a>
																</div>
															</div>
														</div>
														<div class=" col-md-4 butttonsec btn-hs" id="btndiv">
															<!-- <button class="upload-btn">Upload</button> -->
															<button class="download-btn" onclick="totalProductCSV();">Download</button>
															<button class="delete-btn" onclick="deleteProduct();"
																id="deleteproduct1">DELETE</button>
															<button class="new-btn" id="newBtn1"
																onclick="profileSelect()">NEW</button>
														</div>
													</div>
												</div>
												<div id="myGrid1" style="width: 100%; height: 500px;"
													class="ag-theme-alpine"></div>
											</div>




											<div id="profile" class="collapse">
												<div class="row">
													<div class="col-md-6 btn-hs"></div>
													<div class="col-md-12">
														Product ID: <span id="productheadId"></span>
													</div>
													<div class="col-md-12" align="right">

														<button class="cancel-btn" onclick="profilecancelbtn()"
															id="profilecancelbtn">Cancel</button>
														<button class="approve-btn" id="productSave">Save</button>
													</div>
													<div class="col-md-4">
														<div class="demo">
															<div class="item">
																<div class="clearfix" style="max-width: 360px">
																	<div class="hvrbox">
																		<input type="hidden" id="fileedit" /> <img
																			src="../assets/images/noimage.jpg" id="imgemp"
																			alt="Location" class="hvrbox-layer_bottom img-fluid">

																		<div class="hvrbox-layer_top">
																			<div class="hvrbox-text">
																				<!-- <span><i class="fa fa-pencil-square-o"></i></span> -->
																				<input type="file" id="fileUpload"
																					onchange="saveFile();" /> <span><label
																					for="fileUpload"><i class="fa fa-camera"
																						style="cursor: pointer; font-size: 16px;"></i> <!-- <i class="fa fa-pencil-square-o"></i> --></label></span>
																				<span><i class="fa fa-trash red"
																					onclick="deleteFile();"></i></span>
																			</div>
																		</div>
																	</div>

																</div>
															</div>

														</div>
													</div>
													<div class="col-md-8">
														<div class="row">
															<div class="col-md-12">
																<input type="hidden" id="productId"> <input
																	type="text" name="code" value="" id="productName"
																	maxLength="50" placeholder="Product Name"
																	class="form-control_big">

															</div>
														</div>
														<div class="row">
															<div class="col-lg-3">
																<div class="form-group">
																	<label>Brand</label>
																	<div class="select">
																		<select id="itemBrand">
																			<option value="">Select</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-1">
																<div class="form-group">
																	<label class="custom-file-upload3" for="uploadDoc34_0"
																		style="margin-top: 18px;" onclick="addNewBrand()">
																		<i class="ti-plus"></i> Add
																	</label>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>Mode</label>
																	<div class="select">
																		<select class="" id="mode"
																			onblur="removeValid(event);">
																			<option value="">Select</option>
																			<option th:each="c,iter:${modeList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div>
																</div>
															</div>
															<div class="col-md-2">
																<div class="form-group" style="margin-top: 28px;">
																	<input type="checkbox" name="isActive"
																		style="margin-top: 2px;" id="prodStatus" value="1">
																	<label>Active</label>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>HSN/SAC</label> <input type="text" value=""
																		placeholder="HSN/SAC" class="form-control"
																		id="hsnCodeProduct" onkeyup="check1('hsnCode')"
																		maxLength="8" onblur="removeValid(event);">
																</div>
															</div>
														</div>
														<label></label>
														<div class="row">
															<div class="col-md-3">
																<button class="approve-btn modalbtn" id="categoryBtn">Select
																	Category</button>
																<input type="hidden" id="prCategoryId"> <input
																	type="hidden" id="tempCategoryId"> <input
																	type="hidden" id="prLevelId">
															</div>
															<div class="col-md-9 catdiv">
																<div class="breadcrumb" id="catDesc"></div>
															</div>
														</div>
													</div>
												</div>
												<div class="col-md-12" align="right">
													<button class="approve-btn" onclick="next()" id="next">Next</button>
												</div>

												<div id="main3">
													<div class="accordion mt-4" id="accordionExample23">

														<div class="accordion-item mt-4">
															<h2 class="accordion-header" id="headingOne1">
																<!-- 	onclick="closeAllNav()"> -->
																<button class="accordion-button collapsed" type="button"
																	data-bs-toggle="collapse"
																	data-bs-target="#collapseOne1" aria-expanded="false"
																	aria-controls="collapseOne1">Product Details</button>

															</h2>
															<div id="collapseOne1"
																class="accordion-collapse collapse mt-4"
																aria-labelledby="headingOne1"
																data-bs-parent="accordionExample23">
																<div class="accordion-body">

																	<div id="mySidenavItem" class="sidenav">
																		<div class="slidebox" style="margin: 0px !important;">
																			<div class="row">
																				<div class="col-md-10">
																					<div class="edit">
																						Product Id: <span id="skuPrdId"></span>
																					</div>
																				</div>
																				<div class="col-md-2">
																					<div class="arrow">
																						<a href="javascript:void(0)" class="closebtn"
																							onclick="closeNavSku()"><i
																							class="ti-arrow-right"></i></a>
																					</div>
																				</div>
																			</div>
																			<div class="chartbtnsec">
																				<div align="right">
																					<button class="cancel-btn" onclick="closeNavSku()">CANCEL</button>

																					<button class="approve-btn" id="saveSKUData">SAVE</button>
																				</div>
																			</div>
																			<div class="clearfix"></div>
																			<input type="hidden" id="isEdit">
																			<div class="row">

																				<div class="col-lg-12" id="skudiv">
																					<div class="form-group">
																						<label>SKU</label> <input type="text" value=""
																							placeholder="" class="form-control" id="skuId"
																							onblur="removeValid(event);" maxLength="8">
																					</div>
																				</div>
																				<div class="col-lg-12">
																					<div class="form-group">
																						<label>Model</label> <input type="text" value=""
																							placeholder="" class="form-control" id="model"
																							onblur="removeValid(event);">
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<div class="form-group">
																						<label>Manufacture Item</label> <input type="text"
																							value="" placeholder="" class="form-control"
																							id="manufacture" onblur="removeValid(event);">
																					</div>
																				</div>

																			</div>

																			<div class="row">
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>Variation Type</label>
																						<div class="select">
																							<select class="" id="variationType"
																								onblur="removeValid(event);">
																								<option value="">Select</option>
																								<option th:each="c,iter:${variationTypeList}"
																									th:value="${c.key}" th:text="${c.name}"></option>
																							</select>
																						</div>

																					</div>
																				</div>
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>Variation Value</label> <input type="text"
																							value="" onblur="removeValid(event);"
																							placeholder="" class="form-control"
																							id="variationValue">
																					</div>
																				</div>

																			</div>

																			<div class="row">
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>UOM</label>
																						<div class="select">
																							<select class="" id="itemUnit"
																								onblur="removeValid(event);">
																								<option value="">Select</option>
																								<option th:each="c,iter:${unitList}"
																									th:value="${c.key}" th:text="${c.name}"></option>
																							</select>
																						</div>
																					</div>
																				</div>
																				<div class="col-md-6">
																					<div class="form-group">
																						<label>Unit Sale Price</label> <input type="text"
																							value="" onclick="salaryBack(event)"
																							onblur="removeValid(event);salaryCheck(event)"
																							placeholder="" class="form-control"
																							id="salePrice">
																					</div>
																				</div>
																			</div>
																		</div>
																	</div>


																	<div id="myVendorSidenav" class="sidenav">
																		<div class="slidebox">
																			<div class="row">
																				<div class="col-md-10">
																					<div class="edit">
																						Product Id: <span id="skuPurchasePrdId"></span>
																					</div>
																				</div>
																				<div class="col-md-2">
																					<div class="arrow">
																						<a href="javascript:void(0)" class="closebtn"
																							onclick="closeVendor()"><i
																							class="ti-arrow-right"></i></a>
																					</div>
																				</div>
																			</div>
																			<div class="chartbtnsec">
																				<div align="right">
																					<button class="cancel-btn" onclick="closeVendor()">CANCEL</button>
																					<!-- <button class="btn3">DELETE</button> -->
																					<button class="approve-btn" id="savePurchaseDtls">SAVE</button>
																				</div>
																			</div>
																			<div class="clearfix"></div>

																			<div class="row">
																				<div class="col-lg-12">
																					<div class="form-group">
																						<label>SKU</label>
																						<div class="select">
																							<input type="hidden" id="isEditPurchase">
																							<input type="hidden" id="editSKUId"> <input
																								type="hidden" id="editVendorId"> <select
																								id="skuPurchase" onblur="removeValid(event);">
																								<option value="">Select</option>
																							</select>
																						</div>
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-lg-6">
																					<div class="form-group">
																						<span class="slide-span">Variation Type: </span><span
																							id="variantTypeSpan" class="slide-span-text"></span>
																					</div>
																				</div>
																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<div class="form-group">
																						<span class="slide-span">Variation Value: </span><span
																							id="variantValueSpan" class="slide-span-text"></span>
																					</div>
																				</div>

																			</div>
																			<div class="row">
																				<div class="col-md-12">
																					<div class="form-group">
																						<span class="slide-span">Variation Unit: </span><span
																							id="variantUnitSpan" class="slide-span-text"></span>
																					</div>
																				</div>

																			</div>

																			<div class="row">
																				<!-- 						<div class="col-md-12">
																					<div class="form-group">
																						<label>Vendor</label>
																						<div class="select">
																							<select id="itemVendorId" class=""
																								onblur="removeValid(event);">
																								<option value="">Select</option>
																								<option th:each="c,iter:${vendorList}"
																									th:value="${c.key}" th:text="${c.name}"></option>
																							</select>
																						</div>

																					</div>
																				</div> -->

																				<div class="col-lg-12">
																					<div class="form-group">
																						<label>Vendor</label>
																						<div class="select">
																							<select id="itemVendorId">
																								<option value="">Select</option>
																							</select>
																						</div>
																					</div>
																				</div>
																			</div>
																			<input type="hidden" id="purchasePrice">
																			<div class="row">
																				<!-- 	<div class="col-md-6">
																		<div class="form-group">
																			<label>Unit Purchase Price</label> <input type="text"
																				value="" placeholder="" class="form-control"
																				id="purchasePrice"
																				onblur="removeValid(event);salaryCheck(event)"
																				onclick="salaryBack(event)">
																		</div>
																	</div> -->




																				<div class="col-md-12">
																					<div class="form-group">
																						<label>MOQ</label> <input type="text" value=""
																							placeholder="" class="form-control" id="moq"
																							onblur="removeValid(event);">
																					</div>
																				</div>

																			</div>
																		</div>
																	</div>

																	<div class="row">
																		<div class="col-md-4 btn-hs1">
																			<div class="font-design"></div>
																		</div>
																		<div class="col-md-8 butttonsec">
																			<!-- <button class="upload-btn">Upload</button> -->
																			<button class="download-btn"
																				onclick="skuProductCSV();">Download</button>
																			<!-- <div class="buttongap"></div> -->
																			<button class="delete-btn" data-toggle="modal"
																				id="deletess" data-target="#delete"
																				onclick="deleteskuDtls()">DELETE</button>
																			<button class="new-btn" id="newBtn2"
																				onclick="openNavItem()">NEW</button>
																		</div>

																	</div>
																	<div class="row">
																		<div class="col-md-12">
																			<div id="mySKUGrid"
																				style="width: 100%; height: 100px;"
																				class="ag-theme-alpine"></div>
																		</div>
																	</div>
																	<br>
																	<div class="row">
																		<div class="col-md-4 btn-hs1">
																			<div class="font-design"></div>
																		</div>
																		<div class="col-md-8 butttonsec">
																			<!-- <button class="upload-btn" id="uploads">Upload</button> -->
																			<button class="download-btn" id="downloads"
																				onclick="purchaseProductCSV();">Download</button>
																			<!-- 	<div class="buttongap"></div> -->
																			<button class="delete-btn" data-toggle="modal"
																				data-target="#delete" id="deletes"
																				onclick="deletepurchaseDtls()">DELETE</button>
																			<button class="new-btn" id="newBtn1"
																				onclick="openVendor()">NEW</button>
																		</div>
																	</div>
																	<div class="row">
																		<div class="col-md-12">
																			<div id="myPurchaseGrid"
																				style="width: 100%; height: 100px;"
																				class="ag-theme-alpine"></div>
																		</div>
																	</div>
																</div>
															</div>
														</div>

													</div>
												</div>

											</div>
										</div>
									</div>





								</div>
							</div>
						</div>

					</div>


					<div class="modal fade" id="addVendorModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal body -->
								<div class="modal-body">
									<div class="innerstickybg">
										<div class="d-flex justify-content-between" id="main">
											<div class="col-md-3" id="idDiv">
												Vendor ID: <span id="vendorId"></span>
											</div>
											<div>
												<span class="taskInfo">Vendor Information</span>
											</div>

										</div>
									</div>
									<div class="innercontent">
										<div class="row">


											<div class="col-lg-4">
												<div class="form-group">
													<label>Salutation</label>
													<div class="select">
														<select id="salutation" onblur="removeValid(event)">
															<option value="">Select</option>
															<option th:each="c,iter:${SalutationLists}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>

											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Name</label> <input type="text"
														class="form-control" id="vendorrName"
														placeholder="Vendor Name">
													<!-- 	onblur="showDisplay()" -->
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Company Name</label> <input type="text"
														class="form-control" id="companyName"
														placeholder="Company Name" onchange="showDisplay()">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Display Name</label> <input type="text"
														class="form-control" id="vendorDisplayName"
														placeholder="Vendor Display Name" disabled>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Category</label>
													<div class="select">
														<select id="vendorCategory" onblur="removeValid(event)">
															<option value="">Select</option>
															<option th:each="c,iter:${CategoryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>

											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Email</label> <input type="text"
														class="form-control" id="vendorEmail" placeholder="Email">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Phone</label> <input type="text"
														class="form-control" id="vendorPhone" placeholder="Phone"
														onkeyup="check1('vendorPhone')" maxLength="10">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Mobile</label> <input type="text"
														class="form-control" id="vendorMobile"
														placeholder="Mobile" onkeyup="check1('vendorMobile')"
														maxLength="10">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Skype</label> <input type="text"
														class="form-control" id="vendorSkype"
														placeholder="Vendor Skype">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Vendor Designation</label> <input type="text"
														class="form-control" id="vendorDesignation"
														placeholder="Vendor Designation">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Website</label> <input type="text"
														class="form-control" id="webSite" placeholder="Website">
												</div>
											</div>

										</div>


									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo"
												aria-expanded="true" aria-controls="collapseTwo">
												Other Details</button>
										</h2>
										<div id="collapseTwo" class="accordion-collapse collapse hide"
											aria-labelledby="headingTwo"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-md-4">
														<div class="form-group">
															<label>PAN</label> <input type="text"
																class="form-control" id="pan" placeholder="PAN">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Currency</label>
															<div class="select">
																<select id="currency">
																	<option value="">Select</option>
																	<option value="INR RUPPEE">INR RUPPEE</option>
																	<!-- <option value="AED-UAE Dirham">AED-UAE Dirham</option>
												    <option value="AUD-Australian Doller">AUD-Australian Dollar</option>
												    <option value="CAD-Canadian Doller">CAD-Canadian Dollar</option>
												    <option value="CNY-Yuan Renminbi">CNY-Yuan Renminbi</option>
												    <option value="EUR-Euro">EUR-Euro</option>
												    <option value="GBP-Pound Sterlin">GBP-Pound Sterlin</option>
												    <option value="JPY-Japanese Yen">JPY-Japanese Yen</option>
												    <option value="SAR-Saudi Riyal">SAR-Saudi Riyal</option>
												    <option value="USD-United State Doller">USD-United State Dollar</option>
												    <option value="ZAR-South Africa Rand">ZAR-South Africa Rand</option> -->
																</select>
															</div>
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Opening Balance</label> <input type="text"
																class="form-control" id="openingBalance"
																placeholder="Opening Balance">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Payment Terms</label>
															<div class="select">
																<select id="paymentTerms" onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option th:each="c,iter:${PaymentTermList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>

													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>TDS</label> <input type="text"
																class="form-control" id="tds" placeholder="TDS">
														</div>
													</div>



													<div class="col-md-4">
														<div class="form-group">
															<label>GST No.</label> <input type="text"
																class="form-control" id="gstNumber"
																placeholder="GST No.">
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>WhatsApp No.</label> <input type="text"
																class="form-control" id="whatsAppNo"
																placeholder="WhatsApp No">
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>TAN Number</label> <input type="text"
																class="form-control" id="tanNo" placeholder="TAN Number">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>FaceBook</label> <input type="text"
																class="form-control" id="faceBook"
																placeholder="FaceBook">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Twitter</label> <input type="text"
																class="form-control" id="twitter" placeholder="Twitter">
														</div>
													</div>


												</div>

											</div>
										</div>
									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
												aria-expanded="true" aria-controls="collapseTwo2">
												Billing Address Details</button>
										</h2>
										<div id="collapseTwo2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>Country</label>
															<div class="select">
																<select id="country" onchange="getStateDetails()">
																	<option th:value="NULL">Select Country</option>
																	<option th:each="c,iter:${countryList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>State</label>
															<div class="select">
																<select id="states">
																	<option th:value="NULL">Select State</option>
																	<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
																</select> <span class="focus"></span>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>City</label> <input type="text"
																class="form-control" id="city" placeholder="City">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Street 1</label> <input type="text"
																class="form-control" id="street1" placeholder="Street 1">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Street 2</label> <input type="text"
																class="form-control" id="street2" placeholder="Street 2">
														</div>
													</div>



													<div class="col-md-4">
														<div class="form-group">
															<label>Zip Code</label> <input type="text"
																class="form-control" id="zipCode" placeholder="Zip Code">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Phone</label> <input type="text"
																class="form-control" id="phone" placeholder="Phone"
																onkeyup="check1('phone')" maxLength="10">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Fax</label> <input type="text"
																class="form-control" id="fax" placeholder="Fax">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
												aria-expanded="true" aria-controls="collapseTwo2">
												Shipping Address Details</button>
											<div class="btnbill">
												<button class="btn btn-primarynew"
													onclick="copyAsBillingAdd()">Copy As Billing
													Address</button>
											</div>
										</h2>
										<div id="collapseTwo2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>Country</label>
															<div class="select">
																<select id="country1" onchange="getStateDetails1()">
																	<option th:value="NULL">Select Country</option>
																	<option th:each="c,iter:${countryList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>State</label>
															<div class="select">
																<select id="states1">
																	<option th:value="NULL">Select State</option>

																</select> <span class="focus"></span>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>City</label> <input type="text"
																class="form-control" id="city1" placeholder="City">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Street1</label> <input type="text"
																class="form-control" id="street11"
																placeholder="Street 1">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Street 2</label> <input type="text"
																class="form-control" id="street21"
																placeholder="Street 2">
														</div>
													</div>



													<div class="col-md-4">
														<div class="form-group">
															<label>Zip Code</label> <input type="text"
																class="form-control" id="zipCode1"
																placeholder="Zip Code">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Phone</label> <input type="text"
																class="form-control" id="phone1" placeholder="Phone"
																onkeyup="check1('phone1')" maxLength="10">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Fax</label> <input type="text"
																class="form-control" id="fax1" placeholder="Fax">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>

									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo3">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo3"
												aria-expanded="true" aria-controls="collapseTwo3">
												Contact Person Details</button>
										</h2>
										<div id="collapseTwo3"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo3"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Salutation</label>
															<div class="select">
																<select id="salutation1" onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option th:each="c,iter:${SalutationLists}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>

													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>First Name</label> <input type="text"
																class="form-control" id="firstName"
																placeholder="first Name">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Last Name</label> <input type="text"
																class="form-control" id="lastName"
																placeholder="last Name">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Email Address</label> <input type="text"
																class="form-control" id="emailAdd" placeholder="Email">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Mobile</label> <input type="text"
																class="form-control" id="mobile" placeholder="Mobile">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo4">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
												aria-expanded="true" aria-controls="collapseTwo4">
												Bank Details</button>
										</h2>
										<div id="collapseTwo4"
											class="accordion-collapse collapse hide"
											aria-labelledby="headingTwo4"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">


													<div class="col-md-4">
														<div class="form-group">
															<label>Beneficiary Name</label> <input type="text"
																class="form-control" id="beneficiaryName"
																placeholder="Beneficiary Name">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Bank Name</label> <input type="text"
																class="form-control" id="bankName"
																placeholder="Bank Name">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Account No</label> <input type="text"
																class="form-control" id="accountNo"
																placeholder="Account No">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Re-Enter Account No</label> <input type="text"
																class="form-control" id="reEnterAccountNo"
																placeholder="Re-Enter Account No">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>IFSC</label> <input type="text"
																class="form-control" id="ifsc" placeholder="IFSC">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>

									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo4">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
												aria-expanded="true" aria-controls="collapseTwo4">
												Remark Details</button>
										</h2>
										<div id="collapseTwo4"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo4"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-md-8">
														<div class="modal-inrheading">Remarks</div>
														<div class="position-text">
															<textarea rows="4" cols="100" id="remarks"
																onkeyup="textCount(event)"></textarea>
															<div id="charNumSN" class="txtcounter" align="right">

															</div>
														</div>
													</div>


												</div>

											</div>
										</div>
									</div>

									<div class="row mt-4">
										<div class="form-group">

											<button class="btn4" id="cancel" onclick="cancelBtn1()">CANCEL</button>
											<button class="btn1" id="save" onclick="addVendorInfo()">SAVE</button>

										</div>
									</div>

								</div>

							</div>

						</div>
					</div>

					<div class="modal fade" id="brandModal">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px; max-width: 600px">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<div class="modal-header"></div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingInfo">
										<div class="card-title">
											<h4>Add Brand Details</h4>
										</div>
										<div class="row">

											<div class="col-md-6">
												<div class="form-group">
													<label>Name</label> <input type="hidden" id="brandId">
													<input type="text" class="form-control transparenttxtbox"
														placeholder="" id="brandName" onblur="removeValid(event);">
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>Description</label>
													<textarea class="form-control" id="brandDesc"
														onblur="removeValid(event);"></textarea>
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="delete-btn" id="cancel"
													onclick="cancelBtn2()">CANCEL</button>
												<button class="btn1" id="save" onclick="addBrand()">SAVE</button>

											</div>
										</div>
									</div>



								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="viewPV">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p id="viewPVMsg"></p>
								</div>
								<div class="modal-footer justify-content-center">
									<button type="button" class="cancel-btn"
										data-bs-dismiss="modal" aria-hidden="true" onclick="NOPV()">No</button>
									<button type="button" class="btn1" onclick="YesPV()"
										data-bs-dismiss="modal" aria-hidden="true">Yes</button>
								</div>
							</div>
						</div>
					</div>

					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model end@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

					<div class="modal fade" id="myModall">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">Select Product Category</h4>
									<button type="button" class="close cp" onclick="closeModall();"
										data-dismiss="modal">&times;</button>
								</div>

								<!-- Modal body -->

								<div class="modal-body modal-cat">
									<div class="row">
										<table id="basicc">
											<tbody id="costCeneterCBDiv"></tbody>
										</table>
									</div>
								</div>

								<!-- Modal footer -->

								<div class="modal-footer">
									<button class="cancel-btn" data-dismiss="modal"
										onclick="closeModall();">Cancel</button>
									<button class="approve-btn" id="selectCategory">Select</button>
								</div>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
