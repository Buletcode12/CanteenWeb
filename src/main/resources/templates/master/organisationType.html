<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>

<script>
$(document).ready(function() {
	$('#leaveId1').hide();
	$('#new').show();
	$('#delete').attr('disabled', true);
	$('#delete1').attr('disabled', true);
	$('#approve').attr('disabled', true);
	$('#reject').attr('disabled', true);
 
	
	var dateFormat = localStorage.getItem("dateFormat");

	//Date fromatter for Apply Date 

	$("#toCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
	}).on("change", function() {
		$('#leaveApplyDate').val($(this).val());
	})

	$('#leaveApplyDate').blur(function() {
		$("#toCalendar").val($(this).val());
	})

	//Date fromatter for TO DATE 

	$("#toDateCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
	}).on("change", function() {
		$('#toDate').val($(this).val());
	})

	$('#toDate').blur(function() {
		$("#toDateCalendar").val($(this).val());
	})

	//Date fromatter for FROM DATE

	$("#fromDateCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
		//minDate:0,
	}).on("change", function() {
		$('#fromDate').val($(this).val());
	})

	$('#fromDate').blur(function() {
		$("#fromDateCalendar").val($(this).val());
	})
	
	//Date fromatter for Announcement DATE

	$("#announcementDateCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
		//minDate:0,
	}).on("change", function() {
		$('#dateAnnounce').val($(this).val());
	})

	$('#dateAnnounce').blur(function() {
		$("#announcementDateCalendar").val($(this).val());
	})
	
	
	//Leave policy   TO DATE 

	$("#toDateCalendar1").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
	}).on("change", function() {
		$('#leaveToDate').val($(this).val());
	})

	$('#leaveToDate').blur(function() {
		$("#toDateCalendar1").val($(this).val());
	})

	//Leave policy FROM DATE

	$("#fromDateCalendar1").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
		minDate:0,
	}).on("change", function() {
		$('#leaveFromDate').val($(this).val());
	})

	$('#leaveFromDate').blur(function() {
		$("#fromDateCalendar1").val($(this).val());
	})
	
	
	
	

	
	var data = [];
	gridOptions1.api.setRowData(data);
	agGrid.simpleHttpRequest({
		url : "leave-apply-edit"
	}).then(function(data) {
		var len = data.length;
		$('#totalReq1').find('span').html(len);

		gridOptions1.api.setRowData(data);

	});
	$("#myGrid2").show();

});
			function openNav3() {

				$('#orgName').val("");
				$('#status').val("");
				$('#orgId').val("");


				document.getElementById("mySidenav3").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:90px;";

				document.getElementById("main_content").style.width = "75%";
				}

				function closeNav3() {
				document.getElementById("mySidenav3").style.width = "0";
				document.getElementById("main_content").style.width = "100%";
				}
					
					/* -------------function for open side nav-------------------  */

					function openNav4() {
						$("#holidayId").val("");
						$("#holidayName").val("");
						$("#fromDate").val("");
						$("#toDate").val("");
						$("#totalHoliday").val("");
						document.getElementById("mySidenav4").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:350px;";
						document.getElementById("main_content").style.width = "75%";
						
					}

					/* ------------------function for closing side nav(side nav cancel button)-------------------- */

					function closeNav4() {

						document.getElementById("mySidenav4").style.width = "0";
						document.getElementById("main_content").style.width = "100%";
					}
					
					
					
					function openNav5() {

						$('#bankId').val("");
						$('#bankName').val("");
						$('#description').val("");
						$('#status').val("");


						document.getElementById("mySidenav5").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:90px;";

						document.getElementById("main_content").style.width = "75%";
						}

						function closeNav5() {
						document.getElementById("mySidenav5").style.width = "0";
						document.getElementById("main_content").style.width = "100%";
						}
						
						
						//Announcement Nav()
						function openNav6() {

							$('#dateAnnounce').val("");
							$('#ancdtlSub').val("");
							$('#ancdtlDetails').val("");
							$('#ancdtlURL').val("");
							$('#ancdtlStatus').val("");


							document.getElementById("mySidenav6").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:660px;";

							document.getElementById("main_content").style.width = "75%";
							}

							function closeNav6() {
							document.getElementById("mySidenav6").style.width = "0";
							document.getElementById("main_content").style.width = "100%";
							}
						
							//Leave Policy Nav()
						 	function openNav7() {

								$('#fromDate1').val("");
								$('#toDate1').val("");
								$('#policyDetails').val("");
								$('#leaveStatus').val("");
								


								document.getElementById("mySidenav7").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:355px;";

								document.getElementById("main_content").style.width = "75%";
								}

								function closeNav7() {
								document.getElementById("mySidenav7").style.width = "0";
								document.getElementById("main_content").style.width = "100%";
								}
					 
					
	
	
</script>

<script type="text/javascript">
$(document).ready(function() {
	
	var gridDiv1 = document.querySelector('#myGrid1');
	new agGrid.Grid(gridDiv1, gridOptions1);
	
	var gridDiv2 = document.querySelector('#myGrid2');
	new agGrid.Grid(gridDiv2, gridOptions2);
	
	var gridDiv3 = document.querySelector('#myGrid3');
	new agGrid.Grid(gridDiv3, gridOptions3);
	
	var gridDivanouncement = document.querySelector('#myGridanouncement');
	new agGrid.Grid(gridDivanouncement, gridOptionsanouncement);
	
	var gridDivleave1 = document.querySelector('#myGridLeave');
	new agGrid.Grid(gridDivleave1, gridOptionLeave);
	
	 
	
	
	
	agGrid.simpleHttpRequest({
		url : 'organisation-type-master-view'
		}).then(function(data) {
		if(!data3){
		data.push(data3);
		}
		gridOptions1.api.setRowData(data);
		});
	
	agGrid.simpleHttpRequest({
		url : 'organisation-type-holiday-master-view'
		}).then(function(data) {
		if(!data){
		data.push(data);
		}
		gridOptions2.api.setRowData(data);
		});
	
	agGrid.simpleHttpRequest({
		url : 'organisation-type-bank-master-view'
		}).then(function(data) {
		if(!data){
		data.push(data);
		}
		gridOptions3.api.setRowData(data);
		});
	
	
	agGrid.simpleHttpRequest({
				url : 'organisation-type-announcement-master-view'
				}).then(function(data) {
				if(!data){
				data.push(data);
				}
				gridOptionsanouncement.api.setRowData(data);
			
	});
	
	 agGrid.simpleHttpRequest({
		url : 'organisation-type-leave-master-view'
		}).then(function(data) {
		if(!data){
		data.push(data);
		}
		gridOptionLeave.api.setRowData(data);
		}); 
 
	
	$('.collapse').on('show.bs.collapse', function() {
		$(this).siblings('.panel-heading').addClass('active');
	});

	$('.collapse').on('hide.bs.collapse', function() {
		$(this).siblings('.panel-heading').removeClass('active');
	});

	
	/* selectbox */
	var x, i, j, l, ll, selElmnt, a, b, c;
	/*look for any elements with the class "custom-select":*/
	x = document.getElementsByClassName("selectbox");
	l = x.length;
	for (i = 0; i < l; i++) {
		selElmnt = x[i].getElementsByTagName("select")[0];
		ll = selElmnt.length;
		/*for each element, create a new DIV that will act as the selected item:*/
		a = document.createElement("DIV");
		a.setAttribute("class", "select-selected");
		a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
		x[i].appendChild(a);
		/*for each element, create a new DIV that will contain the option list:*/
		b = document.createElement("DIV");
		b.setAttribute("class", "select-items select-hide");
		for (j = 1; j < ll; j++) {
			/*for each option in the original select element,
			create a new DIV that will act as an option item:*/
			c = document.createElement("DIV");
			c.innerHTML = selElmnt.options[j].innerHTML;
			c
					.addEventListener(
							"click",
							function(e) {
								/*when an item is clicked, update the original select box,
								and the selected item:*/
								var y, i, k, s, h, sl, yl;
								s = this.parentNode.parentNode
										.getElementsByTagName("select")[0];
								sl = s.length;
								h = this.parentNode.previousSibling;
								for (i = 0; i < sl; i++) {
									if (s.options[i].innerHTML == this.innerHTML) {
										s.selectedIndex = i;
										h.innerHTML = this.innerHTML;
										y = this.parentNode
												.getElementsByClassName("same-as-selected");
										yl = y.length;
										for (k = 0; k < yl; k++) {
											y[k].removeAttribute("class");
										}
										this.setAttribute("class",
												"same-as-selected");
										break;
									}
								}
								h.click();
							});
			b.appendChild(c);
		}
		x[i].appendChild(b);
		a.addEventListener("click", function(e) {
			/*when the select box is clicked, close any other select boxes,
			and open/close the current select box:*/
			e.stopPropagation();
			closeAllSelect(this);
			this.nextSibling.classList.toggle("select-hide");
			this.classList.toggle("select-arrow-active");
		});
	}
	function closeAllSelect(elmnt) {
		/*a function that will close all select boxes in the document,
		except the current select box:*/
		var x, y, i, xl, yl, arrNo = [];
		x = document.getElementsByClassName("select-items");
		y = document.getElementsByClassName("select-selected");
		xl = x.length;
		yl = y.length;
		for (i = 0; i < yl; i++) {
			if (elmnt == y[i]) {
				arrNo.push(i)
			} else {
				y[i].classList.remove("select-arrow-active");
			}
		}
		for (i = 0; i < xl; i++) {
			if (arrNo.indexOf(i)) {
				x[i].classList.add("select-hide");
			}
		}
	}
});
	/*if the user clicks anywhere outside the select box,
	 then close all select boxes:*/
	document.addEventListener("click", closeAllSelect);
</script>
<script type="text/javascript">
var data6 = {};
function saveAnnouncementDetails() {
	closeNav6();
	data6.announcementId = $("#announcementId").val(); 
	data6.dateAnnounce = $("#dateAnnounce").val(); 
	data6.ancdtlSub = $("#ancdtlSub").val();
	data6.ancdtlDetails = $("#ancdtlDetails").val();
	data6.ancdtlURL = $("#ancdtlURL").val();
	data6.ancdtlStatus = $("#ancdtlStatus").val();  
console.log(data6);

$.ajax({
	type: "POST",
	url: "organisation-type-announcement-details-add",
	dataType: "json",
	contentType: "application/json",
	data: JSON.stringify(data6),
	success: function (response) {
		if (response.message == "Success") {
			agGrid.simpleHttpRequest({
				url : 'organisation-type-announcement-master-view'
			}).then(function(data) {
				gridOptionsanouncement.api.setRowData(data);
				});
				}
				},
			error : function(response) {
			console.log(response);
			}
			})
 
	}
	
	
	
	
	
	
	//Leave Policy
var data = {};
function saveLeavePolicy() {
	data.leavePolicyId = $("#leavePolicyId").val(); 
	data.leaveFromDate = $("#leaveFromDate").val(); 
	data.leaveToDate = $("#leaveToDate").val(); 
	data.leavePolicyStatus = $("#leavePolicyStatus").val();
	  console.log(data);

$.ajax({
	type: "POST",
	url: "organisation-type-leave-policy-add",
	dataType: "json",
	contentType: "application/json",
	data: JSON.stringify(data),
	success: function (response) {
		if (response.message == "Success") {
			closeNav7();
			agGrid.simpleHttpRequest({
			url : 'organisation-type-leave-master-view'
			}).then(function(data) {
				gridOptionLeave.api.setRowData(data);
		
		});
			  
				}
				},
			error : function(response) {
			console.log(response);
			}
			})
 
	}

	
	
	
	
	
	
	

var data3 = {};
function saveOrganisationType() {
	closeNav3();
	data3.orgId = $("#orgId").val(); 
	data3.orgName = $("#orgName").val();
	data3.status = $("#status").val();


	$.ajax({
		type: "POST",
		url: "organisation-type-master-add",
		dataType: "json",
		contentType: "application/json",
		data: JSON.stringify(data3),
		success: function (response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
					url : 'organisation-type-master-view'
					}).then(function(data) {
					gridOptions1.api.setRowData(data);
					});
					}
					},
				error : function(response) {
				console.log(response);
				}
				})
				}

var columnDefs3 = [

	{
	headerName : "ID",
	field : "orgId",
	
	},{
	headerName : "Name",
	field : "orgName",
	
	}, {
	headerName : "Status",
	field : "status",
	
	cellRenderer: function(params){
	if(params.data.status == "Active"){
	return '<div style="color:green">' + params.data.status + '</div>';
	} else{
	return '<div>' + params.data.status + '</div>';
	}
	}
	} ];

var gridOptions1 = {
	columnDefs: columnDefs3,
	defaultColDef: {
		sortable: true,
		filter: true,
		resizable: true,
		width: 210,
		height: 10
	},
	rowSelection: 'single',
	rowMultiSelectWithClick: true,
	onSelectionChanged: onSelectionOrgType

};
function onSelectionOrgType()
{
	closeNav3();
	closeNav4();
	closeNav5();
	openNav3();
var selectedNodes= gridOptions1.api.getSelectedNodes();
var selectedData= selectedNodes.map(node => node.data);

$('#orgId').val(selectedData.map(node => node.orgId));
$('#orgName').val(selectedData.map(node => node.orgName));


if(selectedData.map(node => node.status) == "Active"){
$('#status').val("Active");
} else{
$('#status').val("In Active");
}
}

function deleteOrganisationType(){
	closeNav3();
	var id = $('#orgId').val();

	$.ajax({
		type : "GET",
		url : "organisation-type-master-delete?id=" + id,
		dataType : "json",
		contentType : "application/json",
		success : function(response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
				url : 'organisation-type-master-view'
				}).then(function(data) {
				gridOptions1.api.setRowData(data);
			});
		}
	},
	error : function(response) {
	console.log(response);
	}
	})
	}

function saveOrgHolidayType() {

	closeNav4();
	
	var datas={};
	datas.holidayId = $("#holidayId").val(); 
	datas.holidayName = $("#holidayName").val(); 
	datas.fromDate = $("#fromDate").val();
	datas.toDate = $("#toDate").val();
	datas.totalHoliday = $("#totalHoliday").val();

console.log(datas)
	$.ajax({
		type: "POST",
		url: "organisation-type-holiday-master-add",
		dataType: "json",
		contentType: "application/json",
		data: JSON.stringify(datas),
		success: function (response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
					url : 'organisation-type-holiday-master-view'
					}).then(function(data) {
					gridOptions2.api.setRowData(data);
					});
					}
					},
				error : function(response) {
				console.log(response);
				}
				})
				}


var columnDefs4 = [
	{
		headerName : "Holiday ID",
		field : "holidayId",
		
		
		},
	
	{
		headerName : "Holiday Name",
		field : "holidayName",
		
		
		},
	{
	headerName : "From Date",
	field : "fromDate",

	},{
	headerName : "To Date",
	field : "toDate",

	type : "centerAligned"
	}, {
	headerName : "Total Holidays",
	field : "totalHoliday",
	
	
	} ];

var gridOptions2 = {
	columnDefs: columnDefs4,
	defaultColDef: {
		sortable: true,
		filter: true,
		resizable: true,
		width: 135,
		height: 79
	},
	rowSelection: 'single',
	rowMultiSelectWithClick: true,
	onSelectionChanged: onSelectionChangedRoom

};
function onSelectionChangedRoom()
{
	
	closeNav3();
	closeNav4();
	closeNav5();


openNav4();


var selectedNodes= gridOptions2.api.getSelectedNodes();
var selectedData= selectedNodes.map(node => node.data);
$('#holidayId').val(selectedData.map(node => node.holidayId));
$('#holidayName').val(selectedData.map(node => node.holidayName));
$('#fromDate').val(selectedData.map(node => node.fromDate));
$('#toDate').val(selectedData.map(node => node.toDate));
$('#totalHoliday').val(selectedData.map(node => node.totalHoliday));
}

function deleteHolidayType(){
	closeNav4();
	var id = $('#holidayId').val();

	$.ajax({
		type : "GET",
		url : "organisation-type-master-holiday-delete?id=" + id,
		dataType : "json",
		contentType : "application/json",
		success : function(response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
				url : 'organisation-type-holiday-master-view'
				}).then(function(data) {
				gridOptions2.api.setRowData(data);
			});
		}
	},
	error : function(response) {
	console.log(response);
	}
	})
	}
	
var data5 = {};
function saveBankDetailsType() {
	closeNav5();
	data5.bankId = $("#bankId").val(); 
	data5.bankName = $("#bankName").val();
	data5.description = $("#description").val();
	data5.bankStatus = $("#bankStatus").val();


	$.ajax({
		type: "POST",
		url: "organisation-type-bank-master-add",
		dataType: "json",
		contentType: "application/json",
		data: JSON.stringify(data5),
		success: function (response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
					url : 'organisation-type-bank-master-view'
					}).then(function(data) {
					gridOptions3.api.setRowData(data);
					});
					}
					},
				error : function(response) {
				console.log(response);
				}
				})
				}

var columnDefs5 = [

	{
	headerName : "ID",
	field : "bankId",
	
	},{
	headerName : "Bank Name",
	field : "bankName",
	
	},{
		headerName : "Bank Description",
		field : "description",
		
		}, {
	headerName : "Status",
	field : "bankStatus",
	
	cellRenderer: function(params){
	if(params.data.bankStatus == true){
	return '<div style="color:green">' + "Active"+ '</div>';
	} else{
	return '<div>' + "Inactive" + '</div>';
	}
	}
	} ];

var gridOptions3 = {
	columnDefs: columnDefs5,
	defaultColDef: {
		sortable: true,
		filter: true,
		resizable: true,
		width: 160,
		height: 10
	},
	rowSelection: 'single',
	rowMultiSelectWithClick: true,
	onSelectionChanged: onSelectionBank

};
function onSelectionBank()
{
	closeNav3();
	closeNav4();
	closeNav5();
	closeNav7();
    openNav5();
var selectedNodes= gridOptions3.api.getSelectedNodes();
var selectedData= selectedNodes.map(node => node.data);

$('#bankId').val(selectedData.map(node => node.bankId));
$('#bankName').val(selectedData.map(node => node.bankName));
$('#description').val(selectedData.map(node => node.description));
$('#bankStatus').val(selectedData.map(node => node.bankStatus));

}

function deleteBankDetailsType(){
	closeNav5();
	var id = $('#bankId').val();

	$.ajax({
		type : "GET",
		url : "organisation-type-bank-master-delete?id=" + id,
		dataType : "json",
		contentType : "application/json",
		success : function(response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
				url : 'organisation-type-bank-master-view'
				}).then(function(data) {
				gridOptions3.api.setRowData(data);
			});
		}
	},
	error : function(response) {
	console.log(response);
	}
	})
	}
	
/* ------------------function to calculate total leave days------------------ */

function dateChange() {
		var fromdate = $('#fromDate').val();
		var todate = $('#toDate').val();
		if (fromdate != '' && todate != '') {
				if (fromdate<=todate) {
					var fromdate1 = fromdate.split("-").reverse().join("-");
					var todate1 = todate.split("-").reverse().join("-");
					var date1 = new Date(fromdate1);
					var date2 = new Date(todate1);
					var diffDays = ((date2.getTime() - date1.getTime()) / (1000 * 60 * 60 * 24))+1;
					$('#totalHoliday').val(diffDays);
				} else {
					$('#dateModal').modal('show');
				}
		}
	}
function OrganisationTypeCSV() {
	   var dataset = [];
	   gridOptions1.api.forEachNodeAfterFilterAndSort(function(rowNode,
	   index) {
		   var item = rowNode.data;
		   item.orgId = item.orgName; 
	   dataset.push(item);
	   });
	   gridOptions1.api.exportDataAsCsv(dataset);
	   }
	   
function HolidayTypeCSV() {
	   var dataset = [];
	   gridOptions2.api.forEachNodeAfterFilterAndSort(function(rowNode,
	   index) {
		   var item = rowNode.data;
		   item.holidayId = item.holidayName; 
	   dataset.push(item);
	   });
	   gridOptions2.api.exportDataAsCsv(dataset);
	   }


	
function BankTypeCSV() {
	   var dataset = [];
	   gridOptions3.api.forEachNodeAfterFilterAndSort(function(rowNode,
	   index) {
		   var item = rowNode.data;
		   item.bankId = item.bankName; 
	   dataset.push(item);
	   });
	   gridOptions3.api.exportDataAsCsv(dataset);
	   }
	   
 function AnnouncementDetailsCSV() {
	   var dataset = [];
	   gridOptionsanouncement.api.forEachNodeAfterFilterAndSort(function(rowNode,
	   index) {
		   var item = rowNode.data;
		   item.f = item.createdByAnnouncement; 
	   dataset.push(item);
	   });
	   gridOptionsanouncement.api.exportDataAsCsv(dataset);
	   }
 
  function LeavePolicyCSV() {
	   var dataset = [];
	   gridOptionsleave.api.forEachNodeAfterFilterAndSort(function(rowNode,
	   index) {
		   var item = rowNode.data;
		   item.bankId = item.bankName; 
	   dataset.push(item);
	   });
	   gridOptionsleave.api.exportDataAsCsv(dataset);
	   }
 
 
function closeAllNav(){
	   closeNav3();
	   closeNav4();
	   closeNav5();
	   closeNav6();
	   closeNav7();
}

	   function add() {
			$("#doctbodyData").empty();
			$("#tab1").show();
			
			
		}
	   
	   function LeavePolicy() {
		   $("#leaveId1").show();
		   $("#accordionExample").hide();
		   
	   }
	   
	   
	   

</script>

<script type="text/javascript">

	
var columnDefsanouncement = [

	{
	headerName : "Date",
	field : "dateAnnounce",
	width: 100,
	
	},{
	headerName : "Sub",
	field : "ancdtlSub",
	width: 230,
	
	}, {
	headerName : "Details",
	field : "ancdtlDetails",
	width: 550,
	}, {
		headerName : "URL",
		field : "ancdtlURL",
		width: 300,
	}, {
		headerName : "Status",
		field : "ancdtlStatus",
		width: 100,
		cellRenderer: function(params){
		if(params.data.ancdtlStatus == "1"){
		return '<div style="color:green">' + params.data.ancdtlStatus + '</div>';
		} else{
		return '<div>' + params.data.ancdtlStatus + '</div>';
		}
		}
	} ];

var gridOptionsanouncement = {
	columnDefs: columnDefsanouncement,
	defaultColDef: {
		sortable: true,
		filter: true,
		resizable: true,
		width: 145,
		height: 10
	},
	rowSelection: 'single',
	rowMultiSelectWithClick: true,
	onSelectionChanged: onSelectionAnnouncement
};


var columnDefsleave = [
	{
		headerName : "Policy Id",
		field : "leavePolicyId",
		width: 120,
		}, {
	headerName : "From Date",
	field : "leaveFromDate",
	width: 130,
	
	},{
	headerName : "To Date",
	field : "leaveToDate",
	width: 130,
	
	}, {
	headerName : "Policy Details",
	field : "leavePolicyDtls",
	cellStyle : {
		textAlign : 'center'
	},
	cellRenderer : function(params) {
		var div = "";
		if (params.data.leavePolicyDtls) {
			div = div
					+ " "
					+ '<div class ="fa fa-file-pdf-o" style="cursor: pointer; color: red;" onclick=viewImage("'
					+ params.data.leavePolicyDtls + '")> </div>';
		}
		return div;
	},
	width: 130,
	}, {
		headerName : "Status",
		field : "leavePolicyStatus",
		width: 130,
		cellRenderer: function(params){
			if(params.data.leavePolicyStatus == "1"){
			return '<div style="color:green">' + "Active"+ '</div>';
			} else{
			return '<div>' + "Inactive" + '</div>';
			}
			}
	} ];

var gridOptionLeave = {
		columnDefs:columnDefsleave,
		defaultColDef: {
			sortable: true,
			filter: true,
			resizable: true,
			width: 145,
			height: 10
		},
		rowSelection: 'single',
		rowMultiSelectWithClick: true,
		onSelectionChanged: onSelectionLeavePolicy

	};
	function onSelectionLeavePolicy()
	{
		closeNav3();
		closeNav4();
		closeNav5();
		closeNav6();
	    openNav7();
	var selectedNodes= gridOptionLeave.api.getSelectedNodes();
	var selectedData= selectedNodes.map(node => node.data);
	$('#leavePolicyId').val(selectedData.map(node => node.leavePolicyId));
	$('#leaveFromDate').val(selectedData.map(node => node.leaveFromDate));
	$('#leaveToDate').val(selectedData.map(node => node.leaveToDate));
	$('#leavePolicyStatus').val(selectedData.map(node => node.leavePolicyStatus));
	var fileName=selectedData.map(node => node.leavePolicyDtls);
	if (fileName != null) {
 
		$("#imageName_0").html(fileName);
		var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-file-pdf-o" style="color: red" onclick=viewImage("'
			+ fileName + '")></i></a> </div>';
/* 		if (extension[1] == "jpg" || extension[1] == "png") {
			var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-picture-o" style="color: red" onclick=viewImage("'
				+ doc + '")></i></a> </div>';
		}else if (extension[1] == "pdf") {
			var LightImg = '<div class ="uploadicon position-l"><a class="example-image-link" target="_balnk"><i class="fa fa-file-pdf-o" style="color: red" onclick=viewImage("'
				+ doc + '")></i></a> </div>';
		} else {
			var LightImg = "<div class='uploadicon position-l'> </div>";
		} */

		$("#uploadedBillDiv_0").html(LightImg);
	}
	}
function getExtension(id){
	var ext=id.split(".");
	alert(ext)
	return ext;  
	
}
function onSelectionAnnouncement()
{
	closeNav3();
	closeNav4();
	closeNav5();
	closeNav6();
	closeNav7();
    openNav6();
var selectedNodes= gridOptionsanouncement.api.getSelectedNodes();

var selectedData= selectedNodes.map(node => node.data);

$('#announcementId').val(selectedData.map(node => node.announcementId));
$('#dateAnnounce').val(selectedData.map(node => node.dateAnnounce));
$('#ancdtlSub').val(selectedData.map(node => node.ancdtlSub));
$('#ancdtlDetails').val(selectedData.map(node => node.ancdtlDetails));
$('#ancdtlURL').val(selectedData.map(node => node.ancdtlURL));
$('#ancdtlStatus').val(selectedData.map(node => node.ancdtlStatus));
$('#createdByAnnouncement').val(selectedData.map(node => node.createdByAnnouncement));

}
function deleteAnnouncementDetails(){
	closeNav6();
	var id = $('#announcementId').val();

	$.ajax({
		type : "GET",
		url : "organisation-type-announcement-details-delete?id=" + id,
		dataType : "json",
		contentType : "application/json",
		success : function(response) {
			if (response.message == "Success") {
				agGrid.simpleHttpRequest({
				url : 'organisation-type-announcement-master-view'
				}).then(function(data) {
					gridOptionsanouncement.api.setRowData(data);
			});
		}
	},
	error : function(response) {
	console.log(response);
	}
	})
	}
	
	//Delete Leave Policy
	
	function deleteLeavePolicy(){
	var id = $('#leavePolicyId').val();

	$.ajax({
		type : "GET",
		url : "organisation-type-leave-policy-delete?id=" + id,
		dataType : "json",
		contentType : "application/json",
		success : function(response) {
			if (response.message == "Success") {
				closeNav7()
				agGrid.simpleHttpRequest({
				url : 'organisation-type-leave-master-view'
				}).then(function(data) {
					gridOptionLeave.api.setRowData(data);
			
			});
		}
	},
	error : function(response) {
	console.log(response);
	
	}
	})
	}
	
	/* save document file */
	function saveMultiFile(event) {

		var uFile = $(uploadDoc_0)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");
		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_0").html("");

		if (extension[1] == "jpg" || extension[1] == "png"|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		}else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o' style='color: red'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l'> </div>";
		}
		$("#uploadedBillDiv_0").html(LightImg);
		$("#imageName_0").html(fileName);
		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');
		$.ajax({
			type : "POST",
			url : "organisation-type-leave-policy-upload-file",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {

			},
			error : function(e) {

			}
		});
	}	
	function viewImage(id){
		window.open("/document/document/"+id,'_blank');
	}
</script>


</head>
<body>

	<div layout:fragment="content">
		<div class="content-wrap">
			<div class="container-fluid">
				<div class="maincontent">
					<div class="row">
						<div class="maincontentsec">
							<div class="content_padding">

								<div id="main_content">
									<div class="wrapper center-block">


										<div class="accordion" id="accordionExample">
											<div class="accordion-item">
												<h2 class="accordion-header" id="headingOne">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseOne"
														aria-expanded="true" aria-controls="collapseOne">
														Organization Type</button>
												</h2>
												<div id="collapseOne"
													class="accordion-collapse collapse show"
													aria-labelledby="headingOne"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">

														<input type="hidden" id="announcementId"> <input
															type="hidden" id="policyId">
														<div class="row">




															<div class="col-lg-6 col-md-6 col-sm-12 tablebox">
																<div class="reference_heading">OrganisationType</div>
																<div class="d-flex justify-content-between">
																	<div>
																		<div class="sml_plus"
																			onclick='closeNav3();closeNav4();closeNav5();closeNav6();closeNav7();openNav3()'>
																			<i class="ti-plus"></i>
																		</div>
																		<div class="sml_action">
																			<i class="ti-bolt-alt"></i>
																		</div>
																	</div>
																	<div>

																		<div class="sml_hide">
																			<i class="ti-download"
																				onclick="OrganisationTypeCSV()"></i>
																		</div>

																	</div>

																</div>
																<div class="box_reference">
																	<div id="myGrid1" style="width: 100%; height: 200px;"
																		class="ag-theme-alpine"></div>
																</div>
															</div>


															<div class="col-lg-6 col-md-6 col-sm-12 tablebox">
																<div class="reference_heading">Bank Details</div>
																<div class="d-flex justify-content-between">
																	<div>
																		<div class="sml_plus"
																			onclick='closeNav3();closeNav4();closeNav5();closeNav6();closeNav7();openNav5()'>
																			<i class="ti-plus"></i>
																		</div>
																		<div class="sml_action">
																			<i class="ti-bolt-alt"></i>
																		</div>
																	</div>
																	<div>

																		<div class="sml_hide">
																			<i class="ti-download" onclick="BankTypeCSV()"></i>
																		</div>

																	</div>

																</div>
																<div class="box_reference">
																	<div id="myGrid3" style="width: 100%; height: 200px;"
																		class="ag-theme-alpine"></div>
																</div>
															</div>



															<div class="col-lg-6 col-md-6 col-sm-12 tablebox">
																<div class="reference_heading">Public Holidays</div>
																<div class="d-flex justify-content-between">
																	<div>
																		<div class="sml_plus"
																			onclick='closeNav3();closeNav4();closeNav5();closeNav6();closeNav7();openNav4()'>
																			<i class="ti-plus"></i>
																		</div>
																		<div class="sml_action">
																			<i class="ti-bolt-alt"></i>
																		</div>
																	</div>
																	<div>

																		<div class="sml_hide">
																			<i class="ti-download" onclick="HolidayTypeCSV()"></i>
																		</div>

																	</div>

																</div>
																<div class="box_reference">
																	<div id="myGrid2" style="width: 100%; height: 200px;"
																		class="ag-theme-alpine"></div>
																</div>
															</div>
															<div class="col-lg-6 col-md-6 col-sm-12 tablebox">
																<div class="reference_heading">Leave Policy</div>
																<div class="d-flex justify-content-between">
																	<div>
																		<div class="sml_plus"
																			onclick='closeNav6();closeNav3();closeNav4();closeNav5();openNav7()'>
																			<i class="ti-plus"></i>
																		</div>
																		<div class="sml_action">
																			<i class="ti-bolt-alt"></i>
																		</div>
																	</div>
																	<div>

																		<div class="sml_hide">
																			<i class="ti-download" onclick="LeavePolicyCSV()"></i>
																		</div>

																	</div>

																</div>
																<div class="box_reference">
																	<div id="myGridLeave"
																		style="width: 100%; height: 200px;"
																		class="ag-theme-alpine"></div>
																</div>
															</div>

														</div>


														<div class="row">
															<div class="col-lg-12 col-md-12  tablebox">
																<div class="reference_heading">Announcement
																	Details</div>
																<div class="d-flex justify-content-between">
																	<div>
																		<div class="sml_plus"
																			onclick='closeNav6();closeNav3();closeNav4();closeNav5();closeNav7();openNav6()'>
																			<i class="ti-plus"></i>
																		</div>
																		<div class="sml_action">
																			<i class="ti-bolt-alt"></i>
																		</div>
																	</div>
																	<div>

																		<div class="sml_hide">
																			<i class="ti-download"
																				onclick="AnnouncementDetailsCSV()"></i>
																		</div>

																	</div>

																</div>
																<div class="box_reference">
																	<div id="myGridanouncement"
																		style="width: 100%; height: 250px;"
																		class="ag-theme-alpine"></div>
																</div>
															</div>
														</div>

													</div>
												</div>


												<!-- ///////////////START///////////////// -->



												<div id="mySidenav3" class="sidenav">
													<div class="slidebox">
														<div class="row">

															<div class="col-md-9">
																<div class="edit">OrganisationType</div>
															</div>
															<div class="col-md-3">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav3()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
															<div class="chartbtnsec1">
																<div align="right">
																	<button class="btn4" onclick="closeNav3()">CANCEL</button>
																	<button class="btn3" onclick="deleteOrganisationType()">DELETE</button>
																	<button class="btn1" onclick="saveOrganisationType()">SAVE</button>
																</div>
															</div>
															<div class="clearfix"></div>

															<div class="col-md-12">
																<div class="form-group">
																	<input type="hidden"
																		class="form-control transparenttxtbox"
																		placeholder="Id" id="organisationId"> <input
																		type="hidden" id="orgId">
																</div>
															</div>



															<div class="col-md-12">
																<div class="form-group">
																	<label>Name</label> <input type="text"
																		class="form-control transparenttxtbox"
																		placeholder="Name" id="orgName">
																</div>
															</div>


															<div class="col-md-12">
																<div class="form-group">
																	<label>Status</label>
																	<div class="select">
																		<select id="status" class="form-control">
																			<option value="">Select</option>
																			<option value="Active">Active</option>
																			<option value="Inactive">Inactive</option>
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>


												<div id="mySidenav4" class="sidenav">
													<div class="slidebox">
														<div class="row">

															<div class="col-md-9">
																<div class="edit">Organisation Holidays</div>
															</div>
															<div class="col-md-3">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav4()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
															<div class="chartbtnsec1">
																<div align="right">
																	<button class="btn4" onclick="closeNav4()">CANCEL</button>
																	<button class="btn3" onclick="deleteHolidayType()">DELETE</button>
																	<button class="btn1" onclick="saveOrgHolidayType()">SAVE</button>
																</div>
															</div>
															<div class="clearfix"></div>

															<div class="col-md-12">
																<div class="form-group">
																	<input type="hidden"
																		class="form-control transparenttxtbox"
																		placeholder="Id" id="holidayId"> <input
																		type="hidden" id="holidayId">
																</div>
															</div>

															<div class="col-md-12">
																<div class="form-group">
																	<label>Holiday Name</label> <input type="text"
																		class="form-control transparenttxtbox" placeholder=""
																		id="holidayName">
																</div>
															</div>


															<div class="col-md-12">
																<div class="form-group calendar_box">
																	<label>From Date</label> <input type="text"
																		id="fromDate" autocomplete="off" class="form-control"
																		th:attr="onkeyup=|formatDate('fromDate','${session.DATEFORMAT_JS}')|">
																	<i class="ti-calendar picker_calendar"
																		id="fromDateCalendar" onchange="dateChange();"></i>
																</div>
															</div>


															<div class="col-md-12">
																<div class="form-group calendar_box">
																	<label>To Date</label> <input type="text" id="toDate"
																		autocomplete="off" class="form-control"
																		th:attr="onkeyup=|formatDate('toDate','${session.DATEFORMAT_JS}')|">
																	<i class="ti-calendar picker_calendar"
																		id="toDateCalendar" onchange="dateChange();"></i>
																</div>
															</div>

															<div class="col-md-12">
																<div class="form-group">
																	<label>Total Holiday Days</label> <input type="text"
																		class="form-control" id="totalHoliday"
																		autocomplete="off" readonly />
																	<!--  <input type="text"
													class="form-control" autocomplete="off" id="totalHoliday"> -->
																</div>
															</div>


														</div>
													</div>
												</div>




												<div id="mySidenav5" class="sidenav">
													<div class="slidebox">
														<div class="row">

															<div class="col-md-9">
																<div class="edit">Bank Details</div>
															</div>
															<div class="col-md-3">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav5()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
															<div class="chartbtnsec1">
																<div align="right">
																	<button class="btn4" onclick="closeNav5()">CANCEL</button>
																	<button class="btn3" onclick="deleteBankDetailsType()">DELETE</button>
																	<button class="btn1" onclick="saveBankDetailsType()">SAVE</button>
																</div>
															</div>
															<div class="clearfix"></div>

															<div class="col-md-12">
																<div class="form-group">
																	<input type="hidden"
																		class="form-control transparenttxtbox"
																		placeholder="Id" id="bankId"> <input
																		type="hidden" id="bankId">
																</div>
															</div>



															<div class="col-md-12">
																<div class="form-group">
																	<label>Name</label> <input type="text"
																		class="form-control transparenttxtbox"
																		placeholder="Bank Name" id="bankName">
																</div>
															</div>

															<div class="col-md-12">
																<div class="form-group">
																	<label>Description</label> <input type="text"
																		class="form-control transparenttxtbox"
																		placeholder="Description" id="description">

																</div>
															</div>


															<div class="col-md-12">
																<div class="form-group">
																	<label>Status</label>
																	<div class="select">
																		<select id="bankStatus" class="form-control">
																			<option value="">Select</option>
																			<option value="true">Active</option>
																			<option value="false">Inactive</option>
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>


												<div id="mySidenav6" class="sidenav">
													<div class="slidebox">
														<div class="row">

															<div class="col-md-9">
																<div class="edit">Announcement Details</div>
															</div>
															<div class="col-md-3">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav6()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
															<div class="chartbtnsec1">
																<div align="right">
																	<button class="btn4" onclick="closeNav6()">CANCEL</button>
																	<button class="btn3"
																		onclick="deleteAnnouncementDetails()">DELETE</button>
																	<button class="btn1"
																		onclick="saveAnnouncementDetails()">SAVE</button>
																</div>
															</div>

															<div class="clearfix"></div>


															<div class="col-md-12">
																<div class="form-group calendar_box">
																	<label>Date</label> <input type="text"
																		id="dateAnnounce" class="form-control"
																		onblur="removeValid(event)"
																		th:attr="onkeyup=|formatDate('dateAnnounce','${session.DATEFORMAT_JS}')|"
																		readonly> <i
																		class="ti-calendar picker_calendar"
																		id="announcementDateCalendar"></i>

																</div>
															</div>




															<div class="col-md-12">
																<div class="form-group">
																	<label>Sub</label> <input type="text"
																		class="form-control transparenttxtbox"
																		placeholder="Sub" id="ancdtlSub">
																</div>
															</div>

															<div class="col-md-12">
																<div class="form-group">
																	<label>Details</label>
																	<textarea id="ancdtlDetails" name="Details" rows="4"
																		cols="50"></textarea>

																</div>
															</div>

															<div class="col-md-12">
																<div class="form-group">
																	<label>URL</label> <input type="text"
																		class="form-control transparenttxtbox"
																		placeholder="URL" id="ancdtlURL">
																</div>
															</div>




															<div class="col-md-12">
																<div class="form-group">
																	<label>Status</label>
																	<div class="select">
																		<select id="ancdtlStatus" class="form-control">
																			<option value="">Select</option>
																			<option value="1">Active</option>
																			<option value="0">Inactive</option>
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>

												<div id="mySidenav7" class="sidenav">
													<div class="slidebox">
														<div class="row">

															<div class="col-md-9">
																<div class="edit">Leave Policy</div>
															</div>
															<div class="col-md-3">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav5()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
															<div class="chartbtnsec1">
																<div align="right">
																	<button type="button" class="btn4"
																		onclick="closeNav7()">Cancel</button>
																	<button class="btn3" onclick="deleteLeavePolicy()">DELETE</button>
																	<button class="btn1" onclick="saveLeavePolicy()">Save</button>
																</div>
															</div>
															<div class="clearfix"></div>

															<input type="hidden" id="leavePolicyId">



															<div class="col-md-12">
																<div class="form-group calendar_box">
																	<label>From Date</label> <input type="text"
																		id="leaveFromDate" autocomplete="off"
																		class="form-control"
																		th:attr="onkeyup=|formatDate('leaveFromDate','${session.DATEFORMAT_JS}')|">
																	<i class="ti-calendar picker_calendar"
																		id="fromDateCalendar1" onchange="dateChange();"></i>
																</div>
															</div>

															<div class="col-md-12">
																<div class="form-group calendar_box">
																	<label>To Date</label> <input type="text"
																		id="leaveToDate" autocomplete="off"
																		class="form-control"
																		th:attr="onkeyup=|formatDate('leaveToDate','${session.DATEFORMAT_JS}')|">
																	<i class="ti-calendar picker_calendar"
																		id="toDateCalendar1" onchange="dateChange();"></i>
																</div>
															</div>
															<div class="col-md-12">
																<label style="margin-bottom: 10px;">Upload Leave
																	Policy</label>

																<div class="control-group position-r">
																	<label class="custom-file-upload" for="uploadDoc_0"
																		style="margin-top: 18px;"> <i class="ti-plus"></i>
																	</label>
																	<div class="controls">
																		<input type="file" class="document" id="uploadDoc_0"
																			name="userImage" onchange="saveMultiFile(event)" />
																	</div>
																</div>
																<input type="hidden" id="uploadHidden_0"
																	class="uploadHidCls">
																<div id="uploadedBillDiv_0" align="center"
																	class="uploadedBillCls" style="margin-top: 10px;"></div>
																<div id="imageName_0" class="imageName"
																	style="margin-top: 10px;"></div>
															</div>

															<div class="col-md-12">
																<div class="form-group">
																	<label>Status</label>
																	<div class="select">
																		<select id="leavePolicyStatus" class="form-control">
																			<option value="">Select</option>
																			<option value="1">Active</option>
																			<option value="0">Inactive</option>
																		</select>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>

											</div>
										</div>



									</div>
								</div>
							</div>
						</div>





					</div>
				</div>
			</div>
		</div>
	</div>
</html>