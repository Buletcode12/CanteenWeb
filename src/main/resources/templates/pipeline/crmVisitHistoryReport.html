<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
   <script src="https://code.highcharts.com/highcharts.js"></script> 
      <script src="https://code.highcharts.com/modules/no-data-to-display.js"></script> 
      <script src="https://code.highcharts.com/modules/exporting.js"></script> 
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/no-data-to-display.js"></script>

<script type="text/javascript">
	$(document).ready(function() {
		$("#graphview").hide();
		$("#fdiv").show();
		$("#pDiv").hide();
		$("#fdDiv").hide();
		$("#tdDiv").hide();
		$("#myGrid").show();
		$("#download").show();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadExecutive").hide();
		$("#downloadDMaker").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").show();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
		$("#searchDiv7").hide();

		$("#customerDetails").addClass("active");

		var gridDiv = document.querySelector('#myGrid');
		new agGrid.Grid(gridDiv, gridOptions);

		viewCustomerReports();

		$("#myGridDMaker").hide();
		var gridDiv = document.querySelector('#myGridDMaker');
		new agGrid.Grid(gridDiv, gridOptionsDMaker);

		$("#myGridVisit").hide();
		var gridDiv = document.querySelector('#myGridVisit');
		new agGrid.Grid(gridDiv, gridOptionsVisit);

		$("#myGridVisitPlan").hide();
		var gridDiv = document.querySelector('#myGridVisitPlan');
		new agGrid.Grid(gridDiv, gridOptionsVisitPlan);

		$("#myGridExecutive").hide();
		var gridDiv = document.querySelector('#myGridExecutive');
		new agGrid.Grid(gridDiv, gridOptionsExecutive);

		$("#myGridDeal").hide();
		var gridDiv = document.querySelector('#myGridDeal');
		new agGrid.Grid(gridDiv, gridOptionsDeal);

		$("#myGridBilling").hide();
		var gridDiv = document.querySelector('#myGridBilling');
		new agGrid.Grid(gridDiv, gridOptionsBilling);

		var date = (new Date()).toISOString().split('T')[0];
		var newToDate = changeDateFormat(date);
		var newFromDate = changeFromDateFormat(date);
		$("#fromDate").val(newToDate);
		$("#toDate").val(newToDate);
		$("#date").val(newToDate);
		$("#date1").val(newToDate);

		var dateFormat = localStorage.getItem("dateFormat");
		$("#fromDateCalender").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#fromDate').val($(this).val());
		})

		$('#fromDate').blur(function() {
			$("#fromDateCalender").val($(this).val());
		})

		$("#toDateCalendar").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#toDate').val($(this).val());
		})

		$('#toDate').blur(function() {
			$("#toDateCalendar").val($(this).val());
		})
		$("#dateDateCalender").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#date').val($(this).val());
		})

		$('#date').blur(function() {
			$("#dateDateCalender").val($(this).val());
		})
		$("#date1DateCalender").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#date1').val($(this).val());
		})

		$('#date1').blur(function() {
			$("#date1DateCalender").val($(this).val());
		})
	})
	function setFromToDate() {
		$("#messageParagraph").text(
				"Please choose to date greater than or equal to from date ");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
		var date = (new Date()).toISOString().split('T')[0];
		var newToDate = changeDateFormat(date);
		var newFromDate = changeFromDateFormat(date);
		$("#fromDate").val(newToDate);
		$("#toDate").val(newToDate);
	}
	function changeDateFormat(inputDate) { // expects Y-m-d
		var splitDate = inputDate.split('-');
		if (splitDate.count == 0) {
			return null;
		}

		var year = splitDate[0];
		var month = splitDate[1];
		var day = splitDate[2];

		return day + '-' + month + '-' + year;
	}
	function changeFromDateFormat(inputDate) { // expects Y-m-d
		var splitDate = inputDate.split('-');
		if (splitDate.count == 0) {
			return null;
		}

		var year = splitDate[0];
		var month = splitDate[1];
		var day = "01";

		return day + '-' + month + '-' + year;
	}

	var columnDefs = [ {
		headerName : "Customer Id",
		field : "clientId"
	}, {
		headerName : "Customer Name ",
		field : "cmpName",
	}, {
		headerName : "Sector",
		field : "sectorName",

	}, {
		headerName : "Industry",
		field : "industryName",

	}, {
		headerName : "Email",
		field : "cmpEmail",

	}, {
		headerName : "Phone Number",
		field : "cmpPhone",

	}, {
		headerName : "Address",
		field : "cmpAddress",
	}, {
		headerName : "LandMark",
		field : "cmpLandMark",
	}, {
		headerName : "Pin Code",
		field : "cmpPinCode",
		width : 130,

	}, {
		headerName : "GST",
		field : "gst",
		width : 120,

	}, {
		headerName : "PAN",
		field : "pan",
		width : 120,

	}, {
		headerName : "WebSite",
		field : "webSite",

	}, {
		headerName : "Lead Source",
		field : "leadSourceName",

	}, {
		headerName : "Lead Status",
		field : "leadstatusName",

	}, {
		headerName : "Total Employee",
		field : "totalEmp",

	}, {
		headerName : "Description",
		field : "empDesc",

	}, {
		headerName : "Executive",
		field : "createdByName",

	} ];

	var gridOptions = {
		columnDefs : columnDefs,
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 150
		}
	};

	var columnDefsDM = [ {
		headerName : "Customer",
		field : "clientId",
	}, {
		headerName : "Customer Phone",
		field : "clientMob",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Customer Email",
		field : "clientEmail",
	}, {
		headerName : "Customer Address",
		field : "clientAddress",
		width : 250,
	}, {
		headerName : "Decision Maker",
		field : "dmName",
	}, {
		headerName : "Mobile Number",
		field : "dmPhone",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Email",
		field : "dmEmail",
	}, {
		headerName : "Designation",
		field : "dmDesignation",
	}, {
		headerName : "Date Of Birth",
		field : "dmDob",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Marriage Date",
		field : "dmMarriageDate",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Executive",
		field : "createdBy",
	} ];

	var gridOptionsDMaker = {
		columnDefs : columnDefsDM,
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 170,
			height : 10
		}
	};

	var columnDefsVisitPlan = [ {
		headerName : "Plan Id",
		field : "planId",
		width : 125
	}, {
		headerName : "Plan Type",
		field : "planType",
		width : 125
	}, {
		headerName : "Customer",
		field : "customerName",
		width : 125
	}, {
		headerName : "Customer Address",
		field : "customerAddress",
		width : 180
	}, {
		headerName : "Decision Maker",
		field : "dMakerName",
		width : 155
	}, {
		headerName : "Decision Phone",
		field : "dmPhone",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Decision Email",
		field : "dmEmail",
	}, {
		headerName : "Plan Date",
		field : "planDate",
		width : 130,
		cellStyle : {
			textAlign : 'center'
		}
	},/*  {
								headerName : "Plan Time",
								field : "planTime",
								width : 130,
								cellStyle : {
									textAlign : 'center'
								}
							}, */{
		headerName : "Subject",
		field : "subject",
		width : 143,

	}, {
		headerName : "Description",
		field : "desc",
		width : 142,
	}, {
		headerName : "Status",
		field : "status",
		width : 100,
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Executive",
		field : "createdByName",
		width : 150
	} ];

	const gridOptionsVisitPlan = {
		columnDefs : columnDefsVisitPlan,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 180,
			height : 10
		},
		suppressRowClickSelection : true,
		getRowNodeId : function(data) {
			return data.empId;
		}
	}
	var columnDefsVisit = [ {
		headerName : "Plan Id",
		field : "planId",
		width : 125
	}, {
		headerName : "Plan Type",
		field : "planType",
		width : 125
	}, {
		headerName : "Customer",
		field : "customerName",
		width : 125
	}, {
		headerName : "Decision Maker",
		field : "dMakerName",
		width : 155
	}, {
		headerName : "Decision Phone",
		field : "dmPhone",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Decision Email",
		field : "dmEmail",
	}, {
		headerName : "Plan Date",
		field : "planDate",
		width : 130,
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Subject",
		field : "subject",
		width : 143,

	}, {
		headerName : "Description",
		field : "desc",
		width : 142,
	}, {
		headerName : "Status",
		field : "status",
		width : 100,
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Visit Date",
		field : "checkDate",
		width : 150,
		cellStyle : {
			textAlign : 'center'
		}

	}, {
		headerName : "Visit Time",
		field : "checkTime",
		width : 150,
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Customer Address",
		field : "customerAddress",
		width : 180
	}, {
		headerName : "Visit Address",
		field : "ckeckAddress",
		width : 180
	}, {
		headerName : "Visit Image",
		field : "ckeckImg",
		width : 130,
		cellStyle : {
			textAlign : 'center'
		},
		cellRenderer : function(params) {
			var div = "";
			if (params.data.checkImg) {
				var ext = params.data.checkImg.split(".");
				if (ext[1] == "pdf") {
					div = div
							+ " "
							+ '<div class ="fa fa-file-pdf-o" style="cursor: pointer; color: red;" onclick=viewVisitImage("'
							+ params.data.checkImg + '")> </div>';
				} else {
					div = div
							+ " "
							+ '<div class ="fa fa-picture-o" style="cursor: pointer; color: blue;" onclick=viewVisitImage("'
							+ params.data.checkImg + '")> </div>';
				}
			}
			return div;
		},
	}, {
		headerName : "Visit Description",
		field : "ckeckDesc",
		width : 180
	}, {
		headerName : "Executive",
		field : "createdByName",
		width : 150
	} ];

	const gridOptionsVisit = {
		columnDefs : columnDefsVisit,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 180,
			height : 10
		},
		suppressRowClickSelection : true,
		getRowNodeId : function(data) {
			return data.empId;
		}
	}
	const columnDefsExecutive = [ {
		headerName : "Executive Id",
		field : "employeeId",
		width : 150
	}, {
		headerName : "Executive Name",
		field : "firstName",
		width : 300
	}, {
		headerName : "Gender",
		field : "gender",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Date Of Birth",
		field : "dob",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Mobile",
		field : "mobileNo",
		cellStyle : {
			textAlign : 'center'
		}

	}, {
		headerName : "Email",
		field : "personalMail",
		width : 300
	} ];
	//Executive 
	const gridOptionsExecutive = {
		columnDefs : columnDefsExecutive,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 200,
			height : 10
		}
	};
	const columnDefsDeal = [
			{
				headerName : "Deal Id",
				field : "dealId",
				width : 120
			},
			{
				headerName : "Customer",
				field : "leadName",
			},
			{
				headerName : "Customer Phone",
				field : "clientMob",
				cellStyle : {
					textAlign : 'center'
				},

			},
			{
				headerName : "Customer Email",
				field : "clientEmail",
			},
			{
				headerName : "Customer Address",
				field : "clientAddress",
				width : 250,
			},
			{
				headerName : "Sector",
				field : "sector",
				width : 120
			},
			{
				headerName : "Decision Maker",
				field : "decisionMakerName",
			},
			{
				headerName : "Decision Phone",
				field : "dmPhone",
				cellStyle : {
					textAlign : 'center'
				}
			},
			{
				headerName : "Decision Email",
				field : "dmEmail",
			},
			{
				headerName : "Deal Date",
				field : "dealDate",
				width : 130,
				cellStyle : {
					textAlign : 'center'
				}
			},
			{
				headerName : "Amount",
				field : "amount",
				width : 120,
				cellStyle : {
					textAlign : 'right'
				}
			},
			{
				headerName : "Document",
				field : "docName",
				width : 130,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					var div = "";
					if (params.data.docName) {
						var ext = params.data.docName.split(".");
						if (ext[1] == "pdf") {
							div = div
									+ " "
									+ '<div class ="fa fa-file-pdf-o" style="cursor: pointer; color: red;" onclick=viewImage("'
									+ params.data.docName + '")> </div>';
						} else {
							div = div
									+ " "
									+ '<div class ="fa fa-picture-o" style="cursor: pointer; color: blue;" onclick=viewImage("'
									+ params.data.docName + '")> </div>';
						}
					}
					return div;
				},
			}, {
				headerName : "Status",
				field : "dealStatus",
				width : 120,
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				headerName : "Executive",
				field : "dealCreatedByName",
			} ];
	const gridOptionsDeal = {
		columnDefs : columnDefsDeal,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 170,
			height : 10
		}
	};
	function viewImage(id) {
		window.open("/document/crm/" + id, '_blank');
	}
	function viewVisitImage(id) {
		window.open("/document/crm/" + id, '_blank');
	}
	const columnDefsBilling = [ {
		headerName : "Bill Id",
		field : "billId",
	}, {
		headerName : "Amount",
		field : "bill",
		cellStyle : {
			textAlign : 'right'
		},
	}, {
		headerName : "Display Amount",
		field : "displayBill",
		cellStyle : {
			textAlign : 'right'
		},
	}, {
		headerName : "Bill Date",
		field : "billDate",
		cellStyle : {
			textAlign : 'center'
		}
	}, {
		headerName : "Executive",
		field : "createdByName",
		width : 300,
	} ];
	const gridOptionsBilling = {
		columnDefs : columnDefsBilling,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 250,
			height : 10
		}
	};

	function viewCustomerReports() {
		$("#graphview").hide();
		$("#fdiv").show();
		$("#pDiv").hide();
		$("#fdDiv").hide();
		$("#tdDiv").hide();
		$('.loader').show();
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		gridOptions.api.setRowData()
		agGrid.simpleHttpRequest({
			url : "view-crm-reports-customerDetails",
		}).then(function(data) {
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptions.api.setRowData(data);
			$('.loader').hide();
		});

		$("#customerDetails").addClass("active");
		$("#visitReq").removeClass("active");
		$("#visitPlan").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#dealReq").removeClass("active");
		$("#billReq").removeClass("active");
		$("#grpReq").removeClass("active");
		$("#activeStatus").val("1");
		$("#totalReq").show();
		$("#cusdiv").show();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").show();
		$("#myGridVisit").hide();
		$("#myGridVisitPlan").hide();
		$("#myGridExecutive").hide();
		$("#myGridDMaker").hide();
		$("#myGridDeal").hide();
		$("#myGridBilling").hide();

		$("#download").show();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadReg").hide();
		$("#downloadDMaker").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").show();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
	}

	function viewDecisionMakerReport() {
		
		$("#fdiv").show();
		$("#pDiv").hide();
		$("#fdDiv").hide();
		$("#tdDiv").hide();
		$('.loader').show();
		$("#dMakerDetails").addClass("active");
		$("#customerDetails").removeClass("active");
		$("#visitReq").removeClass("active");
		$("#visitPlan").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#dealReq").removeClass("active");
		$("#billReq").removeClass("active");
		$("#grpReq").removeClass("active");
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		$("#graphview").hide();
		gridOptionsDMaker.api.setRowData()
		agGrid.simpleHttpRequest({
			url : "view-crm-reports-decisionMakerDeatils",
		}).then(function(data) {
			console.log(data)
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptionsDMaker.api.setRowData(data);
			$('.loader').hide();
		});

		$("#activeStatus").val("2");
		$("#totalReq").show();
		$("#cusdiv").show();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGridDMaker").show();
		$("#myGrid").hide();
		$("#myGridVisit").hide();
		$("#myGridVisitPlan").hide();
		$("#myGridExecutive").hide();
		$("#myGridDeal").hide();
		$("#myGridBilling").hide();

		$("#downloadDMaker").show();
		$("#download").hide();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadExecutive").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").hide();
		$("#searchDiv2").show();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
		$("#searchDiv7").hide();
	}

	function viewVisitPlanReport() {
		$("#graphview").hide();
		$("#fdiv").show();
		$("#pDiv").show();
		$("#fdDiv").show();
		$("#tdDiv").show();
		$('.loader').show();
		$("#visitReq").removeClass("active");
		$("#visitPlan").addClass("active");
		$("#customerDetails").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#dealReq").removeClass("active");
		$("#billReq").removeClass("active");
		$("#grpReq").removeClass("active");
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		gridOptionsVisitPlan.api.setRowData();
		agGrid.simpleHttpRequest(
				{
					url : "view-crm-reports-viewVisitPlanReport?fromDate="
							+ fdate + "&toDate=" + tdate,
				}).then(function(data) {
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptionsVisitPlan.api.setRowData(data);
			$('.loader').hide();
		});

		$("#activeStatus").val("7");
		$("#totalReq").show();
		$("#cusdiv").show();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").hide();
		$("#myGridDMaker").hide();
		$("#myGridVisitPlan").show();
		$("#myGridVisit").hide();
		$("#myGridExecutive").hide();
		$("#myGridDeal").hide();
		$("#myGridBilling").hide();

		$("#download").hide();
		$("#downloadDMaker").hide();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").show();
		$("#downloadExecutive").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").hide();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
		$("#searchDiv7").show();
	}
	function viewVisitReport() {
		$("#graphview").hide();
		$("#fdiv").show();
		$("#pDiv").show();
		$("#fdDiv").show();
		$("#tdDiv").show();
		$('.loader').show();
		$("#visitReq").addClass("active");
		$("#visitPlan").removeClass("active");
		$("#customerDetails").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#dealReq").removeClass("active");
		$("#billReq").removeClass("active");
		$("#grpReq").removeClass("active");
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		gridOptionsVisit.api.setRowData();
		agGrid.simpleHttpRequest(
				{
					url : "view-crm-reports-visitHistoryReport?fromDate="
							+ fdate + "&toDate=" + tdate,
				}).then(function(data) {
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptionsVisit.api.setRowData(data);
			$('.loader').hide();
		});

		$("#activeStatus").val("3");
		$("#totalReq").show();
		$("#cusdiv").show();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").hide();
		$("#myGridDMaker").hide();
		$("#myGridVisit").show();
		$("#myGridVisitPlan").hide();
		$("#myGridExecutive").hide();
		$("#myGridDeal").hide();
		$("#myGridBilling").hide();

		$("#download").hide();
		$("#downloadDMaker").hide();
		$("#downloadVisit").show();
		$("#downloadVisitPlan").hide();
		$("#downloadExecutive").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").hide();
		$("#searchDiv2").hide();
		$("#searchDiv3").show();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
		$("#searchDiv7").hide();
	}
	function viewExecutiveReport() {
		$("#graphview").hide();
		$("#fdiv").hide();
		$("#pDiv").hide();
		$("#fdDiv").hide();
		$("#tdDiv").hide();
		$('.loader').show();
		$("#executiveReq").addClass("active");
		$("#customerDetails").removeClass("active");
		$("#visitReq").removeClass("active");
		$("#visitPlan").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#dealReq").removeClass("active");
		$("#billReq").removeClass("active");
		$("#grpReq").removeClass("active");
		gridOptionsExecutive.api.setRowData();
		agGrid.simpleHttpRequest({
			url : "view-crm-reports-executiveReport",
		}).then(function(data) {
			console.log(data)
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptionsExecutive.api.setRowData(data);
			$('.loader').hide();
		});

		$("#activeStatus").val("4");
		$("#totalReq").show();
		$("#cusdiv").show();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").hide();
		$("#myGridVisit").hide();
		$("#myGridVisitPlan").hide();
		$("#myGridDMaker").hide();
		$("#myGridExecutive").show();
		$("#myGridDeal").hide();
		$("#myGridBilling").hide();

		$("#download").hide();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadAttend").hide();
		$("#downloadExecutive").show();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").hide();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").show();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
		$("#searchDiv7").hide();
	}
	function viewDealStatusReport() {
		$("#graphview").hide();
		$("#fdiv").show();
		$("#pDiv").hide();
		$("#fdDiv").show();
		$("#tdDiv").show();
		$('.loader').show();
		$("#dealReq").addClass("active");
		$("#customerDetails").removeClass("active");
		$("#visitReq").removeClass("active");
		$("#visitPlan").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#billReq").removeClass("active");
		$("#grpReq").removeClass("active");
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		gridOptionsDeal.api.setRowData();
		agGrid.simpleHttpRequest(
				{
					url : "view-crm-reports-dealReport?fromDate=" + fdate
							+ "&toDate=" + tdate,
				}).then(function(data) {
			console.log(data)
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptionsDeal.api.setRowData(data);
			$('.loader').hide();
		});

		$("#activeStatus").val("5");
		$("#totalReq").show();
		$("#cusdiv").show();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").hide();
		$("#myGridVisit").hide();
		$("#myGridVisitPlan").hide();
		$("#myGridDMaker").hide();
		$("#myGridExecutive").hide();
		$("#myGridDeal").show();
		$("#myGridBilling").hide();

		$("#download").hide();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadDMaker").hide();
		$("#downloadExecutive").hide();
		$("#downloadDeal").show();
		$("#downloadBilling").hide();

		$("#searchDiv1").hide();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").show();
		$("#searchDiv6").hide();
		$("#searchDiv7").hide();
	}
	function viewBillingReport() {
		$("#graphview").hide();
		$("#fdiv").show();
		$("#pDiv").hide();
		$("#fdDiv").show();
		$("#tdDiv").show();
		$('.loader').show();
		$("#billReq").addClass("active");
		$("#grpReq").removeClass("active");
		$("#customerDetails").removeClass("active");
		$("#visitReq").removeClass("active");
		$("#visitPlan").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#dealReq").removeClass("active");
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		gridOptionsBilling.api.setRowData();
		agGrid.simpleHttpRequest(
				{
					url : "view-crm-reports-billingReport?fromDate=" + fdate
							+ "&toDate=" + tdate,
				}).then(function(data) {
			console.log(data)
			var len = data.length;
			$('#totalReq').find('span').html(len);
			gridOptionsBilling.api.setRowData(data);
			$('.loader').hide();
		});

		$("#activeStatus").val("6");
		$("#totalReq").show();
		$("#cusdiv").hide();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").hide();
		$("#myGridVisit").hide();
		$("#myGridVisitPlan").hide();
		$("#myGridDMaker").hide();
		$("#myGridExecutive").hide();
		$("#myGridDeal").hide();
		$("#myGridBilling").show();

		$("#download").hide();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadDMaker").hide();
		$("#downloadExecutive").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").show();

		$("#searchDiv1").hide();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").show();
		$("#searchDiv7").hide();

	}
	function viewGraphicallyReport() {
		$("#fdiv").show();
		$("#pDiv").hide();
		$("#fdDiv").show();
		$("#tdDiv").show();
		//$('.loader').show();
		$("#grpReq").addClass("active");
		$("#billReq").removeClass("active");
		$("#customerDetails").removeClass("active");
		$("#visitReq").removeClass("active");
		$("#visitPlan").removeClass("active");
		$("#dMakerDetails").removeClass("active");
		$("#executiveReq").removeClass("active");
		$("#dealReq").removeClass("active");
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		$("#activeStatus").val("8");
		$("#totalReq").hide();
		$("#cusdiv").hide();
		$("#customer").val("");
		$("#salesTeam").val("");
		$("#myGrid").hide();
		$("#myGridVisit").hide();
		$("#myGridVisitPlan").hide();
		$("#myGridDMaker").hide();
		$("#myGridExecutive").hide();
		$("#myGridDeal").hide();
		$("#myGridBilling").hide();

		$("#download").hide();
		$("#downloadVisit").hide();
		$("#downloadVisitPlan").hide();
		$("#downloadDMaker").hide();
		$("#downloadExecutive").hide();
		$("#downloadDeal").hide();
		$("#downloadBilling").hide();

		$("#searchDiv1").hide();
		$("#searchDiv2").hide();
		$("#searchDiv3").hide();
		$("#searchDiv4").hide();
		$("#searchDiv5").hide();
		$("#searchDiv6").hide();
		$("#searchDiv7").hide();
		getGraphData();
	}
 

	function getGraphData() {
		$("#graphview").show();
		$("#totalLeave").empty();
		$("#container").empty();

		var salesTeam = $("#salesTeam").val();
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		if (salesTeam == null || salesTeam == "") {
			salesTeam = "";
		}

		$
				.ajax({
					type : "GET",
					url : "view-crm-reports-deal-bar?salesTeam=" + salesTeam
							+ "&fdate=" + fdate + "&tdate=" + tdate,
					success : function(response) {
						if (response.message == "Success") {

							console.log(response);

							if (response.body.length == 0) {

						Highcharts.setOptions({
									lang : {
										noData : {
									        style: {
									            fontWeight: 'bold',
									            fontSize: '15px'
									        }
									    },
									}
								})
								var chart =   Highcharts.chart('totalLeave', {
									series : [ [ {
										type : 'pie',
										innerSize : '50%',
										data : 'No Data Found',
										cursor : 'pointer',
										point : {
											events : {
											}
										}
									}, ]]
								});  
								
						/* 		Highcharts.chart('totalLeave', {
								    lang: {
								        noData: "No data found"
								    },
								    noData: {
								        style: {
								            fontWeight: 'bold',
								            fontSize: '15px'
								        }
								    },
								}); */

							}

							else {
								var datalist = [];
								for (var i = 0; i < response.body.length; i++) {
									var data = [];
									var datas = [];

									data.push(response.body[i].taskId);
									data
											.push(parseInt(response.body[i].taskExcutive));
									datas.push(response.body[i].taskId);
									datalist.push(data)

									var chart = Highcharts
											.chart(
													'totalLeave',
													{
														chart : {
															plotBackgroundColor : null,
															plotBorderWidth : 0,
															plotShadow : false
														},
														title : {
															text : '',
															align : 'center',
															verticalAlign : 'middle',
															y : 60
														},
														exporting : {
															enabled : false
														},
														credits : {
															enabled : false
														},
														tooltip : {
															pointFormat : '{series.name}: <b>{point.percentage:.1f}%</b>'
														},
														/*accessibility : {
															point : {
																valueSuffix : '%'
															}
														},*/
														plotOptions : {
															pie : {
																showInLegend : true,
																dataLabels : {
																	allowPointSelect : true,
																	enabled : false,
																	distance : -50,
																	style : {
																		fontWeight : 'bold',
																		color : 'white',
																		textShadow : false,
																		textOutline : false,
																	}
																},
																startAngle : 180,
																endAngle : 90,
																center : [
																		'50%',
																		'50%' ],
																size : '100%'
															}
														},
														series : [ {
															type : 'pie',
															//name: datas,
															innerSize : '50%',
															data : datalist,
															cursor : 'pointer',
															point : {
																events : {
																	click : function(
																			oEvent) {
																		leaveAggrid(this.name)
																	}
																}
															}
														} ]
													});
								}
							}

						}
					},

				});

		$
				.ajax({
					type : "GET",
					url : "view-crm-reports-view-history-bar?salesTeam="
							+ salesTeam + "&fdate=" + fdate + "&tdate=" + tdate,
					success : function(response) {
						if (response.message == "Success") {

							if (response.body.length == 0) {
								Highcharts.setOptions({
									lang : {
										data : "No Data Found"
									}
								})

								var chart = Highcharts
										.chart(
												'container',
												{
													chart : {
														type : 'column'
													},
													title : {
														text : ''
													},
													subtitle : {
														text : ''
													},
													xAxis : {
														categories : area,
														crosshair : true
													},
													yAxis : {
														allowDecimals : false,
														min : 0,
														title : {
															text : 'Visit Count'
														}
													},
													tooltip : {
														pointFormat : '<span>{series.name}</span>: <b>{point.y}</b><br/>',
														shared : true
													},

													series : [

													{
														name : 'Visit Type',
														color : '#4AAAF5',
														data : []

													} ]
												});

							}

							else {
								var area = [];
								var count1 = [];
								console.log(response);
								for (i = 0; i <= response.body.length - 1; i++) {
									area.push(response.body[i].taskId);
									count1
											.push(parseInt(response.body[i].taskExcutive));
								}

								var chart = Highcharts
										.chart(
												'container',
												{
													chart : {
														type : 'column'
													},
													title : {
														text : ''
													},
													subtitle : {
														text : ''
													},
													xAxis : {
														categories : area,
														crosshair : true
													},
													yAxis : {
														allowDecimals : false,
														min : 0,
														title : {
															text : 'Visit Count'
														}
													},
													tooltip : {
														pointFormat : '<span>{series.name}</span>: <b>{point.y}</b><br/>',
														shared : true
													},
													plotOptions : {
														column : {
															//pointPadding : 0.2,
															borderWidth : 0
														}
													},
													series : [

													{
														name : 'Visit',
														color : '#4AAAF5',
														data : count1

													} ]
												});
							}

						}
					},

				});

	}

	function downloadDetails() {
		var dataset = [];
		gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptions.api.exportDataAsCsv(dataset);
	}
	function downloadDetailsDMaker() {
		var dataset = [];
		gridOptionsDMaker.api.forEachNodeAfterFilterAndSort(function(rowNode,
				index) {
			dataset.push(rowNode.data);
		});
		gridOptionsDMaker.api.exportDataAsCsv(dataset);
	}
	function downloadDetailsVisit() {
		var dataset = [];
		gridOptionsVisit.api.forEachNodeAfterFilterAndSort(function(rowNode,
				index) {
			dataset.push(rowNode.data);
		});
		gridOptionsVisit.api.exportDataAsCsv(dataset);
	}
	function downloadDetailsExecutive() {
		var dataset = [];
		gridOptionsExecutive.api.forEachNodeAfterFilterAndSort(function(
				rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptionsExecutive.api.exportDataAsCsv(dataset);
	}
	function downloadDetailsDeal() {
		var dataset = [];
		gridOptionsDeal.api.forEachNodeAfterFilterAndSort(function(rowNode,
				index) {
			dataset.push(rowNode.data);
		});
		gridOptionsDeal.api.exportDataAsCsv(dataset);
	}
	function downloadDetailsBilling() {
		var dataset = [];
		gridOptionsBilling.api.forEachNodeAfterFilterAndSort(function(rowNode,
				index) {
			dataset.push(rowNode.data);
		});
		gridOptionsBilling.api.exportDataAsCsv(dataset);
	}
	function downloadDetailsVisitPlan() {
		var dataset = [];
		gridOptionsVisitPlan.api.forEachNodeAfterFilterAndSort(function(
				rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptionsVisitPlan.api.exportDataAsCsv(dataset);
	}
	function changeData() {
		var fromdate = $('#fromDate').val();
		var fd = fromdate.split("-");
		var todate = $('#toDate').val();
		var td = todate.split("-");

		if (fromdate != '' && todate != '') {
			if (fd[2] == td[2]) {
				if (fd[1] == td[1]) {
					if (fd[0] <= td[0]) {
						getSearchData();
					} else {
						setFromToDate();
					}
				} else if (fd[1] < td[1]) {
					getSearchData();
				} else {
					setFromToDate();
				}
			}else if (fd[2] < td[2]) {
				getSearchData();
			}else {
				setFromToDate();
			}
		}
	}
	function getSearchData() {
		var customer = $("#customer").val();
		var salesTeam = $("#salesTeam").val();
		var type = $("#type").val();
		var fdate = $("#fromDate").val();
		var tdate = $("#toDate").val();
		var validation = true;

		if (customer == null || customer == "") {
			customer = "";
		}
		if (salesTeam == null || salesTeam == "") {
			salesTeam = "";
		}
		if (type == null || type == "") {
			type = "";
		}
		$(".formValidation").remove();
		var activeStatus = $("#activeStatus").val();
		if (activeStatus == "1") {
			$('.loader').show();
			if (customer == "" && salesTeam == "") {
				viewCustomerReports();
			} else {
				agGrid
						.simpleHttpRequest(
								{
									url : "view-crm-reports-customerDetailsReportSearch?customer="
											+ customer
											+ "&saleTeam="
											+ salesTeam
											+ "&fromDate="
											+ fdate
											+ "&toDate=" + tdate,
								}).then(function(data) {
							var len = data.length;
							$('#totalReq').find('span').html(len);
							gridOptions.api.setRowData(data);
							$('.loader').hide();
						});
			}
		} else if (activeStatus == "2") {
			if (customer == "" && salesTeam == "") {
				viewDecisionMakerReport();
			} else {
				$('.loader').show();
				agGrid
						.simpleHttpRequest(
								{
									url : "view-crm-reports-decisionMakerDeatilsSearch?customer="
											+ customer
											+ "&saleTeam="
											+ salesTeam
											+ "&fromDate="
											+ fdate
											+ "&toDate=" + tdate,
								}).then(function(data) {
							var len = data.length;
							$('#totalReq').find('span').html(len);
							gridOptionsDMaker.api.setRowData(data);
							$('.loader').hide();
						});
			}
		} else if (activeStatus == "3") {
			if (customer == "" && salesTeam == "" && type == "") {
				viewVisitReport();
			} else {
				if (type == "") {
					$('.loader').show();
					agGrid
							.simpleHttpRequest(
									{
										url : "view-crm-reports-visitHistoryReportSearch?customer="
												+ customer
												+ "&saleTeam="
												+ salesTeam
												+ "&fromDate="
												+ fdate + "&toDate=" + tdate,
									}).then(function(data) {
								var len = data.length;
								$('#totalReq').find('span').html(len);
								gridOptionsVisit.api.setRowData(data);
								$('.loader').hide();
							});
				} else {
					$('.loader').show();
					agGrid
							.simpleHttpRequest(
									{
										url : "view-crm-reports-visitHistoryReportSearchByType?customer="
												+ customer
												+ "&saleTeam="
												+ salesTeam
												+ "&type="
												+ type
												+ "&fromDate="
												+ fdate
												+ "&toDate=" + tdate,
									}).then(function(data) {
								var len = data.length;
								$('#totalReq').find('span').html(len);
								gridOptionsVisit.api.setRowData(data);
								$('.loader').hide();
							});

				}

			}
		} else if (activeStatus == "4") {
			if (customer == "" && salesTeam == "") {
				viewExecutiveReport();
			} else {
			}
		} else if (activeStatus == "5") {
			if (customer == "" && salesTeam == "") {
				viewDealReport();
			} else {
				$('.loader').show();
				agGrid
						.simpleHttpRequest(
								{
									url : "view-crm-reports-dealReportSearch?customer="
											+ customer
											+ "&saleTeam="
											+ salesTeam
											+ "&fromDate="
											+ fdate
											+ "&toDate=" + tdate,
								}).then(function(data) {
							var len = data.length;
							$('#totalReq').find('span').html(len);
							gridOptionsDeal.api.setRowData(data);
							$('.loader').hide();
						});
			}
		} else if (activeStatus == "6") {
			if (salesTeam == "") {
				viewBillingReport();
			} else {
				$('.loader').show();
				agGrid
						.simpleHttpRequest(
								{
									url : "view-crm-reports-billingReportSearch?saleTeam="
											+ salesTeam
											+ "&fromDate="
											+ fdate
											+ "&toDate=" + tdate,
								}).then(function(data) {
							var len = data.length;
							$('#totalReq').find('span').html(len);
							gridOptionsBilling.api.setRowData(data);
							$('.loader').hide();
						});
			}
		} else if (activeStatus == "7") {
			if (customer == "" && salesTeam == "" && type == "") {
				viewVisitPlanReport();
			} else {
				if (type == "") {
					$('.loader').show();
					agGrid
							.simpleHttpRequest(
									{
										url : "view-crm-reports-visitPlanReportSearch?customer="
												+ customer
												+ "&saleTeam="
												+ salesTeam
												+ "&fromDate="
												+ fdate + "&toDate=" + tdate,
									}).then(function(data) {
								var len = data.length;
								$('#totalReq').find('span').html(len);
								gridOptionsVisitPlan.api.setRowData(data);
								$('.loader').hide();
							});
				} else {
					$('.loader').show();
					agGrid
							.simpleHttpRequest(
									{
										url : "view-crm-reports-visitPlanReportSearchByType?customer="
												+ customer
												+ "&saleTeam="
												+ salesTeam
												+ "&type="
												+ type
												+ "&fromDate="
												+ fdate
												+ "&toDate=" + tdate,
									}).then(function(data) {
								var len = data.length;
								$('#totalReq').find('span').html(len);
								gridOptionsVisitPlan.api.setRowData(data);
								$('.loader').hide();
							});

				}

			}
		} else if (activeStatus == "8") {
			if (customer == "" && salesTeam == "") {
				viewGraphicallyReport();
			} else {
				getGraphData();
			}
		} else {

		}
	}
	function dateChange() {

		var fromdate = $('#fromDate').val();
		var fd = fromdate.split("-");
		var todate = $('#toDate').val();
		var td = todate.split("-");

		if (fromdate != '' && todate != '') {
			if (fd[2] <= td[2]) {
				if (fd[1] == td[1]) {
					if (fd[0] <= td[0]) {
						var deptname = $("#dept").val();
						var subDeptname = $("#subDept").val();
						var fdate = $("#fromDate").val();
						var tdate = $("#toDate").val();

						if (deptname == "" || deptname == null) {
							var activeStatus = $("#activeStatus").val();
							if (activeStatus == "1") {
								viewCustomerReports();
							} else if (activeStatus == "2") {
								viewDecisionMakerReport();
							} else if (activeStatus == "3") {
								viewVisitReport();
							} else if (activeStatus == "4") {
								viewExecutiveReport();
							} else {

							}

						} else {
							if (subDeptname == "" || subDeptname == null) {
								changeDept();
							} else {
								changeSubDept();
							}
						}
					} else {
						setFromToDate();
					}
				} else if (fd[1] < td[1]) {
					var deptname = $("#dept").val();
					var subDeptname = $("#subDept").val();
					var fdate = $("#fromDate").val();
					var tdate = $("#toDate").val();

					if (deptname == "" || deptname == null) {
						var activeStatus = $("#activeStatus").val();
						if (activeStatus == "1") {
							viewCustomerReports();
						} else if (activeStatus == "2") {
							viewDecisionMakerReport();
						} else if (activeStatus == "3") {
							viewVisitReport();
						} else if (activeStatus == "4") {
							viewExecutiveReport();
						} else {

						}

					} else {
						if (subDeptname == "" || subDeptname == null) {
							changeDept();
						} else {
							changeSubDept();
						}
					}
				} else {
					setFromToDate();
				}

			} else {
				setFromToDate();
			}
		} else {

		}

	}

	/* -------------------search bar for mygrid------------------------ */

	function onQuickFilterChanged() {

		var activeStatus = $("#activeStatus").val();

		if (activeStatus == "1") {
			gridOptions.api.setQuickFilter(document
					.getElementById('quickFilter1').value);
			gridOptionsDMaker.api.setQuickFilter(document
					.getElementById('quickFilter7').value);
		} else if (activeStatus == "2") {
			gridOptionsDMaker.api.setQuickFilter(document
					.getElementById('quickFilter2').value);
		} else if (activeStatus == "3") {
			gridOptionsVisit.api.setQuickFilter(document
					.getElementById('quickFilter3').value);
		} else if (activeStatus == "4") {
			gridOptionsExecutive.api.setQuickFilter(document
					.getElementById('quickFilter4').value);
		} else if (activeStatus == "5") {
			gridOptionsDeal.api.setQuickFilter(document
					.getElementById('quickFilter5').value);
		} else if (activeStatus == "6") {
			gridOptionsBilling.api.setQuickFilter(document
					.getElementById('quickFilter6').value);
		} else if (activeStatus == "6") {
			gridOptionsBilling.api.setQuickFilter(document
					.getElementById('quickFilter6').value);
		} else {

		}

	}

	function cancelBar1() {
		var id1 = document.getElementById("closeKey1");
		id1.style.display = "block";

		if ($('#quickFilter1').val() == null || $('#quickFilter1').val() == "") {
			id1.style.display = "none";
		}
	}
	function cancelBar2() {
		var id = document.getElementById("closeKey2");
		id.style.display = "block";
		if ($('#quickFilter2').val() == null || $('#quickFilter2').val() == "") {
			id.style.display = "none";
		}
	}
	function cancelBar3() {
		var id = document.getElementById("closeKey3");
		id.style.display = "block";
		if ($('#quickFilter3').val() == null || $('#quickFilter3').val() == "") {
			id.style.display = "none";
		}
	}
	function cancelBar4() {
		var id = document.getElementById("closeKey4");
		id.style.display = "block";
		if ($('#quickFilter4').val() == null || $('#quickFilter4').val() == "") {
			id.style.display = "none";
		}
	}
	function cancelBar5() {
		var id = document.getElementById("closeKey5");
		id.style.display = "block";
		if ($('#quickFilter5').val() == null || $('#quickFilter5').val() == "") {
			id.style.display = "none";
		}
	}
	function cancelBar6() {
		var id = document.getElementById("closeKey6");
		id.style.display = "block";
		if ($('#quickFilter6').val() == null || $('#quickFilter6').val() == "") {
			id.style.display = "none";
		}
	}
	function cancelBar7() {
		var id = document.getElementById("closeKey7");
		id.style.display = "block";
		if ($('#quickFilter7').val() == null || $('#quickFilter7').val() == "") {
			id.style.display = "none";
		}
	}
</script>
<style>
.form-check-input::before {
	display: none !important;
}
</style>
</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="d-flex ">
				<div class="maincontentsec">
					<div class="row ">
						<input type="hidden" id="activeStatus">
						<div class="btn-group col-md-3">
							<button class="btn btn-primary" id="customerDetails"
								onclick="viewCustomerReports()">Customer Details</button>
						</div>
						<div class="btn-group col-md-3">
							<button class="btn btn-primary" id="dMakerDetails"
								onclick="viewDecisionMakerReport()">Decision Maker
								Details</button>
						</div>
						<div class="btn-group col-md-3">
							<button class="btn btn-primary " id="visitPlan"
								onclick="viewVisitPlanReport()">Visit Plan</button>
						</div>
						<div class="btn-group col-md-3">
							<button class="btn btn-primary " id="visitReq"
								onclick="viewVisitReport()">Visit History</button>
						</div>
					</div>
					<div class="row mt-2">
						<div class="btn-group col-md-3">
							<button class="btn btn-primary " id="dealReq"
								onclick="viewDealStatusReport()">Deal Status</button>
						</div>
						<div class="btn-group col-md-3">
							<button class="btn btn-primary " id="billReq"
								onclick="viewBillingReport()">Classified Billing</button>
						</div>
						<div class="btn-group col-md-3">
							<button class="btn btn-primary " id="grpReq"
								onclick="viewGraphicallyReport()">Graphically Report</button>
						</div>
						<div class="btn-group col-md-3">
							<button class="btn btn-primary " id="executiveReq"
								onclick="viewExecutiveReport()">Executive Details</button>
						</div>
					</div>
					<div class="row mt-2" id="fdiv">
						<div class="col-md-2" id="pDiv">
							<div class="form-group">
								<label>Plan Type</label>
								<div class="select">
									<select id="type" class="form-control" onchange="changeData();">
										<option value="">--Select--</option>
										<option value="Call">Call</option>
										<option value="Meeting">Meeting</option>
										<option value="Task">Task</option>
									</select>
								</div>
							</div>
						</div>
						<div class="col-md-3" id="cusdiv">
							<div class="form-group">
								<label>Customer Name</label>
								<div class="select">
									<select id="customer" class="form-control"
										onchange="changeData();">
										<option value="">--Select--</option>
										<option th:each="c,iter:${customer}" th:value="${c.key}"
											th:text="${c.name}"></option>
									</select>
								</div>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label>Executive Name</label>
								<div class="select">
									<select id="salesTeam" class="form-control"
										onchange="changeData();">
										<option value="">--Select--</option>
										<option th:each="c,iter:${salesTeam}" th:value="${c.key}"
											th:text="${c.name}"></option>
									</select>
								</div>
							</div>
						</div>

						<div class="col-md-2" id="fdDiv">
							<label>From Date</label>
							<div class="form-group calendar_box">
								<input type="text" id="fromDate" value=""
									onchange="changeData()" class="form-control"
									placeholder="from date.."
									th:attr="onkeyup=|formatDate('fromDate','${session.DATEFORMAT_JS}')|"
									readonly> <i class="ti-calendar picker_calendar"
									id="fromDateCalender" onchange="changeData();"
									style="top: 14px; right: 0px;"></i>
							</div>
						</div>
						<div class="col-md-2" id="tdDiv">
							<label>To Date</label>
							<div class="form-group calendar_box">
								<input type="text" id="toDate" value=""
									onchange="changeData();" class="form-control"
									placeholder="to date.."
									th:attr="onkeyup=|formatDate('toDate','${session.DATEFORMAT_JS}')|"
									readonly> <i class="ti-calendar picker_calendar"
									id="toDateCalendar" onchange="changeData();"
									style="top: 14px; right: 0px;"></i>
							</div>
						</div>


					</div>
					<div class="d-flex justify-content-between mt-4" id="newId">
						<input type="hidden" id="rowId" />
						<div class="col-md-2 btn-hs" id="totalReq">
							Report(<span></span>)
						</div>
						<div class="col-md-3  btn-hs" id="searchDiv1">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar1()"
									oninput="onQuickFilterChanged()" id="quickFilter1"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript:void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
										id="closeKey1"
										onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter1').val('');document.getElementById('closeKey1').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>

						</div>
						<div class="col-md-3  btn-hs" id="searchDiv2">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar2()"
									oninput="onQuickFilterChanged()" id="quickFilter2"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript: void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
										id="closeKey2"
										onclick="gridOptionsDMaker.api.setQuickFilter(null);$('#quickFilter2').val('');document.getElementById('closeKey2').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>
						</div>
						<div class="col-md-3  btn-hs" id="searchDiv3">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar3()"
									oninput="onQuickFilterChanged()" id="quickFilter3"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript: void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
										id="closeKey3"
										onclick="gridOptionsVisit.api.setQuickFilter(null);$('#quickFilter3').val('');document.getElementById('closeKey3').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>
						</div>
						<div class="col-md-3  btn-hs" id="searchDiv4">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar4()"
									oninput="onQuickFilterChanged()" id="quickFilter4"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript: void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
										id="closeKey4"
										onclick="gridOptionsExecutive.api.setQuickFilter(null);$('#quickFilter4').val('');document.getElementById('closeKey4').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>
						</div>
						<div class="col-md-3  btn-hs" id="searchDiv5">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar5()"
									oninput="onQuickFilterChanged()" id="quickFilter5"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript: void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
										id="closeKey5"
										onclick="gridOptionsDeal.api.setQuickFilter(null);$('#quickFilter5').val('');document.getElementById('closeKey5').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>
						</div>
						<div class="col-md-3  btn-hs" id="searchDiv6">
							<div class="input-style">
								<input type="text" placeholder="Search.." name="search"
									class="searchboxinput" onkeyup="cancelBar6()"
									oninput="onQuickFilterChanged()" id="quickFilter6"
									autocomplete="off">
								<div class="searchicon">
									<a href="javascript: void(0)"><span
										style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
										id="closeKey6"
										onclick="gridOptionsBilling.api.setQuickFilter(null);$('#quickFilter6').val('');document.getElementById('closeKey6').style.display='none';"
										class="close_i"><i class="ti-close srchicon"></i></span></a><a
										href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
								</div>
							</div>
							<div class="col-md-3  btn-hs" id="searchDiv7">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar7()"
										oninput="onQuickFilterChanged()" id="quickFilter7"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript: void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 10px;"
											id="closeKey7"
											onclick="gridOptionsVisitPlan.api.setQuickFilter(null);$('#quickFilter7').val('');document.getElementById('closeKey7').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript: void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

						</div>


						<div class="row">
							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="download"
									onclick="downloadDetails()">Download</button>
							</div>

							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="downloadDMaker"
									onclick="downloadDetailsDMaker()">Download</button>
							</div>

							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="downloadVisit"
									onclick="downloadDetailsVisit()">Download</button>
							</div>
							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="downloadExecutive"
									onclick="downloadDetailsExecutive()">Download</button>
							</div>
							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="downloadDeal"
									onclick="downloadDetailsDeal()">Download</button>
							</div>
							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="downloadBilling"
									onclick="downloadDetailsBilling()">Download</button>
							</div>

							<div class="col-md-12 btn-hs" align="right">
								<button class="download-btn" id="downloadVisitPlan"
									onclick="downloadDetailsVisitPlan()">Download</button>
							</div>

						</div>
					</div>
					<input type="hidden" id="sessionId" th:value="${userId}">
					<div class="row" id="graphview">
						<div class="col-lg-6">
							<div class="dashboard_box">
								<div class="dashboard_subheading">
									Deal Status
									<div class="float-right">
										<a href="#"><i class="ti-download"></i></a> <a href="#"><i
											class="ti-printer"></i></a> &nbsp; &nbsp; &nbsp; <a
											href="javascript:void(0)"><i class="ti-bar-chart"></i></a>
									</div>
								</div>

								<div class="highcharts-figure" id="invChartDiv1">
									<div id="totalLeave" style="height: 400 px;"></div>
								</div>

							</div>
						</div>

						<div class="col-lg-6">
							<div class="dashboard_box">
								<div class="dashboard_subheading">
									View Visit History
									<div class="float-right">
										<a href="#"><i class="ti-download"></i></a> <a href="#"><i
											class="ti-printer"></i></a> &nbsp; &nbsp; &nbsp; <a
											href="javascript:void(0)"><i class="ti-bar-chart"></i></a>
									</div>
								</div>

								<div class="highcharts-figure" id="invChartDiv1">
									<div id="container" style="height: 400 px;"></div>
								</div>

							</div>
						</div>
					</div>
					<div class="row">
						<div id="myGrid" style="width: 100%; height: 450px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGridDMaker" style="width: 100%; height: 400px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGridVisit" style="width: 100%; height: 400px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGridVisitPlan" style="width: 100%; height: 400px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGridExecutive" style="width: 100%; height: 400px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGridDeal" style="width: 100%; height: 400px;"
							class="ag-theme-alpine"></div>
					</div>
					<div class="row">
						<div id="myGridBilling" style="width: 100%; height: 400px;"
							class="ag-theme-alpine"></div>
					</div>


				</div>
			</div>
		</div>
	</div>
</body>
</html>
