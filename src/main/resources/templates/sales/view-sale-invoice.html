<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

.btn-primarynew {
	color: #fff !important;
	background-color: #0d6efd;
	border-color: #0d6efd;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

.form-group label {
	font-size: 12px;
	position: relative;
	top: 4px;
}

.holdCls {
	background-color: rgb(0, 143, 0);
}

.bg_white {
	background: #ffffff !important;
}

.blueClsWT {
	background: #0076ba;
	color: #fff;
}

.blueCls {
	background: #0076ba;
	color: #fff;
}

.blueClsWT::before {
	font-size: 8px;
	color: #FFF;
	content: '\e64c';
	font-family: 'themify';
	padding-right: 7px;
}

.modal-body table td input[type=checkbox] {
	width: 0px;
	margin-right: 16px;
	position: relative;
	top: 0px;
	float: none;
}

.firstnode {
	color: #929292;
	border-top: 1px solid transparent !important;
	border-left: 1px solid transparent !important;
	border-bottom: 1px solid transparent !important;
	width: 320px;
	font-size: 12px;
	font-weight: 100;
}

.simple-tree-table-closed .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
	transform: rotate(90deg);
}

.simple-tree-table-opened .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
}

.simple-tree-table-icon {
	display: inline-block;
	width: 1.5em;
	line-height: 1.5em;
	margin: 0.1em;
	background-color: transparent;
	text-align: center;
	cursor: pointer;
}

.tptCls {
	background: transparnt;
}

.mr5 {
	margin-right: 5px;
}

ul#autocomplete-list1 {
	position: relative;
	z-index: 999;
}

ul#autocomplete-list1 li {
	position: relative;
	color: #fff;
	padding-left: 6px;
	background-color: #1f57a8;
	border-bottom: solid 1px #6189c2;
	padding-top: 5px;
	padding-bottom: 5px;
}

.sugg-cls ul {
	height: 150px;
	overflow-x: scroll;
	position: relative;
}

a.addCust {
	color: #fff !important;
}

.formValidation1 {
	font-size: 10px;
	font-weight: 100;
	color: #ff9e99;
	background-color: transparent;
	position: relative;
	top: -1px;
	padding: 3px 0;
}

.autocomplete {
	position: relative;
	display: inline-block;
	width: 100%;
}
</style>
<script>
$(document).ready(function() {
	viewMasterData();
	$("#organatioModal").hide();
	$("#customerModal").hide();
	$("#tcsfield").hide();
	$("#totalFreightChargesDtls").hide();
	$("#totalDiv").hide();
	$('#reject').attr("disabled", true);
	  $('#deleteproduct').attr("disabled", true);
	 $('#deletess').attr("disabled", true);
	$('#deliveryChallanDtls').attr("disabled", true);
	$("#documentDetails").show();
	$('#docTbl').on( 'click', '.rmv1', function() { 
		openDeleteConfirm();
		var value = $(this).parent("div").attr("id");
		$("#dltValue").val(value); 
});
	
	var gridDiv = document.querySelector('#myGrid');
	new agGrid.Grid(gridDiv, gridOptions);

	var gridDiv = document.querySelector('#item');
	new agGrid.Grid(gridDiv, itemOptions);

	
	    var gridDiv = document.querySelector('#mySKUGrid');
	    new agGrid.Grid(gridDiv, skuOptions);

	    var gridDiv = document.querySelector('#myGridProduct');
	    new agGrid.Grid(gridDiv, gridOptionsProduct);
	    
	gridOptions.api.setRowData();
	itemOptions.api.setRowData();
	var gridDiv = document.querySelector('#mySAGrid');
	new agGrid.Grid(gridDiv, gridSAOptions);
	$("#tdNo").hide();
	$("#ckNo").hide();

	$("#paymodeId").on('change', function() {
		var paymodeId = $(this).val();
		if (paymodeId == "PMOD001") {
			$("#tdNo").show();
			$("#ckNo").hide();

		} else if ((paymodeId == "PMOD003")) {
			$("#tdNo").hide();
			$("#ckNo").show();

		} else {
			$("#tdNo").hide();
			$("#ckNo").hide();
		}

	});
	var dateFormat = localStorage.getItem("dateFormat");

	$("#toDateCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
	}).on("change", function() {
		$('#payDate').val($(this).val());
	})

	$('#payDate').blur(function() {
		$("#toDateCalendar").val($(this).val());
	})
	
$("#toDateCalendarInvoice").datetimepicker({
format : dateFormat,
closeOnDateSelect : true,
 timepicker : false,
  datepicker : true,
scrollMonth : false,
//minDate : new Date()
}).on("change", function() {
$('#invoiceDate').val($(this).val());
})
$('#invoiceDate').blur(function() {
$("#toDateCalendarInvoice").val($(this).val());
});
	
	
	$("#dueDateCalendarInvoice").datetimepicker({
        format : dateFormat,
        closeOnDateSelect : true,
         timepicker : false,
          datepicker : true,
        scrollMonth : false,
        //minDate : new Date()
       }).on("change", function() {
      $('#dueDate').val($(this).val());
      })
      $('#dueDate').blur(function() {
      $("#dueDateCalendarInvoice").val($(this).val());
      });
	
	
	$("#invoiceDateCalendarInvoice").datetimepicker({
        format : dateFormat,
        closeOnDateSelect : true,
         timepicker : false,
          datepicker : true,
        scrollMonth : false,
        //minDate : new Date()
       }).on("change", function() {
      $('#invoiceDate').val($(this).val());
      })
      $('#invoiceDate').blur(function() {
      $("#invoiceDateCalendarInvoice").val($(this).val());
      });
 
	$("#dateofSupplyCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		 timepicker : false,
		  datepicker : true,
		scrollMonth : false,
		//minDate : new Date()
		}).on("change", function() {
		$('#dateofSupply').val($(this).val());
		})
		$('#dateofSupply').blur(function() {
		$("#dateofSupplyCalendar").val($(this).val());
		});
	
	$("#ebillDateCalendar").datetimepicker({
		format : dateFormat,
		closeOnDateSelect : true,
		timepicker : false,
		datepicker : true,
		scrollMonth : false,
	//minDate : new Date()
	}).on("change", function() {
		$('#ebillDate').val($(this).val());
	})
	$('#ebillDate').blur(function() {
		$("#ebillDateCalendar").val($(this).val());
	});
	$("#Cancel").hide();
	$("#addData").hide();
	$("#save").hide();
	$('#delete').attr("disabled", true);
	$('#salesInvrtn').attr("disabled", true);
	$('#paymentDtls').attr("disabled", true);
	$('#deliveryChallanDtls').attr("disabled", true);
	
	$("#igstTR").hide();
	$("#igstPayTR").hide();

	$("#browseBtnNew").click(function() {
		$("#myModal").modal('show');
	})
	agGrid.simpleHttpRequest({
		url : "view-saleInvoice-through-ajax"
	}).then(function(data) {
		var len = data.length;
		$('#totalCandidate').find('span').html(len);
		gridOptions.api.setRowData(data);
	});
	
	
	  $("#categoryBtn").click(function(){
	    	
	    	//closeModal();
	    	$("#myModall").modal('show');
	    	getCategoryList();
	    	
	    })
	    
	         $("#saveSKUData").click(function(){
    	
    	obj = {};
    	
    	obj.isEdit = $("#isEdit").val();
    	obj.productId = $("#productId").val();
    	obj.sku = $("#skuId").val();
    	obj.model = $("#model").val();
    	obj.manufacture = $("#manufacture").val();
    	obj.variationType = $("#variationType").val();
    	obj.variationValue = $("#variationValue").val();
    	obj.unit = $("#itemUnit").val();
    	var price = $("#salePrice").val();
    	price = price.replaceAll(",","");
    	obj.salePrice = price;
    	obj.saleTax = $("#saleTax").val();
    	obj.saleCess = $("#saleCess").val();
    	obj.area = $("#area").val();
    	obj.description = $("#description").val();
    	$(".formValidation").remove();
		allValid = true;
	
		if( obj.manufacture == null || obj.manufacture == ""){
			allValid = false;
			validationModal("Item Name Required","manufacture");
		} 

		
		if( obj.unit == null || obj.unit == ""){
			var mode = $("#mode").val();
			if (mode=="PMODE00004"){
				allValid = true;
			}else{
				allValid = false;
				validationModal("UOM Required","itemUnit");
			}

		} 
		if( obj.salePrice == null || obj.salePrice == ""){
			allValid = false;
			validationModal("Sale Price Required","salePrice");
		} 

    	
		if(allValid) {
			submitProductDetails(obj);
		}
    	
    })
    $("#productSave").click(function(){
    	  
    	var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});  
         	 
        })
    
	
          obj = {};
   
            obj['productId'] = $("#productId").val();
            obj['productName'] = $("#productName").val();
            obj['brand'] = $("#brand").val();
            obj['mode'] = $("#mode").val();
            obj['hsnCode'] = $("#hsnCodeProduct").val();
            obj['sicCode'] = $("#sicCode").val();
            obj['productStatus'] = $("input[name='isActive']:checked").val();
            obj['productCategory'] = $("#prCategoryId").val();
            obj['productCategoryText'] = $("#catDesc").text();
            obj['imgList'] = data;
            $(".formValidation").remove();
           allPValid = true;
    		if( $("#productName").val() == null || $("#productName").val() == ""){
    			allPValid = false;
    			validationModal("Product Name Required","productName");
    		} 
    		/* if( $("#brand").val() == null || $("#brand").val() == ""){
    			allPValid = false;
    			validationModal("Brand Required","brand");
    		}  */
    		if( $("#mode").val() == null || $("#mode").val() == ""){
    			allPValid = false;
    			validationModal("Mode Required","mode");
    		} 
    		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
    			allPValid = false;
    			validationModal("HSN/SAC Code Required","hsnCodeProduct");
    		} 
    		var productId = $('#productheadId').html();
            if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            			submitProduct(obj);
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	submitProduct(obj);
              }
            	
            	
            }
         
    })
	    
	     $("#selectCategory").click(function(){ 
    	var id = $("#tempCategoryId").val();
		var lvl = $("#prLevelId").val();
		
		if(id && lvl) {
			$("#prCategoryId").val(id);
			if(lvl == 'L1') {
				var textDesc = $("#lbl_"+id).text();
				$("#catDesc").text(textDesc);
			} else {
				var res = lvl.substring(1, 1000000);
				
				var lastText = $("#lbl_"+id).text();
				var textDesc = "";
				for(i = res; i > 1; i--) {
					var pUL = $("#"+id).attr("data-node-pid");
					//pUL = pUL.substring(3, 10000000000000);
					var newText = $("#lbl_"+pUL).text();
					console.log(newText+" "+i)
					textDesc =  newText+" > "+textDesc ; 
					id = pUL;
				}
				textDesc = textDesc + lastText;
				$("#catDesc").html(textDesc);
			}
		}
		$("#myModall").modal("hide");
		closeModall();
    })
	 $("#saveSaddressData").click(function(){
		//	var customerId = $("#customerId").val();
		  
	    	obj = {};
	    	
	    	obj.shippingId = $("#shippingId").val();
	    	obj.customerId = $("#customerId").val();
	    	obj.country1 = $('#country1').val();
			obj.states1 = $('#states1').val();
			obj.city1 = $('#city').val();
			obj.street11 = $('#street11').val();
			obj.street21 = $('#street21').val();
			obj.zipCode1 = $('#zipCode1').val();
			obj.phone1 = $('#phone1').val();
			obj.fax1 = $('#fax1').val()
			//obj.defaultStatus= $("input[name='isDefault']:checked").val();
			var ds=$("input[name='isDefault']:checked").val();
			if(ds=='1'){
				obj.defaultStatus='1';
			}else{
				obj.defaultStatus='0';	
			}
	    	$(".formValidation").remove();
			allValid = true;
		
			if( obj.country1 == null || obj.country1 == ""){
				allValid = false;
				validationModal("Select County","country1");
			} 
	
	    	
			if(allValid) {
				
				submitAddressDetails(obj);
			}
	    	
	    })
	/* product category	 
	 */
	$("#browseBtnNew")
			.click(
					function() {
						selectActiveCancel();
						$(".benefitChk").prop("checked",
								false);
						$("#productModName").val("");
						$("#brand").val("");
						$("#skuMod").val("");
						$("#modelMod").val("");
						$("#manufactureItemMod").val("");
						$("#variationTypeMod").val("");
						$("#variationValueMod").val("");
						$("#unitMod").val("");

						$('.loader').show();
						$("body").addClass("overlay");
						$("#productDiv").modal("show");
						$("#productCategoryCBDiv").empty();
						$("#select_product").empty();
						$
								.ajax({
									type : "POST",
									url : "view-saleInvoice-item-get-product-list",
									dataType : "json",
									contentType : "application/json",
									data : "a",
									success : function(
											response) {
										if (response.message == "success") {

											for (var i = 0; i < response.body.length; i++) {
												var row = "";
												if (response.body[i].categoryId == response.body[i].parentId) {
													if (response.body[i].nodeCount > 0) {

														row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																+ response.body[i].categoryName
																+ '</td></tr>';
													} else {
														row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																+ response.body[i].categoryId
																+ '" value="'
																+ response.body[i].categoryId
																+ '" name="'
																+ response.body[i].categoryName
																+ '" onchange=selectCheckBox("'
																+ response.body[i].categoryId
																+ '","'
																+ response.body[i].catLevel
																+ '")>'
																+ response.body[i].categoryName
																+ '</td></tr>';
													}

												} else {
													if (response.body[i].nodeCount > 0) {
														row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																+ response.body[i].categoryName
																+ '</td></tr>';
													} else {

														row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																+ response.body[i].categoryId
																+ '" value="'
																+ response.body[i].categoryId
																+ '" name="'
																+ response.body[i].categoryName
																+ '" onchange=selectCheckBox("'
																+ response.body[i].categoryId
																+ '","'
																+ response.body[i].catLevel
																+ '")>'
																+ response.body[i].categoryName
																+ '</td></tr>';
													}
												}
												$(
														"#productCategoryCBDiv")
														.append(
																row);

											}
											$('.loader')
													.hide();
											$("body")
													.removeClass(
															"overlay");

											$('#basic')
													.simpleTreeTable(
															{
																expander : $('#expander'),
																collapser : $('#collapser'),
																store : 'session',
																storeKey : 'simple-tree-table-basic'
															});
										}
									},
									error : function(data) {
										console.log(data)
										$('.loader').hide();
										$("body")
												.removeClass(
														"overlay");
										$("#productDiv")
												.modal(
														"show");
									}
								});
					})
					
	
	
	
	/*
	 sales Invoice page*/

	var ld = localStorage.getItem('ReqInvoiceData');
	var data = JSON.parse(ld);
	if (data) {

		$('#hideTbl').hide();
		$('#searchRowDiv').hide();
		$('.btn-hs').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#poId").val(data[0].poId);
		if (data[0].qutActive == "0") {
			$("#qutActive").prop("checked", false);
		} else {
			$("#qutActive").prop("checked", true);
		}
		itemOptions.api.setRowData(data);
		$("#subTotal").val(data[0].subTotal);
		$("#qIGST").val(data[0].qIGST);
		$("#qCGST").val(data[0].qCGST);
		$("#qSGST").val(data[0].qSGST);
		$("#grandTotal").val(data[0].grandTotal);
		$("#taxType").val(data[0].taxType);
		$("#itemIgst").val(data[0].itemIgst);
		$("#itemCgst").val(data[0].itemCgst);
		$("#itemSgst").val(data[0].itemSgst);
		$("#custId").val(data[0].custId);
		$("#custName").val(data[0].custName);
		$("#adjustment").val(data[0].adjustment);
		$("#tcsName").val(data[0].tcs);
		$("#tcsId").val(data[0].tcsId);
		$("#tcsAmount").val(data[0].tcsAmount);
		$("#tcsValue").val(data[0].tcsRate);
		$("#paymentTermId").val(data[0].paymentTermId);
		$("#challan").val(data[0].saleDeliveryChallan);
		$("#challanDate").val(data[0].deliveryChallanDate);
		$("#wayBill").val(data[0].ebillNo);
		$("#wayBillDate").val(data[0].ebillDate);
		$("#totalFreightCharges").val(data[0].freigtCharge);
		$("#total").val(data[0].total);
		//$("#type").val(data[0].total);
		$("#type").val("0");
		$("#eWayBillSection").hide();
		$("#lrDiv").hide();
		$("#tnameDiv").hide();
		$("#tidDiv").hide();
		$("#challannoDiv").hide();
		$("#vehicleDiv").hide();
		$("#tmode").hide();
		$("#supplyDive").hide();
	
		
		var sessionOrganization1 = $("#sessionOrganization1").val();
		$("#organizationName").val(sessionOrganization1);
		$("#organatioModal").show();
	    console.log('data-------------------------'+JSON.stringify(data[0]));
	    $("#shippingHiddenId").val(data[0].shippingHiddenId);

	    getAddressDetails(data[0].custId,data[0].shippingHiddenId);
		//getAddressDetails(data[0].custId);
		getSalesOrder(data[0].custId,data[0].salesOrder);
		
		
		hideShowS();
 
		var date = (new Date()).toISOString().split('T')[0];
		var newDate = changeDateFormat(date);
		$("#invoiceDate").val(newDate);
		
		$.ajax({type : "GET",
			url : "view-saleInvoice-get-insertedid",
					success : function(response) {
						if (response.message == "success") {
						//console.log("Response--------------"+JSON.stringify(response.body[0].name));
						$("#invoiceReference").val(response.body[0].key);
						}
					},
					error : function(e) { 
					}
				});
 
		localStorage.setItem('ReqInvoiceData', null);
	} else {
		$("#poId").val('New');
	}
});
	function closeAllNav() {
		closeNav();
		closeNav1();
		closeNav2();
	}
	var columnDefs = [
			{
				headerCheckboxSelection : false,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left',
			},
			{
				headerName : "Sales Invoice Id",
				field : "saleInvoice",
				pinned: 'left',
				width : 150,
				cellRenderer : function(params) {
					return '<a onclick=editsalesInvoice("'
							+ params.data.saleInvoice
							+ '","'+params.data.poId+'") href="javascript:void(0)">'
							+ params.data.saleInvoice + '</a>';
				}
			}, {
				headerName : 'Invoice Date',
				field : "invoiceDate",
				width:140,
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				headerName : 'PO Id',
				field : "poId",
				width:150,
				
			},{	headerName : 'Customer Name',
					field : "custName"
				
			},{
				headerName : 'Amount',
				field : "grandTotal",
				width:140,
				type : 'rightAligned',
				valueFormatter : currencyFormatter
			}, {
				headerName : 'Due Date',
				field : "dueDate",
				width:140,
				cellStyle : {
					textAlign : 'center'
				}
			}, { 
				headerName : 'Payment Term(Days)',
				field : "paymentTermId",
				width:150,
			},{
				headerName : 'Reject Status',
				field : "rejectStatus",
				width:140,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.rejectStatus =="Rejected") { 
						return '<div style="color:#0642f5">'+params.data.rejectStatus+'</div>';
					}else {
						return '<div style="color:#a9a9a9">'+params.data.rejectStatus+'</div>';
					}
				}
			},{
				headerName : "Invoice",
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					var s = "";
					s = ' <a href="#" class="grn-btn" onclick="invoicePdfDownloadModal(\''+params.data.saleInvoice+'\')"><i class="ti ti-download"></i> Invoice </a>';
					return s;
				},
				width: 140,
				} , {
				headerName : 'Created By',
				field : "qutCreatedBy",
				width:150,
			}];

	var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'single',

		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},
		onSelectionChanged : rowSelect,
	};
	function invoicePdfDownloadModal(id) {
		$('#invoiceModal').modal('show');
		$('#invHid').val(id);
	}
	function invoicePdfDownload() {
		var invId=$('#invHid').val();
		//var copytype=$('input[name="copyType"]:checked').val();
		var copytype = [];
		var label = [];
              $.each($("input[name='copyType']:checked"), function(){            
            	  copytype.push($(this).val());
            	    var labelText = $(this).parent().text().trim();
            	    var words = labelText.split(/\s+/);
            	    var cleanedLabel = words.map(function(word) {
            	        return word.replace(/[^\x20-\x7E]/g, ''); 
            	    }).join(' ');
            	    
            	     cleanedLabel = cleanedLabel.replace(/\s+/g, ' '); // Replace multiple spaces with a single space
            	 // var cleanedLabel = $(this).parent().text().trim().replace(/[^\x20-\x7E]/g, '');
            	    label.push(cleanedLabel);
            	  //label.push($(this).parent().text().trim());
                    });
              var arraylength=(copytype.length);
             
       
		$('#invoiceModal').modal('hide');
		window.open("/sales/view-saleInvoice-pdf-downloads?invId="+ window.btoa(invId)+"&copytype="+ window.btoa(copytype)+"&label="+ window.btoa(label), '_blank');  
	}
	/*
	 sales Item 
	 */

		var itemDefs = [
		{
				headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true

			},
			{
				headerName : "SlNo",
				field : "slNo",
				width : 70,
				cellRenderer : function(params) {
					if (params.data.slNo) {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)">'
								+ params.data.slNo + '<i class="bi-arrow-right-square-fill"></i></a>';
					} else {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)">'
								+ params.data.slNo + '<i class="bi-arrow-right-square-fill"></i></a>';
					}
				}
			}, {
				headerName : 'SKU',
				field : "sku",
			}, {
				headerName : 'HSN Code',
				field : "hsnCode",
			}, {

				headerName : 'Item Name',
				field : "itemName",
				width : 175,
			}, {

				headerName : 'Item Id',
				field : "itemId",
				width : 175,
				hide : true,
			}, {
				headerName : 'Quantity',
				field : "quantity",
				type : 'rightAligned',
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Unit',
				field : "unitName",
			}, {
				headerName : 'Unit',
				field : "unit",
				hide:true,
			}, {
				headerName : 'Unit Price',
				field : "unitPrice",
				type : 'rightAligned',
				width : 120,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Discount',
				field : "discount",
				type : 'rightAligned',
				width : 120,
				hide : true,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Amount',
				field : "lineTotal",
				type : 'rightAligned',
				//valueFormatter : currencyFormatter,
				aggFunc : 'sum'
			}, {
				headerName : 'GST Rate',
				field : "gstRate",
				type : 'rightAligned',
				//valueFormatter : currencyFormatter,
			}, {
				headerName : 'CGST',
				field : "itemCgst",
				type : 'rightAligned',
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'SGST',
				field : "itemSgst",
				type : 'rightAligned',
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'IGST',
				field : "itemIgst",
				type : 'rightAligned',
				//valueFormatter : currencyFormatter
			 }, {
				headerName : 'Taxable Amount',
				field : "taxableAmt",
				type : 'rightAligned',
				width : 155,
				//valueFormatter : currencyFormatter 
	}];
	var itemOptions = {
		columnDefs : itemDefs,
		rowSelection : 'multiple',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 100,
			height : 10,
			editable : true,
		},
		onSelectionChanged : rowSelectItem,
		getRowNodeId : function(data) {
			return data.slNo;
		},
		onCellValueChanged : function(param) {
			var quantity = param.data.quantity;
			var quantitynew = param.data.quantitynew;
			var unitPrice = param.data.unitPrice;
			var discount = param.data.discount;
			var lineTotal = parseFloat(quantity) * parseFloat(unitPrice)
					- parseFloat(discount);

			if (parseFloat(quantity) > parseFloat(quantitynew)) {
				param.data.quantity = quantitynew;

				param.api.refreshCells({
					columns : [ "quantity" ]
				});
				$("#messageParagraph").text(
						"quantity Can't Be Greater Than real value");
				$("#msgOkModal").addClass("btn3");
				$("#msgOkModal").removeClass("btn1");
				$("#msgModal").modal('show');
			} else {
				param.data.quantity = quantity;
				param.data.lineTotal = lineTotal;
				param.api.refreshCells({
					columns : [ "quantitynew", "lineTotal" ]
				});
			}
		}

	};
	
	const columnDefsa = [
		{
		    headerCheckboxSelection: true,
		    headerCheckboxSelectionFilteredOnly: true,
		    checkboxSelection: true,
		    width: 10,
		    sortable: false,
		    filter: false,
		    resizable: true

		},
		{
			  headerName: "Address Id",
			    field: "addressId",
			    cellRenderer: function(params) {
			    return '<a onclick=openDetails("' + params.data.addressId
				+ ',' + '0' + '") href="javascript:void(0)">'
				+ params.data.addressId + '</a>'; 
			    }
			    /* cellRenderer: function(params) {
			        return '<a onclick=("' + params.data.addressId + '","'+params.data.customerId+'") href="javascript:void(0)">' + params.data.addressId + '</a>';
			    } */
		},

		{
			headerName: "Country",
		    field: "country",
		    width: 200,
		    hide:true,
		}, {
			headerName: "Country",
		    field: "countryName",
		    width: 200,
		}, {
			headerName: "State",
		    field: "state",
		    width: 200,
		    hide:true,
		    
		}, {
			headerName: "State",
		    field: "stateName",
		    width: 200,
		}, {
			headerName: "City",
		    field: "city",
		    width: 200,
		}, {
			headerName: "Street",
		    field: "street1",
		    width: 200,
		}, {
			headerName: "Street",
		    field: "street2",
		    width: 200,
		}, {
			headerName: "Zip Code",
		    field: "zipCode",
		    width: 200,
		}, {
			headerName: "Phone",
		    field: "phone",
		    width: 200,
		}, {
			headerName : "Fax",
			field : "fax",
			cellStyle : {
				textAlign : 'left'
			}
		}, {
			headerName: "Default Address",
		    field: "defaultStatus",
		    width: 200,
		    cellStyle : {
				textAlign : 'center'
			},
			cellRenderer : function(params) {
				if (params.data.defaultStatus =="Yes") { 
					return '<div style="color:#0642f5">'+params.data.defaultStatus+'</div>';
				}else{
					return '<div style="color:#a9a9a9">'+params.data.defaultStatus+'</div>';
				}
			}
		} ];

	const gridSAOptions = {
	columnDefs : columnDefsa,
	defaultColDef : {
		sortable : true,
		filter : true,
		resizable : true,
		width : 187,
		height : 10
	},
	rowSelection : 'multiple',
	suppressRowClickSelection : true,
	onSelectionChanged : rowSelectAddress,
	/* getRowNodeId : function(data) {
		return data.customerId;
	} */
	};
		
	function rowSelectAddress(){
		var selectedRows =gridSAOptions.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deleteAddressDtls').attr("disabled", false);
		        $('#newAddress').attr("disabled", true);
				
		}else{
			    $('#deleteAddressDtls').attr("disabled", true);
			    $('#newAddress').attr("disabled", false);
			
		}
	}
	
	var columnSKUDefs = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true,
	    pinned: 'left',
	},
	{
	    headerName: "SKU",
	    field: "sku",
	    pinned: 'left',
	    cellRenderer: function(params) {
	        return '<a onclick=openSKUDetails("' + params.data.sku + '","'+params.data.productId+'") href="javascript:void(0)">' + params.data.sku + '</a>';
	    }
	},
	{
	    headerName: "Manufacture Item",
	    field: "manufacture",
	    width: 200,
	},
	{
		headerName: "Description",
	    field: "description",
	    width: 200,
	},
	{
		   headerName: "Model/Size",
	    field: "model"
	},
	{
		  headerName: "Area",
		    field: "area"
		},
		{
	    headerName: "Variation Type",
	    field: "variationType"
	},
	{
	    headerName: "Variation Value",
	    field: "variationValue"
	},
	{
	    headerName: "UOM",
	    field: "unit"
	},
	{
	    headerName: "Unit Sale Price",
	    field: "sPrice",
	    cellStyle: {textAlign: 'right'}
	}, 
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}
	];



	var skuOptions = {
	columnDefs: columnSKUDefs,
	rowSelection: 'multiple',
	defaultColDef: {
		sortable: true,
	    filter: true,
	    resizable: true,
	    width: 150,
	    height: 10
	},
	rowSelection: 'multiple',
	suppressRowClickSelection : true,
	onSelectionChanged: onSelectionChangedsku 
	};

	function onSelectionChangedsku(){
		var selectedRows =skuOptions.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deletess').attr("disabled", false);
		        $('#newBtn2').attr("disabled", true);
				
		}else{
			    $('#deletess').attr("disabled", true);
			    $('#newBtn2').attr("disabled", false);
			
		}
	}
	
	var columnDefsProduct = [{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true,
	    pinned: 'left',
	},
	{
	    headerName: "Product Id",
	    field: "productId",
	    pinned: 'left',
	    cellRenderer: function(params) {
	        return '<a onclick=openDetailss("' + params.data.productId + '") href="javascript:void(0)">' + params.data.productId + '</a>';
	    }
	},
	{
		 headerName: "Product Name",
		    field: "productName",
		    width: 200,
		    pinned: 'left',
	},
	{
		 headerName: "Brand",
		    field: "brand",
		    cellStyle: {textAlign: 'center'}
	   
	},
	{
	   
	    headerName: "Category",
	    field: "productCategoryText",
	    width: 250,
	},
	{
	    headerName: "Mode",
	    field: "mode",
	    cellStyle: {textAlign: 'center'}
	},
	{
		headerName: "Status",
	    field: "productStatus",
	    cellStyle: {textAlign: 'center'}
	},
	{
	  
	    headerName: "Created By",
	    field: "createdBy",
	    cellStyle: {textAlign: 'center'}
	},
	{
	    headerName: "Create Date",
	    field: "createdDate",
	    cellStyle: {textAlign: 'center'}
	}];
	var gridOptionsProduct = {
			columnDefs: columnDefsProduct,
			rowSelection: 'multiple',
			defaultColDef: {
				sortable: true,
			    filter: true,
			    resizable: true,
			    width: 149,
			    height: 10
			},
			rowSelection: 'multiple',
			suppressRowClickSelection : true,
			onSelectionChanged: onSelectionChangedproduct
	};
	
	function onSelectionChangedproduct(){
		var selectedRows =gridOptionsProduct.api.getSelectedRows();

		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
		        $('#deleteproduct').attr("disabled", false);
		        $('#newBtn').attr("disabled", true);
				
		}else{
			    $('#deleteproduct').attr("disabled", true);
			    $('#newBtn').attr("disabled", false);
			
		}
	}
	function newAddress() {
		
		$("#shippingId").val("");
		$("#country1").val("");
		$("#states1").val("");
		$("#city1").val("");
		$("#street11").val("");
		$("#street21").val("");
		$("#zipCode1").val("");
		$("#phone1").val("");
		$("#fax1").val("");
		 $("#addStatus").prop("checked",false);
		document.getElementById("mySidenavAddress").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;bottom:467px;";

		document.getElementById("mainSa").style.width = "70%";
	}

	function closeNavAddress() {
		document.getElementById("mySidenavAddress").style.width = "0";
		document.getElementById("mainSa").style.width = "100%";
		$("#shippingId").val("");
		$("#country1").val("");
		$("#states1").val("");
		$("#city1").val("");
		$("#street11").val("");
		$("#street21").val("");
		$("#zipCode1").val("");
		$("#phone1").val("");
		$("#fax1").val("");
		 $("#addStatus").prop("checked",false);
	}
	function selectActiveCancel() {
		$("#itemNameTemp").val('');
		$("#itemIdTemp").val('');
		$("#brandNameTemp").val('');
		$("#brandIdTemp").val('');
		$("#skuTemp").val('');
		$("#hsnCodeTemp").val('');
		$("#prodCatIdTemp").val('');
		$("#prodCatNameTemp").val('');
		$("#searchTemp").val('');
		$("#unitTemp").val('');
		$("#gstRateTemp").val('');

	} 
	
	function selectCheckBox(id, lvl) {
		if(id=='PCAT000001'){
			$('#lbl_PCAT000001').hide();
			$('#ccCheck_PCAT000001').hide();
			
		}
		else{
			$('#lbl_PCAT000001').val(null);
			$('#ccCheck_PCAT000001').val(null);
		$("#select_product").empty();
		getProductByCategory();

		/* $(".pc1-box").prop("checked",false);
		$("#cat_"+id).prop("checked",true); */

		if (lvl == 'L1') {
			var textDesc = $("#lbl_" + id).text();
			$("#catDesc").text(textDesc);
		} else {
			var res = lvl.substring(1, 1000000);

			var lastText = $("#lbl_" + id).text();
			var textDesc = "";
			for (i = res; i > 1; i--) {
				var pUL = $("#lbl_" + id).parents("ul").attr("id");
				pUL = pUL.substring(3, 10000000000000);
				var newText = $("#lbl_" + pUL).text();
				textDesc = newText + " > " + textDesc;
				id = pUL;
			}
			textDesc = textDesc + lastText;
			$("#catDesc").text(textDesc);
		}
	}
	}
	
	function selectProductVal() {
		$("#itemName").val($("#itemNameTemp").val());
		$("#itemId").val($("#itemIdTemp").val());
		$("#hsnCode").val($("#hsnCodeTemp").val());
		$("#unit").val($("#unitTemp").val());
		$("#gstRate").val($("#gstRateTemp").val());
		$("#brandName").val($("#brandNameTemp").val());
		$("#brandId").val($("#brandIdTemp").val());
		$("#category").val($("#prodCatIdTemp").val());
		$("#categoryName").val($("#prodCatNameTemp").val());
		$("#sku").val($("#skuTemp").val());
		$("#search").val($("#itemNameTemp").val())
		$("#select_product").html('');
		$('#myModal').modal('hide');
	}

	function getProductByCategory() {

		$("#select_product").empty();
		var valor = "";
		$('input.pc1-box[type=checkbox]').each(function() {
			if (this.checked)
				valor = valor + $(this).val() + ",";
		});
		if (valor) {
			$("#select_product").empty();
			$
					.ajax({
						type : "POST",
						url : "view-saleInvoice-item-product-by-cat",
						dataType : 'json',
						contentType : 'application/json',
						data : valor,
						success : function(response) {
							if (response.message == "success") {
								console.log(response.body)
								$("#select_product").empty();
								var content = '';
								for (var i = 0; i < response.body.length; i++) {

									content += '<div class="autocompletedata cp product-item" id="'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '" onClick=selectActive("'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '","'
											+ response.body[i].sku
											+ '","'
											+ response.body[i].productId
											+ '","'
											+ window
													.btoa(response.body[i].productName)
											+ '","'
											+ response.body[i].brandId
											+ '","'
											+ window
													.btoa(response.body[i].brandName)
											+ '","'
											+ response.body[i].productCatId
											+ '","'
											+ window
													.btoa(response.body[i].productCatName)
											+ '","'
											+ window
													.btoa(response.body[i].hsnCode)
											+ '","'
											+ window
													.btoa(response.body[i].unit)
											+ '","'
											+ window
													.btoa(response.body[i].gstRate)
											+ '")>'
											+ response.body[i].sku
											+ " - "
											+ response.body[i].brandName
											+ " - "
											+ response.body[i].productName
											+ '</div>';
								}
								content += '</ul>';
								$("#select_product").show();
								$("#select_product").append(content);

								var itemId = $("#itemId").val();
								var skuId = $("#sku").html();

								if (itemId) {
									$("#" + itemId + "_" + skuId).addClass(
											'productActive');
								}

							}
						},
						error : function(data) {
							console.log(data)
						}
					})
		} else {
			$("#select_product").empty();
		}
	}
	
	function selectActive(id, sku, productId, productName, brandId, brandName,
			prodCatId, prodCatName, hsnCode, unit, gstRate) {

		$('.autocompletedata ').removeClass('productActive');
		$("#" + id).addClass('productActive');
		$("#itemNameTemp").val(window.atob(productName));
		$("#itemIdTemp").val(productId);
		$("#brandNameTemp").val(window.atob(brandName));
		$("#brandIdTemp").val(brandId);
		$("#skuTemp").val(sku);
		$("#prodCatIdTemp").val(prodCatId);
		$("#hsnCodeTemp").val(window.atob(hsnCode));
		$("#unitTemp").val(window.atob(unit));
		$("#gstRateTemp").val(window.atob(gstRate));
		$("#prodCatNameTemp").val(window.atob(prodCatName));
		$("#searchTemp").val(window.atob(productName))
	}
	function add() {
		$("#documentDetails").show();
		$('#deleteItem').attr("disabled", true);
		$("#searchRowDiv").hide();
		$('#deleteItem').attr("disabled", true);
		$('#salesInvrtn').hide();
		$("#delete").hide();
		$("#paymentDtls").hide();
		$("#deliveryChallanDtls").hide();
		$("#reject").hide();
	
		$('#hideTbl').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
	
		$("#salesInvoiceheadId").html('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#hsnCode").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#subTotal").val('');
		$("#qIGST").val('');
		$("#qCGST").val('');
		$("#qSGST").val('');
		$("#grandTotal").val('');
		$("#taxType").val('');
		$("#sku").val('');
		$("#poId").val('');
		$("#qutActive").val('');
		$("#itemIgst").val();
		$("#itemCgst").val();
		$("#itemSgst").val();
		$("#custId").val();
		$("#custName").val();
		$("#paymentTermId").val("");
		$("#invoiceDate").val("");
		$("#dueDate").val("");
		$("#tcsId").val("");
		$("#tcsAmount").val("");
		$("#adjustment").val("");
		$("#totalFreightCharges").val("");
		$("#total").val("");
		$("#ebillNo").val("");
		$("#ebillDate").val("");
		$("#challanNo").val("");
		$("#tMode").val("");
		$("#dateofSupply").val("");
		$("#transporterId").val("");
		$("#transporterName").val("");
		$("#lrNumber").val("");
		$("#vehicleNo").val("");
		
		var sessionOrganization1 = $("#sessionOrganization1").val();
		$("#organizationName").val(sessionOrganization1);
		$("#organatioModal").show();
		var date = (new Date()).toISOString().split('T')[0];
		var newDate = changeDateFormat(date);
		$("#invoiceDate").val(newDate);
		
		$.ajax({type : "GET",
			url : "view-saleInvoice-get-insertedid",
					success : function(response) {
						if (response.message == "success") {
						//console.log("Response--------------"+JSON.stringify(response.body[0].name));
						$("#invoiceReference").val(response.body[0].key);
						}
					},
					error : function(e) { 
					}
				});
		
		
		
	}
	function changeDateFormat(inputDate){  // expects Y-m-d
	    var splitDate = inputDate.split('-');
	    if(splitDate.count == 0){
	        return null;
	    }
	    var year = splitDate[0];
	    var month = splitDate[1];
	    var day = splitDate[2]; 

	    return day + '-' + month + '-' + year;
	}
	function Cancel() {
		$('.formValidation').remove();
			$("#salesInvrtn").show();
			$("#delete").show();
			$("#paymentDtls").show();
			$("#deliveryChallanDtls").show();
			
			$("#add").show();
			$("#myGrid").show();
			$("#save").hide();
			$("#Cancel").hide();
			$("#addData").hide();
			$('#hideTbl').show();
			$("#totalCandidate").show();
			$("#dwnld").show();
			$("#upld").show();
			$("#addPayment").hide();
			$("#reject").show();
 
			$("#reqTable").show();
			$(".btn-hs").show();
			$("#myGrid").show();
			$("#addData").hide();
			 $("#searchRowDiv").show();
			agGrid.simpleHttpRequest({
				url : "view-saleInvoice-through-ajax"
			}).then(function(data) {
				var len = data.length;
				$('#totalCandidate').find('span').html(len);
				gridOptions.api.setRowData(data);
			});
			$("#custId").val('');
			
			$("#custName").val('');
			$("#salesInvoiceheadId").html('');
			$("#itemId").val('');
			$("#itemName").val('');
			$("#hsnCode").val('');
			$("#quantity").val('');
			$("#unitPrice").val('');
			$("#discount").val('');
			$("#gstRate").val('');
			$("#lineTotal").val('');
			$("#subTotal").val('');
			$("#qIGST").val('');
			$("#qCGST").val('');
			$("#qSGST").val('');
			$("#grandTotal").val('');
			$("#taxType").val('');
			$("#sku").val('');
			$("#poId").val('');
			$("#itemIgst").val();
			$("#itemCgst").val();
			$("#itemSgst").val();
 
			itemOptions.api.setRowData();

			$('#delete').attr("disabled", true);
			$('#salesInvrtn').attr("disabled", true);
			$('#paymentDtls').attr("disabled", true);
			$('#deliveryChallanDtls').attr("disabled", true);
	}
	function openNav() {
		$("#sku").val("");
		$("#itemName").val("");
		$("#hsnCode").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		$("#discount").val(0);
		$("#gstRate").val(0);
		$("#lineTotal").val("");
		$("#editProduct").val("");
		$("#skuDivv").hide();
		var custValid = true;
		if ($("#custName").val() == null || $("#custName").val() == "") {
			custValid = false;
		}
		$("#save").hide();
		if(custValid){
			document.getElementById("mySidenav").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:550px;";
			document.getElementById("main_content1").style.width = "75%";
		}else{
			$("#messageParagraph").text("First Choose Customer Name");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			$("#save").show();
		}
		
		
		
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
		document.getElementById("main_content1").style.width = "100%";
		$('.formValidation').remove();
		$("#sku").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#hsnCode").val('');
		$("#unit").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#editProduct").val(null);
		$("#save").show();
		
	}
 
	/*
	 * taxtype fn
	 */
		function hideShowS() {
			var taxType1 = $("#taxType").val();
			if (taxType1 == 'true') {
				$('#igstTR').hide();
				$('#cgstTR').show();
				$('#sgstTR').show();
			} else {
				$('#igstTR').show();
				$('#cgstTR').hide();
				$('#sgstTR').hide();
			}
		}
	/*
	 * taxtype fn for payment
	 */
	function hideShowSPay() {
		var taxType1 = $("#taxType").val();
		if (taxType1 == "true") {
			$('#igstPayTR').show();
			$('#cgstPayTR').hide();
			$('#sgstPayTR').hide();

		} else {
			$('#igstPayTR').hide();
			$('#cgstPayTR').show();
			$('#sgstPayTR').show();

		}

	}

	/* //sale Invoice item  table add */

	function saveTableData() {
		var editProduct = $("#editProduct").val();
		var item = {};
		var data = 1;
		var validation = true;

		if (item.sku == null || item.sku == "") {
			validation = validationUpdated("Stock Keeping Unit Required", 'sku');
		}
		if (item.itemName == null || item.itemName == "") {
			validation = validationUpdated("Item Name Required", 'itemName');
		}
		if (item.quantity == null || item.quantity == "") {
			validation = validationUpdated("Quantity Required", 'quantity');
		}
		if (item.unit == null || item.unit == "") {
			validation = validationUpdated("Unit Required", 'unit');
		}
		if (item.unitPrice == null || item.unitPrice == "") {
			validation = validationUpdated("UnitPrice Required", 'unitPrice');
		}
		if (item.discount == null || item.discount == "") {
			validation = validationUpdated("Discount Required", 'discount');
		}
		if (item.gstRate == null || item.gstRate == "") {
			validation = validationUpdated("GST Rate Required", 'gstRate');
		}
		if (item.lineTotal == null || item.lineTotal == "") {
			validation = validationUpdated("Line Total Required", 'lineTotal');
		}

		if (validation) {
			item.slNo = data;
			itemOptions.api.forEachNode(function(rowNode, index) {
				
				if (!editProduct) {
					data = data + 1;
					item.slNo = data;
				}else{
				item.slNo = editProduct;
				}
			});

			item.itemId = $('#itemId').val();
			item.sku = $('#sku').val();
			item.hsnCode = $('#hsnCode').val();
			item.itemName = $('#itemName').val();
			item.quantity = $('#quantity').val();
			item.unit = $('#unit').val();
			item.unitName = $("#unit option:selected").text();
			item.unitPrice = $('#unitPrice').val();
			item.discount = $('#discount').val();
			item.gstRate = $('#gstRate').val();
			item.lineTotal = $('#lineTotal').val();
			item.sizeInMM = $('#sizeInMM').val();
			item.thicknessInMM = $('#thicknessInMM').val();
			item.itemDesc = $('#itemDesc').val();
			var taxType = $("#taxType").val();
if (taxType == 'true') {
				
				/* item.itemCgst = (item.lineTotal * item.gstRate) / 200;
				item.itemSgst = (item.lineTotal * item.gstRate) / 200;
				item.itemIgst = 0;
				item.taxableAmt = parseFloat(item.lineTotal) + item.itemCgst
						+ item.itemSgst; */
				
			
				var itemSgstFix = (parseFloat(item.lineTotal) * parseFloat(item.gstRate)) / 200;
				var itemCgstFix = (parseFloat(item.lineTotal) * parseFloat(item.gstRate)) / 200;
						
				item.itemCgst =  parseFloat(itemCgstFix).toFixed(2);
				item.itemSgst = parseFloat(itemSgstFix).toFixed(2);
				item.itemIgst = 0;
				item.taxableAmt = (parseFloat(item.lineTotal) + parseFloat(item.itemCgst)
						+ parseFloat(item.itemSgst)).toFixed(2);
				 
				
			} else {
				item.itemCgst = 0;
				item.itemSgst = 0;
				item.itemIgst = (item.lineTotal * item.gstRate) / 100;
				item.taxableAmt = (parseFloat(item.lineTotal) + parseFloat(item.itemIgst)).toFixed(2);
			}
			//item.slNo = data;
			var quot = [];

			if (editProduct) {
				var rowNode = itemOptions.api.getRowNode(editProduct);
				rowNode.setData(item);
			} else {
				itemOptions.api.forEachNode(function(rowNode, index) {
					quot.push(rowNode.data);
				});
				quot.push(item)
				itemOptions.api.setRowData(quot);

				
				}
			priceCalculation();
			closeNav();
			$("#sku").val('');
			$("#itemId").val('');
			$("#itemName").val('');
			$("#quantity").val('');
			$("#unit").val('');
			$("#unitPrice").val('');
			$("#discount").val('');
			$("#gstRate").val('');
			$("#lineTotal").val('');
			$("#sizeInMM").val('');
			$("#thicknessInMM").val('');
			$("#itemDesc").val('');
			$("#editProduct").val(null);
		
		}

	}
	
	function priceCalculation() {
		var grid = [];
		itemOptions.api.forEachNode(function(rowNode, index) {

			grid.push(rowNode.data);
		});
		var len = grid.length;
		var val = 0;
		var val2 = 0;
		var val3 = 0;
		var val4 = 0;
		
		
		var taxType1 = $("#taxType").val();
		for (i = 0; i < len; i++) {

			if (taxType1 == 'true') {
				
				val2 = parseFloat(val2) + parseFloat(grid[i].itemSgst);
				val3 = parseFloat(val3) + parseFloat(grid[i].itemCgst);
			} else {
				
				val4 = parseFloat(val4) + parseFloat(grid[i].itemIgst);

			}
			
			val = parseFloat(val) + parseFloat(grid[i].lineTotal);

		}
		tcsCalculation();
		calculateAdjustment();

		freightCal();
		
		var tcsval = 0.0;
		

		var tcs = $('#tcsName').val();
		if (tcs != '') {
			var tcsval = tcs.replace(/[^0-9]/g, '');
		}
		//var tcsval = 0.0;
		var tcsAmount = 0.0;
		tcsAmount = val * parseFloat(tcsval) / 100;

		$("#subTotal").val(val);
		$("#total").val(val);
		$("#qIGST").val(val4);
		$("#qCGST").val(val3);
		$("#qSGST").val(val2);
		var gTotal = 0.0;
		

		gTotal = parseFloat(val) + parseFloat(val2) + parseFloat(val3)
				+ parseFloat(val4) + parseFloat(tcsAmount);

		$("#grandTotal").val(gTotal.toFixed(2))
		$("#tcsAmount").val(tcsAmount.toFixed(2))

	}
 //all saved data
	function save() {
		if (validProductData()) {
			var datas = [];
			itemOptions.api.forEachNode(function(rowNode, indrx) {
				var obj = rowNode.data;
				obj.saleInvoice = $("#saleInvoice").val();
				obj.saleInvoice = $("#salesInvoiceheadId").html();
				obj.poId = $("#poId").val();
				obj.subTotal = $("#subTotal").val();
				obj.grandTotal = $("#grandTotal").val();
				obj.qIGST = $('#qIGST').val();
				obj.qCGST = $('#qCGST').val();
				obj.qSGST = $('#qSGST').val();
				obj.taxType = $('#taxType').val();
				obj.custId = $('#custId').val();
				obj.custName = $('#custName').val();
				obj.adjustment = $("#adjustment").val();
				obj.tcs = $("#tcsId").val();
				obj.tcsAmount = $("#tcsAmount").val();
				obj.paymentTermId = $('#paymentTermId').val();
				obj.invoiceDate = $("#invoiceDate").val();
				obj.dueDate = $("#dueDate").val();
				var typeId = $("#type").val();
				
			 if(typeId=="0"){
					obj.challanId = $("#challan").val();
					obj.challanDate = $("#challanDate").val();
					obj.ebillNo = $("#wayBill").val();
					obj.ebillDate = $("#wayBillDate").val();
					obj.typeId = 0;
					
				}else{
					obj.challanId = $("#challanNo").val();
					obj.challanDate = $("#dateofSupply").val();
					obj.ebillNo = $("#ebillNo").val();
					obj.ebillDate = $("#ebillDate").val();
					obj.typeId = 1;
				} 
				
				
			    obj.totalFreightCharges = $("#totalFreightCharges").val();
			    obj.total = $("#total").val();
			    obj.shippingHiddenId = $("#shippingHiddenId").val();
			    obj.shippingDetails= $("input[name='checkbox']:checked").val();
				obj.orgDetails = $('#organizationName').val();
				obj.custDetails = $('#customerName').val();
				/* obj.ebillNoNew = $("#ebillNo").val();
				obj.ebillDateNew = $("#ebillDate").val(); */
				obj.tMode = $("#tMode").val();
				obj.vehicleNo = $("#vehicleNo").val();
				obj.transporterId = $("#transporterId").val();
				obj.transporterName = $("#transporterName").val();
				obj.lrNumber = $("#lrNumber").val();
				/* obj.challanDateNew = $("#dateofSupply").val();
				obj.challanIdNew = $("#challanNo").val(); */
					
				console.log('Object',obj)
				datas.push(obj);
			});
			saveInvoice(datas);
		}
	}
	function saveInvoice(datas) {
		console.log(JSON.stringify(datas))
		$('.loader').show();
		$.ajax({

					type : "POST",
					url : "view-saleInvoice-add",
					contentType : "application/json",
					data : JSON.stringify(datas),
					success : function(response) {
						if (response.message == "Success") {
							$('.loader').hide();
							$("#messageParagraph").text(
									"Data Saved Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
							Cancel();
						}

					},
					error : function(datas) {
						console.log(datas)
						$('.loader').hide();
					}
				})

	}
	
 
	
	
	//validation
/* 	function validFormData() {
		var allValid = true;
		if (!validationUpdated("PO Id Required",'poId'))
			allValid = false; 
	if (!validationUpdated("Due Date Required", 'dueDate'))
			allValid = false;
		return allValid;
	}
 */
	function validProductData() {
		return true;
	}

	/* 
	Edit Invoice Item
	 */
	function editProduct(slNo) {
		var saleInvoice = $("#salesInvoiceheadId").html();
		var rowNode = itemOptions.api.getRowNode(slNo);

		console.log(rowNode)
		openNav();
		$("#editProduct").val(slNo);
		$("#sku").val(rowNode.data.sku);
		$("#itemId").val(rowNode.data.itemId);
		$("#itemName").val(rowNode.data.itemName);
		$("#hsnCode").val(rowNode.data.hsnCode);
		$("#quantity").val(rowNode.data.quantity);
		$("#unitPrice").val(rowNode.data.unitPrice);
		$("#gstRate").val(rowNode.data.gstRate);
		$("#discount").val(rowNode.data.discount);
		$("#lineTotal").val(rowNode.data.lineTotal);
		$("#itemIgst").val(rowNode.data.itemIgst);
		$("#itemCgst").val(rowNode.data.itemCgst);
		$("#itemSgst").val(rowNode.data.itemSgst);
		$("#unit").val(rowNode.data.unit);

	}

	function editsalesInvoice(saleInvoice, poId) {
		Cancel();
		$("#searchRowDiv").hide();
		$('#deleteItem').attr("disabled", true);
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#addData").show();
		$("#add").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#documentDetails").show();
		$("#addre").hide();
		$('.loader').show();
		
		agGrid.simpleHttpRequest({
			url : 'view-saleInvoice-edit-new?id=' + saleInvoice
		}).then(function(data) {
			$('.loader').hide();
					console.log("SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS"+data);
					$("#salesInvoiceheadId").html(data[0].saleInvoice);
					$("#custId").val(data[0].custId);
					$("#shippingHiddenId").val(data[0].shippingHiddenId);

					getAddressDetails(data[0].custId,data[0].shippingHiddenId);
					$("#custName").val(data[0].custName);
					$("#addre").show();
					$("#adjustment").val(data[0].adjustment);
					$("#tcsName").val(data[0].tcs);
					$("#tcsId").val(data[0].tcsId);
					$("#tcsAmount").val(data[0].tcsAmount);
					$("#paymentTermId").val(data[0].paymentTermId);
					$("#invoiceDate").val(data[0].invoiceDate);
					$("#dueDate").val(data[0].dueDate);
					$("#invoiceReference").val(data[0].saleInvoice);
					$("#poId").val(data[0].poId);
					$("#grandTotal").val(data[0].grandTotal);
					$("#qSGST").val(data[0].qSGST);
					$("#qCGST").val(data[0].qCGST);
					$("#subTotal").val(data[0].subTotal);
					$("#grandTotal").val(data[0].grandTotal);
					$("#taxType").val(data[0].taxType);
					$("#challan").val(data[0].challanId);
					$("#challanDate").val(data[0].challanDate);
					$("#wayBill").val(data[0].ebillNo);
					$("#wayBillDate").val(data[0].ebillDate);
					$("#totalFreightCharges").val(data[0].totalFreightCharges);
					$("#total").val(data[0].total);
					$("#qIGST").val(data[0].qIGST);
					$("#qCGST").val(data[0].qCGST);
					$("#qSGST").val(data[0].qSGST);
					/* $("#ebillNo").val(data[0].ebillNo);
					$("#ebillDate").val(data[0].ebillDate);
					$("#challanNo").val(data[0].challanNo);
					$("#tMode").val(data[0].tMode);
					$("#dateofSupply").val(data[0].dateofSupply);
					$("#transporterId").val(data[0].transporterId);
					$("#transporterName").val(data[0].transporterName);
					$("#lrNumber").val(data[0].lrNumber); */
					$("#type").val(data[0].typeId);
					
					if(data[0].typeId==0){
						$("#eWayBillSection").hide();
						$("#lrDiv").hide();
						$("#tnameDiv").hide();
						$("#tidDiv").hide();
						$("#challannoDiv").hide();
						$("#vehicleDiv").hide();
						$("#tmode").hide();
						$("#supplyDive").hide();

					}else{
						$("#eWayBillSection").show();
						$("#lrDiv").show();
						$("#tnameDiv").show();
						$("#tidDiv").show();
						$("#challannoDiv").show();
						$("#vehicleDiv").show();
						$("#tmode").show();
						$("#supplyDive").show();
						$("#tMode").val(data[0].tMode);
						$("#transporterId").val(data[0].transporterId);
						$("#transporterName").val(data[0].transporterName);
						$("#lrNumber").val(data[0].lrNumber); 
						$("#vehicleNo").val(data[0].vehicleNo); 
						$("#ebillDate").val(data[0].ebillDate); 
						$("#ebillNo").val(data[0].ebillNo); 
						$("#challanNo").val(data[0].challanId); 
						$("#dateofSupply").val(data[0].challanDate); 
					}
					
					if(data[0].shippingDetails==1){
						$("#custDetails").prop('checked', true);
						openModal(1);
					}else{
						$("#orgDetails").prop('checked', true);
						openModal(0);
					}
					$("#organizationName").val(data[0].orgDetails);
					$("#customerName").val(data[0].custDetails);
					hideShowS();
					itemOptions.api.setRowData(data);
					 //EDIT GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
 				 	/* var sum = 0.0;
					var gstRate = 0.0;
					var qSGST = 0.0;
					var qCGST = 0.0;
					var qIGST = 0.0;
					var len = data.length;
					for (var i = 0; i < len; i++) {
						sum = sum + data[i].lineTotal;
						$("#taxtype").val(data[0].taxType);
						if (data[0].taxType=='false') {
							data[0].itemIgst = data[i].lineTotal
									* data[i].gstRate / 100;
							qIGST = qIGST + data[0].itemIgst;

							grandTotal = sum + qIGST;
						} else {
							data[0].itemCgst = data[i].lineTotal
									* data[i].gstRate / 200;
							data[0].itemSgst = data[i].lineTotal
									* data[i].gstRate / 200;

							qCGST = qCGST + data[0].itemCgst;
							qSGST = qSGST + data[0].itemSgst;
							grandTotal = sum + qCGST + qSGST;
						}

					}
 
					$("#itemIgst").val(itemIgst);
					$("#itemCgst").val(itemCgst);
					$("#itemSgst").val(itemSgst);
					$("#subTotal").val(sum);  */
				
			});

	}
	//calculate Amount=(quantity*unitPrice)-Discount
	var totalLine;
	function calculateLineTotal() {
		var price = $("#unitPrice").val();
		var quantity = $("#quantity").val();
		var discount = $("#discount").val();
		var discountAmount = $("#discountAmount").val();
		if (discountAmount == '1') {
		if (price && quantity) {
			var mul = price * quantity;

			if (discount > mul) {

				$("#discount").val("0");
				totalLine = mul - discount;
				$("#lineTotal").val((mul).toFixed(2));
			} else {
				totalLine = mul - discount;
				$("#lineTotal").val((totalLine).toFixed(2));
			}

		} else {
			var mul = 0;
			$("#lineTotal").val((mul).toFixed(2));

		}
		} else {
			if (price && quantity) {
				var mul = price * quantity;
				if (discount > mul) {

					$("#discount").val("0");
					totalLine1 = (mul / 100) * discount;
					totalLine = mul - totalLine1;
					$("#lineTotal").val((mul).toFixed(2));
				} else {
					totalLine1 = (mul / 100) * discount;
					totalLine = mul - totalLine1;
					$("#lineTotal").val((totalLine).toFixed(2));
				}

			} else {
				var mul = 0;
				$("#lineTotal").val((mul).toFixed(2));

			}
		}
	}
	/* 
	Delete  
	 */
	function deleteQuotation() {

		$('#deleteQuot').modal('show');
	}
	function deleteItem() {

		$('#deleteProduct').modal('show');
	}

	function cancelModalBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteQuot').modal('hide');
		
	}

	function cancelModalProductBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteProduct').modal('hide');
	}

	function rowSelect() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var rowCount = 0;
		 var selectedNodes = gridOptions.api.getSelectedNodes();
		var selectedData = selectedNodes.map(node => node.data);
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			//$('#reject').attr("disabled", false);
			$('#delete').attr("disabled", false);
			$('#salesInvrtn').attr("disabled", false);
			$('#paymentDtls').attr("disabled", false);
			$('#deliveryChallanDtls').attr("disabled", false);
			
			 if (selectedData.map(node => node.rejectStatus)!="Rejected"){
				 $('#reject').attr("disabled", false);
			 }else{
				 $('#reject').attr("disabled", true); 
			 }

		} else {
			$('#reject').attr("disabled", true);
			$('#delete').attr("disabled", true);
			$('#salesInvrtn').attr("disabled", true);
			$('#paymentDtls').attr("disabled", true);
			$('#deliveryChallanDtls').attr("disabled", true);
		}

	}
	function rowSelectItem() {
		var selectedRows = itemOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			$('#deleteItem').attr("disabled", false);
			$('#newItem').attr("disabled", true);

		} else {
			$('#deleteItem').attr("disabled", true);
			$('#newItem').attr("disabled", false);
		}

	}

	// delete salesInvoice 

	function deleteOnclick() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.saleInvoice;
		});
		if (selectedRowsString) {
			var item = {};
			item.saleInvoice = selectedRowsString;
	
			$.ajax({
				type : "POST",
				url : "view-saleInvoice-delete",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {
				
					if (response.message == "Success") {
						location.reload();
						$('#deleteQuot').modal('hide');
						agGrid.simpleHttpRequest({
							url : 'view-saleInvoice-through-ajax'
						}).then(function(data) {
							gridOptions.api.setRowData(data);
							console.log(JSON.stringify(data))
						});

					} else {

					}
				},
				error : function(data) {
					console.log(data)
				}
			})
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}

	}

	function deleteProductOnclick() {
		var selectedRows = itemOptions.api.getSelectedRows();
		itemOptions.api.applyTransaction({
			remove : selectedRows
		});
		cancelModalProductBtn();
		//DELETE GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
		var sum = $("#subTotal").val();
		var gstRate = $("#gstRate").val();
		var qCGST = $("#qCGST").val();
		var qSGST = $("#qSGST").val();
		var qIGST = $("#qIGST").val();
		var grandTotal = $("#grandTotal").val();
/* 		var itemIgst = $("#itemIgst").val();
		var itemCgst = $("#itemCgst").val();
		var itemSgst = $("#itemSgst").val(); */
		var len = selectedRows.length;
		for (var i = 0; i < len; i++) {
			sum = sum - selectedRows[i].lineTotal;
			var taxType1 = $("#taxType").val()
			if (taxType1 == "false") {
				selectedRows[i].itemIgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 100;
				qIGST = qIGST - selectedRows[i].itemIgst;
				grandTotal = sum + qIGST;
			} else {
				selectedRows[i].itemCgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 200;
				selectedRows[i].itemSgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 200;

				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qCGST + qSGST;
			}

		}

/* 		$("#itemIgst").val(itemIgst);
		$("#itemCgst").val(itemCgst);
		$("#itemSgst").val(itemSgst); */
		$("#subTotal").val(sum);
		$("#qIGST").val(qIGST);
		$("#qCGST").val(qCGST);
		$("#qSGST").val(qSGST);
		$("#grandTotal").val(grandTotal)
		tcsCalculation();
	}

	/*create sales Invoice Return*/

 	function salesInvrtn() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.saleInvoice;

		});
		if (selectedRowsString) {
			sessionStorage.setItem('activity', 'ACT0084');

			agGrid.simpleHttpRequest({
				url : 'view-saleInvoice-edit-new?id=' + selectedRowsString
			}).then(function(data) {
				localStorage.setItem('ReqInvoiceReturnData', JSON.stringify(data));
				itemOptions.api.setRowData(data);
				window.location.href = "/sales/view-saleInvoicereturn"
			});

		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}

	} 

	/* Item AutoSearch */

		function getItemQutotationList() {
		var search = $("#itemName").val();
		if (search) {
			$.ajax({
						type : "POST",
						url : "view-saleInvoice-item-get-customer-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								if (response.body.length != 0) {
									$("#itemId").val("");
									$("#gstRate").val("");
									$("#sku").val("");
									$("#brandName").val("");
									$("#brandId").val("");
									$("#hsnCode").val("");
									$("#unit").val("");
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									for (var i = 0; i < response.body.length; i++) {
							content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValueItem1(\''
												+ response.body[i].sku
												+ '\',\''
												+ response.body[i].productId
												+ '\',\''
												+ window.btoa(response.body[i].productName)
												+ '\',\''
												+ response.body[i].brandId
												+ '\',\''
												+ window.btoa(response.body[i].brandName)
												+ '\',\''
												+ window.btoa(response.body[i].hsnCode)
												+ '\',\''
												+ window.btoa(response.body[i].unit)
												+ '\',\''
												+ window.btoa(response.body[i].gstRate)
												+ '\')">'
												+ response.body[i].sku
												+ " - "
												+ response.body[i].productName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
										+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);

								} else {
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px;font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"li onClick="selectAutocompleteValueItem()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
												+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}else{
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#unit").val("");
			$("#suggesstion-box_").hide();
		}
	}
	function closeModal1(){
		$("#myModal").modal('hide');
	}
	function selectAutocompleteValueItem1(sku, productId, productName, brandId, brandName,
			 hsnCode, unit, gstRate) {
		if (sku) {
			$("#itemName").val(window.atob(productName));
			$("#itemId").val(productId);
			$("#brandName").val(window.atob(brandName));
			$("#brandId").val(brandId);
			$("#sku").val(sku);
			$("#hsnCode").val(window.atob(hsnCode));
			$("#unit").val(window.atob(unit));
			$("#gstRate").val(window.atob(gstRate));
			$("#itemName").attr('data-procat', itemId);
			$("#suggesstion-box_").hide();
			hideShowS();
		} else {
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#unit").val("");
			$("#itemName").attr('data-procat', "");
			$("#suggesstion-box_").hide();

		}
	}
	function selectAutocompleteValueItem() {

		$("#itemId").val("");

		$("#gstRate").val("");
		$("#sku").val("");
		$("#itemName").val("");
		$("#itemName").attr('data-procat', "");
		$("#suggesstion-box_").hide();

	}
	
	function onQuickFilterChanged() {
		$(".ti-search srchicon").hide();
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
 
	//calculate outStdAmt
	function calculateoutStdAmt() {
		var totalAmnt = $("#totalAmnt").val();
		var paidAmnt = $("#paidAmnt").val();
		var amt = parseFloat(totalAmnt) - parseFloat(paidAmnt)
		var outStdAmt = $("#outStdAmt").val(amt)

	}
	
	//Calculate adjustment
	function calculateAdjustment() {
		var adjustment = $("#adjustment").val();
		if (adjustment == "" || adjustment == null || adjustment == "null") {
			adjustment = 0;
			$("#adjustment").val(adjustment);
		}
		var tcsAmount = $("#tcsAmount").val();
		if (tcsAmount == "" || tcsAmount == null || tcsAmount == "null") {
			tcsAmount = 0;
			$("#tcsAmount").val(tcsAmount);
		}
		var grandTotal = $("#grandTotal").val();
		if (grandTotal == "" || grandTotal == null || grandTotal == "null") {
			grandTotal = 0;
			$("#grandTotal").val(grandTotal);
		}
		 var totalFreightCharges = $("#totalFreightCharges").val();
		if (totalFreightCharges == "" || totalFreightCharges == null || totalFreightCharges == "null") {
			totalFreightCharges = 0;
			$("#totalFreightCharges").val(totalFreightCharges);
		} 
		var subTotal = $("#subTotal").val();
		var qSGST = $("#qSGST").val();
		var qCGST = $("#qCGST").val();
		var qIGST = $("#qIGST").val();
		var adjustment = $("#adjustment").val();
		var total = $("#total").val();
		
		var totalFreightCharges = $("#totalFreightCharges").val();
		
		
		var totVal = parseFloat(total) + parseFloat(qSGST)
				+ parseFloat(qCGST) + parseFloat(qIGST) + parseFloat(tcsAmount);
		
		
		if (adjustment && totVal) {
			
			
			var add = parseFloat(adjustment) + parseFloat(totVal);
		
			$("#grandTotal").val(add);
		} else {
			var add = 0;
			
			$("#grandTotal").val(totVal);
		}
	}
	
	function freightCal(){
		
		 var totalFreightCharges = $("#totalFreightCharges").val();
			if (totalFreightCharges == "" || totalFreightCharges == null || totalFreightCharges == "null") {
				totalFreightCharges = 0;
				$("#totalFreightCharges").val(totalFreightCharges);
			} 
		var subTotal = $("#subTotal").val();
		var totalFreightCharges = $("#totalFreightCharges").val();
		var totfreight = parseFloat(subTotal) + parseFloat(totalFreightCharges)
		var qSGST=$("#qSGST").val();
		var qCGST=$("#qCGST").val();
		var ICGST=$("#ICGST").val();
		tcsCalculation();
		if (totfreight) {
			$("#total").val(totfreight);
		} else {
			
			var value = 0;
			$("#total").val(value); 
			
			
		}
	}
	
	
	//Sales person auto search

	function getSalesPersonList() {
		var search = $("#salespersonName").val();
		if (search) {
			$.ajax({
						type : "POST",
						url : "view-saleInvoice-get-salesperson-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list2" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue2(\''
												+ response.body[i].salespersonId
												+ '\',\''
												+ response.body[i].spName
												+ '\',\''
												+ response.body[i].custGSTNoo
												+ '\',\''
												+ response.body[i].taxTypee
												+ '\')">'
												+ response.body[i].spName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddSalesperson();"><a class="addCust" href="#">Add New Sales Person</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box2_").show();
									$("#suggesstion-box2_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddSalesperson();"><a class="addCust" href="#">Add New Sales Person</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box2_").show();
									$("#suggesstion-box2_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			$("#suggesstion-box2_").hide();
		}

	}

	function selectAutocompleteValuee() {
		$("#salespersonName").val("");
		$("#custGSTNoo").val("");
		$("#taxTypee").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box2_").hide();

	}

	function selectAutocompleteValue2(salespersonId, spName,custGSTNo, taxType) {
		$("#custGSTNoo").val(custGSTNo);
		$("#taxTypee").val(taxType);
			$("#search").val(spName);
			$("#search").attr('data-procat', salespersonId);
			$("#suggesstion-box2_").hide();
 
		
	}
	function AddSalesperson() {

		$('#addSalespersonModel').modal('show');

	}
	function addDetails() {
		var obj = {};

		obj.spName = $("#spName").val();
		obj.spGender = $("#spGender").val();
		obj.dobid = $("#dobid").val();
		obj.mobilenoid = $("#mobilenoid").val();
		obj.addressid_ = $("#addressid_").val();

		$.ajax({
			type : "POST",
			url : "view-saleInvoice-add-salesperson",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					//getSalessPersonList();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					//$("#myGrid").show();
					$("#salespersonDetails").hide();

				}
			},
			error : function(data) {
			}
		})

	}
	
	
	//TCS auto search

	
	function getTCSList() {
		var search = $("#tcsName").val();
		if (search) {
			$
					.ajax({
						type : "POST",
						url : "view-saleInvoice-get-tcs-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue3(\''
												+ response.body[i].tcsId
												+ '\',\''
												+ response.body[i].taxName
												+ '\',\''
												+ response.body[i].rateId
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].taxName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee1()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		} else {
			$("#suggesstion-box3_").hide();
		}

	}

	function selectAutocompleteValuee1() {
		$("#tcsId").val("");
		$("#tcsName").val("");
		$("#custGSTNoo1").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box3_").hide();
	}


	function selectAutocompleteValue3(tcsId, taxName,rateId, taxType) {
		$("#tcsId").val(tcsId);
		$("#tcsName").val(taxName);
		$("#tcsValue").val(rateId);
			$("#search").val(taxName);
			$("#search").attr('data-procat', tcsId);
			$("#suggesstion-box3_").hide();
	tcsCalculation();
	//tcsAmountCalculation();
		
	}
	function AddTCS() {
		$('#manageTCsModel').modal('show');
		$("#collection").val('');
		$("#rateId").val('');
		$("#taxName").val('');
		
	}
	function tcscancelBtn() {
		$('#manageTCsModel').modal('hide');
		$("#collection").val('');
		$("#taxName").val('');
	    $("#rateId").val('');
	}
	function addtcsInfo1() {
		
		var obj = {};
		var Id = $("#tcsId").val();

		obj.salespersonId = $("#tcsId").val();
		obj.collection = $("#collection").val();
		obj.rateId = $("#rateId").val();
		obj.taxName = $("#taxName").val();
		var validation = true;
		if (obj.collection == null || obj.collection == "") {
			validation = validationUpdated("Select Collection",
					"collection");
		}
		
			if (obj.rateId == null || obj.rateId == "") {
			validation = validationUpdated("Select Rate",
					"rateId");
		}
			if (obj.taxName == null || obj.taxName == "") {
				validation = validationUpdated("Enter Tax Name",
						"taxName");
			}
		if (validation) {
		$.ajax({
			type : "POST",
			url : "view-saleInvoice-add-tcs",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					
					//getSalessPersonList();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					//$("#myGrid").show();
					//$("#salespersonDetails").hide();
					$('#manageTCsModel').modal('hide');

				}
			},
			error : function(data) {
			}
		})

	}
	}
	
	//Calculate Tcs
			function tcsCalculation(){
				var tcsValue = $("#tcsValue").val();
				var subTotal = $("#subTotal").val();
				var grandTotal2 = $("#grandTotal").val();
				var qSGST = $("#qSGST").val();
				if (qSGST == "" || qSGST == null || qSGST == "null") {
					qSGST = 0;
					$("#qSGST").val(qSGST);
				}
				var qCGST = $("#qCGST").val();
				if (qCGST == "" || qCGST == null || qCGST == "null") {
					qCGST = 0;
					$("#qCGST").val(qCGST);
				}
				var qIGST = $("#qIGST").val();
				if (qIGST == "" || qIGST == null || qIGST == "null") {
					qIGST = 0;
					$("#qIGST").val(qIGST);
				}
				var adjustment = $("#adjustment").val();
				 if(adjustment=="" || adjustment==null || adjustment=="null"){
					 adjustment=0;
					 $("#adjustment").val(adjustment);
				 }
				 var tcsAmount = $("#tcsAmount").val();
				 if(tcsAmount=="" || tcsAmount==null || tcsAmount=="null"){
					 tcsAmount=0;
					 $("#tcsAmount").val(tcsAmount);
				 }
				 var grandTotal = $("#grandTotal").val();
				 if(grandTotal=="" || grandTotal==null || grandTotal=="null"){
					 grandTotal=0;
					 $("#grandTotal").val(grandTotal);
				 }
				  var totalFreightCharges = $("#totalFreightCharges").val();
				 if(totalFreightCharges=="" || totalFreightCharges==null || totalFreightCharges=="null"){
					 totalFreightCharges=0;
					 $("#totalFreightCharges").val(totalFreightCharges);
				 } 
				var totVal = parseFloat(subTotal) + parseFloat(qSGST)+parseFloat(qCGST) + parseFloat(qIGST)+ parseFloat(adjustment)+parseFloat(totalFreightCharges);
				if (tcsValue) {
					var tcs = (parseFloat(subTotal) * parseFloat(tcsValue)) / 100;
					var add = parseFloat(tcs) + parseFloat(totVal);
					$("#grandTotal").val((add).toFixed(2));
					$("#tcsAmount").val((tcs).toFixed(2));
				} else {
					var add = 0;
					$("#grandTotal").val((totVal).toFixed(2));
				}
			
		}
			var tcs = 0;
			function tcsBlank() {
				var tcsValue = $("#tcsValue").val();
				var tcsName = $("#tcsName").val();
				var gt = $("#grandTotal").val();
				var tcsAmount = $("#tcsAmount").val();

				if (tcsName == '') {
					$("#tcsValue").val('');
					$("#tcsId").val('');
					tcsCalculation()
					$("#tcsAmount").val(tcs);
				}

			}

		
		/* customer AutoSearch */
	function getCustomerList() {
		var search = $("#custName").val();
		if (search) {
			$.ajax({
						type : "POST",
						url : "view-saleInvoice-get-customer-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:12px;"  class="autocompletedata cp" onClick="selectAutocompleteValue1(\''
												+ response.body[i].custId
												+ '\',\''
												+ response.body[i].custName
												+ '\',\''
												+ response.body[i].custGSTNo
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].custName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;background-color:#082958;color:#fff;"  onclick="AddCustomer();"><a class="addCust" href="#">Add New Customer</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValue()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddCustomer();"><a class="addCust" href="#">Add New Customer</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}else{
			$("#addre").hide();
			$("#suggesstion-box1_").hide();
		}

	}
 
	function AddCustomer() {
		$('.formValidation').remove();
		$('#addCustomerModel').modal('show');
		$("#salutation").val('');
		$("#customerNamee").val('');
		$("#companyName").val('');
		$("#customerDisplayName").val('');
		$("#cusEmail").val('');
		$("#custMobile").val('');
		$("#custSkype").val('');
		$("#custDesignation").val('');
		$("#department").val('');
		$("#webSite").val('');
		$("#status").val('');
		$("#pan").val('');
		$("#currency").val('');
		$("#openingBalance").val('');
		$("#paymentTerms").val('');
		$("#enableDtls").val('');
		$("#portableLang").val('');
		$("#faceBook").val('');
		$("#twitter").val('');
		$("#country").val('');
		$("#states").val('');
		$("#city").val('');
		$("#street1").val('');
		$("#street2").val('');
		$("#zipCode").val('');
		$("#phone").val('');
		$("#fax").val('');
		$("#country1").val('');
		$("#states1").val('');
		$("#city1").val('');
		$("#street11").val('');
		$("#street21").val('');
		$("#zipCode1").val('');
		$("#phone1").val('');
		$("#fax1").val('');
		$("#salutation1").val('');
		$("#street11").val('');
		$("#street21").val('');
		$("#zipCode1").val('');
		$("#phone1").val('');
		$("#fax1").val('');
		$("#salutation1").val('');
		
		$("#firstName").val('');
		$("#lastName").val('');
		$("#emailAdd").val('');
		$("#mobile").val('');
		$("#remarks").val('');
		$("#mainSa").hide();
		$("#contactPersonAcc").hide();
		$("#remarksAcc").hide();
		$("#btnDiv").show();
		$("#saveAdd").hide();

	}
	function cancelBtn1() {
		$('#addCustomerModel').modal('hide');
		customerType();
		
		
	}
	
	function customerType() {
		var ctype = $('#customerType').val();
		if (ctype == 'Business') {
			$('#salutationDiv').hide();
			$('#customerNameDiv').hide();
			$('#companyNameDiv').show();
			$('#custDesignationDiv').show();
			$('#departmentDiv').show();
		} else {
			$('#salutationDiv').show();
			$('#customerNameDiv').show();
			$('#companyNameDiv').hide();
			$('#custDesignationDiv').hide();
			$('#departmentDiv').hide();
		}

	}
		function selectAutocompleteValue1(custId, custName, custGSTNo, taxType) {
			if (custId) {
				$("#custId").val(custId);
				$("#custName").val(custName);
				$("#custGSTNo").val(custGSTNo);
				$("#taxType").val(taxType);
				$("#search").val(custName);
				$("#search").attr('data-procat', custId);
				$("#suggesstion-box1_").hide();
				$("#addre").show();
				hideShowS();
				  getAddressDetails(custId,"new")
	            getSalesOrderList(custId,"add","");
			} else {
				$("#custId").val("");
				$("#custName").val("");
				$("#custGSTNo").val("");
				$("#taxType").val("");
				$("#search").val("");
				$("#search").attr('data-procat', "");
				$("#suggesstion-box1_").hide();
			}
		}
		function selectAutocompleteValue() {
			$("#custId").val("");
			$("#custName").val("");
			$("#custGSTNo").val("");
			$("#taxType").val("");
			$("#search").val("");
			$("#search").attr('data-procat', "");
			$("#suggesstion-box1_").hide();
		}
		function getAllDataForSalesOrder(){
			var saleOrderId=$("#salesOrderId").val();
			agGrid.simpleHttpRequest({
				url : 'view-saleInvoice-getdataOnSO?id=' + saleOrderId
			}).then(
					function(data) {
						$("#salesInvoiceheadId").html(data[0].saleInvoice);
						$("#taxtype").val(data[0].taxType);
						$("#salesOrderId").val(data[0].salesOrder);
						$("#custId").val(data[0].custId);
						$("#custName").val(data[0].custName);
						$("#adjustment").val(data[0].adjustment);
						$("#tcsName").val(data[0].tcs);
						$("#tcsId").val(data[0].tcsId);
						$("#tcsAmount").val(data[0].tcsAmount);
						$("#paymentTermId").val(data[0].paymentTermId);
						$("#dueDate").val(data[0].dueDate);
						itemOptions.api.setRowData(data);
						hideShowS();
						//EDIT GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
						var sum = 0.0;
						var gstRate = 0.0;
						var qSGST = 0.0;
						var qCGST = 0.0;
						var qIGST = 0.0;
						var len = data.length;
						for (var i = 0; i < len; i++) {
							sum = sum + data[i].lineTotal;
							if (data[0].taxType=='false') {
								data[0].itemIgst = data[i].lineTotal
										* data[i].gstRate / 100;
								qIGST = qIGST + data[0].itemIgst;
								grandTotal = sum + qIGST;
							} else {
								data[0].itemCgst = data[i].lineTotal
										* data[i].gstRate / 200;
								data[0].itemSgst = data[i].lineTotal
										* data[i].gstRate / 200;

								qCGST = qCGST + data[0].itemCgst;
								qSGST = qSGST + data[0].itemSgst;
								grandTotal = sum + qCGST + qSGST;
							}
						}

						$("#itemIgst").val(itemIgst);
						$("#itemCgst").val(itemCgst);
						$("#itemSgst").val(itemSgst);
						$("#subTotal").val(sum);
						$("#qIGST").val(qIGST);
						$("#qCGST").val(qCGST);
						$("#qSGST").val(qSGST);
						$("#grandTotal").val(grandTotal)

					});
		}


		function getAddressDetails(custId,shipId) {
			   if(shipId=="null" || shipId=="" || shipId==null){
				   shipId="new";
			   }
			$.ajax({
				type : "GET",
				url : "view-saleInvoice-get-address?id=" + custId + "&shipId=" + shipId ,

				async : false,
				success : function(response) {
					if (response.message == "Success") {
						
						console.log(response.body)
						$("#con").html(response.body.country);
						$("#bstate").html(response.body.states);
						$("#bcity").html(response.body.city);
						$("#bstreet1").html(response.body.street1);
						$("#bstreet2").html(response.body.street2);
						$("#bzipcode").html(response.body.zipCode);
						$("#bphone").html(response.body.phone);
						$("#bfax").html(response.body.fax);

						$("#con1").html(response.body.country1);
						$("#bstate1").html(response.body.states1);
						$("#bcity1").html(response.body.city1);
						$("#bstreet11").html(response.body.street11);
						$("#bstreet21").html(response.body.street21);
						$("#bzipcode1").html(response.body.zipCode1);
						$("#bphone1").html(response.body.phone1);
						$("#bfax1").html(response.body.fax1);
						$("#shippingHiddenId").val(response.body.shippingId);
						$("#addre").show();
						

		                  }
				}
			});
		}
		
		
		
		// Email validation
		 var pmailValid;
		 function pmailVal() {
		     var mail = $('#cusEmail').val();
		     var mid =  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
		    	 /^[a-zA-Z]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
		    	/*  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/; */
		    	 
		     if (mail != "") {
		         if (mid.test(mail)) {
		             $("#error3").hide();
		             pmailValid = true;
		             return true;
		         } else {
		             $("#error3").show();
		             $("#error3").html("Please enter a valid email id.");
		             pmailValid = false;
		             return false;
		         }

		     } else {
		    	 $('#cusEmail').val("");
		         $("#error3").hide();
		         pmailValid = true;
		         return true;
		     }

		 }
		// Email validation
		 var pmailValid1;
		 function pmailVal1() {
		     var mail = $('#emailAdd').val();
		     var mid =  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
		    	
		    	 
		     if (mail != "") {
		         if (mid.test(mail)) {
		             $("#error6").hide();
		             pmailValid1 = true;
		             return true;
		         } else {
		             $("#error6").show();
		             $("#error6").html("Please enter a valid email id.");
		             pmailValid = false;
		             return false;
		         }

		     } else {
		    	 $('#emailAdd').val("");
		         $("#error6").hide();
		         pmailValid1 = true;
		         return true;
		     }

		 }
		 
		//pancard card validation 

		 var pancardValid;

				function pancardVal() {
					
				    var pancard = $('#pan').val();
				    
				    var pancardid = /([A-Z]){5}([0-9]){4}([A-Z]){1}$/;
				    var format = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
				    
				    if (pancard != '' && pancard.toUpperCase() === pancard && !format.test(pancard)) {
				        if (pancardid.test(pancard)) {
				            $("#error4").hide();
				            pancardValid = true;
				            return true;
				        } else {
				        	
				            $("#error4").show();
				            $("#error4").html("Please enter a valid pan card no.");
				          //  $('#panno').val("");
				            pancardValid = false;
				            return false;
				        }

				    } else {
				        $('#pan').val("");
				        //$("#error4").hide();
				        pancardValid = false;
				        return false;
				     
				    }

				}

				// gst no  validation
				
				var GSTValid;
				function ValidateGSTNumber() {
					 var gstNumber = $('#gstNo').val();
			        var expr = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
			        if (gstNumber != ""){
			        
			        if (expr.test(gstNumber)) {
			        	
			        	
			        	  $("#error5").hide();
			        	  GSTValid = true;
				            return true;
			        }else{
			        	
			        	 $("#error5").show();
			             $("#error5").html("Please enter valid GST Number.");
			             GSTValid = false;
			             return false;
			        }
			        }else {
			        	
			        	 $('#gstNo').val("");
			        	 $("#error5").hide();
			        	 GSTValid = true;
				         return true;
				    }
			    }
				
				
				function checkAlphabetAndSpecialChars(fieldId) {
				    var tempVal = $("#" + fieldId).val().replace(/[^a-zA-Z!@#$%^&*()_+{}\[\]:;<>,.?~\s]/g, '');
				    tempVal = tempVal.replace(/^\w/, c => c.toUpperCase());
				    
				    const input = document.getElementById(fieldId);
				    const position = input.selectionStart;	
				    
				    if (position == 1 && tempVal.charAt(0) == ' ') {
				        $("#" + fieldId).val('');
				        tempVal = '';
				    }
				    
				    $("#" + fieldId).val(tempVal);
				}

			 function checkAlphabet(fieldId) {
						
					    var tempVal = $("#" + fieldId).val().replace(/[^a-zA-Z. ]/g,'');
					    tempVal=tempVal.replace(/^\w/, c => c.toUpperCase());
					    
					    const input = document.getElementById(fieldId);
					    const position = input.selectionStart;	
					    if(position == 1 && tempVal.charAt(0) == ' '){
					    	$("#" + fieldId).empty();
					    	tempVal = '';
					      } 
					      $("#" + fieldId).val(tempVal);
					    }
				 
				 function checkNumeric(fieldId) {

						var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');

						const input = document.getElementById(fieldId);
						const position = input.selectionStart;
						if (tempVal.slice(-1) == ' ') {
							$("#" + fieldId).empty();
							tempVal = '';
						}
						$("#" + fieldId).val(tempVal);
					}
				 
				 //Amount validation
				 function checkAmount(fieldId) {   
					var myField = document.getElementById("openingBalance")
					 var reg = /^\d{0,9}(\.\d{0,2})?$/;   
					 if (reg.test(myField.value))
					 {       
						 $("#" + fieldId).val();
						 reg = '';  
					 }else{        
						 $("#" + fieldId).val(null);     } 
					 }
				 
				 var mobValid1;

				 function mobVal1() {
				     var mob = $('#custMobile').val();
				     var phoneno = /^\d{10}$/;
				     if (mob != '') {
				         if (phoneno.test(mob)) {
				         	
				             $("#error9").hide();
				            
				             mobValid1 = true;
				             return true;
				         } else {
				         	
				             $("#error9").html(
				                 "please enter  10 digit mobile number  ex:7089451278");
				         	 $("#error9").show();
				             mobValid1 = false;
				             return false;
				         }
				     } else {
				     	 $('#custMobile').val("");
				          $("#error9").hide();
				          mobValid1 = true;
				          return true;
				     	
				        /*  $("#error9").html(" Mobile No is Required");
				         
				         mobValid1 = false;
				         return false; */
				     }
				 }
				 //Whatsapp Val
				 var mobValid2;

				 function mobVal2() {
				     var mob = $('#whatsApp').val();
				     var phoneno = /^\d{10}$/;
				     if (mob != '') {
				         if (phoneno.test(mob)) {
				         	
				             $("#error10").hide();
				            
				             mobValid2 = true;
				             return true;
				         } else {
				         	
				             $("#error10").html(
				                 "please enter  10 digit mobile number  ex:7089451278");
				         	 $("#error9").show();
				             mobValid2 = false;
				             return false;
				         }
				     } else {
				     	 $('#whatsApp').val("");
				          $("#error10").hide();
				          mobValid2 = true;
				          return true;
				        /*  $("#error10").html(" Mobile No is Required");
				         
				         mobValid2 = false;
				         return false; */
				     }
				 }
				 //mob Val
				 var mobValid3;

				 function mobVal3() {
				     var mob = $('#phone').val();
				     var phoneno = /^\d{10}$/;
				     if (mob != '') {
				         if (phoneno.test(mob)) {
				         	
				             $("#error11").hide();
				            
				             mobValid3 = true;
				             return true;
				         } else {
				         	
				             $("#error11").html(
				                 "please enter  10 digit mobile number  ex:7089451278");
				         	 $("#error11").show();
				             mobValid3 = false;
				             return false;
				         }
				     } else {
				     	 $('#phone').val("");
				          $("#error11").hide();
				          mobValid3 = true;
				          return true;
				       /*   $("#error11").html(" Mobile No is Required");
				         
				         mobValid3 = false;
				         return false; */
				     }
				 }
				 //mob Val
				 var mobValid4;

				 function mobVal4() {
				     var mob = $('#phone1').val();
				     var phoneno = /^\d{10}$/;
				     if (mob != '') {
				         if (phoneno.test(mob)) {
				         	
				             $("#error12").hide();
				            
				             mobValid4 = true;
				             return true;
				         } else {
				         	
				             $("#error12").html(
				                 "please enter  10 digit mobile number  ex:7089451278");
				         	 $("#error12").show();
				             mobValid4 = false;
				             return false;
				         }
				     } else {
				     	 $('#phone1').val("");
				          $("#error12").hide();
				          mobValid4 = true;
				          return true;
				       /*   $("#error12").html(" Mobile No is Required");
				         
				         mobValid4 = false;
				         return false; */
				     }
				 }
				 //mob Val
				 var mobValid5;

				 function mobVal5() {
				     var mob = $('#mobile').val();
				     var phoneno = /^\d{10}$/;
				     if (mob != '') {
				         if (phoneno.test(mob)) {
				         	
				             $("#error13").hide();
				            
				             mobValid5 = true;
				             return true;
				         } else {
				         	
				             $("#error13").html(
				                 "please enter  10 digit mobile number  ex:7089451278");
				         	 $("#error13").show();
				             mobValid5 = false;
				             return false;
				         }
				     } else {
				     	$('#mobile').val("");
				         $("#error13").hide();
				         mobValid5 = true;
				         return true;
				        /*  $("#error13").html(" Mobile No is Required");
				         
				         mobValid5 = false;
				         return false; */
				     }
				 }
				 //Zip Code  validation 

				 var zipcodeValid;

				 	function zipcodeVal() {
				 					
				 		var zipcode = $('#zipCode').val();
				 				  
				 		  var zipcodeid = /^\d{6}(-\d{6})?$/;
				 		 var zipcodeid1 = /^\d{6}(-\d{5})?$/;
				 		    if (zipcode != '') {
				 				 if (zipcodeid.test(zipcode) || zipcodeid1.test(zipcode) ) {
				 				        	
				 				     $("#error14").hide();
				 				     zipcodeValid = true;
				 				      return true;
				 			  } else {
				 				      $("#error14").show();
				 				      $("#error14").html("Please enter a valid Zip Code No.");
				 				       zipcodeValid = false;
				 				      return false;
				 		}

				 	} else {
				 		 $("#error14").hide();
				 		  zipcodeValid = true;
				 		 return true;
				  }

				 } 
				 	var zipcodeValid1;

				 	function zipcodeVal1() {
				 					
				 		var zipcode = $('#zipCode1').val();
				 				  
				 		  var zipcodeid = /^\d{6}(-\d{6})?$/;
				 		 var zipcodeid1 = /^\d{6}(-\d{5})?$/;
				 		    if (zipcode != '') {
				 				 if (zipcodeid.test(zipcode) || zipcodeid1.test(zipcode) ) {
				 				        	
				 				     $("#error15").hide();
				 				     zipcodeValid1 = true;
				 				      return true;
				 			  } else {
				 				      $("#error15").show();
				 				      $("#error15").html("Please enter a valid Zip Code No.");
				 				       zipcodeValid1 = false;
				 				      return false;
				 		}

				 	} else {
				 		 $("#error15").hide();
				 		  zipcodeValid1 = true;
				 		 return true;
				  }

				 } 
				 	
				 	var mobValid6;

				 	function mobVal6() {
				 	    var mob = $('#phoneb').val();
				 	    var phoneno = /^\d{10}$/;
				 	    if (mob != '') {
				 	        if (phoneno.test(mob)) {
				 	        	
				 	            $("#error16").hide();
				 	           
				 	            mobValid6 = true;
				 	            return true;
				 	        } else {
				 	        	
				 	            $("#error16").html(
				 	                "please enter  10 digit mobile number  ex:7089451278");
				 	        	 $("#error16").show();
				 	            mobValid6 = false;
				 	            return false;
				 	        }
				 	    } else {
				 	        $("#error16").html(" Mobile No is Required");
				 	        
				 	        mobValid6 = false;
				 	        return false;
				 	    }
				 	}
				 	var zipcodeValid2;

				 	function zipcodeVal2() {
				 					
				 		var zipcode = $('#zipCodeb').val();
				 				  
				 		  var zipcodeid = /^\d{6}(-\d{6})?$/;
				 		 var zipcodeid2 = /^\d{6}(-\d{5})?$/;
				 		    if (zipcode != '') {
				 				 if (zipcodeid.test(zipcode) || zipcodeid2.test(zipcode) ) {
				 				        	
				 				     $("#error17").hide();
				 				     zipcodeValid2 = true;
				 				      return true;
				 			  } else {
				 				      $("#error17").show();
				 				      $("#error17").html("Please enter a valid Zip Code No.");
				 				       zipcodeValid2 = false;
				 				      return false;
				 		}

				 	} else {
				 		 $("#error17").hide();
				 		  zipcodeValid2 = true;
				 		 return true;
				  }

				 } 
				 	
				 	var zipcodeValid3;

				 	function zipcodeVal3() {
				 					
				 		var zipCode1s = $('#zipCode1s').val();
				 				  
				 		  var zipcodeid2 = /^\d{6}(-\d{6})?$/;
				 		 var zipcodeid3 = /^\d{6}(-\d{5})?$/;
				 		    if (zipCode1s != '') {
				 				 if (zipcodeid2.test(zipCode1s) || zipcodeid3.test(zipCode1s) ) {
				 				        	
				 				     $("#error18").hide();
				 				     zipcodeValid3 = true;
				 				      return true;
				 			  } else {
				 				      $("#error18").show();
				 				      $("#error18").html("Please enter a valid Zip Code No.");
				 				       zipcodeValid3 = false;
				 				      return false;
				 		}

				 	} else {
				 		 $("#error18").hide();
				 		  zipcodeValid3 = true;
				 		 return true;
				  }

				 } 
				 	function copyAsBillingAdd() {
				 		document.getElementById("mySidenavAddress").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;bottom:490px;";

				 		document.getElementById("mainSa").style.width = "70%";
				 		 var customerId = $("#customerId").text();
				 	
				 		$("#shippingId").text(customerId); 
				 		var country = $('#country').val();
				 		var states = $('#states').val();
				 		var city = $('#city').val();
				 		var street1 = $('#street1').val();
				 		var street2 = $('#street2').val();
				 		var zipCode = $('#zipCode').val();
				 		var phone = $('#phone').val();
				 		var fax = $('#fax').val();

				 		$('#country1').val(country);
				 		//$('#states1').val(states);
				 		getStateDataOnEdit1(states);
				 		$('#city1').val(city);
				 		$('#street11').val(street1);
				 		$('#street21').val(street2);
				 		$('#zipCode1').val(zipCode);
				 		$('#phone1').val(phone);
				 		$('#fax1').val(fax);
				 	}

		//add Customer Info
		
		function addCustomerInfo() {
		pmailVal();
		pancardVal();
		pmailVal1();
		mobVal1();
		mobVal2();
		mobVal3();
		//mobVal4();
		mobVal5();
		mobVal6();
		zipcodeVal();
		//zipcodeVal1();
		zipcodeVal2();
		var obj = {};
		obj.customerId = $('#customerId').text();
		obj.customerType = $('#customerType').val();
		obj.salutation = $('#salutation').val();
		obj.customerName = $('#customerNamee').val();
		obj.companyName = $('#companyName').val();
		obj.customerDisplayName = $('#customerDisplayName').val();
		obj.cusEmail = ($('#cusEmail').val()).toLowerCase();
		obj.custMobile = $('#custMobile').val();
		obj.custSkype = $('#custSkype').val();

		 obj.custDesignation = $('#custDesignation').val();
		obj.department = $('#department').val(); 
		obj.webSite = $('#webSite').val();
		obj.status = $('#status').val();
		obj.pan = $('#pan').val();
		obj.currency = $('#currency').val();
		obj.openingBalance = $('#openingBalance').val();
		obj.paymentTerms = $('#paymentTerms').val();
		//obj.enableDtls = $('#enableDtls').val();
		obj.portableLang = $('#portableLang').val();
		obj.gstNo = $('#gstNo').val();
		obj.whatsApp = $('#whatsApp').val();
		obj.faceBook = $('#faceBook').val();
		obj.twitter = $('#twitter').val();
		obj.country = $('#country').val();
		obj.states = $('#states').val();
		obj.city = $('#city').val();
		obj.street1 = $('#street1').val();
		obj.street2 = $('#street2').val();
		obj.zipCode = $('#zipCode').val();
		obj.phone = $('#phone').val();
		obj.fax = $('#fax').val();

	

		obj.salutation1 = $('#salutation1').val();
		obj.firstName = $('#firstName').val();
		obj.lastName = $('#lastName').val();
		obj.emailAdd = ($('#emailAdd').val()).toLowerCase();
		obj.mobile = $('#mobile').val();
		obj.remarks = $('#remarks').val();
	
		//console.log("object on add customer-----------" + JSON.stringify(obj));
		var validation = true;
		if (obj.customerType == null || obj.customerType == "") {
			validation = validationUpdated("Type Required",
					"customerType");
		}
		var ctype = $('#customerType').val();
		if (ctype == 'Business') {
			if (obj.companyName == null || obj.companyName == "") {
				validation = validationUpdated("Company Name Required",
						"companyName");
			}
		} else {
			/* if (obj.salutation == null || obj.salutation == "") {
				validation = validationUpdated("Salutation Required",
						"salutation");
			} */
			if (obj.customerName == null || obj.customerName == "") {
				validation = validationUpdated("Name Required",
						"customerNamee");
			}
		}
		
		
	
		if (obj.country == null || obj.country == "") {
			validation = validationUpdated("Country Required",
					"country");
		}
		
		if (obj.states == null || obj.states == "") {
			validation = validationUpdated("State Required",
					"states");
		}
		
		
		if (obj.city == null || obj.city == "") {
			validation = validationUpdated("City Required",
					"city");
		}
		if (obj.pan == null || obj.pan == "") {
			validation = validationUpdated("Pan Card Required",
					"pan");
		}
	
		if (validation  && pmailValid && pmailValid1 && mobValid1 && mobValid2 && mobValid3 && 
				mobValid5) {
			$('.loader').show();
	    	$("body").addClass("overlay");
			$.ajax({
				type : "POST",
				url : "view-saleInvoice-adds-customer",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					console.log(response.message);
					//alert(response.message )
					if (response.message == "Success") {
						$('.loader').hide();
		            	$("body").removeClass("overlay");
						console.log(response);
						var customerIdd = $('#customerId').text();
						
						if(customerIdd!=""){
							
						    $("#messageParagraph").text("Data Saved Successfully");
			            	$("#msgOkModal").removeClass("btn3");
			            	$("#msgOkModal").addClass("btn1");
			            	$("#msgModal").modal('show');
			            	$('.loader').hide();
			            	$("body").removeClass("overlay");
			            	cancelBtn1();
						}else{
						
		            	$('.loader').hide();
		            	$("body").removeClass("overlay"); 
		            	$("#messageParagraph").text("Please Add A Customer Details");
		            	$("#msgOkModal").removeClass("btn3");
		            	$("#msgOkModal").addClass("btn1");
		            	$("#msgModal").modal('show');
		            	$("#customerId").text(response.body.customerId);
		            	$("#contactPersonAcc").show();
	                 	$("#mainSa").show();
		                $("#remarksAcc").show();
		                $("#saveAdd").show();
		                $("#next").hide();
		                $('#deleteAddressDtls').attr("disabled", true);
		                var customerIdd = $("#customerId").text();
		                agGrid.simpleHttpRequest({
		                	 url : "view-saleInvoice-shippingdetails?customerIdd=" + customerIdd,
		       			}).then(function(data) {
		       				var jsonData = JSON.parse(data.body);
		       				var allData=jsonData.Data;
		       				//var len = allData.length;
		       				//$('#totaldispatch').find('span').html(len);
		       				gridSAOptions.api.setRowData(allData);
		       			});
						}
					

					} else {
					
		            	$('.loader').hide();
		            	$("body").removeClass("overlay");
		                swal({
		                    title: response.code,
		                    text: response.message,
		                    type: "warning"
		                })
		            }
				},
				error : function(data) {
					$('.loader').hide();
					
				}
			})
		}

	}
		function addnewAddress() {

			$('#addAddressModel').modal('show');

		}
		function addnewAddress1() {

			$('#addAddressModel1').modal('show');

		}
		function cancelBtn() {
			$('#addAddressModel').modal('hide');
			}
		function cancelBtn2() {
			$('#addAddressModel1').modal('hide');
			}
		function tcscancelBtn() {
			$('#manageTCsModel').modal('hide');
			}
		
		
		function addCustomerInfo2() {
			var obj = {};
			var Id = $("#custId").val();

			obj.customerId = $("#custId").val();
			obj.country = $("#countryb").val();
			obj.states = $("#statesb").val();
			obj.city = $("#cityb").val();
			obj.street1 = $("#street1b").val();
			obj.street2 = $("#street2b").val();
			obj.zipCode = $("#zipCodeb").val();
			obj.phone = $("#phoneb").val();
			obj.fax = $("#faxb").val();
			
			var validation = true;
			if (obj.countryb == null || obj.countryb == "") {
				validation = validationUpdated("Select Country",
						"countryb");
			}
			if (obj.statesb == null || obj.statesb == "") {
				validation = validationUpdated("Select State",
						"statesb");
			}
				if (obj.zipCodeb == null || obj.zipCodeb == "") {
				validation = validationUpdated("Zipcode Required",
						"zipCodeb");
			}
			if (validation) {
				$('.loader').show();
			$.ajax({
				type : "POST",
				url : "view-po-or-wo-add-cust-billingaddress",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "Success") {
						$('.loader').hide();
						$("#messageParagraph").text("Data Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$("#addAddressModel").modal('hide');
						getAddressDetails(Id,"new");
						
						//$("#myGrid").show();
						$("#billingInfo").hide();

					}
				},
				error : function(data) {
					$('.loader').hide();
				}
			})

		}
	}
		

		function addCustomerInfo1() {
			zipcodeVal3();
			var obj = {};
			var Id = $("#custId").val();
			obj.shippingId = $("#shippingId").val();
			obj.customerId = $("#custId").val();
			obj.country1 = $("#country1s").val();
			obj.states1 = $("#states1s").val();
			obj.city1 = $("#city1s").val();
			obj.street11 = $("#street11s").val();
			obj.street21 = $("#street21s").val();
			obj.zipCode1 = $("#zipCode1s").val();
			obj.phone1 = $("#phone1s").val();
			obj.fax1 = $("#fax1s").val();
			var ds=$("input[name='isDefault']:checked").val();
			if(ds=='1'){
				obj.defaultStatus='1';
			}else{
				obj.defaultStatus='0';	
			}
		console.log(obj);
		var validation = true; 
		
		 if (!validationUpdated("Select Country", 'country1s'))
			 validation = false; 
		 
		 if (!validationUpdated("Select State", 'states1s'))
			 validation = false; 
		
		 if (!validationUpdated("Zipcode Required", 'zipCode1s'))
			 validation = false; 
			
		
			if(validation && zipcodeValid3){
			 $(".formValidation").remove();
			 $('.loader').show();
			$.ajax({
				type : "POST",
				url : "view-saleInvoice-add-cust-shippingaddress",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "Success") {
						$('.loader').hide();
						//getAddressDetails(Id)
						$("#messageParagraph").text("Shipping Address Saved Successfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						cancelBtn2();
						changeAddress();
						getAddressDetails(Id,"new");
						//$("#myGrid").show();
						$("#addAddressModel1").modal('hide');
						
						$("#shippingInfo").hide();
					}
				},
				error : function(data) {
					$('.loader').hide();
				}
			})
		}
		}
		
		
		function showDisplay() {
			var ctype = $('#customerType').val();
			if (ctype == 'Business') {
				var compName = $('#companyName').val();
				$('#customerDisplayName').val(compName);
				$('#customerNamee').val(compName);
			} else {
				var title = $('#salutation').val();
				var name = $('#customerNamee').val();
				var fullName = title + ' ' + name;
				$('#customerDisplayName').val(fullName);
				$('#customerNamee').val(name);
			}

		}		
		
		function getStateDetails(){
			
			var cname = $('#country').val();
			if (cname) { 
				var option = $("<option></option>");
				$(option).val(null);
				$(option).html("Select");
				//$("#dname").append(option);
				$.ajax({type : "GET",
					url : "view-saleInvoice-stateList?id="+ cname,
							success : function(response) {
								if (response.message == "success") {
									$("#states").empty();
									var option = $("<option></option>");
									$(option).val(null);
									$(option).html("Select");
									$("#states").append(option);
									for (var i = 0; i < response.body.length; i++) {
										var option = $("<option></option>");
										$(option).val(response.body[i].key);
										$(option).html(response.body[i].name);
										$("#states").append(option);
									}
								}
							},
							error : function(e) { 
							}
						});
			} else {
				$("#states").empty();
				var option = $("<option></option>");
				$(option).val(null);
				$(option).html("Select");
				$("#states").append(option);
				$("#states").empty();
				var option = $("<option></option>");
				$(option).val(null);
				$(option).html("Select");
				//$("#dname").append(option);
			}
		}
		
		
	function getStateDetails1(){
		
		var cname = $('#country1').val();
		if (cname) { 
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({type : "GET",
				url : "view-saleInvoice-stateList?id="+ cname,
						success : function(response) {
							if (response.message == "success") {
								$("#states1").empty();
								var option = $("<option></option>");
								$(option).val(null);
								$(option).html("Select");
								$("#states1").append(option);
								for (var i = 0; i < response.body.length; i++) {
									var option = $("<option></option>");
									$(option).val(response.body[i].key);
									$(option).html(response.body[i].name);
									$("#states1").append(option);
								}
							}
						},
						error : function(e) { 
						}
					});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetailsb(){
		
		var cname = $('#countryb').val();
		if (cname) { 
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({type : "GET",
				url : "view-saleInvoice-stateList?id="+ cname,
						success : function(response) {
							if (response.message == "success") {
								$("#statesb").empty();
								var option = $("<option></option>");
								$(option).val(null);
								$(option).html("Select");
								$("#statesb").append(option);
								for (var i = 0; i < response.body.length; i++) {
									var option = $("<option></option>");
									$(option).val(response.body[i].key);
									$(option).html(response.body[i].name);
									$("#statesb").append(option);
								}
							}
						},
						error : function(e) { 
						}
					});
		} else {
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#statesb").append(option);
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}


	function getStateDetailss(){
		
		var cname = $('#country1s').val();
		if (cname) { 
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({type : "GET",
				url : "view-saleInvoice-stateList?id="+ cname,
						success : function(response) {
							if (response.message == "success") {
								$("#states1s").empty();
								var option = $("<option></option>");
								$(option).val(null);
								$(option).html("Select");
								$("#states1s").append(option);
								for (var i = 0; i < response.body.length; i++) {
									var option = $("<option></option>");
									$(option).val(response.body[i].key);
									$(option).html(response.body[i].name);
									$("#states1s").append(option);
								}
							}
						},
						error : function(e) { 
						}
					});
		} else {
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1s").append(option);
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}


		
		
	function getStateDataOnEdit1(stateId) {
		var country = $("#country").val();
		if (country) { 
			$.ajax({
				type : "GET",
				url : "view-saleInvoice-stateList?id=" + country,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
						$("#states1").val(stateId);
					}
				},
				error : function(e) { 
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
		}
	}
		
		
function getSalesOrderList(custId,id1,id2){
		if (custId) { 
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({type : "GET",
				url : "view-saleInvoice-salesorderlist?id="+ custId+"&type="+id1,
						success : function(response) {
							if (response.message == "success") {
								console.log("Salesorder===="+JSON.stringify(response.body))
						
								$("#salesOrderId").empty();
								var option = $("<option></option>");
								$(option).val(null);
								$(option).html("Select");
								$("#salesOrderId").append(option);
								for (var i = 0; i < response.body.length; i++) {
									var option = $("<option></option>");
									$(option).val(response.body[i].name);
									$(option).html(response.body[i].name);
									$("#salesOrderId").append(option);
								}
								
								if(id2 !=""){
							 		$("#salesOrderId").val(id2);
								}
								
							}
						},
						error : function(e) { 
						}
					});
		} else {
			$("#salesOrderId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("salesOrderId");
			$("#salesOrderId").append(option);
			$("#salesOrderId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#salesOrderId").append(option);
		}
	}	
function getSalesOrder(custId,salesOrder){
	if (custId) { 
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$.ajax({type : "GET",
			url : "view-saleInvoice-salesorderlist?id="+ custId,
					success : function(response) {
						if (response.message == "success") {
							console.log("Salesorder===="+JSON.stringify(response.body))
							$("#salesOrderId").empty();
							var option = $("<option></option>");
							$(option).val(null);
							$(option).html("Select");
							$("#salesOrderId").append(option);
							for (var i = 0; i < response.body.length; i++) {
								
								if(response.body[i].name==salesOrder){
									$(option).val(response.body[i].name);
									$(option).html(response.body[i].name);
									$("#salesOrderId").append(option);
								}
							}
							if(salesOrder!="" && salesOrder!=null && salesOrder!="null"){
						 		$("#salesOrderId").val(salesOrder);
							}
						}
					},
					error : function(e) { 
					}
				});
		//$("#salesOrderId" ).val(salesOrder);
	
	} else {
		$("#salesOrderId").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("salesOrderId");
		$("#salesOrderId").append(option);
		$("#salesOrderId").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
	}
	
}	
		
function downloadDetails() { 
	  var dataset = [];
	  gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
	        dataset.push(rowNode.data);
	    });
	  gridOptions.api.exportDataAsCsv(dataset);
	}	
		
//Transportation Mode Function		
/* function dataClick()
{
	var tmodes=$("#tMode").val();
	if(tmodes=="1"){
		$("#freigtTaxRateDtls").show();
		$("#freigtChargeDtlss").show();
		$("#totalFreightChargesDtls").show();
	}
	else{
		
		$("#freigtTaxRateDtls").hide();
		$("#freigtChargeDtlss").hide();
		$("#totalFreightChargesDtls").hide();
	
	}
	
} */	
		
		
		
		
		
function changeAddress(){
	var shippingHiddenId = $("#shippingHiddenId").val();
	
$('#changeAddressModel').modal('show');
var customerId = $("#custId").val();

	$.ajax({
	type : "GET",
	/* url : "view-quotation-shipping-address", */
	 url : "view-saleInvoice-shipping-address?customerId="+ customerId, 
	success : function(response) {
		if (response.code == "success") {
			var jsonData = JSON.parse(response.body);
			var allData=jsonData.ShippingAddress;
			var address=``;
			
			for (var i=0, n=allData.length;i<n;i++) {
				if(allData[i].addressId==shippingHiddenId){
					
					address=address+`<div class="col-md-12">
					<div class="radio-align">
					<span><input type="radio" id="orgDetails" 
						checked name="checkbox" onclick="selcetOption('${allData[i].addressId}')"></span> <label
						class="lbl">${allData[i].address}</label>
				    </div>
			        </div>`;
				}else{
					address=address+`<div class="col-md-12">
					<div class="radio-align">
					<span><input type="radio" id="orgDetails" 
						 name="checkbox" onclick="selcetOption('${allData[i].addressId}')"></span> <label
						class="lbl">${allData[i].address}</label>
				    </div>
			        </div>`;
				}

				}
		/* }else{
			
		} */	 
			var len = allData.length;
		    $("#shipping").html(address);
		   
		}
	},
	error : function(e) {
	}
});

}

function cancelChangeAddressModel(){
	$('#changeAddressModel').modal('hide');
	}

function selcetOption(addressId){
	$.ajax({
		type : "GET",
		url : "view-saleInvoice-shipping-dataedit?addressId="+ addressId,
		success : function(response) {
			if (response.code == "success") {
				$('#changeAddressModel').modal('hide');
				var jsonData = JSON.parse(response.body);
				var allData=jsonData.ShippingAddress[0];
				
				var len = allData.length;
				$("#shippingHiddenId").val(addressId);
			    $("#con1").val(allData.countryName);
			    $("#bstate1").html(allData.stateName);
			    $("#bcity1").html(allData.city);
				$("#bstreet11").html(allData.street1);
				$("#bstreet21").html(allData.street2);
				$("#bzipcode1").html(allData.zipCode);
				$("#bphone1").html(allData.phone);
				$("#bfax1").html(allData.fax);
				
				
			}
		},
		error : function(e) {
		}
	}); 
	
	 
}	
		
function submitAddressDetails(dataset) {
    console.log(dataset)
     $('.loader').show();
    $.ajax({
    	 type: "POST",
         url: "view-saleInvoice-save-shipping-address",
         dataType: 'json',
         contentType: 'application/json',
         data: JSON.stringify(dataset),
        success: function(response) {
            if (response.message == "Success") {
            	$('.loader').hide();
            	closeNavAddress();
            	var customerIdd = $("#customerId").text();
				
				 agGrid.simpleHttpRequest({
	       			 url : "view-saleInvoice-shippingdetails?customerIdd=" + customerIdd,
	       			}).then(function(data) {
	       				var jsonData = JSON.parse(data.body);
	       				var allData=jsonData.Data;
	       				//var len = allData.length;
	       				//$('#totaldispatch').find('span').html(len);
	       				gridSAOptions.api.setRowData(allData);
	       			});
            	
            } else {
                swal({
                    title: response.code,
                    text: response.message,
                    type: "warning"
                })
            }
        },
        error: function(response) {
            console.log(response);
            $('.loader').hide();
        }
    })
}	
		
function openDetails (addressId) {
	 var editId = addressId.split(",");
	var addressId = editId[0];
	var modal = editId[1];
	$('.loader').show();
	newAddress();
	agGrid.simpleHttpRequest({
		 url : 'view-saleInvoice-edit-address?addressId=' + addressId,
		}).then(function(data) {
				//$("#shipmentheadId").html(data[0].salesShipmentId);
			var jsonData = JSON.parse(data.body);
			var allData=jsonData.Data;
			console.log("hhgfvh",jsonData);
			$('.loader').hide();
			   $("#shippingId").val(allData[0].addressId);
			   $("#country1").val(allData[0].country);
				$("#states1").val(allData[0].state);
				$("#city1").val(allData[0].city);
			    $("#street11").val(allData[0].street1);
				$("#street21").val(allData[0].street2);
				$("#zipCode1").val(allData[0].zipCode);
				$("#fax1").val(allData[0].fax);
				$("#phone1").val(allData[0].phone);
				if(allData[0].defaultStatus == "1") {
					$("#addStatus").prop("checked",true);
				} else {
					$("#addStatus").prop("checked",false);
				}
				
				
			});
	

}

function deleteAddressDtls() {
	$('.loader').show();
		var selectedRows = gridSAOptions.api.getSelectedRows();
					 var id=selectedRows[0].addressId;
					 console.log("vvv",id);
					
					$.ajax({
						type : "GET",
						url : "view-saleInvoice-address-delete?id=" + id,
						async : false,
						success : function(response) {

							if (true) {
								$('.loader').hide();
								$("#messageParagraph").text("Deleted Successfully");
								$("#msgOkModal").removeClass("btn3");
								$("#msgOkModal").addClass("btn1");
								$("#msgModal").modal('show');

								var customerIdd = $("#customerId").text();
								
								 agGrid.simpleHttpRequest({
					       			 url : "view-saleInvoice-shippingdetails?customerIdd=" + customerIdd,
					       			}).then(function(data) {
					       				var jsonData = JSON.parse(data.body);
					       				var allData=jsonData.Data;
					       				//var len = allData.length;
					       				//$('#totaldispatch').find('span').html(len);
					       				gridSAOptions.api.setRowData(allData);
					       			});
								
								
								$('#deleteAddressDtls').attr("disabled", true);
								
								$('#newBtn2').attr("disabled", false);
								
								
							}

						},
					});
		}

function AddProduct() {

	$('#addItemModel').modal('show');
	
	$(".formValidation").remove();
	$("#mainItem").hide();
	$("#profile").hide();
	$("#prCategoryId").val("");
	$("#tempCategoryId").val("");
	$("#prLevelId").val("");
	$("#productId").val("");
	$("#catDesc").text("");
	$("#vertical").empty();
	var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
	$("#vertical").append(img);
	$("#productName").val("");
    $("#brand").val("");
    $("#mode").val("");
    $("#hsnCodeProduct").val("");
    $("#sicCode").val("");
    //$("#imgemp").val("");
    $("#prodStatus").prop("checked",false);
    closeNavSku();
    
    agGrid.simpleHttpRequest({
		url : 'view-saleInvoice-get-sku-by-product?id=0'
	}).then(function(data) {
		console.log(data)
		skuOptions.api.setRowData(data);
		$("#skuPurchase").empty();
		$("#skuPurchase").append("<option value>Select</option>");
	});
}
function cancelItemModel() {
	$('#addItemModel').modal('hide');
	}
	
function getCategoryList() {
	$('.loader').show();
	$("body").addClass("overlay");
	$("#productDiv").modal("show");
	$.ajax({
        type: "POST",
        url: "view-saleInvoice-get-total-list",
        dataType: "json",
        contentType: "application/json",
        success: function(response) {
        	if (response.message == "Success") {
        		$("#costCeneterCBDiv").empty();
            	for(var i = 0; i < response.body.length; i++) {
            		var row = "";
            		if(response.body[i].categoryId == response.body[i].parentId) {
            			if(response.body[i].nodeCount > 0) {
            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
            			} else {
            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +
    						'" name="'+ response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
            			}
            			
            		} else {
            			if(response.body[i].nodeCount > 0) {
            				row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
            			} else {
            				
            					row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
        						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +'" name="'+
        						response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
            			}
            		}
					$("#costCeneterCBDiv").append(row);
					
            	}
        		
        		var pcat = $("#prCategoryId").val();
        		$(".benefitChk pc1-box").prop("checked", false);
        		$("#ccCheck_"+pcat).prop("checked", false);
            	
            	$('.loader').hide();
            	$("body").removeClass("overlay");
            	
            	$('#basic').simpleTreeTable({
            	    expander: $('#expander'),
            	    collapser: $('#collapser'),
            	    store: 'session',
            		storeKey: 'simple-tree-table-basic'
            	});
            }
        }, error: function(data) {
        	console.log(data)
        	$('.loader').hide();
        	$("body").removeClass("overlay");
        	$("#productDiv").modal("show");
        }
	});
}

function selectCheckBoxx(id,lvl) {
	$(".benefitChk").prop("checked", false);
	$("#ccCheck_"+id).prop("checked", true);
	$("#tempCategoryId").val(id);
	$("#prLevelId").val(lvl);
	 
}
function closeModall() {
	$("#myModall").modal("hide");
	$("#myModall").modal("empty");
}

function profilecancelbtn(){
	$('#addItemModel').modal('hide');
	deleteFile();
	$("#newId").show();
	$(".btn-hs").show();
	$("#profile").hide();
	$("#productCategoryCBDiv").attr("df","0");
	$("#prCategoryId").val("");
	$("#tempCategoryId").val("");
	$("#prLevelId").val("");
	$("#catDesc").text("");
	$("#vertical").empty();
	var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
	$("#vertical").append(img);
	viewMasterData();
	
}

function submitProduct(dataset) {
	
    console.log(dataset)
    $('.loader').show();
    $.ajax({
    	 type: "POST",
         url: "view-saleInvoice-products-save",
         dataType: 'json',
         contentType: 'application/json',
         data: JSON.stringify(dataset),
        success: function(response) {
            if (response.message == "Success") {
            	$('.loader').hide();
            	
            	//returnPage();
				
				var productIdd = $('#productId').val();
				if(productIdd!=""){
					profilecancelbtn();
				}else{
				
            	$('.loader').hide();
            	
            	/* $("#messageParagraph").text("Data Saved Successfully");
            	$("#msgOkModal").removeClass("btn3");
            	$("#msgOkModal").addClass("btn1");
            	$("#msgModal").modal('show'); */
            	$("#productId").val(response.body.productId);
            	$("#productheadId").html(response.body.productId);
            	//$("#productName").val(response.body.productName);
            	//
            	$("#mainItem").show();
            	$("#nextproduct").hide();
            	$("#productSave").show();
				}
            } else {
            	$('.loader').hide();
            	
                swal({
                    title: response.code,
                    text: response.message,
                    type: "warning"
                })
            }
        },
        error: function(response) {
        	$('.loader').hide();
        	
            console.log(response);
        }
    }) 
}
function saveFile() {
	
	var uFile = $('#fileUpload')[0].files[0];
	var fileName = $('#fileUpload').val();
console.log(uFile);
console.log(fileName);

	var lastIndex = fileName.lastIndexOf("\\");
	if (lastIndex >= 0) {
		fileName = fileName.substring(lastIndex + 1);
	}
	var iURL = URL.createObjectURL(uFile);

	$('#imgemp').attr('src', '');
	$('#imgemp').attr('src', iURL);

	var fileData = new FormData();
	fileData.append('file', uFile);
	fileData.append('path', 'none');

	$.ajax({
		type : "POST",
		url : "view-saleInvoice-upload-fileprofuct",
		enctype : "multipart/form-data",
		contentType : false,
		data : fileData,
		processData : false,
		cache : false,
		success : function(response) {

		},
		error : function(e) {

		}
	});
	
}

function check1(fieldId) {
	var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');
		$("#" + fieldId).val(tempVal);
}
function deleteFile() {
$('#fileUpload').val("");
$('#imgemp').attr('src', '');
$('#imgemp').attr('src', '../assets/images/noimage.jpg');

var fileData = new FormData();
console.log('fileData',fileData)
fileData.append('file', 'none');
fileData.append('path', 'none');
console.log('File',fileData.append('file', 'none'))
console.log('Pathh',fileData.append('path', 'none'))

$.ajax({
	type : "POST",
	url : "/view-saleInvoice-delete-fileproduct",
	enctype : "multipart/form-data",
	contentType : false,
	/* data        : fileData, */
	processData : false,
	cache : false,
	success : function(response) {
	},
	error : function(e) {

	}
});
}
function toDataUrl(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        var reader = new FileReader();
        reader.onloadend = function() {
            callback(reader.result);
        }
        reader.readAsDataURL(xhr.response);
    };
    xhr.open('GET', url);
    xhr.responseType = 'blob';
    xhr.send();
}


function openNavItem() {
	$(".formValidation").remove();
	var productId = $("#productId").val();
	var productName = $("#productName").val();
	
	$("#skudiv").hide();
	$("#skuPrdId").text(productId);
	$("#isEdit").val("");
	$("#skuId").val("");
	$("#model").val("");
	$("#manufacture").val(productName);
	$("#variationType").val("");
	$("#variationValue").val("");
	$("#itemUnit").val("");
	$("#salePrice").val("0");
	$("#saleTax").val("");
	$("#saleCess").val("");
	$("#area").val("");
	$("#description").val("");
	document.getElementById("mySidenavItem").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;bottom:4px;";

	document.getElementById("mainItem").style.width = "70%";
}


function closeNavSku() {
	$("#isEdit").val("");
	document.getElementById('skuId').readOnly = false;
	$("#skuId").val("");
	$("#model").val("");
	$("#manufacture").val("");
	$("#variationType").val("");
	$("#variationValue").val("");
	$("#itemUnit").val("");
	$("#salePrice").val("");
	$("#saleTax").val("");
	$("#saleCess").val("");
	$("#area").val("");
	$("#description").val("");
	document.getElementById("mySidenavItem").style.width = "0";
	document.getElementById("mainItem").style.width = "100%";
}
 
 
function submitProductDetails(dataset) {
    console.log(dataset)
    $('.loader').show();
    $.ajax({
    	 type: "POST",
         url: "view-saleInvoice-save-sku-dtls",
         dataType: 'json',
         contentType: 'application/json',
         data: JSON.stringify(dataset),
        success: function(response) {
            if (response.message == "Success") {
            	$('.loader').hide();
            	closeNavSku();
            	//$("#addItemModel").modal('hide');
            	var productId = $("#productId").val();
            	agGrid.simpleHttpRequest({
					url : 'view-saleInvoice-get-sku-by-product?id='+productId
				}).then(function(data) {
					console.log(data)
					skuOptions.api.setRowData(data);
					
					$("#skuPurchase").empty();
					$("#skuPurchase").append("<option value>Select</option>");
					for(var i = 0; i < data.length; i++) {
						$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
					}
				});
            	
            } else {
                swal({
                    title: response.code,
                    text: response.message,
                    type: "warning"
                })
            }
        },
        error: function(response) {
            console.log(response);
            $('.loader').hide();
        }
    })
}

function skuProductCSV() {
	var dataset = [];
	skuOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		dataset.push(rowNode.data);
	});
	skuOptions.api.exportDataAsCsv(dataset);
}
 
function openSKUDetails(skuid, id) {
	$(".formValidation").remove();
	$("#isEdit").val("");
	document.getElementById('skuId').readOnly = true;
	
	$("#skuId").val("");
	$("#model").val("");
	$("#manufacture").val("");
	$("#variationType").val("");
	$("#variationValue").val("");
	$("#itemUnit").val("");
	$("#salePrice").val("");
	$("#saleTax").val("");
	$("#saleCess").val("");
	$("#area").val("");
	$("#description").val("");
	openNavItem();
	if(id) {
		$('.loader').show();
		obj = {};
		
		obj.key = id;
		obj.name = skuid;
		
		$.ajax({
			type : "POST",
			url : "view-saleInvoice-get-sku-details",
			dataType : 'json',
			contentType : 'application/json',
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "success") {
					$('.loader').hide();
					$("#skudiv").show(); 
					$("#isEdit").val(response.body.isEdit);
					$("#skuId").val(response.body.sku);
					$("#model").val(response.body.model);
					$("#manufacture").val(response.body.manufacture);
					$("#variationType").val(response.body.variationType);
					$("#variationValue").val(response.body.variationValue);
					$("#itemUnit").val(response.body.unit);
					$("#salePrice").val(response.body.salePrice);
					$("#saleTax").val(response.body.saleTax);
					$("#saleCess").val(response.body.saleCess);
					$("#area").val(response.body.area);
					$("#description").val(response.body.description);
				}
			}, error : function(data) {
				console.log(data)
				$('.loader').hide();
			}
		});
	}
}

function deleteskuDtls(){
	$("#deleteSKU").modal('show');
}
function cancelModalSKUDtls(){
	$("#deleteSKU").modal('hide');
}
function deleteskud(){

	 var selectedNodes = skuOptions.api.getSelectedNodes();
	 var selectedData = selectedNodes.map(node => node.data);
	 sku= selectedData.map(node => node.sku);
	// alert(sku)
		var id = $('#productId').val();
	
	$.ajax({
			type : "GET",
			url : "view-saleInvoice-deletesku?id="+ sku,
			success : function(response) {
			if (response.message == "Success") {
				 $('#newBtn2').attr("disabled", false);
				 $('#deletess').attr("disabled", true);
		
				
				agGrid.simpleHttpRequest({
					url : 'view-saleInvoice-get-sku-by-product?id='+ id
				}).then(function(data) {
					console.log(data)
					skuOptions.api.setRowData(data);
					
					$("#skuPurchase").empty();
					$("#skuPurchase").append("<option value>Select</option>");
					for(var i = 0; i < data.length; i++) {
						
						$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
					}
				});
				closeNavSku();
				cancelModalSKUDtls();
			}
			},
			error : function(data) {
			console.log(data);
			}
		})
	
}

function profileSelect() {
	//newPage();
	$("#productheadId").html("");
	$(".formValidation").remove();
	$('#nextproduct').show();
	 $('#productSave').hide();
	$('#newId').hide();
	$("#profile").show();
	$("#prCategoryId").val("");
	$("#tempCategoryId").val("");
	$("#prLevelId").val("");
	$("#productId").val("");
	$("#catDesc").text("");
	$("#vertical").empty();
	var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
	$("#vertical").append(img);
	$("#productName").val("");
    $("#brand").val("");
    $("#mode").val("");
    $("#hsnCode").val("");
    $("#sicCode").val("");
    //$("#imgemp").val("");
    $("#prodStatus").prop("checked",false);
    closeNavSku();
    
    agGrid.simpleHttpRequest({
		url : 'view-saleInvoice-get-sku-by-product?id=0'
	}).then(function(data) {
		console.log(data)
		skuOptions.api.setRowData(data);
		$("#skuPurchase").empty();
		$("#skuPurchase").append("<option value>Select</option>");
	});
} 

function viewMasterData(){
	agGrid.simpleHttpRequest({
		url : 'view-saleInvoice-get-sku-listing?type='+'Sales'
	}).then(function(data) {
		var len = data.length;
		$('#totalReq').find('span').html(len);
		console.log(data)
		gridOptionsProduct.api.setRowData(data);
	});
}

function onQuickFilterChangedd() {
	gridOptionsProduct.api.setQuickFilter(document.getElementById('quickFilterr').value);
}

function cancelBarr() {
	var id = document.getElementById("closeKeyy");
	id.style.display = "block";

	if ($('#quickFilterr').val() == null || $('#quickFilterr').val() == "") {
		id.style.display = "none";
	}
}

function openDetailss (id) {
	//$("#skudiv").show();
	$('.formValidation').remove();
	//newPage();
	$("#mainItem").show();
	$("#productId").val("");
	$("#productName").val("");
	$("#brand").val("");
	$("#mode").val("");
	$("#prodStatus").prop("checked",false);
	$("#prCategoryId").val("");
	$("#tempCategoryId").val("");
	$("#prLevelId").val("");
	$("#catDesc").text("");
	profileSelect();
	if(id) {
		$('.loader').show();
		$.ajax({
			type : "POST",
			url : "view-saleInvoice-get-product-details",
			dataType : 'json',
			contentType : 'application/json',
			data : id,
			success : function(response) {
				if (response.message == "success") {
					$('.loader').hide();
					//console.log(response);
					$("#productheadId").html(response.body.productId);
					$("#productId").val(response.body.productId);
					$("#productName").val(response.body.productName);
					$("#brand").val(response.body.brand);
					$("#mode").val(response.body.mode);
					if(response.body.productStatus == "1") {
						$("#prodStatus").prop("checked",true);
					} else {
						$("#prodStatus").prop("checked",false);
					}
					
					$("#prCategoryId").val(response.body.productCategory);
					$("#catDesc").text(response.body.productCategoryText);
					$("#hsnCode").val(response.body.hsnCode);
					//$("#sicCode").val(response.body.sicCode);
			        $('#nextproduct').hide();
		            $('#productSave').show();
					
					$('#imgemp').attr('src', '');
					if(response.body.pImgName!=null && response.body.pImgName!="") {
						$('#imgemp').attr('src', response.body.pImgName);
					} else {
						$('#imgemp').attr('src', '../assets/images/noimage.jpg');
					}
					
					agGrid.simpleHttpRequest({
						url : 'view-saleInvoice-get-sku-by-product?id='+response.body.productId
					}).then(function(data) {
						console.log(data)
						skuOptions.api.setRowData(data);
						
						$("#skuPurchase").empty();
						$("#skuPurchase").append("<option value>Select</option>");
						for(var i = 0; i < data.length; i++) {
							
							$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
						}
					});
 
					
				}
			}, error : function(data) {
				console.log(data)
				$('.loader').hide();
			}
		});
	}
}

function deleteProduct() {

	$('#deleteProductModel').modal('show');
} 
function cancelProductModelOnclick() {

	$('#deleteProductModel').modal('hide');
} 

function deleteProductModelOnclick() {
	//var vendorId=$("#vendorId").val();
	var selectedRows = gridOptionsProduct.api.getSelectedRows();
	var selectedRowsString = '';
	var selectedId = '';
	selectedRows.forEach(function(selectedRow, index) {
		if (index > 0) {
			selectedRowsString += ',';
			selectedId += ',';
		}
		selectedRowsString += '"' + selectedRow.productId + '"';
		selectedId += selectedRow.productId;
	});

	if (selectedRowsString) {
		$('.loader').hide();
		$("body").addClass("overlay");

		/* var item = {};
		item.vendorLocationId = selectedRowsString; */
		$.ajax({
			type : "POST",
			url : "view-saleInvoice-products-delete?id=" + selectedRowsString
					+ "&simpleid=" + selectedId,
			success : function(response) {
				if (response.message == "success") {
					console.log(response.message)
					$("#deleteProductModel").modal('hide');
					cancelProductModelOnclick();
					$('.loader').hide();
					$("body").removeClass("overlay");
					
					viewMasterData();
					 $('#deleteproduct').attr("disabled", true);
					 $('#newBtn').attr("disabled", false);
				}
			},
			error : function(data) {
				console.log(data);
			}
		})

	} else {
		$("#alert").modal('show');
		document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
	}
	/* $('#deleteVendor').modal('hide');  */

}
function openModal(id) {
	if (id == 0) {
		$("#organatioModal").show();
		$("#customerModal").hide();
	} else if (id == 1) {
		$("#customerModal").show();
		$("#organatioModal").hide();
	} else {
		$("#customerModal").hide();
		$("#organatioModal").hide();
	}

}

function next(){
	
	var data = [];
    $(".hvrbox-layer_bottom").each(function(i) {
    	var xyz = "";
    	 toDataUrl($(this).attr("src"), function(myBase64) {
    		
    		 xyz = myBase64;
    		 data.push(myBase64);
    		 console.log(xyz)
    	});  
     	 
    })


      obj = {};

        obj['productId'] = $("#productId").val();
        obj['productName'] = $("#productName").val();
        obj['brand'] = $("#brand").val();
        obj['mode'] = $("#mode").val();
        obj['hsnCode'] = $("#hsnCode").val();
        obj['sicCode'] = $("#sicCode").val();
        obj['productStatus'] = $("input[name='isActive']:checked").val();
        obj['productCategory'] = $("#prCategoryId").val();
        obj['productCategoryText'] = $("#catDesc").text();
        obj['imgList'] = data;
        $(".formValidation").remove();
        console.log(obj);
       allPValid = true;
		if( $("#productName").val() == null || $("#productName").val() == ""){
			allPValid = false;
			validationModal("Product Name Required","productName");
		} 
		/* if( $("#brand").val() == null || $("#brand").val() == ""){
			allPValid = false;
			validationModal("Brand Required","brand");
		}  */
		if( $("#mode").val() == null || $("#mode").val() == ""){
			allPValid = false;
			validationModal("Mode Required","mode");
		} 
		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
			allPValid = false;
			validationModal("HSN/SAC Code Required","hsnCodeProduct");
		} 
		var productId = $('#productheadId').html();
        if(allPValid) {
        	if(productId!=""){
        		var rowCount = skuOptions.api.getDisplayedRowCount();
            		if(rowCount>0){
            		 submitProduct(obj);
            		}else{
                      	$("body").removeClass("overlay");
                      	$("#messageParagraph").text("Please Select Atleast one Item");
                      	$("#msgOkModal").removeClass("btn3");
                      	$("#msgOkModal").addClass("btn1");
                      	$("#msgModal").modal('show');
            		}
     
          }else{
        	submitProduct(obj);
          }
        	
        	
        }
     
}

function Reject(){
	$('#commentModal').modal('show');
	
}

function rejectOnclick() {
	
	var selectedRows = gridOptions.api.getSelectedRows();
	 var id=selectedRows[0].saleInvoice;
	var comment = $("#comment").val();
	
	// console.log("vvv",id);
	$.ajax({
		type : "GET",
		url : "view-saleInvoice-reject?id=" + id+"&comment="+comment,
		async : false,
		success : function(response) {

			if (true) {
				$("#messageParagraph").text("Rejected Successfully");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');

				/* agGrid.simpleHttpRequest({
					url : "view-quotation-through-ajax"
				}).then(function(data) {
					var len = data.length;
					$('#totalCandidate').find('span').html(len);
					gridOptions.api.setRowData(data);
				}); */
				//location.reload();
				
				
				$('#delete').attr("disabled", true);
				$('#reqAppvBtn').attr("disabled", true);
				$('#revision').attr("disabled", true);
				$('#add').attr("disabled", false);
				
				
			}

		},
	});
}
function totalProductCSV() {
	var dataset = [];
	gridOptionsProduct.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		dataset.push(rowNode.data);
	});
	gridOptionsProduct.api.exportDataAsCsv(dataset);
}

function vendorNameUpper(){
	
		var text =$("#customerNamee").val();
		var result = text.toUpperCase();
		$("#customerNamee").val(result);
	}
	function vendorNameUpperr(){
		var text =$("#companyName").val();
		var result = text.toUpperCase();
		$("#companyName").val(result);
	}
	function productNameUpper(){
		var text =$("#productName").val();
		var result = text.toUpperCase();
		$("#productName").val(result);
	}
</script>
</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">


						<div class="d-flex justify-content-between" id="reqTable"
							style="display: none;">

							<div class="btn-hs">
								<div class="font-design" id="totalCandidate">
									SALE INVOICE LIST (<span></span>)
								</div>
							</div>


							<div id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

							<div class="col-md-5 buttonsec btn-hs">
								<button onclick="downloadDetails()" class="btn4" id=dwnld>Download</button>
								<button onclick="Reject()" class="reject-btn" id="reject">Reject</button>
								<button onclick="add()" class="btn1" id="add">New</button>
								<button onclick="deleteQuotation()" class="btn3" id="delete">delete</button>
								<!-- <button onclick="salesInvrtn()" class="btn2" style="width: 88px"
									id="salesInvrtn">salesInvoice Return</button> -->
								<!-- <button onclick="paymentDtls()" class="btn2" id="paymentDtls">Payment</button>
								<button onclick="deliveryChallan()" class="btn2"
									id="deliveryChallanDtls">Delivery Challan</button> -->
							</div>
						</div>
						<input type="hidden" id="sessionOrganization1"
							th:value="${session.ORGANIZATION}" />
						<div id="myGrid" style="height: 500px; width: 100%;"
							class="ag-theme-alpine"></div>
						<div class="collapse" id="addData">
							<div class="innerstickybg">
								<div class="row">
									<div class="col-md-6">
										Sales Invoice ID: <span id="salesInvoiceheadId"></span>
									</div>


									<div class="col-md-6" align="right">
										<button class="cancel-btn" id="Cancel" onClick="Cancel()">Cancel</button>
										<button class="approve-btn" id="save" onclick="save()">Save</button>
									</div>
								</div>
							</div>

							<div class="row innersticky_contentgap">
								<input type="hidden" id="salesOrder"> <input
									type="hidden" id="quotationId"> <input type="hidden"
									id="saleInvoice"> <input type="hidden" id="challan">
								<input type="hidden" id="challanDate"> <input
									type="hidden" id="wayBill"> <input type="hidden"
									id="wayBillDate"> <input type="hidden"
									id="type">
								<div class="col-lg-4">
									<div class="form-group">
										<div class="autocomplete" style="width: 100%;">
											<label>Customer Name</label> <input type="text" id="custName"
												placeholder="Customer Name" class="form-control fromtxt"
												onkeyup='getCustomerList();'><input type="hidden"
												id="custId"> <input type="hidden" id="custGSTNo">
											<input type="hidden" id="taxType">
										</div>
										<div id="suggesstion-box1_" class="sugg-cls"></div>
									</div>
									<div class="row" id=addre>
										<div class="col-md-6">
											<span class="billtxt" id="billingAdd">Billing Address</span>
											<address class="font-small ember-view">
												 <strong id="addNewAdd1" onclick="addnewAddress()"
													style="color: blue">Add New Address</strong> 
											</address>
											<div class="preserve-wrap1">
												<span id='con'></span><br> <span id='bstate'></span><br>
												<span id='bcity'></span><br> <span id='bstreet1'></span><br>
												<span id='bstreet2'></span><br> <span id='bzipcode'></span><br>
												<span id='bphone'></span><br> <span id='bfax'></span><br>
											</div>
										</div>
										<div class="col-md-6">
											<span class="billtxt" id="shippingAdd">Shipping
												Address</span> <input type=hidden id="shippingHiddenId">
											<address class="font-small ember-view">
												<strong id="changeAddress" onclick="changeAddress()"
													style="color: blue; cursor: pointer;">Change</strong>
											</address>
											<div class="preserve-wrap1">
												<span id='con1'></span><br> <span id='bstate1'></span><br>
												<span id='bcity1'></span><br> <span id='bstreet11'></span><br>
												<span id='bstreet21'></span><br> <span id='bzipcode1'></span><br>
												<span id='bphone1'></span><br> <span id='bfax1'></span><br>

											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-4">
									<div class="form-group">
										<label>PO Id</label><input type="text" id="poId"
											class="form-control">
									</div>
								</div>

								<div class="col-lg-4">
									<div class="form-group">
										<label>Invoice Reference Id#</label><input type="text"
											id="invoiceReference" class="form-control">
									</div>
								</div>

								<!-- <div class="col-lg-2">
									<label>InvoiceDate</label> <input type="text" id="invoiceDate"
										class="form-control" >

								</div> -->

								<div class="col-md-4">
									<div class="form-group calendar_box">
										<label>InvoiceDate</label> <input type="text" id="invoiceDate"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('invoiceDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="invoiceDateCalendarInvoice"></i>
									</div>
								</div>

								<!-- 	<div class="col-lg-4">
									<div class="form-group">
										<label>Payment Term</label>
										<div class="select">
											<select id="paymentTermId" onblur="removeValid(event)">
												<option value="">Select</option>
												<option th:each="c,iter:${paytermList}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>

								</div> -->

								<div class="col-lg-4">
									<div class="form-group">
										<label>Payment Term(Days)</label> <input type="text"
											id="paymentTermId" 
											class="form-control">
									</div>
								</div>
								<div class="col-md-4">
									<div class="form-group calendar_box">
										<label> Due Date</label> <input type="text" id="dueDate"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('invoiceDate','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="dueDateCalendarInvoice"></i>
									</div>
								</div>

                      <div class="col-lg-4" id="challannoDiv">
									<div class="form-group">
										<label>Challan No</label><input type="text" id="challanNo"
											class="form-control">
									</div>
								</div>
								<div class="col-lg-4" id="supplyDive">
									<div class="form-group calendar_box">
										<label>Date Of Supply</label> <input type="text" id="dateofSupply"
											class="form-control" onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('dateofSupply','${session.DATEFORMAT_JS}')|">
										<i class="ti-calendar picker_calendar"
											id="dateofSupplyCalendar"></i>
									</div>
								</div>
	                      <div class="col-md-4" id="tmode">
									<div class="form-group" >
										<label>Transportation Mode</label>
										<div class="select">
											<select class="form-control" id="tMode">
												<option value="">Select</option>
												<option th:each="c,iter:${transportationModeList}"
													th:value="${c.key}" th:text="${c.name}"></option>
											</select>
										</div>
									</div>
								</div>
									<div class="col-lg-4" id="vehicleDiv">
									<div class="form-group">
										<label>Vehicle No.</label><input type="text" id="vehicleNo"
											class="form-control">
									</div>
								</div>
								<div class="col-lg-4" id="tidDiv">
									<div class="form-group" >
										<label>Transporter Id</label><input type="text"
											id="transporterId" class="form-control">
									</div>
								</div>
								<div class="col-lg-4" id="tnameDiv">
									<div class="form-group">
										<label>Transporter Name</label><input type="text"
											id="transporterName" class="form-control">
									</div>
								</div>
								<div class="col-lg-4" id="lrDiv">
									<div class="form-group">
										<label>LR Number</label><input type="text" id="lrNumber"
											class="form-control">
									</div>
								</div>
								<div class="col-lg-4">
									<div class="form-group">

										<label>Shipping Details</label>
										<div class="row mrtop" id="shippingDetails">
											<div class="col-md-5">
												<div class="radio-align">
													<span><input type="radio" id="orgDetails" value="0"
														checked name="checkbox" onclick="openModal(0)"></span> <label
														class="lbl">Organization</label>
												</div>
											</div>
											<div class="col-md-4">
												<div class="radio-align">
													<span><input type="radio" id="custDetails" value="1"
														name="checkbox" onclick="openModal(1)"></span> <label
														class="lbl">Other</label>
												</div>
											</div>
										</div>


										<div class="row">
											<div class="col-lg-12" id="organatioModal">

												<div class="form-group">
													<div class="autocomplete" style="width: 100%;">
														<label>Organization Name</label> <input type="text"
															id="organizationName" placeholder="Organization Name"
															class="form-control" readonly>

													</div>


												</div>
											</div>
											<div class="col-lg-12" id="customerModal">

												<div class="form-group">
													<div class="autocomplete" style="width: 100%;">
														<label>Other Details</label>
														<textarea id="customerName" class="form-control"></textarea>

													</div>


												</div>
											</div>
										</div>



									</div>
								</div>

								<!-- 								<div class="col-lg-4">
									<div class="form-group">
										<div class="autocomplete" style="width: 100%;">
											<label>Sales Person</label> <input type="text"
												id="salespersonName" placeholder="Sales Person Name"
												class="form-control" onkeyup='getSalesPersonList()'><input
												type="hidden" id="salesPersonId"> <input
												type="hidden" id="custGSTNoo"> <input type="hidden"
												id="taxTypee">
										</div>
										<div id="suggesstion-box2_" class="sugg-cls"></div>
									</div>
								</div> -->
							</div>

							<div id="main_content1" class="mt-4">
								<div class="accordion-item">
									<h2 class="accordion-header" id="headingOne">
										<button class="accordion-button" type="button"
											data-bs-toggle="collapse" data-bs-target="#collapseOne"
											aria-expanded="false" aria-controls="collapseOne">
											Item Details</button>
									</h2>

									<div id="collapseOne" class="accordion-collapse collapse show"
										aria-labelledby="headingOne"
										data-bs-parent="#accordionExample">
										<div class="accordion-body">

											<div class="row">

												<div class="col-md-4 btn-hs1">
													<div class="font-design"></div>
												</div>
												<div class="col-md-8 butttonsec">

													<button class="new-btn" id="newItem" onclick="openNav()">NEW</button>
													<button class="delete-btn" id="deleteItem"
														onclick="deleteItem()">Delete</button>

												</div>
											</div>
											<div id="item" style="width: 100%; height: 200px;"
												class="ag-theme-alpine"></div>


										</div>

									</div>
								</div>


								<div id="mySidenav" class="sidenav">
									<div class="slidebox">
										<div class="row">
											<div class="chartbtnsec">
												<div align="right">
													<button class="cancel-btn" onclick="closeNav()">CANCEL</button>
													<button class="approve-btn" id="saveTableData"
														onclick="saveTableData()">SAVE</button>

												</div>
											</div>

											<div class="col-lg-6" id="skuDivv">
												<div class="form-group">
													<label>Stock Keeping Unit</label> <input type="text"
														id="sku" class="form-control" onblur="removeValid(event)">
													<!-- 	<div id="suggesstion-box_" class="sugg-cls"></div> -->
												</div>
											</div>
											<div class="col-lg-12 mrt_6">
												<div class="form-group">
													<button id="browseBtnNew" class="browse-btn">Browse</button>
												</div>
											</div>
											<div class="col-lg-12">
												<div class="form-group">
													<div class="autocomplete">
														<input type="hidden" id="editProduct"> <input
															type="hidden" id="itemId"> <label>Item
															Name</label> <input type="text" id="itemName"
															onblur="removeValid(event)" class="form-control"
															onkeyup='getItemQutotationList()'>
													</div>
													<div id="suggesstion-box_" class="sugg-cls"></div>
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>HSN Code</label> <input type="text" id="hsnCode"
														onblur="removeValid(event)" class="form-control">
												</div>
											</div>

											<div class="col-lg-6">
												<div class="form-group">
													<label>Quantity</label> <input type="text" id="quantity"
														onblur="removeValid(event)" class="form-control"
														onkeyup="calculateLineTotal();getGSTRateCal()">
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>MOU</label>
													<div class="select">
														<select class="" id="unit" onblur="removeValid(event);">
															<option value="">Select</option>
															<option th:each="c,iter:${unitList}" th:value="${c.key}"
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>Unit Price</label><input type="text" id="unitPrice"
														onblur="removeValid(event)" class="form-control"
														onkeyup="calculateLineTotal();getGSTRateCal()">
												</div>
											</div>

											<div class="col-lg-6">
												<div class="form-group">
													<label>Discount</label>
													<div class="d-flex">
														<input type="text" id="discount" class="form-control"
															onkeyup="calculateLineTotal();getGSTRateCal()">
														<div class="select" style="width: 60px;">
															<select id="discountAmount" class="form-control"
																onkeyup="calculateLineTotal();getGSTRateCal()">
																<option value="0" selected>%</option>
																<option value="1">₹</option>
															</select>
														</div>

													</div>
												</div>
											</div>

											<div class="col-lg-6">
												<div class="form-group">
													<label>GST Rate</label><input type="text" id="gstRate"
														class="form-control" onkeyup="getGSTRateCal()">
												</div>
											</div>
											<div class="col-lg-6">
												<div class="form-group">
													<label>Line Total</label> <input type="text" id="lineTotal"
														onblur="removeValid(event)" class="form-control">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>


							<div class="row" id=gstCalS>
								<div class="col-lg-7">
									<div class="mt-4" id="eWayBillSection">
										<div class="card">
											<div class="card-header">
												<div align="left">
													Visit > <a href="https://ewaybill.nic.in/" target="_blank">E
														- Waybill System Website </a>
												</div>
											</div>

											<div class="card-body">
												<div class="row mt-4">
													<div class="col-lg-6">
														<div class="form-group">
															<label>Way Bill No</label><input type="text" id="ebillNo"
																class="form-control" onkeyup="checkNumeric('ebillNo');"
																maxlength="12">
														</div>
													</div>
													<div class="col-md-6">
														<div class="form-group calendar_box">
															<label> Way Bill Date</label> <input type="text"
																id="ebillDate" class="form-control"
																onblur="removeValid(event)"
																th:attr="onkeyup=|formatDate('ebillDate','${session.DATEFORMAT_JS}')|">
															<i class="ti-calendar picker_calendar"
																id="ebillDateCalendar"></i>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<div class="col-lg-5 mt-4">
									<table style="width: 100%">
										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Sub Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="subTotal" class="form-control"
																readonly>
														</div>
													</div>
												</div>
											</th>

										</tr>

										<tr>
											<th>
												<div class="row" id="totalFreightChargesDtls">
													<input type="hidden" id=ftIGST> <input
														type="hidden" id=ftCGST> <input type="hidden"
														id=ftSGST>
													<div class="col-lg-4">Freight Charges:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="totalFreightCharges"
																onkeyup="freightCal();" class="form-control">
														</div>
													</div>
												</div>

											</th>
										</tr>
										<tr>
											<th>
												<div class="row" id="totalDiv">
													<div class="col-lg-4">Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="total" class="form-control"
																onkeyup="freightCal();">
														</div>
													</div>
												</div>

											</th>
										</tr>
										<tr class="tbl-box" id="sgstTR">
											<th>
												<div class="row">
													<div class="col-lg-4">SGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qSGST" class="form-control"
																readonly> <input type="hidden" id=itemSgst>
														</div>
													</div>
												</div>
											</th>

										</tr>

										<tr id="cgstTR">
											<th>

												<div class="row">
													<div class="col-lg-4">CGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qCGST" class="form-control"
																readonly> <input type="hidden" id=itemCgst>
														</div>
													</div>
												</div>
											</th>

										</tr>

										<tr class="tbl-box" id="igstTR">
											<th>
												<div class="row">
													<div class="col-lg-4">IGST:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="qIGST" class="form-control"
																readonly> <input type="hidden" id=itemIgst>
														</div>
													</div>
												</div>
											</th>
										</tr>

										<tr>
											<th>
												<div class="row" id=tcsfield>
													<div class="col-lg-4">TCS:</div>
													<div class="col-lg-5">
														<div class="form-group">
															<input type="text" class="form-control" id="tcsName"
																placeholder="TCS" onkeyup="getTCSList(); tcsBlank()"
																autocomplete="off"> <input type="hidden"
																id="tcsId">
														</div>
														<input type=hidden id="tcsValue">
														<div id="suggesstion-box3_" class="sugg-cls"></div>
													</div>

													<div class="col-lg-3">
														<div class="form-group">
															<input type="text" class="form-control" id="tcsAmount"
																onkeyup="getTCSList();" readonly> <input
																type="hidden" id="tcsId">
														</div>
													</div>
												</div>

											</th>

										</tr>
										<!-- 	<tr>
											<th>
												<div class="row" id="totalFreightChargesDtls">
													<div class="col-lg-4">Total Freight Charges:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="totalFreightCharges" class="form-control"
																readonly>
														</div>
													</div>
												</div>

											</th>

										</tr> -->
										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Adjustment:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="adjustment" class="form-control"
																onkeyup="calculateAdjustment();freightCal()">
														</div>
													</div>
												</div>

											</th>

										</tr>


										<tr>
											<th>
												<div class="row">
													<div class="col-lg-4">Grand Total:</div>
													<div class="col-lg-8">
														<div class="form-group">
															<input type="text" id="grandTotal" class="form-control"
																readonly>
														</div>
													</div>
												</div>
											</th>

										</tr>

									</table>
								</div>
							</div>







						</div>
					</div>
					<!-- delete modal start -->
					<div id="deleteQuot" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<!-- <button type="button" class="close" data-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button> -->
								</div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn()">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<!-- delete item start	 -->
					<div id="deleteProduct" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalProductBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteProductOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="myModal">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">Select Product</h4>
									<button type="button" class="close cp" data-dismiss="modal"
										onclick="closeModal1()">&times;</button>
								</div>

								<!-- Modal body -->
								<div class="modal-body modal-cat">
									<div class="row">

										<div class="col-md-6" df="0"
											style="height: 300px; overflow-y: scroll;">
											<table id="basic">
												<tbody id="productCategoryCBDiv"></tbody>
											</table>


										</div>
										<div class="col-md-6" id="productCategorySelectDiv" df="0"
											style="border-left: 1px solid #ccc;">
											<div>
												<div class="productlist">Select Product</div>
												<div id="select_product"></div>
												<input type="hidden" id="itemNameTemp" /> <input
													type="hidden" id="itemIdTemp" /> <input type="hidden"
													id="brandNameTemp" /> <input type="hidden"
													id="brandIdTemp" /> <input type="hidden" id="skuTemp" />
												<input type="hidden" id="hsnCodeTemp" /> <input
													type="hidden" id="unitTemp" /> <input type="hidden"
													id="gstRateTemp" /> <input type="hidden"
													id="prodCatIdTemp" /> <input type="hidden"
													id="prodCatNameTemp" />
											</div>
										</div>
									</div>
								</div>

								<!-- Modal footer -->
								<div class="modal-footer">
									<div class="chartbtnsec">
										<button class="approve-btn" onclick="selectProductVal()">SELECT</button>
										<button class="cancel-btn" data-dismiss="modal"
											onclick="closeModal1()">CANCEL</button>
									</div>
								</div>

							</div>
						</div>
					</div>
					<!-- alert modal start -->
					<div id="alert" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">

								<div class="modal-body">
									<p id="textId"></p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="btn1" data-dismiss="modal">SELECT</button>
									<!-- <button type="button" class="btn3" onclick="deleteOnclick()">Delete</button> -->
								</div>
							</div>
						</div>
					</div>


					<div id="deleteAttachment" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">

								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
									<input type="hidden" id="dltValue">
								</div>
								<div class="modal-footer justify-content-center">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="closeDeleteConfirm()">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deletAttachmentRow()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<div class="modal fade" id="addSalespersonModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="salespersonDetails">
										<div class="card-title">
											<h4>Sales Person Details</h4>
										</div>
										<div class="row">
											<!-- <input type="hidden" id="salespersonId"> -->
											<div class="col-md-6">
												<div class="form-group">
													<label>Name</label> <input type="text" autocomplete="off"
														placeholder="Name" class="form-control" id="spName"
														maxLength="28">
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>Gender</label>
													<div class="select">
														<select class="form-control" id="spGender">
															<option value="null">--Select--</option>
															<option th:each="c:${genderTypeList}" th:value='${c.key}'
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group calendar_box">
													<label>Date Of Birth</label> <input type="text" id="dobid"
														placeholder="Date of birth" class="form-control"
														th:attr="onkeyup=|formatDate('dobid','${session.DATEFORMAT_JS}')|">
													<i class="ti-calendar picker_calendar2" id="dobidCalendar"></i>
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>Mobile No</label> <input type="text"
														autocomplete="off" name="mobileno" value=""
														placeholder="mobile no" class="form-control"
														id="mobilenoid" maxLength="10">
												</div>
											</div>
											<div class="col-md-6">
												<div class="form-group">
													<label>EMail</label> <input type="text" autocomplete="off"
														name="Email" value="" placeholder="Email"
														class="form-control" id="personalmailid">
												</div>
											</div>




											<div class="col-md-12">
												<div class="form-group">
													<label>Address</label>
													<textarea name="Address" placeholder="Address"
														autocomplete="off" class="adresscls" id="addressid_"
														maxLength="150" onblur="removeValid(event)"></textarea>
												</div>
											</div>
											<div class="row mt-4">
												<div class="form-group">
													<button type="button" id="submitsalesperson"
														class="approve-btn" onclick="addDetails();">Submit</button>
												</div>
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>


					<div class="modal fade" id="manageTCsModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="tcsInfo">
										<div class="card-title">
											<h4>Manage TCS</h4>
										</div>
										<div class="row">
											<input type="hidden" id="tcsId">
											<div class="col-md-4">
												<div class="form-group">
													<label>Nature Of Collection</label>
													<div class="select">
														<select class="form-control" id="collection">
															<option th:value=null>--Select--</option>
															<option th:each="c:${collectionList}" th:value="${c.key}"
																th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Rate(%)</label> <input type="text"
														class="form-control" id="rateId" placeholder="Rate(%)">
												</div>
											</div>



											<div class="col-md-4">
												<div class="form-group">
													<input type="hidden" id="collectionId"> <label>Tax
														Name</label> <input type="text" class="form-control" id="taxName"
														placeholder="Tax Name">
												</div>
											</div>
										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="btn4" id="canceltcs" onclick="tcscancelBtn()">CANCEL</button>
												<button class="btn1" id="saveTcs" onclick="addtcsInfo1()">SAVE</button>

											</div>
										</div>
									</div>


								</div>
							</div>
						</div>
					</div>


					<div class="modal fade" id="addCustomerModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">


								<div class="modal-body">
									<!-- <div class="innerstickybg"> -->
									<div class="d-flex justify-content-between" id="main">
										<div class="col-md-3" id="idDiv">
											Customer ID: <span id="customerId"></span>
										</div>
										<div>
											<span class="taskInfo">Customer Information</span>
										</div>
										<div class="col-md-3 padding-0" align="right">
											<button class="btn3" id="cancel" onclick="cancelBtn1()">Back</button>

										</div>
									</div>
									<!-- </div> -->

									<div class="row">
										<div class="innercontent">

											<div class="row">
												<div class="row">
													<div class="col-md-4">
														<div class="form-group">
															<label>Customer Type</label>

															<div class="select">
																<select id="customerType" onchange="customerType();"
																	onblur="removeValid(event)">

																	<option value="">Select</option>
																	<option value="Business">Business</option>
																	<option value="Individual">Individual</option>
																</select>
															</div>
														</div>
													</div>


													<div class="col-md-4" id="salutationDiv">
														<div class="form-group">
															<label>Salutation</label>
															<div class="select">
																<select id="salutation" onchange="showDisplay()"
																	onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option value="Mr.">Mr.</option>
																	<option value="Mrs.">Mrs.</option>
																	<option value="Ms.">Ms.</option>
																	<option value="Miss.">Miss.</option>
																	<option value="Dr.">Dr.</option>
																	<option value="Prof.">Prof.</option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4" id="customerNameDiv">
														<div class="form-group">
															<label>Customer Name</label> <input type="text"
																class="form-control" id="customerNamee"
																placeholder="Customer Name"
																onkeyup="showDisplay(),checkAlphabetAndSpecialChars('customerNamee'),vendorNameUpper()"
																onblur="removeValid(event)" maxLength="50">
														</div>
													</div>

													<div class="col-md-4" id="companyNameDiv">
														<div class="form-group">
															<label>Customer Name</label> <input type="text"
																class="form-control" id="companyName"
																placeholder="Customer Name"
																onkeyup="showDisplay(),checkAlphabetAndSpecialChars('companyName'),vendorNameUpperr()"
																maxLength="50" onblur="removeValid(event)">
														</div>
													</div>

													<div class="col-md-4" id="customerDisplayNameDiv">
														<div class="form-group">
															<label>Customer Display Name</label> <input type="text"
																class="form-control" id="customerDisplayName"
																placeholder="Customer Display Name" disabled>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Customer Email</label> <input type="text"
																class="form-control" id="cusEmail" placeholder="Email"
																onblur="removeValid(event)" onkeyup="pmailVal();"
																style="text-transform: lowercase"> <span
																id="error3" class="formValidation1"></span>
														</div>
													</div>

													<div class="col-md-4" id="custMobileDiv">
														<div class="form-group">
															<label>Customer Mobile</label> <input type="text"
																class="form-control" id="custMobile"
																placeholder="Mobile" maxlength="10"
																onkeyup="mobVal1();checkNumeric('custMobile');"
																onblur="removeValid(event)"> <span id="error9"
																class="formValidation1"></span>
														</div>
													</div>


													<div class="col-md-4" id="custSkypeDiv">
														<div class="form-group">
															<label>Customer Skype</label> <input type="text"
																class="form-control" id="custSkype"
																onblur="removeValid(event)" placeholder="Customer Skype">
														</div>
													</div>

													<div class="col-md-4" id="custDesignationDiv">
														<div class="form-group">
															<label>Customer Designation</label> <input type="text"
																class="form-control" id="custDesignation"
																onblur="removeValid(event)"
																placeholder="Customer Designation">
														</div>
													</div>

													<div class="col-md-4" id="departmentDiv">
														<div class="form-group">
															<label>Department</label> <input type="text"
																class="form-control" id="department"
																onblur="removeValid(event)" placeholder="Department">
														</div>
													</div>


													<div class="col-md-4" id="webSiteDiv">
														<div class="form-group">
															<label>Web Site</label> <input type="text"
																class="form-control" id="webSite" placeholder="Web Site"
																onblur="removeValid(event)">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Status</label>
															<div class="select">
																<select id="status" onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option value="Active">Active</option>
																	<option value="Inactive">Inactive</option>
																</select>
															</div>
														</div>
													</div>


												</div>
											</div>

											<div class="accordion-item">
												<h2 class="accordion-header" id="headingTwo">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo"
														aria-expanded="true" aria-controls="collapseTwo">
														Other Details</button>
												</h2>
												<div id="collapseTwo"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">

														<div class="row">
															<div class="col-md-4">
																<div class="form-group">
																	<label>Pan Card</label> <input type="text"
																		class="form-control" id="pan" placeholder="Pan Card"
																		onblur="removeValid(event)" onkeyup="pancardVal();"
																		maxLength="10"> <span id="error4"
																		class="formValidation1"></span>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">

																	<label>GST No.</label>
																	<div class="d-flex">
																		<div>
																			<input type="text" class="form-control" id="gstNo"
																				placeholder="GST No" onkeyup="ValidateGSTNumber()"
																				maxlength="15" onblur="removeValid(event)">
																			<span id="error5" class="formValidation1"></span>
																		</div>

																		<!-- <div style="margin-top: 7px;">
																			<button class="approve-btn1" id=approveGst
																				onclick="getGstData()">GST</button>
																		</div> -->
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Currency</label>
																	<div class="select">
																		<select id="currency" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="INR RUPPEE">INR RUPEE</option>
																			<option value="AED-UAE Dirham">AED-UAE
																				Dirham</option>
																			<option value="AUD-Australian Doller">AUD-Australian
																				Dollar</option>
																			<option value="CAD-Canadian Doller">CAD-Canadian
																				Dollar</option>
																			<option value="CNY-Yuan Renminbi">CNY-Yuan
																				Renminbi</option>
																			<option value="EUR-Euro">EUR-Euro</option>
																			<option value="GBP-Pound Sterlin">GBP-Pound
																				Sterlin</option>
																			<option value="JPY-Japanese Yen">JPY-Japanese
																				Yen</option>
																			<option value="SAR-Saudi Riyal">SAR-Saudi
																				Riyal</option>
																			<option value="USD-United State Doller">USD-United
																				State Dollar</option>
																			<option value="ZAR-South Africa Rand">ZAR-South
																				Africa Rand</option>
																		</select>
																	</div>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Opening Balance</label> <input type="text"
																		class="form-control" id="openingBalance"
																		placeholder="Opening Balance"
																		onblur="removeValid(event)" autocomplete="off"
																		onkeyup="checkAmount('openingBalance');">
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Payment Terms</label>
																	<div class="select">
																		<select id="paymentTerms" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="Net 15">Net 15</option>
																			<option value="Net 30">Net 30</option>
																			<option value="Net 45">Net 45</option>
																			<option value="Net 60">Net 60</option>
																			<option value="Due end of the month">Due end
																				of the month</option>
																			<option value="Due end of the next month">Due
																				end of the next month</option>
																			<option value="Due on receipt">Due on
																				receipt</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Portable Language</label>

																	<div class="select">
																		<select id="portableLang" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="English">English</option>
																			<option value="HIndi">Hindi</option>
																			<option value="Bengali">Bengali</option>
																			<option value="Odia">Odia</option>
																			<option value="French">French</option>
																			<option value="Spanish">Spanish</option>
																			<option value="Bahasa Indonesia">Bahasa
																				Indonesia</option>
																			<option value="Italian">Italian</option>
																			<option value="Dutch">Dutch</option>
																			<option value="Sanskrit">Sanskrit</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>WhatsApp No</label> <input type="text"
																		class="form-control" id="whatsApp"
																		placeholder="WhatsApp No" maxlength="10"
																		onkeyup="mobVal2();checkNumeric('whatsApp');"
																		onblur="removeValid(event)"> <span
																		id="error10" class="formValidation1"></span>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>Facebook</label> <input type="text"
																		class="form-control" id="faceBook"
																		placeholder="Facebook" onblur="removeValid(event)">
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Twitter</label> <input type="text"
																		class="form-control" id="twitter"
																		placeholder="Twitter" onblur="removeValid(event)">
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>Enable Portals</label><br> <input
																		type="checkbox" name="isActive" class="form-control"
																		id="enableDtls" style="margin-top: 8px;" value="on"
																		placeholder="Enable Details"> <label>Allow
																		portal acces for this customer</label>
																</div>
															</div>


														</div>

													</div>
												</div>
											</div>


											<div class="accordion-item">
												<h2 class="accordion-header" id="headingTwo2">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
														aria-expanded="true" aria-controls="collapseTwo2">
														Billing Address Details</button>
												</h2>
												<div id="collapseTwo2"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo2"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">


														<div class="row">

															<div class="col-md-4">
																<div class="form-group">
																	<label>Country</label>
																	<div class="select">
																		<select id="country" onchange="getStateDetails()"
																			onblur="removeValid(event)">
																			<option th:value="NULL">Select Country</option>
																			<option th:each="c,iter:${countryList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>State</label>
																	<div class="select">
																		<select id="states" onblur="removeValid(event)">
																			<option th:value="NULL">Select State</option>
																			<option th:each="c,iter:${statesList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select> <span class="focus"></span>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>City</label> <input type="text"
																		class="form-control" id="city" placeholder="City"
																		onblur="removeValid(event)"
																		onkeyup="checkAlphabet('city')" maxLength="30">
																	<span id="error7" class="formValidation1"></span>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Street 1</label> <input type="text"
																		class="form-control" id="street1"
																		placeholder="Street 1" onblur="removeValid(event)"
																		maxLength="200">
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Street 2</label> <input type="text"
																		class="form-control" id="street2"
																		placeholder="Street 2" onblur="removeValid(event)"
																		maxLength="200">
																</div>
															</div>



															<div class="col-md-4">
																<div class="form-group">
																	<label>Zip Code</label> <input type="text"
																		class="form-control" id="zipCode" autocomplete="off"
																		placeholder="Zip Code" maxlength="6"
																		onkeyup="zipcodeVal();checkNumeric('zipCode');"
																		onblur="removeValid(event)"> <span
																		id="error14" class="formValidation1"></span>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Phone</label> <input type="text"
																		class="form-control" id="phone" placeholder="Phone"
																		maxlength="10"
																		onkeyup="mobVal3();checkNumeric('phone');"
																		onblur="removeValid(event)"> <span
																		id="error11" class="formValidation1"></span>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Fax</label> <input type="text"
																		class="form-control" id="fax" placeholder="Fax"
																		onblur="removeValid(event)">
																</div>
															</div>

														</div>

													</div>
												</div>
											</div>
											<div id="mainSa">
												<div class="accordion-item" id="shippingAddressAcc">
													<h2 class="accordion-header" id="headingTwo2">
														<button class="accordion-button" type="button"
															data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
															aria-expanded="true" aria-controls="collapseTwo2">
															Shipping Address Details</button>

														<button class="btn btn-primarynew"
															onclick="copyAsBillingAdd()">Copy As Billing
															Address</button>
												</div>
												</h2>
												<div id="collapseTwo2"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo2"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">

														<div id="mySidenavAddress" class="sidenav">
															<div class="slidebox">
																<div class="row">
																	<div class="col-md-10">
																		<div class="edit">
																			Address Id: <span id="shippingId"></span>
																		</div>
																	</div>
																	<div class="col-md-2">
																		<div class="arrow">
																			<a href="javascript:void(0)" class="closebtn"
																				onclick="closeNav()"><i class="ti-arrow-right"></i></a>
																		</div>
																	</div>
																</div>
																<div class="chartbtnsec">
																	<div align="right">
																		<button class="cancel-btn" onclick="closeNavAddress()">CANCEL</button>
																		<!-- <button class="btn3">DELETE</button> -->
																		<button class="approve-btn" id="saveSaddressData">SAVE</button>
																	</div>
																</div>
																<div class="clearfix"></div>
																<!-- <input type="hidden" id="isEdit"> -->

																<div class="row">

																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Country</label>
																			<div class="select">
																				<select id="country1" onchange="getStateDetails1()"
																					onblur="removeValid(event)">
																					<option th:value="NULL">Select Country</option>
																					<option th:each="c,iter:${countryList}"
																						th:value="${c.key}" th:text="${c.name}"></option>
																				</select>
																			</div>
																		</div>
																	</div>

																	<div class="col-md-6">
																		<div class="form-group">
																			<label>State</label>
																			<div class="select">
																				<select id="states1" onblur="removeValid(event)">
																					<option th:value="NULL">Select State</option>
																					<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
																				</select> <span class="focus"></span>
																			</div>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>City</label> <input type="text"
																				class="form-control" id="city1" placeholder="City"
																				onblur="removeValid(event)"
																				onkeyup="checkAlphabet('city')" maxLength="30">
																		</div>
																	</div>


																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Street 1</label> <input type="text"
																				class="form-control" id="street11"
																				placeholder="Street 1" onblur="removeValid(event)"
																				maxLength="200">
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Street 2</label> <input type="text"
																				class="form-control" id="street21"
																				placeholder="Street 2" onblur="removeValid(event)"
																				maxLength="200">
																		</div>
																	</div>



																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Zip Code</label> <input type="text"
																				class="form-control" id="zipCode1"
																				autocomplete="off" placeholder="Zip Code"
																				maxlength="6"
																				onkeyup="zipcodeVal1();checkNumeric('zipCode1');"
																				onblur="removeValid(event)"> <span
																				id="error15" class="formValidation1"></span>
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Phone</label> <input type="text"
																				class="form-control" id="phone1" placeholder="Phone"
																				maxlength="10"
																				onkeyup="mobVal4();checkNumeric('phone1');"
																				onblur="removeValid(event)"> <span
																				id="error12" class="formValidation1"></span>
																		</div>
																	</div>


																	<div class="col-md-4">
																		<div class="form-group">
																			<label>Fax</label> <input type="text"
																				class="form-control" id="fax1" placeholder="Fax"
																				onblur="removeValid(event)">
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-2">
																		<div class="form-group" style="margin-top: 28px;">
																			<input type="checkbox" name="isDefault"
																				style="margin-top: 8px;" id="addStatus" value="1">
																			<label>Default Address</label>
																		</div>
																	</div>
																</div>


															</div>
														</div>

														<div class="row">
															<div class="col-md-4 btn-hs1">
																<div class="font-design"></div>
															</div>
															<div class="col-md-8 butttonsec">
																<button class="delete-btn" data-toggle="modal"
																	id="deleteAddressDtls" data-target="#delete"
																	onclick="deleteAddressDtls()">DELETE</button>
																<button class="new-btn" id="newAddress"
																	onclick="newAddress()">NEW</button>
															</div>

														</div>

														<div class="row">
															<div class="col-md-12">
																<div id="mySAGrid" style="width: 100%; height: 200px;"
																	class="ag-theme-alpine"></div>
															</div>
														</div>
													</div>
												</div>
											</div>

											<div class="accordion-item" id="contactPersonAcc">
												<h2 class="accordion-header" id="headingTwo3">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo3"
														aria-expanded="true" aria-controls="collapseTwo3">
														Contact Person Details</button>
												</h2>
												<div id="collapseTwo3"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo3"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">


														<div class="row">
															<div class="col-md-4">
																<div class="form-group">
																	<label>Salutation</label>
																	<div class="select">
																		<select id="salutation1" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="Mr.">Mr.</option>
																			<option value="Mrs.">Mrs.</option>
																			<option value="Ms.">Ms.</option>
																			<option value="Miss.">Miss.</option>
																			<option value="Dr.">Dr.</option>
																			<option value="Prof.">Prof.</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>First Name</label> <input type="text"
																		class="form-control" id="firstName"
																		placeholder="First Name" maxLength="50"
																		onkeyup="checkAlphabet('firstName');"
																		onblur="removeValid(event)">
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Last Name</label> <input type="text"
																		class="form-control" id="lastName"
																		placeholder="Last Name" maxLength="50"
																		onkeyup="checkAlphabet('lastName');"
																		onblur="removeValid(event)">
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Email Address</label> <input type="text"
																		class="form-control" id="emailAdd" placeholder="Email"
																		onblur="removeValid(event)" onkeyup="pmailVal1()"
																		style="text-transform: lowercase"> <span
																		id="error6" class="formValidation1"></span>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Mobile</label> <input type="text"
																		class="form-control" id="mobile" placeholder="Mobile"
																		maxlength="10"
																		onkeyup="mobVal5();checkNumeric('mobile');"
																		onblur="removeValid(event)"> <span
																		id="error13" class="formValidation1"></span>
																</div>
															</div>

														</div>

													</div>
												</div>
											</div>


											<div class="accordion-item" id="remarksAcc">
												<h2 class="accordion-header" id="headingTwo4">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
														aria-expanded="true" aria-controls="collapseTwo4">
														Remark Details</button>
												</h2>
												<div id="collapseTwo4"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo4"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">

														<div class="row">
															<div class="col-md-8">
																<div class="modal-inrheading">Remarks</div>
																<div class="position-text">
																	<textarea rows="4" cols="100" id="remarks"
																		onkeyup="textCount(event)"></textarea>
																	<div id="charNumSN" class="txtcounter" align="right">
																		<span>0</span> characters
																	</div>
																</div>
															</div>


														</div>

													</div>
												</div>
											</div>

											<div class="row mt-4" id="btnDiv">
												<div class="form-group">

													<button class="btn3" id="cancel" onclick="cancelBtn1()">CANCEL</button>
													<button class="btn1" id="saveAdd"
														onclick="addCustomerInfo()">SAVE</button>
													<button class="btn1" id="next" onclick="addCustomerInfo()">NEXT</button>

												</div>
											</div>

										</div>

									</div>


								</div>
							</div>
						</div>
					</div>




					<div class="modal fade" id="addAddressModel">
							<div class="modal-dialog modal-lg"
								style="margin-top: 130px; height: 900px;">
								<div class="modal-content">

									<!-- Modal Header -->
									<div class="modal-header flex-column">
										<!-- <button type="button" class="close" data-dismiss="modal"
											aria-hidden="true" onclick="cancelModalBtn()">
											<i class="ti-close modal-close"></i>
										</button> -->
									</div>
									<!-- 	Modal body -->
									<div class="modal-body">

										<div class="col-md-12" id="billingInfo">
											<div class="card-title">
												<h4>Billing Address</h4>
											</div>
											<div class="row">

												<div class="col-md-4">
													<div class="form-group">
														<label>Country</label>
														<div class="select">
															<select id="countryb" onchange="getStateDetailsb()">
																<option th:value="NULL">Select Country</option>
																<option th:each="c,iter:${countryList}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>

												<div class="col-md-4">
													<div class="form-group">
														<label>State</label>
														<div class="select">
															<select id="statesb">
																<option th:value="NULL">Select State</option>
																<option th:each="c,iter:${statesList}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select> <span class="focus"></span>
														</div>
													</div>
												</div>

												<div class="col-md-4">
													<div class="form-group">
														<label>City</label> <input type="text"
															class="form-control" id="cityb" placeholder="City">
													</div>
												</div>


												<div class="col-md-4">
													<div class="form-group">
														<label>Street 1</label> <input type="text"
															class="form-control" id="street1b" placeholder="Street 1">
													</div>
												</div>

												<div class="col-md-4">
													<div class="form-group">
														<label>Street 2</label> <input type="text"
															class="form-control" id="street2b" placeholder="Street 2">
													</div>
												</div>



												<div class="col-md-4">
													<div class="form-group">
														<label>ZipCode</label> <input type="text"
															class="form-control" id="zipCodeb" placeholder="Zip Code"
															onblur="removeValid(event)" maxlength="6"
															onkeyup="checkNumeric('zipCodeb');">
													</div>
												</div>

												<div class="col-md-4">
													<div class="form-group">
														<label>Phone</label> <input type="text"
															class="form-control" id="phoneb" placeholder="Phone"
															maxlength="10" onkeyup="checkNumeric('phoneb');">
													</div>
												</div>


												<div class="col-md-4">
													<div class="form-group">
														<label>Fax</label> <input type="text" class="form-control"
															id="faxb" placeholder="Fax">
													</div>
												</div>

											</div>

											<div class="row mt-4">
												<div class="form-group">

													<button class="cancel-btn" id="cancel"
														onclick="cancelBtn()">CANCEL</button>
													<button class="btn1" id="save" onclick="addCustomerInfo2()">SAVE</button>

												</div>
											</div>
										</div>



									</div>
								</div>
							</div>
						</div>


					<div class="modal fade" id="changeAddressModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<!-- 	<div class="modal-header">
							 <button type="button" class="close" data-dismiss="modal"
											aria-hidden="true" onclick="cancelChangeAddressModel()">
											<i class="ti-close modal-close"></i>
										</button> 
								</div> -->
								<div class="modal-header">
									<h4 class="modal-title" style="font-size: 16px">
										<b>Change Address </b>
									</h4>
									<button type="button" class="close" data-bs-dismiss="modal"
										aria-label="Close" onclick="cancelChangeAddressModel()">
										<i class="ti-close"></i>
									</button>
								</div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingData">

										<div class="row">
											<div class="col-md-12" id="shipping"></div>
										</div>

										<div class="row mt-4">
											<address class="font-small ember-view">
												<strong id="addNewAdd" onclick="addnewAddress1()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>
											</address>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>


					<div class="modal fade" id="addAddressModel1">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<div class="modal-header flex-column">
									<!-- <button type="button" class="close" data-dismiss="modal"
											aria-hidden="true" onclick="cancelModalBtn()">
											<i class="ti-close modal-close"></i>
										</button> -->
								</div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingInfo">
										<div class="edit">
											Shipping Address : <span id="shippingId"></span>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="country1s" onchange="getStateDetailss('')"
															onblur="removeValid(event)">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="states1s" onblur="removeValid(event)">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														id="city1s" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														class="form-control" id="street11s" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														class="form-control" id="street21s" placeholder="Street 2">
												</div>
											</div>



											<!-- 	<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCode1s" placeholder="Zip Code"
														onblur="removeValid(event)" maxlength="6"
														onkeyup="checkNumeric('zipCode1s');">
												</div>
											</div> -->


											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCode1s" placeholder="Zip Code"
														onblur="removeValid(event)" maxlength="6"
														onkeyup="zipcodeVal3(zipCode1s);checkNumeric('zipCode1s');">
													<span id="error18" class="formValidation1"></span>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														class="form-control" id="phone1s" placeholder="Phone"
														maxlength="10" onkeyup="checkNumeric('phone1s');">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														id="fax1s" placeholder="Fax">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group" style="margin-top: 28px;">
													<input type="checkbox" name="isDefault"
														style="margin-top: 8px;" id="addStatus" value="1">
													<label>Default Address</label>
												</div>
											</div>


										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="cancel-btn" id="cancel"
													onclick="cancelBtn2()">CANCEL</button>
												<button class="btn1" id="save" onclick="addCustomerInfo1()">SAVE</button>

											</div>
										</div>
									</div>



								</div>
							</div>
						</div>
					</div>
					<!-- ------------------Invoice modal------------------------- -->

					<div id="invoiceModal" class="modal fade">
						<div class="modal-dialog">
							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title">TYPE OF INVOICE COPY</h4>
									<button type="button" class="close" data-bs-dismiss="modal"
										aria-label="Close">
										<i class="ti-close"></i>
									</button>

								</div>
								<!-- Modal body -->
								<div class="modal-body ">
									<div class="container ">
										<!-- custom radio button -->
										<div class="holder">
											<div class="row mb-1">
												<div class="col">
													<label>Choose copy Type</label>
												</div>
											</div>
											<div class="row mb-0">
												<div class="row justify-content-start">
													<div class="col-12">
														<input type="hidden" id="invHid">
														<div class="d-flex">
															<input type="checkbox" name="copyType" id="original" checked
																class="mr5" value="1"> <label for="original">Original
																for Recipient</label>
														</div>
														<div class="d-flex">
															<input type="checkbox" name="copyType" id="duplicate"
																class="mr5" value="2"> <label for="duplicate">Duplicate
																for Transporter</label>
														</div>
														<div class="d-flex">
															<input type="checkbox" name="copyType" id="triplicate"
																class="mr5" value="3"> <label for="triplicate">Triplicate
																for Supplier</label>
														</div>
													</div>
												</div>
											</div>

										</div>
									</div>
								</div>

								<div class="modal-footer justify-content-left">
									<button type="button" class="btn1" data-bs-dismiss="modal"
										aria-hidden="true" id="invoicePdfDownload"
										onclick="invoicePdfDownload()">Submit</button>
								</div>
							</div>
						</div>
					</div>


   <div id="commentModal" class="modal fade">
						<div class="modal-dialog">
							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<h4 class="modal-title">Comment</h4>
									<button type="button" class="close" data-bs-dismiss="modal"
										aria-label="Close">
										<i class="ti-close"></i>
									</button>

								</div>
								<div class="modal-body">
									<!-- text input -->
									<div class="row">
										<div class="col-md-12">
											<div class="form-group">
												<label>Comment</label> <input class="form-control"
													type="text" autocomplete="off"  id="comment">
											</div>
										</div>

									</div>
								</div>
								<div class="modal-footer justify-content-left">
									<button type="button" class="btn1" data-bs-dismiss="modal"
										aria-hidden="true" id="rejectSubmitBtn"
										onclick="rejectOnclick()">Submit</button>
								</div>
							</div>
						</div>
					</div>
					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model start@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
					<div class="modal fade" id="addItemModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">


								<div class="modal-body">

									<div id="newId">

										<div class="row" id="reqTable">
											<div class="d-flex justify-content-between">
												<div class="btn-hs" id="total">
													<div class="font-design" id="totalReq">
														Product List (<span></span>)
													</div>
												</div>

												<div id="searchRowDiv">
													<div class="input-style">
														<input type="text" placeholder="Search.." name="search"
															class="searchboxinput" onkeyup="cancelBarr()"
															oninput="onQuickFilterChangedd()" id="quickFilterr"
															autocomplete="off">
														<div class="searchicon">
															<a href="javascript:void(0)"><span
																style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
																id="closeKeyy"
																onclick="gridOptionsProduct.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKeyy').style.display='none';"
																class="close_i"><i class="ti-close srchicon"></i></span></a><a
																href="javascript:void(0)"><i
																class="ti-search srchicon"></i></a>
														</div>
													</div>
												</div>
												<div class="butttonsec btn-hs" id="btndiv">
													<!-- <button class="upload-btn">Upload</button> -->
													<button class="download-btn" onclick="totalProductCSV();">Download</button>
													<button class="delete-btn" onclick="deleteProduct();"
														id="deleteproduct">DELETE</button>
													<button class="new-btn" id="newBtn"
														onclick="profileSelect()">NEW</button>
												</div>
											</div>
										</div>
										<div id="myGridProduct" style="width: 100%; height: 500px;"
											class="ag-theme-alpine"></div>
									</div>

									<div id="profile" class="collapse">
										<div class="row">
											<div class="col-md-6 btn-hs"></div>
											<div class="col-md-12">
												Product ID: <span id="productheadId"></span>
											</div>
											<div class="col-md-12" align="right">

												<button class="cancel-btn" onclick="profilecancelbtn()"
													id="profilecancelbtn">Cancel</button>
												<button class="approve-btn" id="productSave">Save</button>
											</div>
											<div class="col-md-3">
												<div class="demo">
													<div class="item">
														<div class="clearfix" style="max-width: 360px">
															<div class="hvrbox">
																<img src="../assets/images/noimage.jpg" id="imgemp"
																	alt="Location" class="hvrbox-layer_bottom img-fluid">

																<div class="hvrbox-layer_top">
																	<div class="hvrbox-text">
																		<!-- <span><i class="fa fa-pencil-square-o"></i></span> -->
																		<input type="file" id="fileUpload"
																			onchange="saveFile();" /> <span><label
																			for="fileUpload"><i class="fa fa-camera"
																				style="cursor: pointer; font-size: 16px;"></i> <!-- <i class="fa fa-pencil-square-o"></i> --></label></span>
																		<span><i class="fa fa-trash red"
																			onclick="deleteFile();"></i></span>
																	</div>
																</div>
															</div>

														</div>
													</div>

												</div>
											</div>
											<div class="col-md-9">
												<div class="row">
													<div class="col-md-12">
														<input type="hidden" id="productId"> <input
															type="text" name="code" value="" id="productName"
															maxLength="30" placeholder="Product Name"
															onkeyup="productNameUpper()"
															class="form-control_big" onblur="removeValid(event);">

													</div>
												</div>
												<div class="row">
													<div class="col-md-4">
														<div class="form-group">
															<label>Brand</label>
															<div class="select">
																<select class="" id="brand" onblur="removeValid(event);">
																	<option value="">Select</option>
																	<option th:each="c,iter:${brandListt}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>Mode</label>
															<div class="select">
																<select class="" id="mode" onblur="removeValid(event);">
																	<option value="">Select</option>
																	<option th:each="c,iter:${modeList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>
													<div class="col-md-2">
														<div class="form-group" style="margin-top: 28px;">
															<input type="checkbox" name="isActive"
																style="margin-top: 8px;" id="prodStatus" value="1">
															<label>Active</label>
														</div>
													</div>
													<div class="col-md-4">
														<div class="form-group">
															<label>HSN/SAC</label> <input type="text" value=""
																placeholder="HSN/SAC" class="form-control"
																id="hsnCodeProduct" onkeyup="check1('hsnCode')"
																maxLength="8" onblur="removeValid(event);">
														</div>
													</div>


												</div>
												<div class="row mt-2">
													<div class="col-md-3">
														<button class="approve-btn modalbtn" id="categoryBtn">Select
															Category</button>
														<input type="hidden" id="prCategoryId"> <input
															type="hidden" id="tempCategoryId"> <input
															type="hidden" id="prLevelId">
													</div>
													<div class="col-md-9">
														<div class="breadcrumb" id="catDesc"></div>
													</div>
												</div>
											</div>
										</div>
										<div class="col-md-12 mt-4" align="right">
											<button class="approve-btn" onclick="next()" id="nextproduct">Next</button>
										</div>
										<div id="mainItem">
											<div class="accordion" id="accordionExampleItem">

												<div class="accordion-item">
													<h2 class="accordion-header" id="headingOneItem">
														<button class="accordion-button" type="button"
															data-bs-toggle="collapse"
															data-bs-target="#collapseOneItem" aria-expanded="true"
															aria-controls="collapseOneItem">Product Details</button>

													</h2>
													<div id="collapseOneItem"
														class="accordion-collapse collapse show"
														aria-labelledby="headingOneItem"
														data-bs-parent="#accordionExampleItem">
														<div class="accordion-body">

															<div id="mySidenavItem" class="sidenav">
																<div class="slidebox" style="margin: 0px !important;">
																	<div class="row">
																		<div class="col-md-10">
																			<div class="edit">
																				Product Id: <span id="skuPrdId"></span>
																			</div>
																		</div>
																		<div class="col-md-2">
																			<div class="arrow">
																				<a href="javascript:void(0)" class="closebtn"
																					onclick="closeNavSku()"><i
																					class="ti-arrow-right"></i></a>
																			</div>
																		</div>
																	</div>
																	<div class="chartbtnsec">
																		<div align="right">
																			<button class="cancel-btn" onclick="closeNavSku()">CANCEL</button>

																			<button class="approve-btn" id="saveSKUData">SAVE</button>
																		</div>
																	</div>
																	<div class="clearfix"></div>
																	<input type="hidden" id="isEdit">
																	<div class="row">

																		<div class="col-lg-12" id="skudiv">
																			<div class="form-group">
																				<label>SKU</label> <input type="text" value=""
																					placeholder="" class="form-control" id="skuId"
																					onblur="removeValid(event);" maxLength="8">
																			</div>
																		</div>
																		<div class="col-lg-6">
																			<div class="form-group">
																				<label>Model/Size</label> <input type="text" value=""
																					placeholder="" class="form-control" id="model"
																					onblur="removeValid(event);">
																			</div>
																		</div>
																			<div class="col-lg-6">
																		<div class="form-group">
																			<label>Area</label> <input type="text" value=""
																				placeholder="" class="form-control" id="area"
																				onblur="removeValid(event);">
																		</div>
																	</div>
																	</div>
																	<div class="row">
																		<div class="col-md-12">
																			<div class="form-group">
																				<label>Manufacture Item</label> <input type="text"
																					value="" placeholder="" class="form-control"
																					id="manufacture" onblur="removeValid(event);">
																			</div>
																		</div>

																	</div>
																	   <div class="row">
																	<div class="col-md-12">
																		<div class="form-group">
																			<label>Description</label> <textarea id="description" class="form-control"
											                          onblur="removeValid(event)"> </textarea>
																		</div>
																	</div>

																</div>

																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group">
																				<label>Variation Type</label>
																				<div class="select">
																					<select class="" id="variationType"
																						onblur="removeValid(event);">
																						<option value="">Select</option>
																						<option th:each="c,iter:${variationTypeList}"
																							th:value="${c.key}" th:text="${c.name}"></option>
																					</select>
																				</div>

																			</div>
																		</div>
																		<div class="col-md-6">
																			<div class="form-group">
																				<label>Variation Value</label> <input type="text"
																					value="" onblur="removeValid(event);"
																					placeholder="" class="form-control"
																					id="variationValue">
																			</div>
																		</div>

																	</div>

																	<div class="row">
																		<div class="col-md-6">
																			<div class="form-group">
																				<label>UOM</label>
																				<div class="select">
																					<select class="" id="itemUnit"
																						onblur="removeValid(event);">
																						<option value="">Select</option>
																						<option th:each="c,iter:${unitList}"
																							th:value="${c.key}" th:text="${c.name}"></option>
																					</select>
																				</div>
																			</div>
																		</div>
																		<div class="col-md-6">
																			<div class="form-group">
																				<label>Unit Sale Price</label> <input type="text"
																					value="" onclick="salaryBack(event)"
																					onblur="removeValid(event);salaryCheck(event)"
																					placeholder="" class="form-control" id="salePrice">
																			</div>
																		</div>
																	</div>
																</div>
															</div>

															<div class="row">
																<div class="col-md-4 btn-hs1">
																	<div class="font-design"></div>
																</div>
																<div class="col-md-8 butttonsec">
																	<!-- <button class="upload-btn">Upload</button> -->
																	<button class="download-btn" onclick="skuProductCSV();">Download</button>
																	<!-- <div class="buttongap"></div> -->
																	<button class="delete-btn" data-toggle="modal"
																		id="deletess" data-target="#delete"
																		onclick="deleteskuDtls()">DELETE</button>
																	<button class="new-btn" id="newBtn2"
																		onclick="openNavItem()">NEW</button>
																</div>

															</div>
															<div class="row" id="skuDiv">
																<div class="col-md-12">
																	<div id="mySKUGrid" style="width: 100%; height: 200px;"
																		class="ag-theme-alpine"></div>
																</div>
															</div>

														</div>
													</div>
												</div>

											</div>
										</div>

									</div>
								</div>
							</div>
						</div>


						<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model end@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

						<div class="modal fade" id="myModall">
							<div class="modal-dialog modal-lg" style="margin-top: 130px;">
								<div class="modal-content">

									<!-- Modal Header -->
									<div class="modal-header">
										<h4 class="modal-title md-color">Select Product Category</h4>
										<button type="button" class="close cp"
											onclick="closeModall();" data-dismiss="modal">&times;</button>
									</div>

									<!-- Modal body -->

									<div class="modal-body modal-cat">
										<div class="row">
											<table id="basicc">
												<tbody id="costCeneterCBDiv"></tbody>
											</table>
										</div>
									</div>

									<!-- Modal footer -->

									<div class="modal-footer">
										<button class="cancel-btn" data-dismiss="modal"
											onclick="closeModall();">Cancel</button>
										<button class="approve-btn" id="selectCategory">Select</button>
									</div>

								</div>
							</div>
						</div>

						<div id="deleteSKU" class="modal fade show" aria-modal="true">
							<div class="modal-dialog modal-confirm">
								<div class="modal-content">
									<div class="modal-header flex-column"></div>
									<div class="modal-body">
										<p>Do you really want to delete these records? This
											process cannot be undone.</p>
									</div>
									<div class="modal-footer justify-content-center"
										style="margin-top: -30px;">

										<button type="button" class="cancel-btn" data-dismiss="modal"
											onclick="cancelModalSKUDtls();">Cancel</button>
										<button type="button" class="delete-btn"
											onclick="deleteskud()">Delete</button>
									</div>
								</div>
							</div>
						</div>

						<div id="deleteProductModel" class="modal fade show"
							aria-modal="true">
							<div class="modal-dialog modal-confirm">
								<div class="modal-content">
									<div class="modal-header flex-column"></div>
									<div class="modal-body">
										<p>Do you really want to delete these records? This
											process cannot be undone.</p>
									</div>
									<div class="modal-footer justify-content-center"
										style="margin-top: -30px;">
										<button type="button" class="cancel-btn" data-dismiss="modal"
											onclick="cancelProductModelOnclick();">Cancel</button>
										<button type="button" class="delete-btn" id="deleteModalBtn"
											onclick="deleteProductModelOnclick()">Delete</button>
									</div>
								</div>
							</div>
						</div>


	       
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
</html>