<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

.btn-primarynew {
	color: #fff !important;
	background-color: #0d6efd;
	border-color: #0d6efd;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

.form-group label {
	font-size: 12px;
	position: relative;
}

.holdCls {
	background-color: rgb(0, 143, 0);
}

.bg_white {
	background: #ffffff !important;
}

.blueClsWT {
	background: #0076ba;
	color: #fff;
}

.blueCls {
	background: #0076ba;
	color: #fff;
}

.blueClsWT::before {
	font-size: 8px;
	color: #FFF;
	content: '\e64c';
	font-family: 'themify';
	padding-right: 7px;
}

.modal-body table td input[type=checkbox] {
	width: 0px;
	margin-right: 16px;
	position: relative;
	top: 0px;
	float: none;
}

.firstnode {
	color: #929292;
	border-top: 1px solid transparent !important;
	border-left: 1px solid transparent !important;
	border-bottom: 1px solid transparent !important;
	width: 320px;
	font-size: 12px;
	font-weight: 100;
}

.simple-tree-table-closed .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
	transform: rotate(90deg);
}

.simple-tree-table-opened .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
}

.simple-tree-table-icon {
	display: inline-block;
	width: 1.5em;
	line-height: 1.5em;
	margin: 0.1em;
	background-color: transparent;
	text-align: center;
	cursor: pointer;
}

.tptCls {
	background: transparnt;
}
.radio-align span{
    position: relative;
    top: 2px;}
.rupees-space input{
padding-left:10px;}
.rupees-space span{
font-size: 17px;
 margin-top: 4px;}
</style>
<script>
	
	var columnDefs = [
			{
				headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left',
			},
			{
				headerName : "Payment Received Id",
				field : "paymentId",
				pinned: 'left',
				width : 200,
				cellRenderer : function(params) {
					return '<a onclick=editPaymentReeived("'
							+ params.data.paymentId
							+ '","'+params.data.saleInvoiceId+'") href="javascript:void(0)">'
							+ params.data.paymentId + '</a>';
				}
			}, {
				headerName : 'Date',
				field : "qutUpdatedOn",
					width : 150,
			}, {
			
				headerName : 'Payment#',
				field : "payment",
					width : 150,
			}, {
			
				headerName : 'Reference Number',
				field : "reference",
					width : 200,
			}, {
				headerName : 'Customer Name',
				field : "custName",
				width : 200,
				
			}, {
				headerName : 'Invoice#',
				field : "saleInvoiceId",
				width : 100,
				  
			}, {  
				headerName : 'Mode#',
				field : "paymentMode",
				width : 150,
			}, {  
				  
				headerName : 'Amount',
				field : "qutCreatedBy",
				width : 150,
			/* }, {
				headerName : 'Unused Amount#',
				field : "trackingId",
				width : 150, */
			
			} ];

	var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'multiple',

		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},
		onSelectionChanged : rowSelect,
	};
  $(document)
			.ready(
					function() {
						$("#documentDetails").show();
						$('#docTbl').on( 'click', '.rmv1', function() { 
							openDeleteConfirm();
							var value = $(this).parent("div").attr("id");
							$("#dltValue").val(value); 
					});
						
						//var ld = localStorage.getItem('ReqData');
						//alert("ld============"+ld);
					 agGrid.simpleHttpRequest({
							url : "view-paymentsreceived-through-ajax"
						}).then(function(data) {
							var len = data.length;
							$('#totalCandidate').find('span').html(len);
							gridOptions.api.setRowData(data);
						});  
						$('#delete').attr("disabled", true); 
						
						var gridDiv = document.querySelector('#myGrid');
						new agGrid.Grid(gridDiv, gridOptions);
						gridOptions.api.setRowData();
				        $("#Cancel").hide();
						$("#addData").hide();
						$("#save").hide();
						$('#delete').attr("disabled", true);
						
						
						
						$("#Cancel").click(function() {
							$('.loader').show();
							$("body").addClass("overlay");
							$("#reqTable").show();
							$(".btn-hs").show();
							$("#myGrid").show();
							$("#addData").hide();
							
							
							agGrid.simpleHttpRequest({
								url : "view-paymentsreceived-through-ajax"
							}).then(function(data) {
								var len = data.length;
								$('#totalCandidate').find('span').html(len);
								gridOptions.api.setRowData(data);
							});   
							
							$("#PaymentheadId").html('');
							$("#itemId").val('');
							$("#itemName").val('');
							$("#quantity").val('');
							$("#taxType").val('');
							
							$('.loader').hide();
							$("body").removeClass("overlay");
						});
                      /*sales Invoice page*/
						var ld = localStorage.getItem('ReqData');
						//alert("lddddddd"+ld);
						var data = JSON.parse(ld); 
						if (data) {
                            $('#hideTbl').hide();
							$("#add").hide();
							$("#myGrid").hide();
							$("#save").show();
							$("#Cancel").show();
							$("#addData").show();
							$("#totalCandidate").hide();
							$("#dwnld").hide();
							$("#upld").hide();
							$("#salesOrderId").val(data[0].salesOrder);
							$("#taxType").val(data[0].taxType);
							$("#custId").val(data[0].custId);
							$("#custName").val(data[0].custName);
							getAddressDetails(data[0].custId);
							//alert("custId"+custId);
							//alert("saleInvoice"+saleInvoice);
							//getSalesOrder(data[0].custId,data[0].salesOrder);
							console.log("dataset for challan-------",JSON.stringify(data[0]));
						//	return false;
							hideShowS();
                        	localStorage.setItem('ReqData', null);
						} else {
							$("#salesOrderId").val('New');
						}
	                 });

	   function add() {
		   $("#documentDetails").show();
			//alert("hi");
		$("#searchRowDiv").hide();
		$("#delete").hide();
	    $('#hideTbl').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
	    $("#PaymentheadId").html('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
	    $("#taxType").val('');
	    $("#salesOrderId").val('');
	    $("#custId").val();
		$("#custName").val();
		$("#receivedFullamount").val();
		const date = new Date();
		let day = date.getDate();
		let month = date.getMonth() + 1;
		let year = date.getFullYear();
		let qutUpdatedOn = `${day}-${month}-${year}`;
		$("#paymentDate").val(qutUpdatedOn);
		
		$.ajax({type : "GET",
			url : "view-paymentsreceived-get-payment",
					success : function(response) {
						if (response.message == "success") {
						//console.log("Response--------------"+JSON.stringify(response.body[0].name));
						$("#payment").val(response.body[0].key);
						}
					},
					error : function(e) { 
					}
				});
		
		
		$.ajax({type : "GET",
			url : "view-paymentsreceived-get-insertedid",
					success : function(response) {
						if (response.message == "success") {
						//console.log("Response--------------"+JSON.stringify(response.body[0].name));
						$("#paymentReference").val(response.body[0].key);
						}
					},
					error : function(e) { 
					}
				}); 
	}
	function hideMsgModal(){
		location.reload();
	}
	function Cancel() {
		$('.formValidation').remove();
		// location.reload();
		$("#totalCandidate").show();
		$("#searchRowDiv").show();
		$("#fbtn").show();
		$("#delete").show();
		$("#add").show();
		$("#myGrid").show();
		$("#save").hide();
		$("#Cancel").hide();
		$("#addData").hide();
		$('#hideTbl').show();
		
		$("#dwnld").show();
		$("#upld").show();
	    $('#delete').attr("disabled", true);
	    $("#invoiceTableDetails").empty();
	    
	}
    /* taxtype fn */
	function hideShowS() {
		var taxType = $("#taxType").val();
		if (taxType == "true") {
			$('#igstTR').show();
			$('#cgstTR').hide();
			$('#sgstTR').hide();
       } else {
			$('#igstTR').hide();
			$('#cgstTR').show();
			$('#sgstTR').show();
          }
      }

function save() {
	

	if (validProductData() && validFormData()) {
		var datas = [];
		var imageValid = true;
		var uploadList = [];
		$("#doctbodyData > tr").each(
				
				function() {
					//alert("hyy")
					var uFile = $(this).find(".document")[0].files[0];
					var fileName = $(this).find(".document").val();
					var data = [];
					var x = [];
					if (fileName != '' && fileName != 'undefined'
							&& fileName != null) {
						var lastIndex = fileName.lastIndexOf("\\");
						if (lastIndex >= 0) {
							fileName = fileName.substring(lastIndex + 1);
						}
						var reader = new FileReader();
						reader.readAsDataURL(uFile);

						reader.onload = function() {
							data = reader.result.split(",");
							x.push(data[1]);
						};
					} else {
						if ($("#quotationId").val()) {
							fileName = $(this).find(".uploadHidCls").val();
						} else {
							x = [];
						}

					}
					uploadData = {};
					uploadData['quotationId'] = $("#quotationId").val();
					uploadData['documnentName'] = $(this).find(".docNoclss").val();
					uploadData['documentFile'] = x;
					uploadData['fileName'] = fileName;
					uploadData['imageNameEdit'] = $(this).find(".uploadHidCls").val();
					uploadList.push(uploadData);
					
					console.log(uploadData)

				});
		
		
	setTimeout(function() {
				//	if (itemOptions.api.getDisplayedRowCount() > 0) {

				var obj = {};
				obj.paymentId = $("#paymentId").val();
				obj.paymentId = $("#PaymentheadId").html();
				obj.saleInvoiceId = $("#saleInvoiceId").val();
				obj.amountReceived = $("#amountReceived").val();
				obj.bankCharges = $("#bankCharges").val();
				obj.payment = $('#payment').val();
				obj.paymentMode = $('#paymentMode').val();
				obj.depositTo = $('#depositToId').val();
				obj.reference = $('#reference').val();

				obj.custId = $('#custId').val();
				obj.custName = $('#custName').val();
				obj.checkBox = $(
						"#receivedFullamount:checkbox:checked").val();
				obj.internalNotes = $("#internalNotes").val();
				obj.fullyPaymentAmount = $("#fullyPaymentAmount").val();
				
				alert(obj.checkBox)

				if (obj.checkBox == undefined) {
					obj.checkBox = "1";
				} else {
					obj.checkBox = "0";
				}

				obj.documentList = uploadList;

				console.log('Object', obj)
				datas.push(obj);

				savePaymentReceived(datas);
				//}
			}, 1000)

		}
	}
	function savePaymentReceived(datas) {
		console.log(JSON.stringify(datas))
		$
				.ajax({

					type : "POST",
					url : "view-paymentsreceived-add",
					contentType : "application/json",
					data : JSON.stringify(datas),
					success : function(response) {
						if (response.message == "Success") {

							console.log(JSON.stringify(datas))

							$("#messageParagraph").text(
									"Data Saved Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
							$("#saleInvoiceId").val(
									response.body[0].saleInvoiceId);
							$("#amountReceived").val(
									response.body[0].amountReceived);
							$("#bankCharges").val(response.body[0].bankCharges);
							$("#payment").val(response.body[0].payment);
							$("#paymentMode").val(response.body[0].paymentMode);
							$("#depositTo").val(response.body[0].depositTo);
							$("#reference").val(response.body[0].reference);
							$("#custId").val(response.body[0].custId);
							$("#custName").val(response.body[0].custName);
							$("#internalNotes").val(
									response.body[0].internalNotes);
							$("#fullyPaymentAmount").val(
									response.body[0].fullyPaymentAmount);

							if (data[0].checkBox == "1") {
								$("#receivedFullamount").prop("checked", true);
							} else {
								$("#receivedFullamount").prop("checked", false);
							}

							$("#PaymentheadId")
									.html(response.body[0].paymentId);
							$("#doctbodyData").empty();
							var documentList = response.body.documentList;
							console.log('documentList', documentList)
							if (documentList != null && documentList != "") {
								console.log('documentList1', documentList)
								for (var i = 0; i < documentList.length; i++) {
									var tbl = '<tr>'
											+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
											+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
											+ '<td><div class="form-group"> <input type="text" value="'+documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
											+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
											+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
											+ i
											+ '" name="userImage" onchange="saveMultiFile(event)" /> </div>'
											+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+documentList[i].fileName+'" class="uploadHidCls">'
											+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
											+ documentList[i].action
											+ '</div></div>'
											+ '<div id="imageName_'+i+'" class="imageName">'
											+ documentList[i].fileName
											+ '</div>'
											+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div>'
											+ '<input type="hidden" id="editId_'+i+'" value="'+ documentList[i].vendorRfqId+'">'
											+ '</td>' + '</tr>';

									$("#doctbodyData").append(tbl);
									console.log('tbl', tbl)

								}
							} else {
								var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
										+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="custom-file-upload"></div> <input type="hidden" id="editId_0"> </td>'
										+ '</tr>';
								$("#doctbodyData").append(tbl);
							}

						}

					},
					error : function(datas) {
						console.log(datas)
					}
				})

	}

	function checkEmpty() {
		var infofileName = true;
		$(".formValidation").remove();
		$('.docNoclss').each(function() {
			if ($(this).val() == null || $(this).val() == "") {
				infofileName = false;
				validationModal("Document Name Required", $(this).attr('id'));
			}
		});

		var mulDocInfo = true;
		if (infofileName) {
			$('#doctbodyData > tr').each(function() {
				if ($(this).closest('tr').find('.imageName').text()) {
					mulDocInfo = true;
				} else {
					mulDocInfo = false;
					$("#messageParagraph").text("Please Choose a File ");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					return false;
				}

			});
		}
		if (infofileName && mulDocInfo) {
			addMore1()
		}
	}

	function saveMultiFile(event) {
		var AssignItemQty = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var currentFldId = "#" + currentFldId;

		var uFile = $(currentFldId)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");

		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_" + counter).html("");
		if (extension[1] != null && extension[1] != "") {
			$("#uploadHidden_" + counter).val('');
		}
		if (extension[1] == "jpg" || extension[1] == "png"
				|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		} else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o'></i> </a></div>";
		} else if (extension[1] == "xls" || extension[1] == "xlsx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-excel-o'></i></a></div>";
		} else if (extension[1] == "doc" || extension[1] == "dox"
				|| extension[1] == "docx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-word-o'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l '> </div>";
		}
		var dltImg = "<i class='ti-close position-l rmv1'></i>";
		$("#uploadedBillDiv_" + counter).html(LightImg);
		$("#imageName_" + counter).html(fileName);
		$("#dltImage_" + counter).html(dltImg);

		$("#dltImage_" + counter).addClass("custom-file-delete");
		$("#clickImg_" + counter).removeClass("ti-plus");
		$("#clickImg_" + counter).addClass("ti-pencil");

	}
	function addMore1() {

		var lengthOfTableRow = $("#doctbodyData").children('tr').length;
		var cloneHtml = $("#docTbl tbody tr:first").clone();

		$("#docTbl tbody").append($("#docTbl tbody tr:first").clone());
		$("#myTable tbody tr td:last").html("");
		//var addMore = '<button type="button" class="btn btn-primary tr_clone_add" name="add" onclick="addMore1();"><span class="ti-plus"></span></button>&nbsp;'

		$("#docTbl tbody tr:last").find(".documentclss").val("");
		$("#docTbl tbody tr:last").find(".docNoclss").val("");
		$("#docTbl tbody tr:last").find(".documentclssup").val("");
		$("#docTbl tbody tr:last").find(".uploadedBillCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").val('');
		$("#docTbl tbody tr:last").find(".imageName").empty();
		var j = 0;
		$("#docTbl > #doctbodyData > tr").each(function(i) {

			var selectInput = $(this).find('select');
			var textInput = $(this).find('input');
			var fileInput = $(this).find('file');
			var divInput = $(this).find('div');
			var label = $(this).find('label');
			var iInput = $(this).find('i');
			selectInput.eq(0).attr('id', "docid_" + i);

			textInput.eq(1).attr('id', "docnoid_" + i);
			textInput.eq(2).attr('id', "uploadDoc_" + i);
			label.eq(1).attr('for', "uploadDoc_" + i);
			textInput.eq(3).attr('id', "uploadHidden_" + i);
			divInput.eq(4).attr('id', "uploadedBillDiv_" + i);
			divInput.eq(5).attr('id', "imageName_" + i);
			divInput.eq(6).attr('id', "dltImage_" + i);
			iInput.eq(0).attr('id', "clickImg_" + i);
			j++;
		})
		$("#clickImg_" + (j - 1)).removeClass("ti-pencil");
		$("#clickImg_" + (j - 1)).addClass("ti-plus");

	}

	function checkForDuplicateEntry(event) {
		var document = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var count = 0;
		$(".docNoclss").each(function() {
			if (document == $(this).val()) {
				count++;
			}
		})
		if (count >= 2) {
			$("#messageParagraph").text("Document Name Already Entered");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');

			return false;
		} else {
			return true;
		}

	}
	function openDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('show');
	}
	//for closeing modal box for dlt ind product
	function closeDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('hide');
	}

	function deletAttachmentRow() {
		var lengthOfTableRow1 = 0;
		$("#docTbl > #doctbodyData > tr").each(function() {
			lengthOfTableRow1 = lengthOfTableRow1 + 1;
		})
		var id = $("#dltValue").val();
		$("#" + id).closest('tr').remove();
		closeDeleteConfirm();
		if (lengthOfTableRow1 == 1) {
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0"></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);
		}
	}

	//validation
	function validFormData() {
		var allValid = true;
		/* if (!validationUpdated("Sales Order Id. Required",
				'salesOrderId'))
			allValid = false; */
		/* if (!validationUpdated("Store Name Required", 'storeId'))
			allValid = false; */
		return allValid;
	}

	function validProductData() {
		return true;
	}

	function editPaymentReeived(paymentId, saleInvoiceId) {
		//alert("salesOrderId++++++++++"+salesOrderId);
		//Cancel();

		$("#searchRowDiv").hide();

		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#addData").show();
		$("#add").hide();
		$("#save").show();
		$("#Cancel").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
		$("#documentDetails").show();

		agGrid
				.simpleHttpRequest({
					url : 'view-paymentsreceived-edit-new?id=' + paymentId
				})
				.then(
						function(data) {
							getSalesInvoiceList(data[0].custId, 'edit',
									data[0].saleInvoiceId);

							console.log("SSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS"
									+ data);
							$("#PaymentheadId").html(data[0].paymentId);
							$("#taxtype").val(data[0].taxType);

							//getPackageId();
							$("#custId").val(data[0].custId);
							$("#custName").val(data[0].custName);
							$("#saleInvoiceId").val(data[0].saleInvoiceId);
							$("#amountReceived").val(data[0].amountReceived);
							$("#bankCharges").val(data[0].bankCharges);
							$("#paymentDate").val(data[0].qutUpdatedOn);
							$("#paymentMode").val(data[0].paymentMode);
							$("#payment").val(data[0].payment);
							$("#depositTo").val(data[0].depositTo);
							$("#depositToId").val(data[0].depositToId);
							$("#reference").val(data[0].reference);
							$("#internalNotes").val(data[0].internalNotes);
							$("#fullyPaymentAmount").val(
									data[0].fullyPaymentAmount);

							if (data[0].checkBox == "0") {
								$("#receivedFullamount").prop("checked", true);
							} else {
								$("#receivedFullamount").prop("checked", false);
							}

							getEditTaxType(data[0].saleInvoiceId);
							//	getsalesOrderData1(data[0].salesOrderId);
							getAllDataForSalesInvoice1(data[0].saleInvoiceId);
							$("#doctbodyData").empty();
							var documentList = data[0].documentList;
							if (documentList != null && documentList != "") {
								for (var i = 0; i < documentList.length; i++) {

									var tbl = '<tr>'
											+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
											+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
											+ '<td><div class="form-group"> <input type="text" value="'+documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
											+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
											+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
											+ i
											+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
											+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+documentList[i].fileName+'" class="uploadHidCls">'
											+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
											+ documentList[i].action
											+ '</div></div>'
											+ '<div id="imageName_'+i+'" class="imageName">'
											+ documentList[i].fileName
											+ '</div>'
											+ '<input type="hidden" id="editId_'+i+'" value="'+ documentList[i].vendorRfqId+'">'
											+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
											+ '</tr>';

									$("#doctbodyData").append(tbl);
								}
							} else {
								var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
										+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
										+ '</tr>';
								$("#doctbodyData").append(tbl);
							}

						});

	}

	function getEditTaxType(search) {

		$.ajax({
			type : "POST",
			url : "view-paymentsreceived-get-customer-list",
			dataType : 'json',
			contentType : 'application/json',
			data : search,
			success : function(response) {
				if (response.message == "success") {
					console.log("response data" + response.body[0].taxType)
					$("#taxType").val(response.body[0].taxType);
					hideShowS();
				}
			},
			error : function(data) {
				console.log(data);
			}
		})
	}
	/* 
	Delete  
	 */
	function deleteQuotation() {

		$('#deleteQuot').modal('show');
	}
	function cancelModalBtn() {

		$("#deleteModalBtn").removeAttr("disabled");
	}

	function rowSelect() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			$('#delete').attr("disabled", false);

		} else {
			$('#delete').attr("disabled", true);

		}

	}

	function deleteOnclick() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var id = selectedRows[0].paymentId;
		$.ajax({
			type : "POST",
			url : "view-paymentsreceived-delete?id=" + id,
			success : function(response) {
				if (response.message == "success") {
					location.reload();
					agGrid.simpleHttpRequest({
						url : 'view-paymentsreceived-through-ajax'
					}).then(function(data) {
						gridOptions.api.setRowData(data);
						console.log(JSON.stringify(data))
					});
					Cancel();
				}
			},
			error : function(data) {
				console.log(data);
			}
		})
	}

	function onQuickFilterChanged() {
		$(".ti-search srchicon").hide();
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}

	/* customer AutoSearch */

	function getCustomerList() {
		var search = $("#custName").val();
		//alert('hello get cust1 search--------'+search);
		if (search) {
			//alert('hello get cust2');
			$
					.ajax({
						type : "POST",
						url : "view-paymentsreceived-get-customer-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValue1(\''
												+ response.body[i].custId
												+ '\',\''
												+ response.body[i].custName
												+ '\',\''
												+ response.body[i].custGSTNo
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].custName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddCustomer();"><a class="addCust" href="#">Add New Customer</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValue()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddCustomer();"><a class="addCust" href="#">Add New Customer</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}

	}
	function AddCustomer() {

		$('#addCustomerModel').modal('show');

	}
	function cancelBtn1() {
		$('#addCustomerModel').modal('hide');
	}
	function selectAutocompleteValue1(custId, custName, custGSTNo, taxType) {

		if (custId) {
			//alert(custName)

			$("#custId").val(custId);

			$("#custName").val(custName);
			$("#custGSTNo").val(custGSTNo);
			$("#taxType").val(taxType);
			$("#search").val(custName);
			$("#search").attr('data-procat', custId);
			$("#suggesstion-box1_").hide();

			$("#addre").show();

			hideShowS();
			//checkForDuplicate(key,counter);
			getAddressDetails(custId);
			getSalesInvoiceList(custId, "add", "");

		} else {

			$("#custId").val("");

			$("#custName").val("");
			$("#custGSTNo").val("");
			$("#taxType").val("");
			$("#search").val("");
			$("#search").attr('data-procat', "");
			$("#suggesstion-box1_").hide();

		}
	}
	function selectAutocompleteValue() {

		$("#custId").val("");

		$("#custName").val("");
		$("#custGSTNo").val("");
		$("#taxType").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box1_").hide();

	}

	function getSalesInvoiceList(custId, id1, id2) {
		//alert(id2)
		//alert("parameter1");
		// var cname = $('#c//ustId').val();
		if (custId) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-salesinvoicelist?id=" + custId
						+ "&type=" + id1,
				success : function(response) {
					if (response.message == "success") {
						//console.log("Salesinvoice===="+JSON.stringify(response.body))

						$("#saleInvoiceId").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#saleInvoiceId").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].name);
							$(option).html(response.body[i].name);
							$("#saleInvoiceId").append(option);
						}
						if (id2 != "") {
							$("#saleInvoiceId").val(id2);
						}

					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#saleInvoiceId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("saleInvoiceId");
			$("#saleInvoiceId").append(option);
			$("#saleInvoiceId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#salesOrderId").append(option);
		}
	}

	function getSalesOrder(custId, salesOrder) {
		//alert("parameter2");

		if (custId) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");

			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-salesorderlist?id=" + custId,
				success : function(response) {
					if (response.message == "success") {
						//console.log("Salesorder===="+JSON.stringify(response.body))

						$("#salesOrderId").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#salesOrderId").append(option);
						for (var i = 0; i < response.body.length; i++) {

							if (response.body[i].name == salesOrder) {
								$(option).val(response.body[i].name);
								$(option).html(response.body[i].name);
								$("#salesOrderId").append(option);
								//alert("hello");
							}

						}

						if (salesOrderId == null) {
							$("#salesOrderId").val(null);
						} else {
							$("#salesOrderId").val(salesOrderId);
						}

					}
				},
				error : function(e) {
				}
			});

		} else {
			$("#salesOrderId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("salesOrderId");
			$("#salesOrderId").append(option);
			$("#salesOrderId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");

		}

	}
	/* ============================START================================= */
	

	function getPakageEdit(sorder, salepkg) {

		if (sorder != '') {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-get-PackageId?id=" + sorder,
				success : function(response) {
					if (response.message == "success") {
						$("#salePackageId").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#salePackageId").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#salePackageId").append(option);
						}
					}

					$("#salePackageId").val(salepkg);
				},
				error : function(e) {
				}
			});
		} else {
			$("#salePackageId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#salePackageId").append(option);
			$("#salePackageId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getPackageId() {

		var cname = $('#salesOrderId').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-get-PackageId?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#salePackageId").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#salePackageId").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#salePackageId").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#salePackageId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#salePackageId").append(option);
			$("#salePackageId").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	/* 	===========================END======================================== */

	function getAddressDetails(custId) {

		//var Id=$("#custName").val();
		$.ajax({
			type : "GET",
			url : "view-paymentsreceived-get-address?id=" + custId,

			async : false,
			success : function(response) {
				if (response.message == "Success") {

					console.log(response.body)
					$("#con").html(response.body.country);
					$("#bstate").html(response.body.states);
					$("#bcity").html(response.body.city);
					$("#bstreet1").html(response.body.street1);
					$("#bstreet2").html(response.body.street2);
					$("#bzipcode").html(response.body.zipCode);
					$("#bphone").html(response.body.phone);
					$("#bfax").html(response.body.fax);

					$("#con1").html(response.body.country1);
					$("#bstate1").html(response.body.states1);
					$("#bcity1").html(response.body.city1);
					$("#bstreet11").html(response.body.street11);
					$("#bstreet21").html(response.body.street21);
					$("#bzipcode1").html(response.body.zipCode1);
					$("#bphone1").html(response.body.phone1);
					$("#bfax1").html(response.body.fax1);

				}
			}
		});
	}
	//add Customer Info

	function addCustomerInfo() {
		//alert('hello');return false;
		var obj = {};
		obj.customerId = $('#customerId').text();
		obj.customerType = $('#customerType').val();
		obj.salutation = $('#salutation').val();
		obj.customerName = $('#customerName').val();
		obj.companyName = $('#companyName').val();
		obj.customerDisplayName = $('#customerDisplayName').val();
		obj.cusEmail = $('#cusEmail').val();
		obj.custMobile = $('#custMobile').val();
		obj.custSkype = $('#custSkype').val();

		obj.custDesignation = $('#custDesignation').val();
		obj.department = $('#department').val();
		obj.webSite = $('#webSite').val();
		obj.status = $('#status').val();
		obj.pan = $('#pan').val();
		obj.currency = $('#currency').val();
		obj.openingBalance = $('#openingBalance').val();
		obj.paymentTerms = $('#paymentTerms').val();
		obj.enableDtls = $('#enableDtls').val();
		obj.portableLang = $('#portableLang').val();

		obj.faceBook = $('#faceBook').val();
		obj.twitter = $('#twitter').val();
		obj.country = $('#country').val();
		obj.states = $('#states').val();
		obj.city = $('#city').val();
		obj.street1 = $('#street1').val();
		obj.street2 = $('#street2').val();
		obj.zipCode = $('#zipCode').val();
		obj.phone = $('#phone').val();
		obj.fax = $('#fax').val();

		obj.country1 = $('#country1').val();
		obj.states1 = $('#states1').val();
		obj.city1 = $('#city').val();
		obj.street11 = $('#street11').val();
		obj.street21 = $('#street21').val();
		obj.zipCode1 = $('#zipCode1').val();
		obj.phone1 = $('#phone1').val();
		obj.fax1 = $('#fax1').val();

		obj.salutation1 = $('#salutation1').val();
		obj.firstName = $('#firstName').val();
		obj.lastName = $('#lastName').val();
		obj.emailAdd = $('#emailAdd').val();
		obj.mobile = $('#mobile').val();
		obj.remarks = $('#remarks').val();

		console.log("object on add customer-----------" + JSON.stringify(obj));
		//return false;

		/* FORM VALIDATION STARTS*/

		var validation = true;

		/* FORM VALIDATION ENDS*/

		if (validation) {
			$.ajax({
				type : "POST",
				url : "view-paymentsreceived-adds",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.code == "Success") {
						console.log(response);

						$("#add").hide();
						$("#copy").show();
						$("#delete").hide();
						$("#totalReq").show();
						$("#myGrid").hide();
						$("#searchRowDiv").hide();
						$("#demo").hide();
						$("#addCustomerModel").modal('hide');

					}
				},
				error : function(data) {

					//console.log(data);
				}
			})
		}

	}
	function addnewAddress() {

		$('#addAddressModel').modal('show');

	}
	function addnewAddress1() {

		$('#addAddressModel1').modal('show');

	}
	function cancelBtn() {
		$('#addAddressModel').modal('hide');
	}
	function cancelBtn2() {
		$('#addAddressModel1').modal('hide');
	}
	function tcscancelBtn() {
		$('#manageTCsModel').modal('hide');
	}

	function addCustomerInfo2() {
		var obj = {};
		var Id = $("#custId").val();

		obj.customerId = $("#custId").val();
		obj.country = $("#countryb").val();
		obj.states = $("#statesb").val();
		obj.city = $("#cityb").val();
		obj.street1 = $("#street1b").val();
		obj.street2 = $("#street2b").val();
		obj.zipCode = $("#zipCodeb").val();
		obj.phone = $("#phoneb").val();
		obj.fax = $("#faxb").val();

		$.ajax({
			type : "POST",
			url : "view-paymentsreceived-add-cust-billingaddress",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {

					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					//$("#myGrid").show();
					$("#billingInfo").hide();

				}
			},
			error : function(data) {
			}
		})

	}

	function addCustomerInfo1() {
		var obj = {};
		var Id = $("#custId").val();

		obj.customerId = $("#custId").val();
		obj.country1 = $("#country1s").val();
		obj.states1 = $("#states1s").val();
		obj.city1 = $("#city1s").val();
		obj.street11 = $("#street11s").val();
		obj.street21 = $("#street21s").val();
		obj.zipCode1 = $("#zipCode1s").val();
		obj.phone1 = $("#phone1s").val();
		obj.fax1 = $("#fax1s").val();

		$.ajax({
			type : "POST",
			url : "view-paymentsreceived-add-cust-shippingaddress",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {

					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					//$("#myGrid").show();
					$("#shippingInfo").hide();

				}
			},
			error : function(data) {
			}
		})

	}

	function showDisplay() {
		var title = $('#salutation').val();
		var name = $('#customerName').val();
		var fullName = title + ' ' + name;
		$('#customerDisplayName').val(fullName);
	}

	function getStateDetails() {

		var cname = $('#country').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states").append(option);
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetails1() {

		var cname = $('#country1').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetailsb() {

		var cname = $('#countryb').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#statesb").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#statesb").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#statesb").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#statesb").append(option);
			$("#statesb").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function getStateDetailss() {

		var cname = $('#country1s').val();
		if (cname) {
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-stateList?id=" + cname,
				success : function(response) {
					if (response.message == "success") {
						$("#states1s").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1s").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1s").append(option);
						}
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1s").append(option);
			$("#states1s").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}

	function copyAsBillingAdd() {

		var country = $('#country').val();
		var states = $('#states').val();
		var city = $('#city').val();
		var street1 = $('#street1').val();
		var street2 = $('#street2').val();
		var zipCode = $('#zipCode').val();
		var phone = $('#phone').val();
		var fax = $('#fax').val();

		$('#country1').val(country);
		$('#states1').val(states);
		getStateDataOnEdit1(states);
		$('#city1').val(city);
		$('#street11').val(street1);
		$('#street21').val(street2);
		$('#zipCode1').val(zipCode);
		$('#phone1').val(phone);
		$('#fax1').val(fax);
	}

	function getStateDataOnEdit1(stateId) {
		var country = $("#country").val();
		if (country) {
			$.ajax({
				type : "GET",
				url : "view-paymentsreceived-stateList?id=" + country,
				success : function(response) {
					if (response.message == "success") {
						$("#states1").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states1").append(option);
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>");
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states1").append(option);
						}
						$("#states1").val(stateId);
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states1").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states1").append(option);
		}
	}

	function downloadDetails() {
		var dataset = [];
		gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			dataset.push(rowNode.data);
		});
		gridOptions.api.exportDataAsCsv(dataset);
	}

	/* ============================START================================= */
	function getAllDataForSalesInvoice() {
		var saleInvoiceId = $("#saleInvoiceId").val();
		//	alert("salesInvoice+++++"+saleInvoiceId);
		agGrid
				.simpleHttpRequest(
						{
							url : 'view-paymentsreceived-get-salesinvoicedata?id='
									+ saleInvoiceId
						})
				.then(
						function(data) {
							console.log("salesInvoice-----------"
									+ JSON.stringify(data));

							trCount = '';
							var countItm = data.length;
							//alert("countItm"+countItm)

							//return false;
							console.log("count response mail----------"
									+ countItm);
							for (var i = 0; i < data.length; i++) {
								$("#amountHiddenId").val(data[i].grandTotal);

								//alert(data[i].itemName);
								var itemRow = '<tr>'
										//+'<td><input class="form-check-input" type="checkbox" id="gridCheck2"></td>'
										+ '<td>'
										+ '<div class="d-flex align-content-center">'
										+ '<div class="textsec">'
										+ '<div class="name-txt">'
										+ data[i].invoiceDate
										+ '</div>'
										+ '</div>'
										+ '</div>'
										+ '</td>'
										+ '<td style="text-align:center">'
										+ data[i].saleInvoice
										+ '</td>'
										+ '<td style="text-align:center">'
										+ data[i].grandTotal
										+ '</td>'
										+ '<td style="text-align:center">'
										+ data[i].grandTotal
										+ '</td>'
										+ '<td style="text-align:center"><input type="text" id="fullyPaymentAmount"></td>'
										+ '</tr>';
								trCount = itemRow;
								$("#invoiceTableDetails").append(trCount);

							}
						});

	}

	function getAllDataForSalesInvoice1(saleInvoiceId) {
		//	var saleInvoiceId=$("#saleInvoiceId").val();
		//alert("salesInvoice+++++"+saleInvoiceId);
		agGrid
				.simpleHttpRequest(
						{
							url : 'view-paymentsreceived-get-salesinvoicedata?id='
									+ saleInvoiceId
						})
				.then(
						function(data) {
							console.log("salesInvoice-----------"
									+ JSON.stringify(data));

							trCount = '';
							var countItm = data.length;
							//alert("countItm"+countItm)

							//return false;
							var fullyPaymentAmount = "";
							console.log("count response mail----------"
									+ countItm);
							for (var i = 0; i < data.length; i++) {
								//alert(data[i].itemName);
								fullyPaymentAmount = data[i].grandTotal;
								//$("#fullyPaymentAmount").val(fullyPaymentAmount);
								var itemRow = '<tr>'
										//+'<td><input class="form-check-input" type="checkbox" id="gridCheck2"></td>'
										+ '<td>'
										+ '<div class="d-flex align-content-center">'
										+ '<div class="textsec">'
										+ '<div class="name-txt">'
										+ data[i].invoiceDate
										+ '</div>'
										+ '</div>'
										+ '</div>'
										+ '</td>'
										+ '<td style="text-align:center">'
										+ data[i].saleInvoice
										+ '</td>'
										+ '<td style="text-align:center">'
										+ data[i].grandTotal
										+ '</td>'
										+ '<td style="text-align:center">'
										+ data[i].grandTotal
										+ '</td>'
										+ '<td style="text-align:center"><input type="text" value="'+fullyPaymentAmount+'" id="fullyPaymentAmount"></td>'
										+ '</tr>';
								trCount = itemRow;
								$("#invoiceTableDetails").append(trCount);

							}
						});

	}

	/* ============================END================================= */

	//Account auto search
	function getAccountList() {
		var search = $("#depositTo").val();

		if (search) {

			$
					.ajax({
						type : "POST",
						url : "view-paymentsreceived-get-account-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list2" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue2(\''
												+ response.body[i].depositToId
												+ '\',\''
												+ response.body[i].accountName
												+ '\',\''
												+ response.body[i].custGSTNoo
												+ '\',\''
												+ response.body[i].taxTypee
												+ '\')">'
												+ response.body[i].accountName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddAccount();"><a class="addCust" href="#">Add Account</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box2_").show();
									$("#suggesstion-box2_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddAccount();"><a class="addCust" href="#">Add Account</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box2_").show();
									$("#suggesstion-box2_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}

	}

	function selectAutocompleteValuee() {

		$("#depositToId").val("");

		$("#depositTo").val("");
		$("#custGSTNoo").val("");
		$("#taxTypee").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box2_").hide();

	}

	function selectAutocompleteValue2(depositToId, accountName, custGSTNo,
			taxType) {

		$("#depositToId").val(depositToId);
		$("#depositTo").val(accountName);
		$("#custGSTNoo").val(custGSTNo);
		$("#taxTypee").val(taxType);
		$("#search").val(accountName);
		$("#search").attr('data-procat', depositToId);
		$("#suggesstion-box2_").hide();
		//	hideShowS();
		//checkForDuplicate(key,counter);

	}

	function getEditTaxTypee(search) {

		$.ajax({
			type : "POST",
			url : "view-paymentsreceived-get-account-list",
			dataType : 'json',
			contentType : 'application/json',
			data : search,
			success : function(response) {
				if (response.message == "success") {
					console.log("response data" + response.body[0].taxType)
					$("#taxTypee").val(response.body[0].taxType);
					hideShow()();
				}
			},
			error : function(data) {
				console.log(data);
			}
		})
	}

	$(document).ready(function() {

		$("#receivedFullamount").click(function() {

			if ($("#receivedFullamount").prop('checked') == true) {
				var value = $("#amountHiddenId").val();
				$("#amountReceived").val(value);
				$("#fullyPaymentAmount").val(value);
			} else {
				$("#amountReceived").val("");
				$("#fullyPaymentAmount").val("");
			}
		});

	});
</script>
</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">


						<div class="d-flex justify-content-between" id="reqTable"
							style="display: none;">

							<div class="btn-hs">
								<div class="font-design" id="totalCandidate">
									Payment Received(<span></span>)
								</div>
							</div>


							<div id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

							<div class="col-md-5 buttonsec btn-hs" id="fbtn">

								<button class="btn4" id=dwnld onclick="downloadDetails()">Download</button>
								<button onclick="add()" class="btn1" id="add">New</button>
								<button onclick="deleteQuotation()" class="btn3" id="delete">delete</button>
							</div>
						</div>
						<div id="myGrid" style="height: 500px; width: 100%;"
							class="ag-theme-alpine"></div>

						<div class="collapse" id="addData">
							<div class="innerstickybg">
								<div class="row">
									<div class="col-md-3">
										Payment ID: <span id="PaymentheadId"></span>
									</div>

									<div class="col-md-6">
										<div id="statusDiv">
											<div class="hr4"></div>
											<div class="main-div">
												<div class="section2">
													<div id="createdDiv" class="green-box">
														<div class="green-box-heading">CREATED</div>
														<div class="date" id="createdDate"></div>
													</div>
												</div>
												<div class="section3">
													<div id="activeDiv" class="green-box">
														<div class="green-box-heading">ACTIVE</div>
														<div class="date" id="activeDate"></div>
													</div>
												</div>
												<div class="section4">
													<div id="completeDiv" class="grey-box">
														<div class="green-box-heading">COMPLETE</div>
														<div class="date" id="completeDate"></div>
													</div>
												</div>
												<div class="section5">
													<div id="onHoldDiv" class="grey-box">
														<div class="green-box-heading">ONHOLD</div>
														<div class="date" id="onHoldDate"></div>
													</div>
												</div>

											</div>
										</div>
									</div>
									<div class="col-md-3" align="right">
										<button class="cancel-btn" id="Cancel" onClick="Cancel()">Cancel</button>
										<button class="approve-btn" id="save" onclick="save();">Save</button>
									</div>
								</div>
							</div>

							<div class="row innersticky_contentgap">
								<input type="hidden" id="salesOrder"> <input
									type="hidden" id="quotationId"> <input type="hidden"
									id="saleInvoice"><input type="hidden"
									id="saleDeliveryChallan"><input type="hidden"
									id="packageId"><input type="hidden"
									id="salesShipmentId"><input type="hidden"
									id="paymentId"><input type="hidden"
									id="amountHiddenId">
								<div class="col-lg-3">

									<div class="form-group">
										<div class="autocomplete" style="width: 100%;">
											<label>Customer Name</label> <input type="text" id="custName"
												placeholder="Customer Name" class="form-control"
												onkeyup='getCustomerList();'><input type="hidden"
												id="custId"> <input type="hidden" id="custGSTNo">
											<input type="hidden" id="taxType" onclick="hideShowS()">
										</div>
										<div id="suggesstion-box1_" class="sugg-cls"></div>

									</div>


									<div class="row" id=addre>
										<div class="col-md-6">
											<span class="billtxt" id="billingAdd">Billing Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd1" onclick="addnewAddress()"
													style="color: blue">Add New Address</strong>

												<!-- <div class="preserve-wrap">Near DAV School</div>
												BBSR<br> Odisha 748945<br> India<br> Phone:
												9090868717<br> Fax: 86896869 -->
											</address>
											<div class="preserve-wrap1">
												<span id='con'></span><br> <span id='bstate'></span><br>
												<span id='bcity'></span><br> <span id='bstreet1'></span><br>
												<span id='bstreet2'></span><br> <span id='bzipcode'></span><br>
												<span id='bphone'></span><br> <span id='bfax'></span><br>

											</div>


										</div>


										<div class="col-md-6">
											<span class="billtxt" id="shippingAdd">Shipping
												Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd" onclick="addnewAddress1()"
													style="color: blue">Add New Address</strong>
												<!-- <div class="preserve-wrap">Near DAV School</div>
												BBSR<br> Odisha 748945<br> India<br> Phone:
												9090868717<br> Fax: 86896869 -->
											</address>
											<div class="preserve-wrap1">
												<span id='con1'></span><br> <span id='bstate1'></span><br>
												<span id='bcity1'></span><br> <span id='bstreet11'></span><br>
												<span id='bstreet21'></span><br> <span id='bzipcode1'></span><br>
												<span id='bphone1'></span><br> <span id='bfax1'></span><br>

											</div>
										</div>


									</div>


								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label>Sales Invoice No#</label>
										<div class="select">
											<select name="salesInvoiceName" id="saleInvoiceId"
												onChange="getAllDataForSalesInvoice()">
												<option value="">Select</option>
												<!-- <option th:value="NULL">Select Sales Invoice</option> -->
												<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
											</select> <span class="focus"></span>
										</div>
									</div>
								</div>
								
								
							
								<div class="col-lg-3">
									<div class="form-group">
										<label>Amount Received</label><input type="text" id="amountReceived"
											 class="form-control">
											 <input type="checkbox" class="loc-chb" name="isActive"
											id="receivedFullamount" value="0" unchecked> <label
											style="margin-top: 10px;">Received Full Amount</label>
									</div>
								</div> 
								
								
							
									
								<div class="col-lg-3">
									<div class="form-group rupees-space">
										<label>Bank Charges(If Any)</label>
										<div class="d-flex">
	
										<span>₹</span> <input type="text"
											id="bankCharges" class="form-control">
											</div>

									</div>
								</div>
								<div class="col-lg-3">

									<label> Payment Date</label> <input type="text"
										id="paymentDate" class="form-control" readonly>
									

								</div>
								
								<div class="col-lg-3">

									<label> Payment# </label> <input type="text"
										id="payment" class="form-control" readonly>
									
                                 </div>
                                 
                                 <div class="col-lg-3">
									<div class="form-group">
										<label>Payment Received Id#</label><input type="text" id="paymentReference"
											 class="form-control" readonly>
									</div>
								</div>
								
								
									<div class="col-lg-3">
									<div class="form-group">
										<label>Payment Mode</label>
										<div class="select">
											<select id="paymentMode" onblur="removeValid(event)" >
												<option value="">Select</option>
												<option th:each="c,iter:${PayModeLists}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>

								</div>
							<div class="col-lg-3">
								
								<div class="form-group">
										<div class="autocomplete" style="width: 100%;">
											<label>Deposit To</label> <input type="text" id="depositTo"
												class="form-control"
												onkeyup='getAccountList()'><input type="hidden"
												id="depositToId"> <input type="hidden" id="custGSTNoo">
											<input type="hidden" id="taxTypee" onclick="hideShow()">
										</div>
										<div id="suggesstion-box2_" class="sugg-cls"></div>

									</div>
									
								</div>

								 <div class="col-lg-3">
									<div class="form-group">
										<label>Reference</label><input type="text" id="reference"
											class="form-control">
									</div>
								</div>




								<div class="col-lg-4">
									<div class="form-group">
										
											<label>Tax Deducted?:</label>
										<div class="row">
                                       <div class="col-md-4">
											<div class="radio-align">
												<span><input type="radio" id="huey"  value="1" 
													checked></span> <label >No Tax Deducted</label>
											</div>
                                      </div>
                                       <div class="col-md-4">
											<div class="radio-align">
												<span><input type="radio" id="dewey" value="0" unchecked></span>
												<label >Yes,TDS(Income Tax)</label>
											</div>
                                        </div>
                                        </div>
											
										
									</div>
								</div>

                           
                           	 <br> <br>
                           	  <br> <br>
									<div  >
									   <table class="table table-bordered">
										<thead>
											<tr>
											
											<th width="20%">Date</th>
											<th width="20%">Invoice Number</th>
											<th width="20%">Invoice Amount</th>
											<th width="20%">Amount Due</th>
											<th width="20%">Payment Amount</th>
										
											</tr>
										</thead>
										     
										          <tbody id="invoiceTableDetails">
										</tbody>
									
									   	</table>
									
									   </div>
							<div class="row">	   
						<div class="col-md-6">
							<div class="form-group">
								<label style="margin-bottom: 10px;">Notes</label>
								<textarea id="internalNotes" class="mt-2 form-controls"
									style="height: 40px;"> </textarea>
							</div>
						</div>

					<div class="col-md-6">
					      <!--accordion start-->
					    
									<div class="accordion-item mt-4" id="accordionExample2">
										<div class="accordion-item" id="documentDetails">
											<h2 class="accordion-header" id="headingTwoo">

												<button class="accordion-button collapsed" type="button"
													data-bs-toggle="collapse" data-bs-target="#collapseTwoo"
													aria-expanded="false" aria-controls="collapseTwoo">
													OTHER DOCUMENTS</button>

											</h2>
											<div id="collapseTwoo" class="accordion-collapse collapse"
												aria-labelledby="headingTwoo"
												data-bs-parent="#accordionExample">
												<div class="accordion-body">


													<div class="row">
														<div class="col-md-4 btn-hs1">
															<div class="font-design"></div>
														</div>
														<div class="col-md-8 butttonsec">
															<!--   <button class="download-btn" onclick="rfqCSV()">Download</button> -->
															<button class="new-btn" id="saveAttachmentBtn"
																onclick="checkEmpty();">Add Document</button>

														</div>
													</div>

													<table id="docTbl" cellspacing="7" cellpadding="7">
														<thead>
															<tr class="tr_clone">
																<!-- <th align="center"></th> -->

																<th width="320">Document Name</th>
																<th width="380">Attachment</th>


															</tr>
														</thead>
														<tbody id="doctbodyData">
															<tr>
																<td style="display: none" align="center" class="pdb-24"><input
																	class="checkCls" type="checkbox" id="check2"><label
																	for="check2"></label></td>
																<td style="display: none"><div class="form-group">


																		<select class="form-control documentclss" id="docid_0"
																			onblur="removeValid(event);">
																			<option value="">--Select--</option>
																			<option th:each="c,iter:${documentTypeList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div></td>
																<td><div class="form-group">
																		<input type="text" value=""
																			class="form-control docNoclss"
																			onblur="checkForDuplicateEntry(event)" id="docnoid_">
																	</div></td>

																<td>
																	<div class="control-group position-r">
																		<label class="custom-file-upload" for="uploadDoc_0"
																			id="uploadFor_0"> <i id="clickImg_0"
																			class="ti-plus"></i>
																		</label>
																		<div class="controls">

																			<input type="file" class="document" id="uploadDoc_0"
																				name="userImage" accept="image/*"
																				onchange="saveMultiFile(event)" />

																		</div>
																	</div> <input type="hidden" id="uploadHidden_0"
																	class="uploadHidCls">
																	<div id="uploadedBillDiv_0" align="center"
																		class="uploadedBillCls"></div>
																	<div id="imageName_0" class="imageName"></div>
																	<div id="dltImage_0"></div>
																</td>

															</tr>


														</tbody>
													</table>

												</div>
											</div>
										</div>
									</div>
									
								<!-- 	accordian end -->
								</div>
								</div>
							</div>

						</div>
						
					</div>
				</div>
				<!-- delete modal start -->
				<div id="deleteQuot" class="modal fade show" aria-modal="true">
					<div class="modal-dialog modal-confirm">
						<div class="modal-content">
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="cancelModalBtn()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<div class="modal-body">
								<p>Do you really want to delete these records? This process
									cannot be undone.</p>
							</div>
							<div class="modal-footer justify-content-center"
								style="margin-top: -30px;">

								<button type="button" class="cancel-btn" data-dismiss="modal"
									onclick="cancelModalBtn()">Cancel</button>
								<button type="button" class="delete-btn"
									onclick="deleteOnclick()">Delete</button>
							</div>
						</div>
					</div>
				</div>


				<!-- alert modal start -->
				<div id="alert" class="modal fade show" aria-modal="true">
					<div class="modal-dialog modal-confirm">
						<div class="modal-content">
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="cancelModalBtn()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<div class="modal-body">
								<p id="textId"></p>
							</div>
							<div class="modal-footer justify-content-center"
								style="margin-top: -30px;">

								<button type="button" class="btn1" data-dismiss="modal">SELECT</button>
								<!-- <button type="button" class="btn3" onclick="deleteOnclick()">Delete</button> -->
							</div>
						</div>
					</div>
				</div>


				<div id="deleteAttachment" class="modal fade show" aria-modal="true">
					<div class="modal-dialog modal-confirm">
						<div class="modal-content">
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="closeDeleteConfirm()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<div class="modal-body">
								<p>Do you really want to delete these records? This process
									cannot be undone.</p>
								<input type="hidden" id="dltValue">
							</div>
							<div class="modal-footer justify-content-center">

								<button type="button" class="cancel-btn" data-dismiss="modal"
									onclick="closeDeleteConfirm()">Cancel</button>
								<button type="button" class="delete-btn"
									onclick="deletAttachmentRow()">Delete</button>
							</div>
						</div>
					</div>
				</div>

				<div class="modal fade" id="addCustomerModel">
					<div class="modal-dialog modal-lg"
						style="margin-top: 130px; height: 900px;">
						<div class="modal-content">

							<!-- Modal Header -->
							<!-- <div class="modal-header flex-column">
									<div class="row">
										<div class="form-group">
												<div class="card-title">
													<h4>Customer Information</h4>
												</div>
											</div>
										</div>
								</div> -->
							<!-- Modal body -->
							<div class="modal-body">
								<div class="innerstickybg">
									<div class="d-flex justify-content-between" id="main">
										<div class="col-md-3" id="idDiv">
											Customer ID: <span id="customerId"></span>
										</div>
										<div>
											<span class="taskInfo">Customer Information</span>
										</div>
									</div>
								</div>

								<div class="row">
									<div class="innercontent">

										<!-- <div class="row"> -->
										<div class="row">

											<!--   <div class="col-md-4">
											<div class="form-group">
												<label>Customer Type</label>
												<div class="select">
													<select id="bankName">
														<option value="">Select Bank</option>
														<option th:each="c,iter:${bankList}" th:value="${c.key}"
															th:text="${c.name}"></option>
													</select>
												</div>
											</div>
										</div> -->


											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Type</label>

													<div class="select">
														<select id="customerType">
															<option value="">Select</option>
															<option value="Business">Business</option>
															<option value="Individual">Individual</option>
														</select>
													</div>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Salutation</label>
													<div class="select">
														<select id="salutation" onchange="showDisplay()">
															<option value="">Select</option>
															<option value="Mr.">Mr.</option>
															<option value="Mrs.">Mrs.</option>
															<option value="Ms.">Ms.</option>
															<option value="Miss.">Miss.</option>
															<option value="Dr.">Dr.</option>
															<option value="Prof.">Prof.</option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Name</label> <input type="text"
														class="form-control" id="customerName"
														placeholder="Customer Name" onblur="showDisplay()">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Company Name</label> <input type="text"
														class="form-control" id="companyName"
														placeholder="Company Name">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Display Name</label> <input type="text"
														class="form-control" id="customerDisplayName"
														placeholder="Customer Display Name" disabled>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Email</label> <input type="text"
														class="form-control" id="cusEmail" placeholder="Email">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Mobile</label> <input type="text"
														class="form-control" id="custMobile" placeholder="Mobile">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Skype</label> <input type="text"
														class="form-control" id="custSkype"
														placeholder="Customer Skype">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Customer Designation</label> <input type="text"
														class="form-control" id="custDesignation"
														placeholder="Customer Designation">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Department</label> <input type="text"
														class="form-control" id="department"
														placeholder="Department">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Web Site</label> <input type="text"
														class="form-control" id="webSite" placeholder="Web Site">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Status</label>
													<div class="select">
														<select id="status">
															<option value="">Select</option>
															<option value="Active">Active</option>
															<option value="Inactive">Inactive</option>
														</select>
													</div>
												</div>
											</div>


										</div>
									</div>

									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo"
												aria-expanded="true" aria-controls="collapseTwo">
												Other Details</button>
										</h2>
										<div id="collapseTwo" class="accordion-collapse collapse show"
											aria-labelledby="headingTwo"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-md-4">
														<div class="form-group">
															<label>PAN</label> <input type="text"
																class="form-control" id="pan" placeholder="PAN">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Currency</label>
															<div class="select">
																<select id="currency">
																	<option value="">Select</option>
																	<option value="AED-UAE Dirham">AED-UAE Dirham</option>
																	<option value="AUD-Australian Doller">AUD-Australian
																		Dollar</option>
																	<option value="CAD-Canadian Doller">CAD-Canadian
																		Dollar</option>
																	<option value="CNY-Yuan Renminbi">CNY-Yuan
																		Renminbi</option>
																	<option value="EUR-Euro">EUR-Euro</option>
																	<option value="GBP-Pound Sterlin">GBP-Pound
																		Sterlin</option>
																	<option value="JPY-Japanese Yen">JPY-Japanese
																		Yen</option>
																	<option value="SAR-Saudi Riyal">SAR-Saudi
																		Riyal</option>
																	<option value="USD-United State Doller">USD-United
																		State Dollar</option>
																	<option value="ZAR-South Africa Rand">ZAR-South
																		Africa Rand</option>
																</select>
															</div>
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Opening Balance</label> <input type="text"
																class="form-control" id="openingBalance"
																placeholder="Opening Balance">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Payment Terms</label>
															<div class="select">
																<select id="paymentTerms">
																	<option value="">Select</option>
																	<option value="Net 15">Net 15</option>
																	<option value="Net 30">Net 30</option>
																	<option value="Net 45">Net 45</option>
																	<option value="Net 60">Net 60</option>
																	<option value="Due end of the month">Due end
																		of the month</option>
																	<option value="Due end of the next month">Due
																		end of the next month</option>
																	<option value="Due on receipt">Due on receipt</option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Enable Portals</label><br> <input
																type="checkbox" class="form-control" id="enableDtls"
																placeholder="Enable Details"> <label>Allow
																portal acces for this customer</label>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Portable Language</label>

															<div class="select">
																<select id="portableLang">
																	<option value="">Select</option>
																	<option value="English">English</option>
																	<option value="HIndi">Hindi</option>
																	<option value="Bengali">Bengali</option>
																	<option value="Odia">Odia</option>
																	<option value="French">French</option>
																	<option value="Spanish">Spanish</option>
																	<option value="Bahasa Indonesia">Bahasa
																		Indonesia</option>
																	<option value="Italian">Italian</option>
																	<option value="Dutch">Dutch</option>
																	<option value="Sanskrit">Sanskrit</option>
																</select>
															</div>
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>FaceBook</label> <input type="text"
																class="form-control" id="faceBook"
																placeholder="FaceBook">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Twitter</label> <input type="text"
																class="form-control" id="twitter" placeholder="Twitter">
														</div>
													</div>


												</div>

											</div>
										</div>
									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
												aria-expanded="true" aria-controls="collapseTwo2">
												Billing Address Details</button>
										</h2>
										<div id="collapseTwo2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>Country</label>
															<div class="select">
																<select id="country" onchange="getStateDetails()">
																	<option th:value="NULL">Select Country</option>
																	<option th:each="c,iter:${countryList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>State</label>
															<div class="select">
																<select id="states">
																	<option th:value="NULL">Select State</option>
																	<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
																</select> <span class="focus"></span>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>City</label> <input type="text"
																class="form-control" id="city" placeholder="City">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Street 1</label> <input type="text"
																class="form-control" id="street1" placeholder="Street 1">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Street 2</label> <input type="text"
																class="form-control" id="street2" placeholder="Street 2">
														</div>
													</div>



													<div class="col-md-4">
														<div class="form-group">
															<label>ZipCode</label> <input type="text"
																class="form-control" id="zipCode" placeholder="Zip Code">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Phone</label> <input type="text"
																class="form-control" id="phone" placeholder="Phone">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Fax</label> <input type="text"
																class="form-control" id="fax" placeholder="Fax">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
												aria-expanded="true" aria-controls="collapseTwo2">
												Shipping Address Details</button>
											<div class="btnbill">
												<button class="btn btn-primarynew"
													onclick="copyAsBillingAdd()">Copy As Billing
													Address</button>
											</div>
										</h2>
										<div id="collapseTwo2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">

													<div class="col-md-4">
														<div class="form-group">
															<label>Country</label>
															<div class="select">
																<select id="country1" onchange="getStateDetails1()">
																	<option th:value="NULL">Select Country</option>
																	<option th:each="c,iter:${countryList}"
																		th:value="${c.key}" th:text="${c.name}"></option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>State</label>
															<div class="select">
																<select id="states1">
																	<option th:value="NULL">Select State</option>
																	<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
																</select> <span class="focus"></span>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>City</label> <input type="text"
																class="form-control" id="city1" placeholder="City">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Street 1</label> <input type="text"
																class="form-control" id="street11"
																placeholder="Street 1">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Street 2</label> <input type="text"
																class="form-control" id="street21"
																placeholder="Street 2">
														</div>
													</div>



													<div class="col-md-4">
														<div class="form-group">
															<label>ZipCode</label> <input type="text"
																class="form-control" id="zipCode1"
																placeholder="Zip Code">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Phone</label> <input type="text"
																class="form-control" id="phone1" placeholder="Phone">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Fax</label> <input type="text"
																class="form-control" id="fax1" placeholder="Fax">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>

									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo3">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo3"
												aria-expanded="true" aria-controls="collapseTwo3">
												Contact Person Details</button>
										</h2>
										<div id="collapseTwo3"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo3"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-md-4">
														<div class="form-group">
															<label>Salutation</label>
															<div class="select">
																<select id="salutation1">
																	<option value="">Select</option>
																	<option value="Mr.">Mr.</option>
																	<option value="Mrs.">Mrs.</option>
																	<option value="Ms.">Ms.</option>
																	<option value="Miss.">Miss.</option>
																	<option value="Dr.">Dr.</option>
																	<option value="Prof.">Prof.</option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>First Name</label> <input type="text"
																class="form-control" id="firstName"
																placeholder="first Name">
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Last Name</label> <input type="text"
																class="form-control" id="lastName"
																placeholder="last Name">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Email Address</label> <input type="text"
																class="form-control" id="emailAdd" placeholder="Email">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Mobile</label> <input type="text"
																class="form-control" id="mobile" placeholder="Mobile">
														</div>
													</div>

												</div>

											</div>
										</div>
									</div>


									<div class="accordion-item">
										<h2 class="accordion-header" id="headingTwo4">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
												aria-expanded="true" aria-controls="collapseTwo4">
												Remark Details</button>
										</h2>
										<div id="collapseTwo4"
											class="accordion-collapse collapse show"
											aria-labelledby="headingTwo4"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-md-8">
														<div class="modal-inrheading">Remarks</div>
														<div class="position-text">
															<textarea rows="4" cols="100" id="remarks"
																onkeyup="textCount(event)"></textarea>
															<div id="charNumSN" class="txtcounter" align="right">
																<span>0</span> characters
															</div>
														</div>
													</div>


												</div>

											</div>
										</div>
									</div>

									<div class="row mt-4">
										<div class="form-group">

											<button class="btn4" id="cancel" onclick="cancelBtn1()">CANCEL</button>
											<button class="btn1" id="save" onclick="addCustomerInfo()">SAVE</button>

										</div>
									</div>

								</div>

							</div>


						</div>
					</div>
				</div>



				<div class="modal fade" id="addAddressModel">
					<div class="modal-dialog modal-lg"
						style="margin-top: 130px; height: 900px;">
						<div class="modal-content">

							<!-- Modal Header -->
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="cancelModalBtn()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<!-- 	Modal body -->
							<div class="modal-body">

								<div class="col-md-12" id="billingInfo">
									<div class="card-title">
										<h4>Billing Address</h4>
									</div>
									<div class="row">

										<div class="col-md-4">
											<div class="form-group">
												<label>Country</label>
												<div class="select">
													<select id="countryb" onchange="getStateDetailsb()">
														<option th:value="NULL">Select Country</option>
														<option th:each="c,iter:${countryList}"
															th:value="${c.key}" th:text="${c.name}"></option>
													</select>
												</div>
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>State</label>
												<div class="select">
													<select id="statesb">
														<option th:value="NULL">Select State</option>
														<option th:each="c,iter:${statesList}" th:value="${c.key}"
															th:text="${c.name}"></option>
													</select> <span class="focus"></span>
												</div>
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>City</label> <input type="text" class="form-control"
													id="cityb" placeholder="City">
											</div>
										</div>


										<div class="col-md-4">
											<div class="form-group">
												<label>Street 1</label> <input type="text"
													class="form-control" id="street1b" placeholder="Street 1">
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>Street 2</label> <input type="text"
													class="form-control" id="street2b" placeholder="Street 2">
											</div>
										</div>



										<div class="col-md-4">
											<div class="form-group">
												<label>ZipCode</label> <input type="text"
													class="form-control" id="zipCodeb" placeholder="Zip Code">
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>Phone</label> <input type="text" class="form-control"
													id="phoneb" placeholder="Phone">
											</div>
										</div>


										<div class="col-md-4">
											<div class="form-group">
												<label>Fax</label> <input type="text" class="form-control"
													id="faxb" placeholder="Fax">
											</div>
										</div>

									</div>

									<div class="row mt-4">
										<div class="form-group">

											<button class="btn4" id="cancel" onclick="cancelBtn()">CANCEL</button>
											<button class="btn1" id="save" onclick="addCustomerInfo2()">SAVE</button>

										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>



				<div class="modal fade" id="addAddressModel1">
					<div class="modal-dialog modal-lg"
						style="margin-top: 130px; height: 900px;">
						<div class="modal-content">

							<!-- 	Modal Header -->
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="cancelModalBtn()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<!-- Modal body -->
							<div class="modal-body">

								<div class="col-md-12" id="shippingInfo">
									<div class="card-title">
										<h4>Shipping Address</h4>
									</div>
									<div class="row">

										<div class="col-md-4">
											<div class="form-group">
												<label>Country</label>
												<div class="select">
													<select id="country1s" onchange="getStateDetailss()">
														<option th:value="NULL">Select Country</option>
														<option th:each="c,iter:${countryList}"
															th:value="${c.key}" th:text="${c.name}"></option>
													</select>
												</div>
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>State</label>
												<div class="select">
													<select id="states1s">
														<option th:value="NULL">Select State</option>
														<option th:each="c,iter:${statesList}" th:value="${c.key}"
															th:text="${c.name}"></option>
													</select> <span class="focus"></span>
												</div>
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>City</label> <input type="text" class="form-control"
													id="city1s" placeholder="City">
											</div>
										</div>


										<div class="col-md-4">
											<div class="form-group">
												<label>Street 1</label> <input type="text"
													class="form-control" id="street11s" placeholder="Street 1">
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>Street 2</label> <input type="text"
													class="form-control" id="street21s" placeholder="Street 2">
											</div>
										</div>



										<div class="col-md-4">
											<div class="form-group">
												<label>ZipCode</label> <input type="text"
													class="form-control" id="zipCode1s" placeholder="Zip Code">
											</div>
										</div>

										<div class="col-md-4">
											<div class="form-group">
												<label>Phone</label> <input type="text" class="form-control"
													id="phone1s" placeholder="Phone">
											</div>
										</div>


										<div class="col-md-4">
											<div class="form-group">
												<label>Fax</label> <input type="text" class="form-control"
													id="fax1s" placeholder="Fax">
											</div>
										</div>

									</div>

									<div class="row mt-4">
										<div class="form-group">

											<button class="btn4" id="cancel" onclick="cancelBtn2()">CANCEL</button>
											<button class="btn1" id="save" onclick="addCustomerInfo1()">SAVE</button>

										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>
	</div>
</body>
</html>