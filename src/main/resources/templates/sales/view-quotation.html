<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">

<head>
<link rel="stylesheet" href="../assets/css/extend/lightslider.css" />
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

.autocomplete {
	position: relative;
	display: inline-block;
	width: 100%;
}

.btn-primarynew {
	color: #fff !important;
	background-color: #0d6efd;
	border-color: #0d6efd;
}

.innerstickybg {
	background: #f0f3f1;
	height: 60px;
	width: 100%;
	z-index: 8;
	padding: 10px 5px;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

.form-group label {
	font-size: 12px;
	position: relative;
	top: 4px;
}

.holdCls {
	background-color: rgb(0, 143, 0);
}

.bg_white {
	background: #ffffff !important;
}

.blueClsWT {
	background: #0076ba;
	color: #fff;
}

.blueCls {
	background: #0076ba;
	color: #fff;
}

.blueClsWT::before {
	font-size: 8px;
	color: #FFF;
	content: '\e64c';
	font-family: 'themify';
	padding-right: 7px;
}

.modal-body table td input[type=checkbox] {
	width: 0px;
	margin-right: 16px;
	position: relative;
	top: 0px;
	float: none;
}

.firstnode {
	color: #929292;
	border-top: 1px solid transparent !important;
	border-left: 1px solid transparent !important;
	border-bottom: 1px solid transparent !important;
	width: 320px;
	font-size: 12px;
	font-weight: 100;
}

.simple-tree-table-closed .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
	transform: rotate(90deg);
}

.simple-tree-table-opened .simple-tree-table-icon:after {
	content: "\f105" !important;
	font-family: 'FontAwesome';
	color: black;
	display: inline-block;
	margin-right: 6px;
}

.simple-tree-table-icon {
	display: inline-block;
	width: 1.5em;
	line-height: 1.5em;
	margin: 0.1em;
	background-color: transparent;
	text-align: center;
	cursor: pointer;
}

.form-group1 label {
	font-size: 18px;
	position: relative;
	top: 4px;
}

.tptCls {
	background: transparnt;
}

.font-small {
	font-size: 13px;
}

.billtxt {
	color: #777 !important;
	font-size: 14px;
	margin-top: 10px;
	text-transform: uppercase;
	display: block;
}

.fa {
	display: inline-block;
	font: normal normal normal 14px/1 FontAwesome;
	font-size: inherit;
	text-rendering: auto;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

.form-controls {
	font-family: 'Montserrat', sans-serif;
	display: block;
	width: 100%;
	font-size: 12px;
	color: #929292;
	background-color: transparent;
	background-clip: padding-box;
	border: 1px solid #d5d5d5;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
	line-height: 30px;
	border-radius: 0;
	padding: 0;
}

.sugg-cls ul {
	height: 150px;
	overflow-x: scroll;
	position: relative;
}

ul#autocomplete-list1 {
	position: relative;
	z-index: 999;
}

ul#autocomplete-list1 li {
	position: relative;
	color: #fff;
	padding-left: 6px;
	background-color: #1f57a8;
	border-bottom: solid 1px #6189c2;
	padding-top: 5px;
	padding-bottom: 5px;
}

a.addCust {
	color: #fff;
}

.formValidation1 {
	font-size: 10px;
	font-weight: 100;
	color: #ff9e99;
	background-color: transparent;
	position: relative;
	top: -1px;
	padding: 3px 0;
}

.approve-btn1 {
	border: none;
	border-radius: 4px;
	font-size: 11px;
	background-color: #264c82;
	color: #fff;
	margin-left: 5px;
	text-transform: uppercase;
	width: 50px;
	height: 28px;
	line-height: 12px;
	float: right;
	text-transform: uppercase;
	cursor: pointer;
	white-space: normal;
}

element.style {
	width: 30%;
	position: absolute;
	right: -10px;
	overflow: hidden;
	height: auto;
	bottom: 150px;
}

.form-control_big {
	font-family: 'Montserrat', sans-serif;
	display: block;
	width: 100%;
	font-size: 20px;
	font-weight: 300;
	color: #000;
	background-color: transparent;
	background-clip: padding-box;
	border-top: none;
	border-left: none;
	border-right: none;
	border-bottom: 1px solid #d5d5d5;
	transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
	margin-top: 10px;
	margin-bottom: 1px;
	padding-bottom: 0;
}

a.addCustnew {
	color: #fff;
	font-size: 13px !important;
}
/* ul li{
	margin:0!important;
	padding:0!important;
}
ul li p{
	margin:0!important;
	padding:0!important;
} */
</style>
<script src="../assets/js/extend/lightslider.js"></script>
<script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
<script>
	$(document).ready(function() {
		
		viewMasterData();
		customerType();
		        $('#yesButton').attr("disabled", true);
		        $('#noButton').attr("disabled", true);
		        $('#revision').attr("disabled", true);
		        $('#copyQuotation').attr("disabled", true);
						$("#documentDetails").hide();
						$('#docTbl').on( 'click', '.rmv1', function() { 
							openDeleteConfirm();
							var value = $(this).parent("div").attr("id");
							$("#dltValue").val(value); 
					});
						
						CKEDITOR.replace('qutDescription', {
					     	height: 150,
					     	removePlugins: 'wsc',
					     	scayt_autoStartup: true,
					     	scayt_maxSuggestions: 3,
					     	autoParagraph : false,
					     	});
						
						CKEDITOR.replace('termCondition', {
					     	height: 150,
					     	removePlugins: 'wsc',
					     	scayt_autoStartup: true,
					     	scayt_maxSuggestions: 3,
					     	autoParagraph : false,
					     	});
					
						var gridDiv = document.querySelector('#myGrid');
						new agGrid.Grid(gridDiv, gridOptions);

						
						
						var gridDiv = document.querySelector('#item');
						new agGrid.Grid(gridDiv, itemOptions);
						
						 var gridDiv = document.querySelector('#myGridProduct');
						    new agGrid.Grid(gridDiv, gridOptionsProduct);
						
						 var gridDiv = document.querySelector('#scopeMatrixes');
						new agGrid.Grid(gridDiv, scopeMatrixOptions);
						
						
						
						var gridDiv = document.querySelector('#myGridDraft');
						new agGrid.Grid(gridDiv, gridDraftOptions);
   
						
 
						//$("#main_content1").hide();
						$("#Cancel").hide();
						$("#addData").hide();
						$("#save").hide();
						$("#saveAsDraft").hide();
						$('#reqAppvBtn').attr("disabled", true);
						$('#delete').attr("disabled", true);
						$('#purchaseOrder').attr("disabled", true);

						gridOptions.api.setRowData();
						
						itemOptions.api.setRowData();
						scopeMatrixOptions.api.setRowData();
						gridDraftOptions.api.setRowData();

						
						agGrid.simpleHttpRequest({
							url : "view-quotation-through-ajax"
						}).then(function(data) {
							var len = data.length;
							$('#totalCandidate').find('span').html(len);
							gridOptions.api.setRowData(data);
						});
						var gridDiv = document.querySelector('#mySAGrid');
						new agGrid.Grid(gridDiv, gridSAOptions);
						var dateFormat = localStorage.getItem("dateFormat");
						$("#toDateCalendar").datetimepicker({
							format : dateFormat,
							closeOnDateSelect : true,
							timepicker : false,
							minDate : 0,
						}).on("change", function() {
							$('#qutValidDate').val($(this).val());
						})

						$('#qutValidDate').blur(function() {
							$("#toDateCalendar").val($(this).val());
						})
  
						$("#igstTR").hide();

						$("#browseBtn").click(function() {
							$("#myModal").modal('show');

						})
 
						$('#newItem2').attr("disabled", true);
	                   	$('#delete2').attr("disabled", true);
						/* 
						product category	 
						 */
						$("#browseBtn")
								.click(
										function() {
											selectActiveCancel();
											$(".benefitChk").prop("checked",
													false);
											$("#productModName").val("");
											$("#brand").val("");
											$("#skuMod").val("");
											$("#modelMod").val("");
											$("#manufactureItemMod").val("");
											$("#variationTypeMod").val("");
											$("#variationValueMod").val("");
											$("#unitMod").val("");

											$('.loader').show();
											$("body").addClass("overlay");
											$("#productDiv").modal("show");
											$
													.ajax({
														type : "POST",
														url : "view-quotation-item-get-product-list",
														dataType : "json",
														contentType : "application/json",
														data : "a",
														success : function(
																response) {
															if (response.message == "success") {
																console.log(response)
																for (var i = 0; i < response.body.length; i++) {
																	var row = "";
																	if (response.body[i].categoryId == response.body[i].parentId) {
																		if (response.body[i].nodeCount > 0) {

																			row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		} else {
																			row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																					+ response.body[i].categoryId
																					+ '" value="'
																					+ response.body[i].categoryId
																					+ '" name="'
																					+ response.body[i].categoryName
																					+ '" onchange=selectCheckBox("'
																					+ response.body[i].categoryId
																					+ '","'
																					+ response.body[i].catLevel
																					+ '")>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		}

																	} else {
																		if (response.body[i].nodeCount > 0) {
																			row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		} else {

																			row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'
																					+ '<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'
																					+ response.body[i].categoryId
																					+ '" value="'
																					+ response.body[i].categoryId
																					+ '" name="'
																					+ response.body[i].categoryName
																					+ '" onchange=selectCheckBox("'
																					+ response.body[i].categoryId
																					+ '","'
																					+ response.body[i].catLevel
																					+ '")>'
																					+ response.body[i].categoryName
																					+ '</td></tr>';
																		}
																	}
																	$(
																			"#productCategoryCBDiv")
																			.append(
																					row);

																}

																$('.loader')
																		.hide();
																$("body")
																		.removeClass(
																				"overlay");

																$('#basic')
																		.simpleTreeTable(
																				{
																					expander : $('#expander'),
																					collapser : $('#collapser'),
																					store : 'session',
																					storeKey : 'simple-tree-table-basic'
																				});
															}
														},
														error : function(data) {
															//console.log(data)
															$('.loader').hide();
															$("body")
																	.removeClass(
																			"overlay");
															$("#productDiv")
																	.modal(
																			"show");
														}
													});
										})

						
					var ld = localStorage.getItem('ReqRevisionData');
					var data = JSON.parse(ld);
					console.log(data)
					if (data) {
						//add();
						$('#hideTbl').hide();
						$('#searchRowDiv').hide();
						$('#sendToProduction').hide();
						//$('#blockeOrder').hide();
					$('#delete1').attr("disabled", true);
					$('#custName').attr("disabled", true);
		            $("#searchRowDiv").hide();
		            $("#myGrid").hide();
		            $("#reqTable").hide();
		            $(".btn-hs").hide();
		            $("#addData").show();
		            $("#add").hide();
		            $("#save").show();
		            $("#Cancel").show();
		            $("#totalCandidate").hide();
		            $("#dwnld").hide();
		            $("#upld").hide();
		            $("#addre").hide();
		            $("#retriveDraft").hide();
		            $("#saveAsDraft").hide();
		            $("#documentDetails").show();
		            $("#quotType").val(data[0].quotType);
		            $("#shippingHiddenId").val(data[0].shippingHiddenId);
					if(data[0].quotType=="QTM0001"){
						$("#main_content1").hide();
					}else{
						$("#main_content1").show();
					}
						itemOptions.api.setRowData(data);
						scopeMatrixOptions.api.setRowData(data[0].scopematrix);
						 $("#version").html(data[0].version);
						 $("#quotationReference").html(data[0].reference);
						 var lastVersion=(data[0].lastVersion);
							var version=(data[0].version);
							//$("#quotationDate").val(data[0].quotationDate);
							$("#qutValidDate").val(data[0].qutValidDate);
							$("#subject").val(data[0].subject);
							//$("#orderType").val(data[0].orderType);
							$("#custName").val(data[0].custName);
							$("#custId").val(data[0].custId);
							$("#grandTotal").val(data[0].grandTotal);
							$("#qSGST").val(data[0].qSGST);
							$("#qCGST").val(data[0].qCGST);
							$("#subTotal").val(data[0].subTotal);
							$("#qIGST").val(data[0].qIGST);
							$("#taxType").val(data[0].taxType);
						//	getAddressDetails(data[0].custId);
						getAddressDetails(data[0].custId,data[0].shippingHiddenId);
							$("#version").html(data[0].version);
							CKEDITOR.instances['qutDescription'].setData(data[0].qutDescription);
							CKEDITOR.instances['termCondition'].setData(data[0].termCondition);
							hideShowS();
						
						$.ajax({
							type : "GET",
							url : "view-quotation-get-insertedid",
									success : function(response) {
										if (response.message == "success") {
										$("#quotationId").val(response.body[0].key);
										}
									},
									error : function(e) { 
									}
								}); 
					
							console.log("dataset for challan-------",JSON.stringify(data[0]));
							var date = (new Date()).toISOString().split('T')[0];
							var newDate = changeDateFormat(date);
							$("#quotationDate").val(newDate);
						
				
						$("#doctbodyData").empty();
						var documentList = data[0].documentList;
						if (documentList != null && documentList != "") {
							for (var i = 0; i < documentList.length; i++) {

								var tbl = '<tr>'
										+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="'+documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
										+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
										+ i
										+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
										+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+documentList[i].fileName+'" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
										+ documentList[i].action
										+ '</div></div>'
										+ '<div id="imageName_'+i+'" class="imageName">'
										+ documentList[i].fileName
										+ '</div>'
										+ '<input type="hidden" id="editId_'+i+'" value="'+ documentList[i].vendorRfqId+'">'
										+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
										+ '</tr>';

								$("#doctbodyData").append(tbl);
							}
						} else {
							var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
									+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
									+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
									+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
									+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
									+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
									+ '</tr>';
							$("#doctbodyData").append(tbl);
						}
						localStorage.setItem('ReqRevisionData', null);
					} else {
						$("#salesOrderId").val('New');
					}				
						
					//Copy Data
					
						var ld = localStorage.getItem('ReqCopyData');
					var data = JSON.parse(ld);
					console.log(data)
					if (data) {
						//add();
						$('#hideTbl').hide();
						$('#searchRowDiv').hide();
						$('#sendToProduction').hide();
						//$('#blockeOrder').hide();
					$('#delete1').attr("disabled", true);
		            $("#searchRowDiv").hide();
		            $("#myGrid").hide();
		            $("#reqTable").hide();
		            $(".btn-hs").hide();
		            $("#addData").show();
		            $("#add").hide();
		            $("#save").show();
		            $("#Cancel").show();
		            $("#totalCandidate").hide();
		            $("#dwnld").hide();
		            $("#upld").hide();
		            $("#addre").hide();
		            $("#retriveDraft").hide();
		            $("#saveAsDraft").hide();
		            $("#documentDetails").show();
		            $("#quotType").val(data[0].quotType);
		            $("#shippingHiddenId").val(data[0].shippingHiddenId);
					if(data[0].quotType=="QTM0001"){
						$("#main_content1").hide();
					}else{
						$("#main_content1").show();
					}
						itemOptions.api.setRowData(data);
						scopeMatrixOptions.api.setRowData(data[0].scopematrix);
						/*  $("#version").html(data[0].version);
						 $("#quotationReference").html(data[0].reference); */
						/*  var lastVersion=(data[0].lastVersion);
							var version=(data[0].version); */
							//$("#quotationDate").val(data[0].quotationDate);
							$("#qutValidDate").val(data[0].qutValidDate);
							$("#subject").val(data[0].subject);
							//$("#orderType").val(data[0].orderType);
							$("#custName").val(data[0].custName);
							$("#custId").val(data[0].custId);
							$("#grandTotal").val(data[0].grandTotal);
							$("#qSGST").val(data[0].qSGST);
							$("#qCGST").val(data[0].qCGST);
							$("#subTotal").val(data[0].subTotal);
							$("#qIGST").val(data[0].qIGST);
							$("#taxType").val(data[0].taxType);
							//getAddressDetails(data[0].custId);
							getAddressDetails(data[0].custId,data[0].shippingHiddenId);
							//$("#version").html(data[0].version);
							CKEDITOR.instances['qutDescription'].setData(data[0].qutDescription);
							CKEDITOR.instances['termCondition'].setData(data[0].termCondition);
							
						
						$.ajax({
							type : "GET",
							url : "view-quotation-get-insertedid",
									success : function(response) {
										if (response.message == "success") {
										$("#quotationId").val(response.body[0].key);
										}
									},
									error : function(e) { 
									}
								}); 
					
							console.log("dataset for challan-------",JSON.stringify(data[0]));
							var date = (new Date()).toISOString().split('T')[0];
							var newDate = changeDateFormat(date);
							$("#quotationDate").val(newDate);
						
				
						$("#doctbodyData").empty();
						var documentList = data[0].documentList;
						if (documentList != null && documentList != "") {
							for (var i = 0; i < documentList.length; i++) {

								var tbl = '<tr>'
										+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
										+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
										+ '<td><div class="form-group"> <input type="text" value="'+documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
										+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
										+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
										+ i
										+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
										+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+documentList[i].fileName+'" class="uploadHidCls">'
										+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
										+ documentList[i].action
										+ '</div></div>'
										+ '<div id="imageName_'+i+'" class="imageName">'
										+ documentList[i].fileName
										+ '</div>'
										+ '<input type="hidden" id="editId_'+i+'" value="'+ documentList[i].vendorRfqId+'">'
										+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
										+ '</tr>';

								$("#doctbodyData").append(tbl);
							}
						} else {
							var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
									+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
									+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
									+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
									+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
									+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
									+ '</tr>';
							$("#doctbodyData").append(tbl);
						}
						localStorage.setItem('ReqCopyData', null);
					} else {
						$("#salesOrderId").val('New');
					}
										
						/*
						 *  po fn 
						 */

						$("#saveTableDataSale")
								.click(
										function() {
											var obj = {};
											obj.quotationId = $(
													"#quotationIdnew").val();
											obj.poNo = $("#poNo").val();
											obj.poDate = $("#poDate").val();
											obj.filePoSale = $("#fileUpload")
													.val();
											//obj.salesOrder=$("#salesOrder").val();

											var validation = true;

											if (obj.poNo == null
													|| obj.poNo == "") {
												validation = validationUpdated(
														"PO No Requied", "poNo");
												/* console.log("validat name "
														+ validation) */
											}

											if (obj.poDate == null
													|| obj.poDate == "") {
												validation = validationUpdated(
														"PO Date Requied",
														"poDate");
												console
														.log("validat Email name "
																+ validation)
											}

											//console.log("validation "
													//+ validation
													//+ JSON.stringify(obj))
											if (validation) {
												$
														.ajax({
															type : "POST",
															url : "view-quotation-po-add",
															contentType : "application/json",
															data : JSON
																	.stringify(obj),

															success : function(
																	response) {
																console
																		.log(response);
																if (response.message == "Success") {
																	closeNavSale();
																	agGrid
																			.simpleHttpRequest(
																					{
																						url : "view-quotation-through-ajax"
																					})
																			.then(
																					function(
																							data) {
																						gridOptions.api
																								.setRowData(data);
																					});
																}
															},
															error : function(
																	data) {

																console
																		.log(data);
															}
														})
											}

										})

});
	
/* function getSacCode() {
		var orderType = $('#orderType').val();
		if (orderType) {
			$.ajax({
				type : "GET",
				url : "view-quotation-getSacCode",
				success : function(response) {
					if (response.message == "success") {
						$("#sacCode").val(response.body[0].key);
						$("#sacCodeGst").val(response.body[0].key);
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#sacCode").empty();
		}
	} */
	
	/* 
	
	 Quotation 
	
	 */
	
	var columnDefs = [{
				headerCheckboxSelection : false,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left'

			},
			{
				headerName : "Quotation Id",
				field : "quotationId",
				pinned: 'left',
				width:140,
				cellRenderer : function(params) {
					return '<a onclick=editQuotation("'
							+ params.data.quotationId+','+params.data.reference+','+params.data.approveStatus
							+ '") href="javascript:void(0)">'
							+ params.data.quotationId + '</a>';
				}
			},{
				headerName : 'Reference Id',
				field : "reference",
				width:135,
				
			}, {
				 headerName : 'Customer Name',
				field : "custName",
				width:200,
			}, { 
				
				headerName : 'Quotation Type',
				field : "quotType",
				width:200,
			}, {
				headerName : 'Subject',
				field : "subject",
				width:200,
			}, {
				headerName : 'Valid Up To Date',
				field : "qutValidDate",
				width:160,
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				headerName : 'Approve Status',
				field : "approveStatus",
				width:150,
				cellStyle : {
					textAlign : 'center'
				},
				cellRenderer : function(params) {
					if (params.data.approveStatus =="Approved") { 
						return '<div style="color:#0642f5">'+params.data.approveStatus+'</div>';
					}  else if (params.data.approveStatus =="Revised"){
						return '<div style="color:#a9a9a9">'+params.data.approveStatus+'</div>';
					}else {
						return '<div style="color:#a9a9a9">'+params.data.approveStatus+'</div>';
					}
				}
			},{
				
				headerName : 'PO Status',
				field : "poStatus",
				width:150,
				cellStyle : {
					textAlign : 'center'
			},
				cellRenderer : function(params) {
					if (params.data.poStatus =="Generated") { 
						return '<div style="color:#0642f5">'+params.data.poStatus+'</div>';
					}  else {
						return '<div style="color:#a9a9a9">'+params.data.poStatus+'</div>';
					}	
				}
				
			},{
				headerName : 'PO Id',
				field : "poNo",
				width:120,
			},{
				headerName : 'PO Date',
				field : "poDate",
				width:120,
				cellStyle : {
					textAlign : 'center'
				},
			},{
				headerName : "PDF",
				cellStyle : {
					textAlign : 'center'
				},
				width:100,
				cellRenderer : function(params) {
					var s = "";
					s = ' <a href="#" class="grn-btn" onclick="qoutationPdfDownload(\''+params.data.quotationId+'\')"><i class="ti ti-download"></i> PDF </a>';
					return s;
				},
				},
			{
				headerName : 'Created By',
				field : "createdBy",
				width:150,
			}, {
				headerName : 'Quotation Date',
				field : "quotationDate",
				width:150,
				cellStyle : {
					textAlign : 'center'
				}
			
	    }];
	
	//Quotation Draft
	
	var columnDraftDefs = [{
				headerCheckboxSelection : false,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left'

			},
			{
				headerName : "Draft Id",
				field : "draftId",
				pinned: 'left',
				width:140,
				cellRenderer : function(params) {
					return '<a onclick=editDraft("'
							+ params.data.draftId
							+ '") href="javascript:void(0)">'
							+ params.data.draftId + '</a>';
				}
			
		
			},{
				headerName : 'Customer Name',
				field : "custName",
				width:200,
			}, { 
				
				headerName : 'Subject',
				field : "subject",
				width:200,
			}, {
				
				headerName : 'Valid Up To Date',
				field : "qutValidDate",
				width:160,
				cellStyle : {
					textAlign : 'center'
				}
			
			
	    }];

	/* 
	 *
	 quotation item  
	
	 */

	var itemDefs = [
			{
				headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left',

			},
			{
				headerName : "SlNo",
				field : "slNo",
				width : 100,
				pinned: 'left',
				cellRenderer : function(params) {
					if (params.data.slNo) {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)">'
								+ params.data.slNo + '<i class="bi-arrow-right-square-fill"></i></a>';
					} else {
						return '<a onclick=editProduct("' + params.data.slNo
								+ '") href="javascript:void(0)">'
								+ params.data.slNo + '<i class="bi-arrow-right-square-fill"></i></a>';
					}
				}
			}, {
				headerName : 'SKU',
				field : "sku",
				width : 90,
				pinned: 'left',
			}, {

				headerName : 'Item Name',
				field : "itemName",
				width : 175,
			}, 
			{
				headerName : 'HSN Code',
				field : "hsnCode",
				width : 120,
				hide:true,
			},
			{

				headerName : 'Size',
				field : "sizeInMM",
				width : 115,
			}, 
			{

				headerName : 'Thickness In MM',
				field : "thicknessInMM",
				width : 150,
			}, 
			{
				headerName : 'Unit',
				field : "unitName",
				width : 120,
			}, {
				headerName : 'Unit',
				field : "unit",
				hide : true,
			},
			 {
				headerName : 'Quantity',
				field : "quantity",
				type : 'rightAligned',
				width : 123,
			//	valueFormatter : currencyFormatter
			}, {
				headerName : 'Unit Price',
				field : "unitPrice",
				type : 'rightAligned',
				width : 145,
				//valueFormatter : currencyFormatter
			},  {
				headerName : 'Amount',
				field : "lineTotal",
				type : 'rightAligned',
				width : 138,
				//valueFormatter : currencyFormatter,
				aggFunc : 'sum'
			},{
				headerName : 'GST Rate',
				field : "gstRate",
				type : 'rightAligned',
				width : 100,
				hide : true,
				//valueFormatter : currencyFormatter,
			}, {
				headerName : 'CGST',
				field : "itemCgst",
				type : 'rightAligned',
				width : 100,
				hide : true,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'SGST',
				field : "itemSgst",
				type : 'rightAligned',
				width : 100,
				hide : true,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'IGST',
				field : "itemIgst",
				type : 'rightAligned',
				width : 100,
				hide : true,
				//valueFormatter : currencyFormatter
			}, {
				headerName : 'Taxable Amount',
				field : "taxableAmt",
				type : 'rightAligned',
				width : 155,
				hide : true,
				//valueFormatter : currencyFormatter
			},{
				headerName : 'Description',
				field : "itemDesc",
				width : 183,
			},];

	var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'single',

		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},

		onSelectionChanged : rowSelect,
	/* getRowNodeId : function(data) {
		return data.quotationId; 
	}*/
	};


	var gridDraftOptions = {
		columnDefs : columnDraftDefs,
		rowSelection : 'single',

		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		},

		onSelectionChanged : rowSelectDraft,
	
	};
	var itemOptions = {
		columnDefs : itemDefs,
		rowSelection : 'multiple',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 251,
			height : 10
		}, 
		onSelectionChanged : rowSelectItem,
		getRowNodeId : function(data) {
			return data.slNo;
		}
	};
	
	
	var scopeMatrixDefs = [
 		{
			headerCheckboxSelection : true,
			headerCheckboxSelectionFilteredOnly : true,
			checkboxSelection : true,
			width : 10,
			sortable : false,
			filter : false,
			resizable : true,
			pinned: 'left',

		}, 
		{
			headerName : "SlNo",
			field : "slno",
			width : 100,
			pinned: 'left',
			/* cellRenderer : function(params) {
				if (params.data.slNo) {
					return '<a onclick=editProductForMatrix("' + params.data.scopeMatrixSlNo
							+ '") href="javascript:void(0)">'
							+ params.data.scopeMatrixSlNo + '</a>';
				} else {
					return '<a onclick=editProductForMatrix("' + params.data.scopeMatrixSlNo
							+ '") href="javascript:void(0)">'
							+ params.data.scopeMatrixSlNo + '</a>';
				}
			} */ 
		}, {
			headerName : 'Description',
			field : "scopeMatrixDesc",
			width : 300,
		}, {

			headerName : 'Client',
			field : "matrixClient",
			width : 200,
			hide:true
		},  {
			headerName : 'Samudyam',
			field : "matrixSamudyam",
			width : 200,
			hide:true
		},/*  {

			headerName : 'Client',
			field : "matrixClient",
			width : 250,
			cellRenderer : function(params) {
				if (params.data.matrixClient =="Yes") { 
					return '<div style="color:#000000;position:relative;display:block;" class ="fa fa-check text-center"></div>';
				}  else {
					return '<div style="color:#000000;"></div>';
				}	
			}
		},  {
			headerName : 'Samudyam',
			field : "matrixSamudyam",
			width : 250,
			cellRenderer : function(params) {
				if (params.data.matrixSamudyam =="Yes") { 
					return '<div style="color:#000000;position:relative;display:block;" class ="fa fa-check text-center" ></div>';
				}  else {
					return '<div style="color:#000000"></div>';
				}	
			}
		
		
		},   */{
			headerName : 'Remarks',
			field : "scopeMatrixRemarks",
			width:350,
			cellStyle : { textAlign : 'right', 'background-color': '#e6f1f1' },
			singleClickEdit: true,
			editable : true,
			resizable : true,
		
			  
			
			
		} ,{
		    headerName: 'Client',
		    field: "matrixClient",
		    width: 120,
		    //cellStyle : { textAlign : 'center',},
		    cellRenderer: function(params) {
		    	 const isClientChecked = params.data.matrixClient === "Yes";
		    	    const checkboxHtml = '<input type="checkbox" id="client_check_' + params.data.slno + '" class="client-checkbox" ' + (isClientChecked ? 'checked' : '') + ' onclick="boxEnableClient(' + params.data.slno + ')"/>';
		    	    return '<div>' + checkboxHtml + '</div>';
		        
		    }
		} ,{
			
		    headerName: 'Samudyam',
		    field: "matrixSamudyam",
		    width: 120,
		    //cellStyle : { textAlign : 'center',},
		    cellRenderer: function(params) {
		           /*  const checkboxHtml = '<input type="checkbox" class="samudyam-checkbox" onclick="boxEnable(' + params.data.slno + ')"/>';
		            return '<div>' + checkboxHtml + '</div>';
		            if (params.data.matrixSamudyam =="Yes") { 
		            	alert("jjjj")
						return $('.samudyam-checkbox').prop('checked', true);
						
					}  else {
						return $('.samudyam-checkbox').prop('checked', false);
					} */
					
					
		    	 const isSamudyamChecked = params.data.matrixSamudyam === "Yes";
		    	    const checkboxHtml = '<input type="checkbox" id="samudyam_check_' + params.data.slno + '" class="samudyam-checkbox" ' + (isSamudyamChecked ? 'checked' : '') + ' onclick="boxEnableSamudyam(' + params.data.slno + ')"/>';
		    	    return '<div>' + checkboxHtml + '</div>';
		        
		    }
		}];

	
	

	
var scopeMatrixOptions = {
	columnDefs : scopeMatrixDefs,
	rowSelection : 'multiple',
	groupSelectsChildren : true,
	suppressRowClickSelection : true,
	suppressAggFuncInHeader : true,
	defaultColDef : {
		sortable : true,
		filter : true,
		resizable : true,
		width : 251,
		height : 10
	},
	onGridReady: headerNameChange,
	onSelectionChanged : rowSelectItemMatrix,
	getRowNodeId : function(data) {
		
		return data.scopeMatrixSlNo;
	}
};
	
function headerNameChange(){
	var gridApi = scopeMatrixOptions.api;
	var column = scopeMatrixOptions.api.getColumnDef('matrixSamudyam');
    column.headerName = 'hello';
    gridApi.refreshHeader();
    
}	
const columnDefsa = [
	{
	    headerCheckboxSelection: true,
	    headerCheckboxSelectionFilteredOnly: true,
	    checkboxSelection: true,
	    width: 10,
	    sortable: false,
	    filter: false,
	    resizable: true

	},
	{
		  headerName: "Address Id",
		    field: "addressId",
		    cellRenderer: function(params) {
		    return '<a onclick=openDetails("' + params.data.addressId
			+ ',' + '0' + '") href="javascript:void(0)">'
			+ params.data.addressId + '</a>'; 
		    }
		    /* cellRenderer: function(params) {
		        return '<a onclick=("' + params.data.addressId + '","'+params.data.customerId+'") href="javascript:void(0)">' + params.data.addressId + '</a>';
		    } */
	},

	{
		headerName: "Country",
	    field: "country",
	    width: 200,
	    hide:true,
	}, {
		headerName: "Country",
	    field: "countryName",
	    width: 200,
	}, {
		headerName: "State",
	    field: "state",
	    width: 200,
	    hide:true,
	    
	}, {
		headerName: "State",
	    field: "stateName",
	    width: 200,
	}, {
		headerName: "City",
	    field: "city",
	    width: 200,
	}, {
		headerName: "Street",
	    field: "street1",
	    width: 200,
	}, {
		headerName: "Street",
	    field: "street2",
	    width: 200,
	}, {
		headerName: "Zip Code",
	    field: "zipCode",
	    width: 200,
	}, {
		headerName: "Phone",
	    field: "phone",
	    width: 200,
	}, {
		headerName : "Fax",
		field : "fax",
		cellStyle : {
			textAlign : 'left'
		}
	}, {
		headerName: "Default Address",
	    field: "defaultStatus",
	    width: 200,
	    cellStyle : {
			textAlign : 'center'
		},
		cellRenderer : function(params) {
			if (params.data.defaultStatus =="Yes") { 
				return '<div style="color:#0642f5">'+params.data.defaultStatus+'</div>';
			}else{
				return '<div style="color:#a9a9a9">'+params.data.defaultStatus+'</div>';
			}
		}
	} ];

const gridSAOptions = {
columnDefs : columnDefsa,
defaultColDef : {
	sortable : true,
	filter : true,
	resizable : true,
	width : 187,
	height : 10
},
rowSelection : 'multiple',
suppressRowClickSelection : true,
onSelectionChanged : rowSelectAddress,
/* getRowNodeId : function(data) {
	return data.customerId;
} */
};
	
function rowSelectAddress(){
	var selectedRows =gridSAOptions.api.getSelectedRows();

	var rowCount = 0;
	selectedRows.forEach(function(i) {
		rowCount = rowCount + 1;
	});
	if (rowCount > 0) {
	        $('#deleteAddressDtls').attr("disabled", false);
	        $('#newAddress').attr("disabled", true);
			
	}else{
		    $('#deleteAddressDtls').attr("disabled", true);
		    $('#newAddress').attr("disabled", false);
		
	}
}

var columnDefsProduct = [{
    headerCheckboxSelection: true,
    headerCheckboxSelectionFilteredOnly: true,
    checkboxSelection: true,
    width: 10,
    sortable: false,
    filter: false,
    resizable: true,
    pinned: 'left',
},
{
    headerName: "Product Id",
    field: "productId",
    pinned: 'left',
    cellRenderer: function(params) {
        return '<a onclick=openDetailss("' + params.data.productId + '") href="javascript:void(0)">' + params.data.productId + '</a>';
    }
},
{
	 headerName: "Product Name",
	    field: "productName",
	    width: 200,
	    pinned: 'left',
},
{
	 headerName: "Brand",
	    field: "brand",
	    cellStyle: {textAlign: 'center'}
   
},
{
   
    headerName: "Category",
    field: "productCategoryText",
    width: 250,
},
{
    headerName: "Mode",
    field: "mode",
    cellStyle: {textAlign: 'center'}
},
{
	headerName: "Status",
    field: "productStatus",
    cellStyle: {textAlign: 'center'}
},
{
  
    headerName: "Created By",
    field: "createdBy",
    cellStyle: {textAlign: 'center'}
},
{
    headerName: "Create Date",
    field: "createdDate",
    cellStyle: {textAlign: 'center'}
}];
var gridOptionsProduct = {
		columnDefs: columnDefsProduct,
		rowSelection: 'multiple',
		defaultColDef: {
			sortable: true,
		    filter: true,
		    resizable: true,
		    width: 149,
		    height: 10
		},
		rowSelection: 'multiple',
		suppressRowClickSelection : true,
		onSelectionChanged: onSelectionChangedproduct
};

function onSelectionChangedproduct(){
	var selectedRows =gridOptionsProduct.api.getSelectedRows();

	var rowCount = 0;
	selectedRows.forEach(function(i) {
		rowCount = rowCount + 1;
	});
	if (rowCount > 0) {
	        $('#deleteproduct').attr("disabled", false);
	        $('#newBtn').attr("disabled", true);
			
	}else{
		    $('#deleteproduct').attr("disabled", true);
		    $('#newBtn').attr("disabled", false);
		
	}
}

function newAddress() {
	
	$("#shippingId").val("");
	$("#country1").val("");
	$("#states1").val("");
	$("#city1").val("");
	$("#street11").val("");
	$("#street21").val("");
	$("#zipCode1").val("");
	$("#phone1").val("");
	$("#fax1").val("");
	 $("#addStatus").prop("checked",false);
	document.getElementById("mySidenavAddress").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;bottom:467px;";

	document.getElementById("mainSa").style.width = "70%";
}

function closeNavAddress() {
	document.getElementById("mySidenavAddress").style.width = "0";
	document.getElementById("mainSa").style.width = "100%";
}
	function add() {
		getScopeMatrix();
		$('#newItem2').attr("disabled", true);
		$('#delete2').attr("disabled", true);
		$('#delete1').attr("disabled", true);
		$('.formValidation').remove();
		$("#documentDetails").show();
		$('#searchRowDiv').hide();
		$('#reqAppvBtn').hide();
		$('#revision').hide();
		$('#purchaseOrder').hide();
		$('#delete').hide();
		$('#delete1').show();
		$('#newItem').show();
		$('#hideTbl').hide();
		$("#add").hide();
		$("#myGrid").hide();
		$("#save").show();
		$("#saveAsDraft").show();
		$("#retriveDraft").show();
		$("#Cancel").show();
		$("#addData").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#copyQuotation").hide();
	    $("#addre").hide();
		$("#quotationReference").html("");
		$("#version").html("");
		$("#quotationId").val("");
		$("#shippingHiddenId").val("");
		$("#qutName").val("");
		$("#quotationDate").val("");
		$("#custId").val("");
		$("#custName").val("");
		$("#reference").val("");
		$("#salesPerson").val("");
		$("#dealName").val("");
		$("#qutValidDate").val("");
		$("#toDateCalendar").val("");
		$("#qutDescription").val("");
		$("#qutActive").val("");
		$("#qutCreatedBy").val("");
		$("#qutUpdatedOn").val("");
		$("#subTotal").val("");
		$("#grandTotal").val("");
		$("#slNo").val("");
		$("#sku").val("");
		$("#itemId").val("");
		$("#itemName").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		var subjectQuot="Quotation for GFRC"
		$("#subject").val(subjectQuot);
		// $(dropdown).empty();
		//$("#quotType").val("");
		$("#custName").val("");
		$("#customerAddress").val("");
		$("#qutNo").val("");
		itemOptions.api.setRowData();
		var customerNoteQuot="<p>Dear Sir,</p>\n\n<p>Greetings from Samudyam Projects!</p>\n\n<p>Subsequent to our discussions we are pleased to submit our Techno commercial quotation for <br><br> undertaking of GFRC, for your project site as per below mentioned BOQ specifications &amp; Terms.</p>\n\n<p>Hope you will find the given proposal is in line with your requirements.</p>\n\n<p>Should you have any queries, please feel free to contact the undersigned @ 7682832731 at any times.</p>\n\n<p>Thanking you and assuring you of our best services at all times.</p>"
		var termConditionQuot="<ol>\n\t<li>GST @ 18% will be charged extra on given rates. Any changes in taxes levied by Government <br><br>at the time of delivery of material will be applicable as actual.</li>\n\t<br><li>Until unless specified the material colour shall be white.</li>\n\t<br><li>Once approved, design and quantity cannot be reduced/ cancelled as it is a customized material.</li>\n\t<br><li><strong>Payment </strong>\n\t<ul>\n\t\t<li>\n\t\t<p>50% advance along with confirm P.O BALANCE</p>\n\t\t</li>\n\t\t<li>\n\t\t<p>50% against P.I. before dispatch</p>\n\t\t</li>\n\t</ul>\n\t</li>\n\t<li><strong>Delivery </strong>Within 6-8 weeks on receipt of confirms P.O and Advance.</li>\n\t<br><li>These rates are valid for 10 days from the submission of this proposal/Quotations.</li>\n\t<br><li><strong>Force Majeure &amp; Escalation Clause is applicable.</strong></li>\n</ol>\n"
		
		CKEDITOR.instances.qutDescription.setData(customerNoteQuot);
		CKEDITOR.instances.termCondition.setData(termConditionQuot);
		var date = (new Date()).toISOString().split('T')[0];
		var newDate = changeDateFormat(date);
		$("#quotationDate").val(newDate);
 
		$.ajax({
			type : "GET",
			url : "view-quotation-get-insertedid",
					success : function(response) {
						if (response.message == "success") {
						$("#quotationId").val(response.body[0].key);
						}
					},
					error : function(e) { 
					}
				}); 
				
		$("#doctbodyData").empty();
		var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
				+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
				+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
				+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
				+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
				+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
				+ '</tr>';
		$("#doctbodyData").append(tbl);
 
	}

	function Cancel() {
		
		//getScopeMatrix()
		closeNav();
		$("#reqTable").show();
		$(".btn-hs").show();
		$("#myGrid").show();
		$("#addData").hide();
		agGrid.simpleHttpRequest({
			url : "view-quotation-through-ajax"
		}).then(function(data) {
			var len = data.length;
			$('#totalCandidate').find('span').html(len);
			gridOptions.api.setRowData(data);
		});
		$("#shippingHiddenId").val('');
		$("#quotationId").val('');
		$("#quotationReference").html('');
		$("#qutName").val('');
		$("#custId").val('');
		$("#custName").val('');
		$("#suggesstion-box1_").hide();
		$("#custGSTNo").val('');
		$("#qutValidDate").val('');
		$("#qutDescription").val('');
		$("#qutActive").val('');
		$("#qutUpdatedOn").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#subject").val("");
		//$("#quotType").val("");
		$("#custName").val("");
		$("#customerAddress").val("");
		CKEDITOR.instances.qutDescription.setData("");
		CKEDITOR.instances.termCondition.setData("");
		$("#sku").val('');
		$("#itemIgst").val('');
		$("#itemCgst").val('');
		$("#itemSgst").val('');
		$("#salespersonName").val('');
		$("#salesPersonId").val('');
		$("#dealName").val('');
		$("#terms").val('');
		$("#suggesstion-box2_").hide();
		
		$("#searchRowDiv").show();
		$("#purchaseOrder").show();
		$("#reqAppvBtn").show();
		$("#delete").show();
		$('.formValidation').remove();
		$("#add").show();
		$("#myGrid").show();
		$("#save").hide();
		$("#saveAsDraft").show();
		$("#retriveDraft").show();
		$("#Cancel").hide();
		$("#addData").hide();
		$('#hideTbl').show();
		$("#totalCandidate").show();
		$("#dwnld").show();
		$("#upld").show();
		$("#revision").show();
		$("#copyQuotation").show();
		$("#documentDetails").hide();
		itemOptions.api.setRowData();
		$("#doctbodyData").empty();
		var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
			+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
			+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
			+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
			+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
			+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="custom-file-upload"></div> <input type="hidden" id="editId_0"> </td>'
			+ '</tr>';
	$("#doctbodyData").append(tbl);
		$('#delete').attr("disabled", true);
		$('#reqAppvBtn').attr("disabled", true);
		/* $('#revision').attr("disabled", true); */
		$('#copyQuotation').attr("disabled", true);
		$('#purchaseOrder').attr("disabled", true);
		$('#add').attr("disabled", false);
	}

	function openNav() {
		
		$("#sku").val("");
		$("#itemName").val("");
		$("#quantity").val("");
		$("#unitPrice").val("");
		$("#lineTotal").val("");
		$("#sizeInMM").val(null);
		$("#unit").val(null);
		$("#quantity").val(null);
		$("#thicknessInMM").val("");
		$("#itemDesc").val("");
		$("#hsnCode").val("");

		$("#editProduct").val("");
		//$("#buttonDiv").hide();
		var custValid = true;
		if ($("#custName").val() == null || $("#custName").val() == "") {
			custValid = false;
		}
		$("#save").hide();
		if (custValid) {
			document.getElementById("mySidenav").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto; top:880px;";
			document.getElementById("accordionExample").style.width = "70%";
		} else {
			$("#messageParagraph").text("First Choose Customer Name");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
			$("#save").show();
		}
		
		
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
		document.getElementById("accordionExample").style.width = "100%";
		$('.formValidation').remove();
		$("#suggesstion-box_").hide();
		$("#sku").val('');
		$("#itemId").val('');
		$("#itemName").val('');
		$("#quantity").val('');
		$("#unitPrice").val('');
		$("#discount").val('');
		$("#gstRate").val('');
		$("#lineTotal").val('');
		$("#sizeInMM").val('');
		$("#unit").val('');
		$("#quantity").val('');
		$("#editProduct").val(null);
		
		$("#save").show();
	}
	

	function openNav2() {
		$("#samudyam").val("");
		$("#client").val("");
		
		var custValid = true;
		if ($("#custName").val() == null || $("#custName").val() == "") {
			custValid = false;
		}
		if (custValid) {
			document.getElementById("mySidenav1").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:950px;";
			document.getElementById("accordionExample").style.width = "75%";
		} else {
			$("#messageParagraph").text("First Choose Customer Name");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
		}
			

	}

	function closeNav2() {
		document.getElementById("mySidenav1").style.width = "0";
		document.getElementById("accordionExample").style.width = "100%";
		$('.formValidation').remove();
		$("#samudyam").val("");
		$("#client").val("");
		$("#editProduct").val(null);

	}

	
	function qoutationPdfDownload(quotationId) {

		var organization = $("#sessionOrganization").val();
		var orgDivision = $("#sessionOrgDivision").val();
		var userId = $("#sessionId").val();
		window.open("/sales/view-quotation-pdf-downloads?quotationId="
				+ window.btoa(quotationId) + "&organization="
				+ window.btoa(organization) + "&orgDivision="
				+ window.btoa(orgDivision) + "&userId="
				+ window.btoa(userId), '_blank');  
	}
	
	/* //quotation item  table add */

	function saveTableData() {
		var editProduct = $("#editProduct").val();
		var item = {};
		var data = 1;
		var validation = true;
		
		 if (!validationUpdated("Stock Keeping Unit Required", 'sku'))
			 validation = false; 
		 if (!validationUpdated("Item Name Required", 'itemName'))
			 validation = false; 
		 if (!validationUpdated("Quantity Required", 'quantity'))
			 validation = false; 
		 if (!validationUpdated("Price Required", 'unitPrice'))
			 validation = false; 
		 if (!validationUpdated("Unit Measurement Required", 'unit'))
			 validation = false; 
		 if (!validationUpdated("Total Amount Required", 'lineTotal'))
			 validation = false; 
	if (validation) {
		item.slNo = data;
			itemOptions.api.forEachNode(function(rowNode, index) {
				if (!editProduct) {
					data = data + 1;
					item.slNo = data;
				}
				else{
					item.slNo = editProduct;
				}
				
			});
		
			item.itemId = $('#itemId').val();
			item.sku = $('#sku').val();
			item.hsnCode = $('#hsnCode').val();
			item.itemName = $('#itemName').val();
			item.quantity = $('#quantity').val();
			item.unitPrice = $('#unitPrice').val();
			item.sizeInMM = $('#sizeInMM').val();
			item.unit = $('#unit').val();
			item.unitName = $("#unit option:selected").text();
			item.gstRate = $('#gstRate').val();
			item.lineTotal = $('#lineTotal').val();
			item.thicknessInMM = $('#thicknessInMM').val();
			item.itemDesc = $('#itemDesc').val();
			var taxType = $("#taxType").val();
			/* if (taxType == 'true') {
				item.itemCgst = (item.lineTotal * item.gstRate) / 200;
				item.itemSgst = (item.lineTotal * item.gstRate) / 200;
				item.itemIgst = 0;
				item.taxableAmt = parseFloat(item.lineTotal) + item.itemCgst
						+ item.itemSgst;
			} else {
				item.itemCgst = 0;
				item.itemSgst = 0;
				item.itemIgst = (item.lineTotal * item.gstRate) / 100;
				item.taxableAmt = parseFloat(item.lineTotal) + item.itemIgst;
			}
			 */
			 
			 if (taxType == 'true') {
					
					/* item.itemCgst = (item.lineTotal * item.gstRate) / 200;
					item.itemSgst = (item.lineTotal * item.gstRate) / 200;
					item.itemIgst = 0;
					item.taxableAmt = parseFloat(item.lineTotal) + item.itemCgst
							+ item.itemSgst; */
					
				
					var itemSgstFix = (parseFloat(item.lineTotal) * parseFloat(item.gstRate)) / 200;
					var itemCgstFix = (parseFloat(item.lineTotal) * parseFloat(item.gstRate)) / 200;
							
					item.itemCgst =  parseFloat(itemCgstFix).toFixed(2);
					item.itemSgst = parseFloat(itemSgstFix).toFixed(2);
					item.itemIgst = 0;
					item.taxableAmt = (parseFloat(item.lineTotal) + parseFloat(item.itemCgst)
							+ parseFloat(item.itemSgst)).toFixed(2);
					 
					
				} else {
					item.itemCgst = 0;
					item.itemSgst = 0;
					item.itemIgst = (item.lineTotal * item.gstRate) / 100;
					item.taxableAmt = (parseFloat(item.lineTotal) + parseFloat(item.itemIgst)).toFixed(2);
				}
			//item.slNo = data;
			var quot = [];

			if (editProduct) {
				var rowNode = itemOptions.api.getRowNode(editProduct);
				rowNode.setData(item);
			} else {
				itemOptions.api.forEachNode(function(rowNode, index) {
					quot.push(rowNode.data);
				});
				quot.push(item)
				itemOptions.api.setRowData(quot);
				//calculation GST,IGST,SGST,CGST,SUBTOTAL,GRANDTOTAL
				var sum = 0.0;
				var gstRate = 0.0;
				var qSGST = 0.0;
				var qCGST = 0.0;
				var qIGST = 0.0;
				var itemIgst = 0.0;
				var itemCgst = 0.0;
				var itemSgst = 0.0;
				var len = quot.length;
				for (var i = 0; i < len; i++) {
					sum = sum + parseFloat(quot[i].lineTotal);
					if (taxType == 'false') {
						quot[i].itemIgst = quot[i].lineTotal * quot[i].gstRate
								/ 100;
						qIGST = qIGST + quot[i].itemIgst;
						grandTotal = sum + qIGST;
					} else {
						quot[i].itemCgst = quot[i].lineTotal * quot[i].gstRate
								/ 200;
						quot[i].itemSgst = quot[i].lineTotal * quot[i].gstRate
								/ 200;

						qCGST = qCGST + quot[i].itemCgst;
						qSGST = qSGST + quot[i].itemSgst;
						grandTotal = sum + qCGST + qSGST;
					}
				}
				$("#subTotal").val(sum);
				$("#qIGST").val(qIGST);
				$("#qCGST").val(qCGST);
				$("#qSGST").val(qSGST);
				$("#grandTotal").val(grandTotal)

			}
			closeNav();
			$("#sku").val('');
			$("#itemId").val('');
			$("#itemName").val('');
			$("#quantity").val('');
			$("#unitPrice").val('');
			$("#sizeInMM").val('');
			$("#unit").val('');
			$("#lineTotal").val('');
			$("#hsnCode").val('');
			$("#thicknessInMM").val('');
			$("#itemDesc").val('');

			$("#editProduct").val(null);
		}

	}
	function saveTableDataforScope() {
		
		
		var rowEdit = $("#rowEdit").val();
		var item = {};
		var data = 1;
		var validation = true;
		
		if (validation) {
			item.scopeMatrixSlNo = $("#rowEdit").val();
			item.scopeMatrixDesc = $("#scopeMatrixDesc").val();
			item.matrixSamudyam = $("input[type='radio'][name='matrixSamudyam']:checked").val()
			item.matrixClient = $("input[type='radio'][name='matrixClient']:checked").val()
			item.scopeMatrixRemarks = $("#scopeMatrixRemarks").val();
			var datas = [];
	
			if (rowEdit) {
			
				var rowNode = scopeMatrixOptions.api.getRowNode(rowEdit);
				rowNode.setData(item);
	
				closeNav2();
			} else{
				$('#mySidenav1').show();
			}
		}
	}
	
	
	/* //Quotation  table add */

	function save() {
		if (validProductData() && validFormData()) {
			var datas = [];
			var scopematrix = [];
			scopeMatrixOptions.api.forEachNode(function(rowNode, index) {
				console.log(rowNode.data)
				scopematrix.push(rowNode.data);
			});
			console.log(scopematrix);
			var imageValid = true;
			var uploadList = [];
			 var qutDescription = CKEDITOR.instances.qutDescription.getData();
			 var termCondition = CKEDITOR.instances.termCondition.getData();		
			$("#doctbodyData > tr").each(
					
					function() {
						var uFile = $(this).find(".document")[0].files[0];
						var fileName = $(this).find(".document").val();
						var data = [];
						var x = [];
						if (fileName != '' && fileName != 'undefined'
								&& fileName != null) {
							var lastIndex = fileName.lastIndexOf("\\");
							if (lastIndex >= 0) {
								fileName = fileName.substring(lastIndex + 1);
							}
							var reader = new FileReader();
							reader.readAsDataURL(uFile);

							reader.onload = function() {
								data = reader.result.split(",");
								x.push(data[1]);
							};
						} else {
							if ($("#quotationId").val()) {
								fileName = $(this).find(".uploadHidCls").val();
							} else {
								x = [];
							}

						}
						uploadData = {};
						uploadData['quotationId'] = $("#quotationId").val();
						uploadData['documnentName'] = $(this).find(".docNoclss").val();
						uploadData['documentFile'] = x;
						uploadData['fileName'] = fileName;
						uploadData['imageNameEdit'] = $(this).find(".uploadHidCls").val();
						if($(this).find(".docNoclss").val()!="" && $(this).find(".docNoclss").val()!='null' && fileName!="" && fileName!="null"){
							uploadList.push(uploadData);
							console.log(uploadData)
							
						}

					});
			setTimeout(function() {
			   if (itemOptions.api.getDisplayedRowCount() > 0 ) {

					itemOptions.api.forEachNode(function(rowNode, indrx) {
						
                    
						var obj = rowNode.data;
						obj.quotationId = $("#quotationId").val();
						obj.quotationNo = $("#qutNo").val();
						//obj.quotationNo = $("#qutNo").val();
						obj.version = $("#version").val();
						var version= $("#version").html();
		                    if( version=='' ||  version==null ){
		                    	 obj.version=1;
		                    }
		                    else {
		                    	obj.version= version;
		                    }
						obj.quotationDate = $("#quotationDate").val();
						obj.reference = $("#quotationReference").html();
						obj.qutValidDate = $("#qutValidDate").val();
						obj.custName = $("#custName").val();
						obj.custId = $("#custId").val();
						obj.subject= $("#subject").val();
						//obj.orderType= $("#orderType").val();
						obj.scopematrix = scopematrix;
						obj.qutDescription = qutDescription;
						obj.termCondition = termCondition;
						obj.documentList = uploadList;
						obj.subTotal = $("#subTotal").val();
						obj.grandTotal = $("#grandTotal").val();
						obj.qIGST = $('#qIGST').val();
						obj.qCGST = $('#qCGST').val();
						obj.qSGST = $('#qSGST').val();
						obj.quotType = $('#quotType').val();
						obj.shippingHiddenId = $('#shippingHiddenId').val();
						var tt = $('#taxType').val();
						if (tt == 'true') {
							obj.taxType = true;
						} else {
							obj.taxType = false;
						}
						console.log('Object',obj)
						datas.push(obj);
					});
					//return false
					saveAllQuotation(datas);
				}else{
					$("#messageParagraph").text(
					"Please Add Items Details");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
				}
			}, 1000)
		
		}
	}
	
	//Qutation Draft Save
	
	function saveAsDraft() {
		if (validProductData() && validFormData()) {
			var datas = [];
			var scopematrix = [];
			scopeMatrixOptions.api.forEachNode(function(rowNode, index) {
				scopematrix.push(rowNode.data);
			});
			var imageValid = true;
			var uploadList = [];
			 var qutDescription = CKEDITOR.instances.qutDescription.getData();
			 var termCondition = CKEDITOR.instances.termCondition.getData();		
			$("#doctbodyData > tr").each(
					
					function() {
						var uFile = $(this).find(".document")[0].files[0];
						var fileName = $(this).find(".document").val();
						var data = [];
						var x = [];
						if (fileName != '' && fileName != 'undefined'
								&& fileName != null) {
							var lastIndex = fileName.lastIndexOf("\\");
							if (lastIndex >= 0) {
								fileName = fileName.substring(lastIndex + 1);
							}
							var reader = new FileReader();
							reader.readAsDataURL(uFile);

							reader.onload = function() {
								data = reader.result.split(",");
								x.push(data[1]);
							};
						} else {
							if ($("#draftId").val()) {
								fileName = $(this).find(".uploadHidCls").val();
							} else {
								x = [];
							}

						}
						uploadData = {};
						uploadData['draftId'] = $("#draftId").val();
						uploadData['documnentName'] = $(this).find(".docNoclss").val();
						uploadData['documentFile'] = x;
						uploadData['fileName'] = fileName;
						uploadData['imageNameEdit'] = $(this).find(".uploadHidCls").val();
						if($(this).find(".docNoclss").val()!="" && $(this).find(".docNoclss").val()!='null' && fileName!="" && fileName!="null"){
							uploadList.push(uploadData);
							console.log(uploadData)
							
						}

					});
			setTimeout(function() {
			   if (itemOptions.api.getDisplayedRowCount() > 0 ) {

					itemOptions.api.forEachNode(function(rowNode, indrx) {
						
                    
						var obj = rowNode.data;
						obj.draftId = $("#draftId").val();
						//obj.quotationNo = $("#qutNo").val();
						obj.version = $("#version").val();
						var version= $("#version").html();
		                    if( version=='' ||  version==null ){
		                    	 obj.version=1;
		                    }
		                    else {
		                    	obj.version= version;
		                    }
						obj.quotationDate = $("#quotationDate").val();
						//obj.reference = $("#quotationReference").html();
						obj.qutValidDate = $("#qutValidDate").val();
						obj.custName = $("#custName").val();
						obj.custId = $("#custId").val();
						obj.subject= $("#subject").val();
						//obj.orderType= $("#orderType").val();
						obj.scopematrix = scopematrix;
						obj.qutDescription = qutDescription;
						obj.termCondition = termCondition;
						obj.documentList = uploadList;
						obj.subTotal = $("#subTotal").val();
						obj.grandTotal = $("#grandTotal").val();
						obj.qIGST = $('#qIGST').val();
						obj.qCGST = $('#qCGST').val();
						obj.qSGST = $('#qSGST').val();
						obj.quotType = $('#quotType').val();
						obj.shippingHiddenId = $('#shippingHiddenId').val();
						var tt = $('#taxType').val();
						if (tt == 'true') {
							obj.taxType = true;
						} else {
							obj.taxType = false;
						}
						console.log('Object',obj)
						datas.push(obj);
					});
					saveQuotationDraft(datas);
				}else{
					$("#messageParagraph").text(
					"Please Add Items Details");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
				}
			}, 1000)
		
		}
	}
	
	

	function deleteQuotation(){
		  $('.loader').show();
		var selectedRows = gridOptions.api.getSelectedRows();
				 var id=selectedRows[0].quotationId;
				$.ajax({
					type : "GET",
					url : "view-quotation-delete?id=" + id,
					async : false,
					success : function(response) {

						if (response.message == "Success") {
							  $('.loader').hide();
							$("#messageParagraph").text(
							"Data Deleted Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');

							agGrid.simpleHttpRequest({
								url : "view-quotation-through-ajax"
							}).then(function(data) {
								var len = data.length;
								$('#totalCandidate').find('span').html(len);
								gridOptions.api.setRowData(data);
							});
							//location.reload();
							
							
							$('#delete').attr("disabled", true);
							$('#reqAppvBtn').attr("disabled", true);
							$('#revision').attr("disabled", true);
							$('#add').attr("disabled", false);
							
							
						}

					},
					error : function(data) {
						  $('.loader').hide();
					}
				});
	}
	
	//saveTableDataSale()
	function saveAllQuotation(datas) {
		console.log(datas)
		$('.loader').show();
		//$("body").addClass("overlay");
		$
				.ajax({
					type : "POST",
					url : "view-quotation-add",
					contentType : "application/json",
					data : JSON.stringify(datas),
					success : function(response) {
						if (response.message == "Success") {
							//$('.loader').hide();
							//$("body").removeClass("overlay");
							$("#addData").hide();
							$("#myGrid").show();
							$("#searchRowDiv").show();
							$("#totalCandidate").show();
							$("#total").show();
							$("#btndiv").show();
						    $("#reqTable").show();
						    $("#add").show();
						    $("#dwnld").show();
						    $("#reqAppvBtn").show();
						    $("#revision").show();
						    $("#copyQuotation").show();
						    $("#purchaseOrder").show();
						    $("#delete").show();
						    $('#add').attr("disabled", false);
							$('#delete').attr("disabled", true);
							console.log(response.message)
							console.log('Data',JSON.stringify(datas))
							$('.loader').hide();
								agGrid.simpleHttpRequest({
									url : "view-quotation-through-ajax"
								}).then(function(data) {
									var len = data.length;
									$('#totalCandidate').find('span').html(len);
									gridOptions.api.setRowData(data);
								});
							$("#messageParagraph").text("Data Saved Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');

							$("#quotationId").val(response.body[0].quotationId);
						}else{
							$('.loader').hide();
							$("body").removeClass("overlay");
							$("#messageParagraph").text("Something went to wrong!");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
						}

					},
					error : function(datas) {
						console.log(datas)
						$('.loader').hide();
					}
				})

	}
	
	//Save Quotation Draft
	
		function saveQuotationDraft(datas) {
		console.log(datas)
		$('.loader').show();
		$("body").addClass("overlay");
		$
				.ajax({
					type : "POST",
					url : "view-quotation-draftdata",
					contentType : "application/json",
					data : JSON.stringify(datas),
					success : function(response) {
						if (response.message == "Success") {
							$('.loader').hide();
							$("body").removeClass("overlay");
							$("#addData").hide();
							$("#myGrid").show();
							$("#searchRowDiv").show();
							$("#totalCandidate").show();
							$("#total").show();
							$("#btndiv").show();
						    $("#reqTable").show();
						    $("#add").show();
						    $("#dwnld").show();
						    $("#reqAppvBtn").show();
						    $("#revision").show();
						    $("#copyQuotation").show();
						    $("#purchaseOrder").show();
						    $("#delete").show();
						    $('#add').attr("disabled", false);
							$('#delete').attr("disabled", true);
							console.log(response.message)
							console.log('Data',JSON.stringify(datas))
								agGrid.simpleHttpRequest({
									url : "view-quotation-through-ajax"
								}).then(function(data) {
									var len = data.length;
									$('#totalCandidate').find('span').html(len);
									gridOptions.api.setRowData(data);
								});
							$("#messageParagraph").text("Data Saved Successfully");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');

							$("#draftId").val(response.body[0].draftId);
						}else{
							$('.loader').hide();
							$("body").removeClass("overlay");
							$("#messageParagraph").text("Something went to wrong!");
							$("#msgOkModal").removeClass("btn3");
							$("#msgOkModal").addClass("btn1");
							$("#msgModal").modal('show');
						}

					},
					error : function(datas) {
						console.log(datas)
						$('.loader').hide();
					}
				})

	}

	function validFormData() {
		var allValid = true;
		if (!validationUpdated("Customer Name Required", 'custName'))
			allValid = false;
		if (!validationUpdated("Valid Up To Date Required", 'qutValidDate'))
			allValid = false;
		if (!validationUpdated("Subject Required", 'subject'))
			allValid = false;
		/* if (!validationUpdated("Order Type Required", 'orderType'))
			allValid = false; */
		return allValid;
	}

	function validProductData() {
		return true;
	}

	/* 
	Edit Quotation
	 */
	function editProduct(slNo) {
		
		var status=$("#approveStatus").val();
		if (status == "Approved" || status == "Revised") {
			return false;
		}
		var quotationId = $("#quotationReference").html();
		var rowNode = itemOptions.api.getRowNode(slNo);

		
		
		openNav();
		$("#editProduct").val(slNo);
		$("#sku").val(rowNode.data.sku);
		$("#itemId").val(rowNode.data.itemId);
		$("#itemName").val(rowNode.data.itemName);
		$("#quantity").val(rowNode.data.quantity);
		$("#sizeInMM").val(rowNode.data.sizeInMM);
		$("#unit").val(rowNode.data.unit);
		$("#unitPrice").val(rowNode.data.unitPrice);
		$("#lineTotal").val(rowNode.data.lineTotal);
		$("#gstRate").val(rowNode.data.gstRate);
		$("#itemIgst").val(rowNode.data.itemIgst);
		$("#itemCgst").val(rowNode.data.itemCgst);
		$("#itemSgst").val(rowNode.data.itemSgst);
		$("#thicknessInMM").val(rowNode.data.thicknessInMM);
		$("#itemDesc").val(rowNode.data.itemDesc);
		$("#hsnCode").val(rowNode.data.hsnCode);

	}
	
	function editProductForMatrix(slNo) {
		var quotationId = $("#quotationId").html();
		var rowNode = scopeMatrixOptions.api.getRowNode(slNo);
		openNav2();
		$("#rowEdit").val(slNo);
		$("#scopeMatrixDesc").val(rowNode.data.scopeMatrixDesc);
		$("#scopeMatrixRemarks").val(rowNode.data.scopeMatrixRemarks);
	
		
		if(rowNode.data.matrixClient=='Yes'){
			$("#Yes1").prop('checked', true);
		}else if (rowNode.data.matrixClient=='No'){
			$("#No1").prop('checked', true);
		}
		else{
			$("#matrixClient").val(rowNode.data.matrixClient);
		}
		
		if(rowNode.data.matrixSamudyam=='Yes'){
			$("#Yes").prop('checked', true);
		}else if (rowNode.data.matrixSamudyam=='No'){
			$("#No").prop('checked', true);
		}
		else{
			$("#matrixSamudyam").val(rowNode.data.matrixSamudyam);
		}
	}
	
	
	
	/* function hideMsgModal(){
		location.reload();
	} */
	function editQuotation(id) {
		var data = id.split(",");
		var quotationId= data[0];
		var referenceId = data[1];
		var approveStatus = data[2];
		$("#approveStatus").val(approveStatus);

		Cancel();
		if (approveStatus == "Approved" || approveStatus == "Revised") {
			
			$("#save").hide();
			$("#delete1").hide();
			$("#yesButton").hide();
			$("#noButton").hide();
			$("#addNewAdd1").hide();
			$("#addNewAdd").hide();
			

		} else {
			$("#save").show();
			$("#delete1").show();
			$("#yesButton").show();
			$("#noButton").show();
			$("#addNewAdd1").show();
			$("#addNewAdd").show();
			
		}
		$('#delete1').attr("disabled", true);
		$("#searchRowDiv").hide();
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#addData").show();
		$("#add").hide();
		
		$("#Cancel").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
		$("#retriveDraft").hide();
		$("#saveAsDraft").hide();
		$("#documentDetails").show();
		
		 $('.loader').show();
		agGrid.simpleHttpRequest({
			url : "view-quotation-edit-new?id="+ quotationId,
		}).then(
				function(data) {
					 $('.loader').hide();
					console.log(JSON.stringify(data));
					console.log('scopeMatrix========>>>>'+JSON.stringify(data[0].scopematrix));
					scopeMatrixOptions.api.setRowData(data[0].scopematrix);
					
					itemOptions.api.setRowData(data);
					$("#quotationReference").html(data[0].reference);
					$("#quotationId").val(data[0].quotationId);
				    $("#qutNo").val(data[0].quotationId);
				
				     $("#version").html(data[0].version);
				
					$("#quotationDate").val(data[0].quotationDate);
					$("#qutValidDate").val(data[0].qutValidDate);
					$("#subject").val(data[0].subject);
					//$("#orderType").val(data[0].orderType);
					$("#custName").val(data[0].custName);
					$("#custId").val(data[0].custId);
					$("#grandTotal").val(data[0].grandTotal);
					$("#qSGST").val(data[0].qSGST);
					$("#qCGST").val(data[0].qCGST);
					$("#subTotal").val(data[0].subTotal);
					$("#qIGST").val(data[0].qIGST);
					$("#taxType").val(data[0].taxType);
					$("#quotType").val(data[0].quotType);
					$("#shippingHiddenId").val(data[0].shippingHiddenId);
					
					if(data[0].quotType=="QTM0001"){
						$("#main_content1").hide();
					}else{
						$("#main_content1").show();
					}
					//getScopeMatrix(data[0].quotType);
					getAddressDetails(data[0].custId,data[0].shippingHiddenId);
					$("#version").html(data[0].version);
					CKEDITOR.instances['qutDescription'].setData(data[0].qutDescription);
					CKEDITOR.instances['termCondition'].setData(data[0].termCondition);
					
					//var lastVersion=(data[0].lastVersion);
					//var version=(data[0].version);
					
			if( approveStatus=='Approved' || approveStatus == "Revised")	{
				$("#save").hide();
				$("#newItem").hide();
				$("#saveTableData1").hide();
				$("#saveAttachmentBtn").hide();
			}	else{
				$("#save").show();
				$("#newItem").show();
				$("#saveTableData1").show();
				$("#saveAttachmentBtn").show();
			}
			
			
					$("#doctbodyData").empty();

					console.log(JSON.stringify(data));
					console.log('documentList========>>>>'+JSON.stringify(data[0].documentList));
					if (data[0].documentList != null && data[0].documentList != "") {
						
						for (var i = 0; i < data[0].documentList.length; i++) {
							
							console.log('in for loop documentList========>>>>'+JSON.stringify(data[0].documentList[i].documnentName));
						
							

							var tbl = '<tr>'
									+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
									+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
									+ '<td><div class="form-group"> <input type="text" value="'+data[0].documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
									+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
									+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
									+ i
									+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
									+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+data[0].documentList[i].fileName+'" class="uploadHidCls">'
									+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
									+ data[0].documentList[i].action
									+ '</div></div>'
									+ '<div id="imageName_'+i+'" class="imageName">'
									+ data[0].documentList[i].fileName
									+ '</div>'
									+ '<input type="hidden" id="editId_'+i+'" value="'+ data[0].documentList[i].vendorRfqId+'">'
									+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
									+ '</tr>';

							$("#doctbodyData").append(tbl);
						}
					} else {
						var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
								+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
								+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
								+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
								+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
								+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
								+ '</tr>';
						$("#doctbodyData").append(tbl);
					}


				});

	}
	
	

	function getEditTaxType(search) {

		$.ajax({
			type : "POST",
			url : "view-quotation-get-customer-list",
			dataType : 'json',
			contentType : 'application/json',
			data : search,
			success : function(response) {
				if (response.message == "success") {
					console.log("response data" + response.body[0].taxType)
					$("#taxType").val(response.body[0].taxType);
					hideShowS();
				}
			},
			error : function(data) {
				console.log(data);
			}
		})
	}

	function approve() {
		$('#approveQuot').modal('show');
	}
	function cancelApproveModalBtn() {

		
		$('#approveQuot').modal('hide');
	}
	

	
	function approveOnclick() {
		
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		var reference = '';
		var sub = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
				reference += ',';
			}
			selectedRowsString += selectedRow.quotationId;
			reference += selectedRow.reference;
			sub += selectedRow.subject;
		});
		
		var quotationId = selectedRowsString;
		var organization = $("#sessionOrganization").val();
		var orgDivision = $("#sessionOrgDivision").val();
		var url="https://samudyam.nerp.in/sales/view-quotation-pdf-downloads?quotationId="+ window.btoa(quotationId) + "&organization="+ window.btoa(organization) + "&orgDivision="+ window.btoa(orgDivision); 
		var approveStatus = 1;
		$('#approveQuot').modal('show');
		$('.loader').show();
		
	$.ajax({
		type : "GET",
		url : "view-quotation-approve-th-ajax?approveStatus=" + approveStatus + "&quotationId=" + quotationId + "&reference=" + reference+"&url="+window.btoa(url)+"&sub="+sub,
		async : false,
		success : function(response) {
			if (response.message == "Success") {
				$('.loader').hide();
				
				$('#approveQuot').modal('hide');
				$('#reqAppvBtn').attr("disabled", true);
				$('#revision').attr("disabled", true);
				$('#delete').attr("disabled", true);
				$('#copyQuotation').attr("disabled", true);
				$('#add').attr("disabled", false);
				agGrid.simpleHttpRequest({
					url : 'view-quotation-through-ajax'
				}).then(function(data) {
					var len = data.length;
					$('#totalReq').find('span').html(len);
					gridOptions.api.setRowData(data);
				});
				$("#messageParagraph").text("Quotation Approved Successfully");
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
			}else{
				$('.loader').hide();
				$('#approveQuot').modal('show');
			}
			
		},
		error : function(data) {
		}
	});
}
	/* 
	Delete quotation
	 */
	/* function deleteQuotation() {

		$('#deleteQuot').modal('show');
	} */
	function deleteItem() {

		$('#deleteProduct').modal('show');
	}

	function cancelModalBtn() {
		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteQuot').modal('hide');
		$('#deleteProduct').modal('hide');
	}

	function cancelModalProductBtn() {
		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteProduct').modal('hide');
	}
 
 function rowSelect() {
		var selectedRows = gridOptions.api.getSelectedRows();
		 var selectedNodes = gridOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			$('#add').attr("disabled", true);
			$('#copyQuotation').attr("disabled", false);
			
			 if (selectedData.map(node => node.approveStatus)!="Pending"){
		        	$('#reqAppvBtn').attr('disabled', true);
					$('#delete').attr("disabled", true);
					$('#revision').attr("disabled", true);
					
					 if (selectedData.map(node => node.poNo)!="" && selectedData.map(node => node.poNo)!="null" && selectedData.map(node => node.poNo)!=null){
						 $('#purchaseOrder').attr('disabled', true);
						 $('#revision').attr("disabled", true);
					 } else if (selectedData.map(node => node.approveStatus)=="Revised"){
						 
							$('#purchaseOrder').attr('disabled', true);
							$('#revision').attr("disabled", false);
					 }else{					
						 $('#purchaseOrder').attr('disabled', false);
						 $('#revision').attr("disabled", false);
					 }
					
			
				 
			 } else {
				  $('#reqAppvBtn').attr('disabled', false);
					$('#purchaseOrder').attr('disabled', true);
					$('#delete').attr("disabled", false);
					$('#revision').attr("disabled", true);
		        }
		
			 
			} else {
				 
			$('#add').attr("disabled", false);
			$('#delete').attr("disabled", true);
			$('#purchaseOrder').attr("disabled", true);
			$('#reqAppvBtn').attr("disabled", true);
			$('#revision').attr("disabled", true);
			$('#copyQuotation').attr("disabled", true);
		}
	} 

	
	
 function rowSelectDraft() {
		var selectedRows = gridDraftOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});

		if (rowCount > 0) {
			$('#deleteDraft').attr("disabled", false);
			
		} else {
			$('#deleteDraft').attr("disabled", true);
			
		}
	}
	
	
	
	function closeModal1() {
		$("#myModal").modal('hide');
		
	}
	function rowSelectItem() {
		var selectedRows = itemOptions.api.getSelectedRows();
		
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
			$('#delete1').attr("disabled", false);
			$('#newItem').attr("disabled", true);
		} else {
			$('#newItem').attr("disabled", false);
			$('#delete1').attr("disabled", true);
		}
	}
	 function rowSelectItemMatrix() {
		var selectedRows = scopeMatrixOptions.api.getSelectedRows();
		
		
		var rowCount = 0;
		selectedRows.forEach(function(selectedRow, index) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
			$('#yesButton').attr("disabled", false);
			$('#noButton').attr("disabled", false);
			
		} else {
			$('#yesButton').attr("disabled", true);
			$('#noButton').attr("disabled", true);
		}
	}
	 
	 
	/*  $(document).on('click', '.client-checkbox', function() {
		    const rowIndex = $(this).data('rowindex');
		    const selectedRow = scopeMatrixOptions.api.getRowNode(rowIndex);
		    console.log("Client Checkbox Clicked:", selectedRow.data);
		});

		$(document).on('click', '.samudyam-checkbox', function() {
		    const rowIndex = $(this).data('slno');
		    console.log(rowIndex);
		    const selectedRow = scopeMatrixOptions.api.getRowNode(rowIndex);
		    console.log(selectedRow)
		    console.log("Samudyam Checkbox Clicked:", selectedRow.data);
		}); */

	 function boxEnableSamudyam(slno){
			
		    var rowIndex = parseInt(slno) - 1;
		    var selectedRow = scopeMatrixOptions.api.getDisplayedRowAtIndex(rowIndex);
		    var item = selectedRow.data;
		    if($("#samudyam_check_"+slno).is(":checked")){
		    	//$("#client_check_"+slno).attr("disabled", true);
		    	$("#client_check_"+slno).prop('checked', false);
		    	item.matrixSamudyam = 'Yes';
		        item.matrixClient = 'No';
		    }else {
		    	$("#client_check_"+slno).prop('checked', false);
		    	item.matrixSamudyam = 'No';
		        item.matrixClient = 'No';
		    }

		    /* if (selectedRow) {
		        console.log("Selected Row Data:", selectedRow.data);
		        item.matrixSamudyam = 'Yes';
		        item.matrixClient = 'No';
		    } else {
		        console.log("No row found for serial number:", slno);
		        item.matrixClient = '';
		        item.matrixSamudyam = '';
		    } */
	}
		
	
		
		function boxEnableClient(slno){
			
		    var rowIndex = parseInt(slno) - 1;
		    var selectedRow = scopeMatrixOptions.api.getDisplayedRowAtIndex(rowIndex);
		    var item = selectedRow.data;
		    if($("#client_check_"+slno).is(":checked")){
		    	//$("#samudyam_check_"+slno).is(":checked");
		    	//$("#samudyam_check_"+slno).attr("disabled", true);
		    	$("#samudyam_check_"+slno).prop('checked', false);
		    	item.matrixSamudyam = 'No';
		        item.matrixClient = 'Yes';
		    }else {
		    	$("#samudyam_check_"+slno).prop('checked', false);
		    	item.matrixSamudyam = 'No';
		        item.matrixClient = 'No';
		    }

		    /* if (selectedRow) {
		        console.log("Selected Row Data:", selectedRow.data);
		        item.matrixClient = 'Yes';
		        item.matrixSamudyam = 'No';
		    } else {
		        console.log("No row found for serial number:", slno);
		        item.matrixClient = '';
		        item.matrixSamudyam = '';
		    } */
	}
	
	/* function yesMatrix() {
		var selectedRows = scopeMatrixOptions.api.getSelectedRows();

		if (selectedRows != null) {
			var datas = [];
			scopeMatrixOptions.api.forEachNode(function(rowNode, index) {
				var item = rowNode.data;
				selectedRows.forEach(function(selectedRow, index) {
					if (item.scopeMatrixSlNo === selectedRow.scopeMatrixSlNo) {
						item.matrixSamudyam = 'Yes';
						item.matrixClient = 'No';
					}
				});
				datas.push(item);
			});
			scopeMatrixOptions.api.setRowData(datas);
			$('#noButton').attr("disabled", true);
			$('#yesButton').attr("disabled", true);
		}
	}

	
	function noMatrix() {
		var selectedRows = scopeMatrixOptions.api.getSelectedRows();

		if (selectedRows != null) {
			var datas = [];
			scopeMatrixOptions.api.forEachNode(function(rowNode, index) {
				var item = rowNode.data;
				selectedRows.forEach(function(selectedRow, index) {
					if (item.scopeMatrixSlNo === selectedRow.scopeMatrixSlNo) {
						item.matrixSamudyam = 'No';
						item.matrixClient = 'Yes';
					}
				});
				datas.push(item);
			});
			scopeMatrixOptions.api.setRowData(datas);
			$('#noButton').attr("disabled", true);
			$('#yesButton').attr("disabled", true);
		}
	} */
	
	
	function onQuickFilterChanged() {
		$(".ti-search srchicon").hide();
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
	// delete Quotation

	function deleteOnclick() {
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.quotationId;
		});
		if (selectedRowsString) {
			var item = {};
			item.quotationId = selectedRowsString;

			$.ajax({
				type : "POST",
				url : "view-quotation-delete",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {

					$('#deleteQuot').modal('hide');
					$('#purchaseOrder').attr("disabled", true);
					$('#reqAppvBtn').attr("disabled", true);
					$('#revision').attr("disabled", true);
					$('#delete').attr("disabled", true);
					$('#add').attr("disabled", false);
					$('#dwnld').attr("disabled", false);
					if (response.message == "Success") {
						agGrid.simpleHttpRequest({
							url : 'view-quotation-through-ajax'
						}).then(function(data) {
							gridOptions.api.setRowData(data);
							//console.log(JSON.stringify(data))
						});

					} else {

					}
				},
				error : function(data) {
					console.log(data)
				}
			})
		} /* else {
									$("#alert").modal('show');
									document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
								} */

	}
	function deleteProductOnclick() {
		var selectedRows = itemOptions.api.getSelectedRows();
		itemOptions.api.applyTransaction({
			remove : selectedRows

		});
		cancelModalProductBtn();
		//DELETE GST,SUBTOTAL,GRANDTOTAL,SGST,CGST,IGST
		var sum = $("#subTotal").val();
		var gstRate = $("#gstRate").val();
		var qCGST = $("#qCGST").val();
		var qSGST = $("#qSGST").val();
		var qIGST = $("#qIGST").val();
		var grandTotal = $("#grandTotal").val();
		var itemIgst = $("#itemIgst").val();
		var itemCgst = $("#itemCgst").val();
		var itemSgst = $("#itemSgst").val();
		var len = selectedRows.length;
		for (var i = 0; i < len; i++) {

			sum = sum - selectedRows[i].lineTotal;
			var taxType = $("#taxType").val()
			if (taxType == "true") {

				selectedRows[i].itemIgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 100;
				qIGST = qIGST - selectedRows[i].itemIgst;
				grandTotal = sum + qIGST;
			} else {
				selectedRows[i].itemCgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 200;
				selectedRows[i].itemSgst = selectedRows[i].lineTotal
						* selectedRows[i].gstRate / 200;

				qCGST = qCGST - selectedRows[i].itemCgst;
				qSGST = qSGST - selectedRows[i].itemSgst;
				grandTotal = sum + qCGST + qSGST;
			}

		}

		$("#itemIgst").val(itemIgst);
		$("#itemCgst").val(itemCgst);
		$("#itemSgst").val(itemSgst);
		$("#subTotal").val(sum);
		$("#qIGST").val(qIGST);
		$("#qCGST").val(qCGST);
		$("#qSGST").val(qSGST);
		$("#grandTotal").val(grandTotal)
	}

	/* customer AutoSearch */
	

	function getCustomerList() {
		var search = $("#custName").val();
		if (search) {
			$.ajax({
						type : "POST",
						url : "view-quotation-get-customer-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:12px;"  class="autocompletedata cp" onClick="selectAutocompleteValue1(\''
												+ response.body[i].custId
												+ '\',\''
												+ response.body[i].custName
												+ '\',\''
												+ response.body[i].custGSTNo
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].custName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;background-color:#082958;color:#fff;"  onclick="AddCustomer();"><a class="addCust" href="#">Add New Customer</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValue()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddCustomer();"><a class="addCust" href="#">Add New Customer</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box1_").show();
									$("#suggesstion-box1_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}else{
			$("#addre").hide();
			$("#suggesstion-box1_").hide();
		}

	}

	function AddCustomer() {

		$('.formValidation').remove();
		$('#addCustomerModel').modal('show');
		$("#whatsApp").val('');
		$("#gstNo").val('');
		$("#customerType").val('');
		$("#salutation").val('');
		$("#customerName").val('');
		$("#companyName").val('');
		$("#customerDisplayName").val('');
		$("#cusEmail").val('');
		$("#custMobile").val('');
		$("#custSkype").val('');
		$("#custDesignation").val('');
		$("#department").val('');
		$("#webSite").val('');
		$("#status").val('');
		$("#pan").val('');
		$("#currency").val('');
		$("#openingBalance").val('');
		$("#paymentTerms").val('');
		$("#enableDtls").val('');
		$("#portableLang").val('');
		$("#faceBook").val('');
		$("#twitter").val('');
		$("#country").val('');
		$("#states").val('');
		$("#city").val('');
		$("#street1").val('');
		$("#street2").val('');
		$("#zipCode").val('');
		$("#phone").val('');
		$("#fax").val('');
		$("#country1").val('');
		$("#states1").val('');
		$("#city1").val('');
		$("#street11").val('');
		$("#street21").val('');
		$("#zipCode1").val('');
		$("#phone1").val('');
		$("#fax1").val('');
		$("#salutation1").val('');
		$("#street11").val('');
		$("#street21").val('');
		$("#zipCode1").val('');
		$("#phone1").val('');
		$("#fax1").val('');
		$("#salutation1").val('');
		
		$("#firstName").val('');
		$("#lastName").val('');
		$("#emailAdd").val('');
		$("#mobile").val('');
		$("#remarks").val('');
		$("#mainSa").hide();
		$("#contactPersonAcc").hide();
		$("#remarksAcc").hide();
		$("#btnDiv").show();
		$("#saveAdd").hide();
	}
	function AddSalesperson() {

		$('#addSalespersonModel').modal('show');

	}
	function addnewAddress() {
		$('#addAddressModel').modal('show');
		$("#billingInfo").show();
		$("#countryb").val('');
		$("#statesb").val('');
		$("#cityb").val('');
		$("#street1b").val('');
		$("#street2b").val('');
		$("#zipCodeb").val('');
		$("#phoneb").val('');
		$("#faxb").val('');

	}
	function addnewAddress1() {
		$("#country1s").val('');
		$("#states1s").val('');
		$("#city1s").val('');
		$("#street11s").val('');
		$("#street21s").val('');
		$("#zipCode1s").val('');
		$("#phone1s").val('');
		$("#fax1s").val('');
	//	$("#addStatus").val('');
		
		$('#addAddressModel1').modal('show');
		$('#changeAddressModel').modal('hide');
		$("#shippingInfo").show();
		/* var customerId = $("#custId").val();
		$.ajax({
			type : "GET",
			url : "view-quotation-shipping-dataedit?customerId="+ customerId,
			success : function(response) {
				if (response.code == "success") {
					var jsonData = JSON.parse(response.body);
					var allData=jsonData.ShippingAddress[0];
					
					var len = allData.length;
				    $("#country1s").val(allData.country);
				    getStateDetailss(allData.state)
				    $("#shippingId").val(allData.addressId);
				    $("#custId").val(allData.customerId);
				  
					$("#city1s").val(allData.city);
					$("#street11s").val(allData.street1);
					$("#street21s").val(allData.street2);
					$("#zipCode1s").val(allData.zipCode);
					$("#phone1s").val(allData.phone);
					$("#fax1s").val(allData.fax);
					
					if(allData.defaultStatus == "1") {
						$("#addStatus").prop("checked",true);
					} else {
						$("#addStatus").prop("checked",false);
					}
				}
			},
			error : function(e) {
			}
		});  */

	}
	

	function selectAutocompleteValue1(custId, custName, custGSTNo, taxType) {
		if (custId) {
			$("#custId").val(custId);
			$("#custName").val(custName);
			$("#custGSTNo").val(custGSTNo);
			$("#taxType").val(taxType);
			$("#search").val(custName);
			$("#search").attr('data-procat', custId);
			$("#suggesstion-box1_").hide();
			$("#addre").show();
			hideShowS();
			//checkForDuplicate(key,counter);
       getAddressDetails(custId,"new")
		} else {
			$("#custId").val("");

			$("#custName").val("");
			$("#custGSTNo").val("");
			$("#taxType").val("");
			$("#search").val("");
			$("#search").attr('data-procat', "");
			$("#suggesstion-box1_").hide();
			

		}
	}
	function selectAutocompleteValue() {

		$("#custId").val("");

		$("#custName").val("");
		$("#custGSTNo").val("");
		$("#taxType").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box1_").hide();

	}

	/* Item AutoSearch */

	function getItemQutotationList() {
		var search = $("#itemName").val();
		if (search) {
			$.ajax({
						type : "POST",
						url : "view-quotation-item-get-customer-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								if (response.body.length != 0) {
									$("#itemId").val("");
									$("#gstRate").val("");
									$("#sku").val("");
									$("#brandName").val("");
									$("#brandId").val("");
									$("#hsnCode").val("");
									$("#unit").val("");
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									for (var i = 0; i < response.body.length; i++) {
							content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc; background-color: #0909e4;"  class="autocompletedata cp" onClick="selectAutocompleteValueItem1(\''
												+ response.body[i].sku
												+ '\',\''
												+ response.body[i].productId
												+ '\',\''
												+ window.btoa(response.body[i].productName)
												+ '\',\''
												+ response.body[i].brandId
												+ '\',\''
												+ window.btoa(response.body[i].brandName)
												+ '\',\''
												+ window.btoa(response.body[i].hsnCode)
												+ '\',\''
												+ window.btoa(response.body[i].unit)
												+ '\',\''
												+ window.btoa(response.body[i].gstRate)
												+ '\')">'
												+ response.body[i].sku
												+ " - "
												+ response.body[i].productName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
										+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);

								} else {
									$("#itemName").css("background", "#FFF");
									var content = '<ul id="autocomplete-list1">';
									content += '<li style="margin-left:-30px;font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;"li onClick="selectAutocompleteValueItem()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddProduct();"><a class="addCustnew" href="#">Add Item</a>'
												+ '</li>';
									content += '</ul>';
									$("#suggesstion-box_").show();
									$("#suggesstion-box_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}else{
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#unit").val("");
			$("#suggesstion-box_").hide();
		}
	}
/* 	function selectActive(id, sku, productId, productName, brandId, brandName,
			prodCatId, prodCatName, hsnCode, unit, gstRate) {
		$('.autocompletedata ').removeClass('productActive');
		$("#" + id).addClass('productActive');
		$("#itemNameTemp").val(window.atob(productName));
		$("#itemIdTemp").val(productId);
		$("#brandNameTemp").val(window.atob(brandName));
		$("#brandIdTemp").val(brandId);
		$("#skuTemp").val(sku);
		$("#prodCatIdTemp").val(prodCatId);
		$("#hsnCodeTemp").val(window.atob(hsnCode));
		$("#unitTemp").val(window.atob(unit));
		$("#gstRateTemp").val(window.atob(gstRate));
		$("#prodCatNameTemp").val(window.atob(prodCatName));
		$("#searchTemp").val(window.atob(productName))
	} */
	function selectAutocompleteValueItem1(sku, productId, productName, brandId, brandName,
			 hsnCode, unit, gstRate) {
		if (sku) {
			$("#itemName").val(window.atob(productName));
			$("#itemId").val(productId);
			$("#brandName").val(window.atob(brandName));
			$("#brandId").val(brandId);
			$("#sku").val(sku);
			$("#hsnCode").val(window.atob(hsnCode));
			$("#unit").val(window.atob(unit));
			$("#gstRate").val(window.atob(gstRate));
			$("#itemName").attr('data-procat', itemId);
			$("#suggesstion-box_").hide();
			hideShowS();
		} else {
			$("#itemId").val("");
			$("#itemName").val("");
			$("#gstRate").val("");
			$("#sku").val("");
			$("#brandName").val("");
			$("#brandId").val("");
			$("#hsnCode").val("");
			$("#unit").val("");
			$("#itemName").attr('data-procat', "");
			$("#suggesstion-box_").hide();

		}
	}
	function selectAutocompleteValueItem() {

		$("#itemId").val("");

		$("#gstRate").val("");
		$("#sku").val("");
		$("#itemName").val("");
		$("#itemName").attr('data-procat', "");
		$("#suggesstion-box_").hide();

	}

	function selectCheckBox(id, lvl) {
		if(id=='PCAT000001'){
			$('#lbl_PCAT000001').hide();
			$('#ccCheck_PCAT000001').hide();
			
		}
		else{
			$('#lbl_PCAT000001').val(null);
			$('#ccCheck_PCAT000001').val(null);
		$("#select_product").empty();
		getProductByCategory();

		/* $(".pc1-box").prop("checked",false);
		$("#cat_"+id).prop("checked",true); */

		if (lvl == 'L1') {
			var textDesc = $("#lbl_" + id).text();
			$("#catDesc").text(textDesc);
		} else {
			var res = lvl.substring(1, 1000000);

			var lastText = $("#lbl_" + id).text();
			var textDesc = "";
			for (i = res; i > 1; i--) {
				var pUL = $("#lbl_" + id).parents("ul").attr("id");
				pUL = pUL.substring(3, 10000000000000);
				var newText = $("#lbl_" + pUL).text();
				textDesc = newText + " > " + textDesc;
				id = pUL;
			}
			textDesc = textDesc + lastText;
			$("#catDesc").text(textDesc);
		}
	}
	}

	function selectProductVal() {
		
		$("#itemName").val($("#itemNameTemp").val());
		$("#itemId").val($("#itemIdTemp").val());
		$("#hsnCode").val($("#hsnCodeTemp").val());
		$("#unit").val($("#unitTemp").val());
		$("#gstRate").val($("#gstRateTemp").val());
		$("#brandName").val($("#brandNameTemp").val());
		$("#brandId").val($("#brandIdTemp").val());
		$("#category").val($("#prodCatIdTemp").val());
		$("#categoryName").val($("#prodCatNameTemp").val());
		$("#sku").val($("#skuTemp").val());
		$("#search").val($("#itemNameTemp").val())
		$("#select_product").html('');
		$('#myModal').modal('hide');
		
	}

	function getProductByCategory() {

		$("#select_product").empty();
		var valor = "";
		$('input.pc1-box[type=checkbox]').each(function() {
			if (this.checked)
				valor = valor + $(this).val() + ",";
		});
		if (valor) {
			$("#select_product").empty();
			$
					.ajax({
						type : "POST",
						url : "view-quotation-item-product-by-cat",
						dataType : 'json',
						contentType : 'application/json',
						data : valor,
						success : function(response) {
							if (response.message == "success") {
								//console.log(response.body)
								$("#select_product").empty();
								var content = '';
								for (var i = 0; i < response.body.length; i++) {

									content += '<div class="autocompletedata cp product-item" id="'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '" onClick=selectActive("'
											+ response.body[i].productId
											+ "_"
											+ response.body[i].sku
											+ '","'
											+ response.body[i].sku
											+ '","'
											+ response.body[i].productId
											+ '","'
											+ window
													.btoa(response.body[i].productName)
											+ '","'
											+ response.body[i].brandId
											+ '","'
											+ window
													.btoa(response.body[i].brandName)
											+ '","'
											+ response.body[i].productCatId
											+ '","'
											+ window
													.btoa(response.body[i].productCatName)
											+ '","'
											+ window
													.btoa(response.body[i].hsnCode)
											+ '","'
											+ window
													.btoa(response.body[i].unit)
											+ '","'
											+ window
													.btoa(response.body[i].gstRate)
											+ '")>'
											+ response.body[i].sku
											+ " - "
											+ response.body[i].brandName
											+ " - "
											+ response.body[i].productName
											+ '</div>';
								}
								content += '</ul>';
								$("#select_product").show();
								$("#select_product").append(content);

								var itemId = $("#itemId").val();
								var skuId = $("#sku").html();

								if (itemId) {
									$("#" + itemId + "_" + skuId).addClass(
											'productActive');
								}

							}
						},
						error : function(data) {

						}
					})
		} else {
			$("#select_product").empty();
		}
	}
	function selectActive(id, sku, productId, productName, brandId, brandName,
			prodCatId, prodCatName, hsnCode, unit, gstRate) {
		$('.autocompletedata ').removeClass('productActive');
		$("#" + id).addClass('productActive');
		$("#itemNameTemp").val(window.atob(productName));
		$("#itemIdTemp").val(productId);
		$("#brandNameTemp").val(window.atob(brandName));
		$("#brandIdTemp").val(brandId);
		$("#skuTemp").val(sku);
		$("#prodCatIdTemp").val(prodCatId);
		$("#hsnCodeTemp").val(window.atob(hsnCode));
		$("#unitTemp").val(window.atob(unit));
		$("#gstRateTemp").val(window.atob(gstRate));
		$("#prodCatNameTemp").val(window.atob(prodCatName));
		$("#searchTemp").val(window.atob(productName))
	}
	
	function selectActiveCancel() {
		$("#itemNameTemp").val('');
		$("#itemIdTemp").val('');
		$("#brandNameTemp").val('');
		$("#brandIdTemp").val('');
		$("#skuTemp").val('');
		$("#hsnCodeTemp").val('');
		$("#prodCatIdTemp").val('');
		$("#prodCatNameTemp").val('');
		$("#searchTemp").val('');
		$("#unitTemp").val('');
		$("#gstRateTemp").val('');

	} 

	function hideShowS() {
		var taxType = $("#taxType").val();
		if (taxType == "true") {
			$('#igstTR').hide();
			$('#cgstTR').show();
			$('#sgstTR').show();

		} else {
			$('#igstTR').show();
			$('#cgstTR').hide();
			$('#sgstTR').hide();

		}

	}
	var totalLine;
	function calculateLineTotal() {
		var price = $("#unitPrice").val();
		var quantity = $("#quantity").val();
		
				var mul = price * quantity;
					$("#lineTotal").val((mul).toFixed(2));

	}

	function calculateSubTotal() {
	}
	function getGSTRateCal() {
	}

	/*
	image upload fn
	 */

	function saveFile() {

		var uFile = $('#fileUpload')[0].files[0];
		var fileName = $('#fileUpload').val();
		var iURL = URL.createObjectURL(uFile);
		var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		$("#uploadedBillDiv_").html(LightImg);
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var iURL = URL.createObjectURL(uFile);

		$('#imgLoc').attr('src', '');
		$('#imgLoc').attr('src', iURL);

		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');

		$.ajax({
			type : "POST",
			url : "view-quotation-upload-file",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {

			},
			error : function(e) {

			}
		});
	}

	function addSalesPerson() {
		$('#addSalespersonModel').modal('show');
	}
	function cancelDetails(){
		$('#addSalespersonModel').modal('hide');
		$("#spName").val('');
		$("#spGender").val('');
		$("#dobid").val('');
		$("#mobileno").val('');
		$("#personalmailid").val('');
		$("#addressid_").val('');
	}


	function addDetails() {
		var obj = {};
		var Id = $("#salespersonId").val();

		obj.salespersonId = $("#salespersonId").val();
		obj.spName = $("#spName").val();
		obj.spGender = $("#spGender").val();
		obj.dobid = $("#dobid").val();
		obj.mobilenoid = $("#mobilenoid").val();
		obj.addressid_ = $("#addressid_").val();
	var validation = true; 
		
		if (obj.spName == null || obj.spName == "") {
			validation = validationUpdated("Sales Person Name Required", "spName");
		}
		if (obj.spGender == null || obj.spGender == "") {
			validation = validationUpdated("Sales Person Gender Required", "spGender");
		}
		if (obj.mobilenoid == null || obj.mobilenoid == "") {
			validation = validationUpdated("Sales Person Mobile No Required", "mobilenoid");
		}
		if(validation){
		 $(".formValidation").remove();
		$.ajax({
			type : "POST",
			url : "view-quotation-add-salesperson",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					//getSalessPersonList();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					cancelDetails();
				}
			},
			error : function(data) {
			}
		})
	}
	}
	

	function showDisplay() {
		var ctype = $('#customerType').val();
		if (ctype == 'Business') {
			var compName = $('#companyName').val();
			$('#customerDisplayName').val(compName);
			$('#customerName').val(compName);
		} else {
			var title = $('#salutation').val();
			var name = $('#customerName').val();
			var fullName = title + ' ' + name;
			$('#customerDisplayName').val(fullName);
			$('#customerName').val(name);
		}

	}
	
//add Customer Info

	
	function addCustomerInfo() {
		pmailVal();
		pancardVal();
		pmailVal1();
		mobVal1();
		mobVal2();
		mobVal3();
		//mobVal4();
		mobVal5();
		mobVal6();
		zipcodeVal();
		//zipcodeVal1();
		zipcodeVal2();
		var obj = {};
		obj.customerId = $('#customerId').text();
		obj.customerType = $('#customerType').val();
		obj.salutation = $('#salutation').val();
		obj.customerName = $('#customerName').val();
		obj.companyName = $('#companyName').val();
		obj.customerDisplayName = $('#customerDisplayName').val();
		obj.cusEmail = ($('#cusEmail').val()).toLowerCase();
		obj.custMobile = $('#custMobile').val();
		obj.custSkype = $('#custSkype').val();

		 obj.custDesignation = $('#custDesignation').val();
		obj.department = $('#department').val(); 
		obj.webSite = $('#webSite').val();
		obj.status = $('#status').val();
		obj.pan = $('#pan').val();
		obj.currency = $('#currency').val();
		obj.openingBalance = $('#openingBalance').val();
		obj.paymentTerms = $('#paymentTerms').val();
		//obj.enableDtls = $('#enableDtls').val();
		obj.portableLang = $('#portableLang').val();
		obj.gstNo = $('#gstNo').val();
		obj.whatsApp = $('#whatsApp').val();
		obj.faceBook = $('#faceBook').val();
		obj.twitter = $('#twitter').val();
		obj.country = $('#country').val();
		obj.states = $('#states').val();
		obj.city = $('#city').val();
		obj.street1 = $('#street1').val();
		obj.street2 = $('#street2').val();
		obj.zipCode = $('#zipCode').val();
		obj.phone = $('#phone').val();
		obj.fax = $('#fax').val();

	

		obj.salutation1 = $('#salutation1').val();
		obj.firstName = $('#firstName').val();
		obj.lastName = $('#lastName').val();
		obj.emailAdd = ($('#emailAdd').val()).toLowerCase();
		obj.mobile = $('#mobile').val();
		obj.remarks = $('#remarks').val();
	
		//console.log("object on add customer-----------" + JSON.stringify(obj));
		var validation = true;
		if (obj.customerType == null || obj.customerType == "") {
			validation = validationUpdated("Type Required",
					"customerType");
		}
		var ctype = $('#customerType').val();
		if (ctype == 'Business') {
			if (obj.companyName == null || obj.companyName == "") {
				validation = validationUpdated("Company Name Required",
						"companyName");
			}
		} else {
			/* if (obj.salutation == null || obj.salutation == "") {
				validation = validationUpdated("Salutation Required",
						"salutation");
			} */
			if (obj.customerName == null || obj.customerName == "") {
				validation = validationUpdated("Name Required",
						"customerName");
			}
		}
		
		
	
		if (obj.country == null || obj.country == "") {
			validation = validationUpdated("Country Required",
					"country");
		}
		
		if (obj.states == null || obj.states == "") {
			validation = validationUpdated("State Required",
					"states");
		}
		
		
		if (obj.city == null || obj.city == "") {
			validation = validationUpdated("City Required",
					"city");
		}
		if (obj.pan == null || obj.pan == "") {
			validation = validationUpdated("Pan Card Required",
					"pan");
		}
		
	
		if (validation  && pmailValid && pmailValid1 && mobValid1 && mobValid2 && mobValid3 && 
				mobValid5) {
			$('.loader').show();
	    	$("body").addClass("overlay");
			$.ajax({
				type : "POST",
				url : "view-quotation-adds-customer",
				contentType : "application/json",
				data : JSON.stringify(obj),
				success : function(response) {
					console.log(response.message);
					if (response.message == "Success") {
						$('.loader').hide();
		            	$("body").removeClass("overlay");
						console.log(response);
						var customerIdd = $('#customerId').text();
						
						if(customerIdd!=""){
						    $("#messageParagraph").text("Data Saved Successfully");
			            	$("#msgOkModal").removeClass("btn3");
			            	$("#msgOkModal").addClass("btn1");
			            	$("#msgModal").modal('show');
			            	
			            	cancelBtn1();
						}else{
						
		            	$('.loader').hide();
		            	$("body").removeClass("overlay");
		            	
		            	$("#customerId").text(response.body.customerId);
		            	$("#contactPersonAcc").show();
	                 	$("#mainSa").show();
		                $("#remarksAcc").show();
		                $("#saveAdd").show();
		                $("#next").hide();
		                $('#deleteAddressDtls').attr("disabled", true);
		                var customerIdd = $("#customerId").text();
		                agGrid.simpleHttpRequest({
		                	 url : "view-quotation-shippingdetails?customerIdd=" + customerIdd,
		       			}).then(function(data) {
		       				var jsonData = JSON.parse(data.body);
		       				var allData=jsonData.Data;
		       				//var len = allData.length;
		       				//$('#totaldispatch').find('span').html(len);
		       				gridSAOptions.api.setRowData(allData);
		       			});
						}
					
					} else {
						
		            	$('.loader').hide();
		            	$("body").removeClass("overlay");
		                swal({
		                    title: response.code,
		                    text: response.message,
		                    type: "warning"
		                })
		            }
				},
				error : function(data) {
					$('.loader').hide();
					
				}
			})
		}

	}
	
	 function checkAlphabet(fieldId) {
			
		    var tempVal = $("#" + fieldId).val().replace(/[^a-zA-Z. ]/g,'');
		    tempVal=tempVal.replace(/^\w/, c => c.toUpperCase());
		    
		    const input = document.getElementById(fieldId);
		    const position = input.selectionStart;	
		    if(position == 1 && tempVal.charAt(0) == ' '){
		    	$("#" + fieldId).empty();
		    	tempVal = '';
		      } 
		      $("#" + fieldId).val(tempVal);
		    }
	 
	 function checkNumeric(fieldId) {

			var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');

			const input = document.getElementById(fieldId);
			const position = input.selectionStart;
			if (tempVal.slice(-1) == ' ') {
				$("#" + fieldId).empty();
				tempVal = '';
			}
			$("#" + fieldId).val(tempVal);
		}
	 
	 //Amount validation
	 function checkAmount(fieldId) {   
		var myField = document.getElementById("openingBalance")
		 var reg = /^\d{0,9}(\.\d{0,2})?$/;   
		 if (reg.test(myField.value))
		 {       
			 $("#" + fieldId).val();
			 reg = '';  
		 }else{        
			 $("#" + fieldId).val(null);     } 
		 }
	 
	// Email validation
	 var pmailValid;
	 function pmailVal() {
	     var mail = $('#cusEmail').val();
	     var mid =  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
	    	 /^[a-zA-Z]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
	    	/*  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/; */
	    	 
	     if (mail != "") {
	         if (mid.test(mail)) {
	             $("#error3").hide();
	             pmailValid = true;
	             return true;
	         } else {
	             $("#error3").show();
	             $("#error3").html("Please enter a valid email id.");
	             pmailValid = false;
	             return false;
	         }

	     } else {
	    	 $('#cusEmail').val("");
	         $("#error3").hide();
	         pmailValid = true;
	         return true;
	     }

	 }
	// Email validation
	 var pmailValid1;
	 function pmailVal1() {
	     var mail = $('#emailAdd').val();
	     var mid =  /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
	    	
	    	 
	     if (mail != "") {
	         if (mid.test(mail)) {
	             $("#error6").hide();
	             pmailValid1 = true;
	             return true;
	         } else {
	             $("#error6").show();
	             $("#error6").html("Please enter a valid email id.");
	             pmailValid = false;
	             return false;
	         }

	     } else {
	    	 $('#emailAdd').val("");
	         $("#error6").hide();
	         pmailValid1 = true;
	         return true;
	     }

	 }
	 
	//pancard card validation 

	 var pancardValid;

			function pancardVal() {
				
			    var pancard = $('#pan').val();
			    
			    var pancardid = /([A-Z]){5}([0-9]){4}([A-Z]){1}$/;
			    var format = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
			    
			    if (pancard != '' && pancard.toUpperCase() === pancard && !format.test(pancard)) {
			        if (pancardid.test(pancard)) {
			            $("#error4").hide();
			            pancardValid = true;
			            return true;
			        } else {
			        	
			            $("#error4").show();
			            $("#error4").html("Please enter a valid pan card no.");
			          //  $('#panno').val("");
			            pancardValid = false;
			            return false;
			        }

			    } else {
			        $('#pan').val("");
			        //$("#error4").hide();
			        pancardValid = false;
			        return false;
			     
			    }

			}
	// gst no  validation
	
	var GSTValid;
	function ValidateGSTNumber() {
		 var gstNumber = $('#gstNo').val();
        var expr = /^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/;
        if (gstNumber != ""){
        
        if (expr.test(gstNumber)) {
        	
        	
        	  $("#error5").hide();
        	  GSTValid = true;
	            return true;
        }else{
        	
        	 $("#error5").show();
             $("#error5").html("Please enter valid GST Number.");
             GSTValid = false;
             return false;
        }
        }else {
        	
        	 $('#gstNo').val("");
        	 $("#error5").hide();
        	 GSTValid = true;
	         return true;
	    }
    }
	
	
	function getGstData() {
		var gstNo = $("#gstNo").val();
		if (gstNo.length == 15) {
			$('.loader').show();
		
			$.ajax({
				type : "GET",
				url : "view-quotation-getgstno?id=" + gstNo,
				success : function(response) {
					const obj = JSON.parse(response.body);
					if (obj.error == false) {
						$("#gstNo").val(obj.data.gstin);
						$("#companyName").val(obj.data.lgnm);
						
						$("#status").val(obj.data.sts);
						$("#customerDisplayName").val(obj.data.lgnm);
						$("#customerName").val(obj.data.lgnm);
						$("#city").val(obj.data.pradr.addr.loc);
						$("#street1").val(obj.data.pradr.addr.bno + ', '+ obj.data.pradr.addr.bnm);
						$("#street2").val(obj.data.pradr.addr.st);
						$("#zipCode").val(obj.data.pradr.addr.pncd);
						$('#country').val('cntry001');
						getStateDataOnGST(obj.data.pradr.addr.stcd,'cntry001');
						$('#states').val();
						$('.loader').hide();
						
					}
					else{
						$("#messageParagraph").text("Please Enter Valid GST No.");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						
						$("#gstNo").val('');
						$('.loader').hide();
					}
				},
				error : function(e) {
					
					
				}
			});
		} else {
			
			//$("#gstNo").val('');
			
			
		}
	}
	
	
	/* function approveGst() {
		alert("hi")
		getGstData();
		ValidateGSTNumber();
	} */
	function getStateDataOnGST(stateId,country) {
		if (country) {
			$.ajax({
				type : "GET",
				url : "view-quotation-stateList?id=" + country,
				success : function(response) {
					if (response.message == "success") {
						$("#states").empty();
						var option = $("<option></option>");
						$(option).val(null);
						$(option).html("Select");
						$("#states").append(option);
						var tempState = '';
						for (var i = 0; i < response.body.length; i++) {
							var option = $("<option></option>")
							$(option).val(response.body[i].key);
							$(option).html(response.body[i].name);
							$("#states").append(option);;
							if(response.body[i].name == stateId){
								tempState = response.body[i].key ;
							}
							
						}
						
						$("#states").val(tempState);
					}
				},
				error : function(e) {
				}
			});
		} else {
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states").append(option);
		}
	}
	
	function addCustomerInfo2() {
		zipcodeVal2();
		var obj = {};
		var Id = $("#custId").val();

		obj.customerId = $("#custId").val();
		obj.country = $("#countryb").val();
		obj.states = $("#statesb").val();
		obj.city = $("#cityb").val();
		obj.street1 = $("#street1b").val();
		obj.street2 = $("#street2b").val();
		obj.zipCode = $("#zipCodeb").val();
		obj.phone = $("#phoneb").val();
		obj.fax = $("#faxb").val();
		
		var validation = true;
		
		 if (!validationUpdated("Select Country", 'countryb'))
			 validation = false; 
		 
		 if (!validationUpdated("Select State", 'statesb'))
			 validation = false; 
		
		 if (!validationUpdated("Zipcode Required", 'zipCodeb'))
			 validation = false; 
		
		
		
		
		//&& zipcodeValid2
		if (validation && zipcodeValid2) {
			$('.loader').show();
		$.ajax({
			type : "POST",
			url : "view-quotation-add-cust-billingaddress",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					$("#addAddressModel").modal('hide');
					getAddressDetails(Id,"new");
					
					//$("#myGrid").show();
					$("#billingInfo").hide();

				}
			},
			error : function(data) {
				$('.loader').hide();
			}
		})

	}
}
	
	
	
	
	function addCustomerInfo1() {
		zipcodeVal3();
		var obj = {};
		var Id = $("#custId").val();
		obj.shippingId = $("#shippingId").val();
		obj.customerId = $("#custId").val();
		obj.country1 = $("#country1s").val();
		obj.states1 = $("#states1s").val();
		obj.city1 = $("#city1s").val();
		obj.street11 = $("#street11s").val();
		obj.street21 = $("#street21s").val();
		obj.zipCode1 = $("#zipCode1s").val();
		obj.phone1 = $("#phone1s").val();
		obj.fax1 = $("#fax1s").val();
		var ds=$("input[name='isDefault']:checked").val();
		if(ds=='1'){
			obj.defaultStatus='1';
		}else{
			obj.defaultStatus='0';	
		}
	console.log(obj);
	var validation = true; 
	
	 if (!validationUpdated("Select Country", 'country1s'))
		 validation = false; 
	 
	 if (!validationUpdated("Select State", 'states1s'))
		 validation = false; 
	
	 if (!validationUpdated("Zipcode Required", 'zipCode1s'))
		 validation = false; 
		
	
		if(validation && zipcodeValid3){
		 $(".formValidation").remove();
			$('.loader').show();
		$.ajax({
			type : "POST",
			url : "view-quotation-add-cust-shippingaddress",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					$('.loader').hide();
					//getAddressDetails(Id)
					$("#messageParagraph").text("Shipping Address Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					cancelBtn2();
					getAddressDetails(Id,"new");
					//$("#myGrid").show();
					$("#addAddressModel1").modal('hide');
					
					$("#shippingInfo").hide();
				}
			},
			error : function(data) {
				$('.loader').hide();
			}
		})
	}
	}
	
	
function getStateDetails(){
		
		var cname = $('#country').val();
		if (cname) { 
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
			$.ajax({type : "GET",
				url : "view-quotation-stateList?id="+ cname,
						success : function(response) {
							if (response.message == "success") {
								$("#states").empty();
								var option = $("<option></option>");
								$(option).val(null);
								$(option).html("Select");
								$("#states").append(option);
								for (var i = 0; i < response.body.length; i++) {
									var option = $("<option></option>");
									$(option).val(response.body[i].key);
									$(option).html(response.body[i].name);
									$("#states").append(option);
								}
							}
						},
						error : function(e) { 
						}
					});
		} else {
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			$("#states").append(option);
			$("#states").empty();
			var option = $("<option></option>");
			$(option).val(null);
			$(option).html("Select");
			//$("#dname").append(option);
		}
	}
	
	
function getStateDetails1(){
	
	var cname = $('#country1').val();
	if (cname) { 
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		//$("#dname").append(option);
		$.ajax({type : "GET",
			url : "view-quotation-stateList?id="+ cname,
					success : function(response) {
						if (response.message == "success") {
							$("#states1").empty();
							var option = $("<option></option>");
							$(option).val(null);
							$(option).html("Select");
							$("#states1").append(option);
							for (var i = 0; i < response.body.length; i++) {
								var option = $("<option></option>");
								$(option).val(response.body[i].key);
								$(option).html(response.body[i].name);
								$("#states1").append(option);
							}
						}
					},
					error : function(e) { 
					}
				});
	} else {
		$("#states1").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$("#states1").append(option);
		$("#states1").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		//$("#dname").append(option);
	}
}

function getStateDetailsb(){
	
	var cname = $('#countryb').val();
	if (cname) { 
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		//$("#dname").append(option);
		$.ajax({type : "GET",
			url : "view-quotation-stateList?id="+ cname,
					success : function(response) {
						if (response.message == "success") {
							$("#statesb").empty();
							var option = $("<option></option>");
							$(option).val(null);
							$(option).html("Select");
							$("#statesb").append(option);
							for (var i = 0; i < response.body.length; i++) {
								var option = $("<option></option>");
								$(option).val(response.body[i].key);
								$(option).html(response.body[i].name);
								$("#statesb").append(option);
							}
						}
					},
					error : function(e) { 
					}
				});
	} else {
		$("#statesb").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$("#statesb").append(option);
		$("#statesb").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		//$("#dname").append(option);
	}
}


function getStateDetailss(sid){
	
	var cname = $('#country1s').val();
	if (cname) { 
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		//$("#dname").append(option);
		$.ajax({type : "GET",
			url : "view-quotation-stateList?id="+ cname,
					success : function(response) {
						if (response.message == "success") {
							$("#states1s").empty();
							var option = $("<option></option>");
							$(option).val(null);
							$(option).html("Select");
							$("#states1s").append(option);
							for (var i = 0; i < response.body.length; i++) {
								var option = $("<option></option>");
								$(option).val(response.body[i].key);
								$(option).html(response.body[i].name);
								$("#states1s").append(option);
							}
							if(sid!="" || sid!="null" || sid!=null){
								$("#states1s").val(sid);
							}
						}
					},
					error : function(e) { 
					}
				});
	} else {
		$("#states1s").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$("#states1s").append(option);
		$("#states1s").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		//$("#dname").append(option);
	}
}

function copyAsBillingAdd() {
	document.getElementById("mySidenavAddress").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;bottom:490px;";

	document.getElementById("mainSa").style.width = "70%";
	 var customerId = $("#customerId").text();
	
	$("#shippingId").text(customerId); 
	var country = $('#country').val();
	var states = $('#states').val();
	var city = $('#city').val();
	var street1 = $('#street1').val();
	var street2 = $('#street2').val();
	var zipCode = $('#zipCode').val();
	var phone = $('#phone').val();
	var fax = $('#fax').val();

	$('#country1').val(country);
	//$('#states1').val(states);
	getStateDataOnEdit1(states);
	$('#city1').val(city);
	$('#street11').val(street1);
	$('#street21').val(street2);
	$('#zipCode1').val(zipCode);
	$('#phone1').val(phone);
	$('#fax1').val(fax);
}



function getStateDataOnEdit1(stateId) {
	var country = $("#country").val();
	if (country) { 
		$.ajax({
			type : "GET",
			url : "view-quotation-stateList?id=" + country,
			success : function(response) {
				if (response.message == "success") {
					$("#states1").empty();
					var option = $("<option></option>");
					$(option).val(null);
					$(option).html("Select");
					$("#states1").append(option);
					for (var i = 0; i < response.body.length; i++) {
						var option = $("<option></option>");
						$(option).val(response.body[i].key);
						$(option).html(response.body[i].name);
						$("#states1").append(option);
					}
					$("#states1").val(stateId);
				}
			},
			error : function(e) { 
			}
		});
	} else {
		$("#states1").empty();
		var option = $("<option></option>");
		$(option).val(null);
		$(option).html("Select");
		$("#states1").append(option);
	}
}



/* function getEditTaxTypee(search) {

	$.ajax({
		type : "POST",
		url : "view-quotation-get-salesperson-list",
		dataType : 'json',
		contentType : 'application/json',
		data : search,
		success : function(response) {
			if (response.message == "success") {
				console.log("response data" + response.body[0].taxType)
				$("#taxTypee").val(response.body[0].taxType);
				hideShow()();
			}
		},
		error : function(data) {
			console.log(data);
		}
	})
} */

//Sales person auto search

function getSalesPersonList() {
	var search = $("#salespersonName").val();
	if (search) {
		$
				.ajax({
					type : "POST",
					url : "view-quotation-get-salesperson-list",
					dataType : 'json',
					contentType : 'application/json',
					data : search,
					success : function(response) {
						if (response.message == "success") {
							console.log("response data"
									+ JSON.stringify(response))
							if (response.body.length != 0) {
								$("#search").css("background", "#FFF");
								var content = '<ul id="autocomplete-list2" >';
								for (var i = 0; i < response.body.length; i++) {
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue2(\''
											+ response.body[i].salespersonId
											+ '\',\''
											+ response.body[i].spName
											+ '\',\''
											+ response.body[i].custGSTNoo
											+ '\',\''
											+ response.body[i].taxTypee
											+ '\')">'
											+ response.body[i].spName
											+ '</li>';
								}
								content += '<li style="margin-left:-30px;"  onclick="AddSalesperson();"><a class="addCust" href="#">Add New Sales Person</a>'
										+ '</li>';
								content += '</ul>';
								//console.log("content " + content)
								$("#suggesstion-box2_").show();
								$("#suggesstion-box2_").html(content);

							} else {
								$("#search").css("background", "#FFF");
								var content = '<ul id="autocomplete-list1">';
								content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee()">'
										+ "No Data Found" + '</li>';
								content += '<li style="margin-left:-30px;"  onclick="AddSalesperson();"><a class="addCust" href="#">Add New Sales Person</a>'
										+ '</li>';
								content += '</ul>';
								$("#suggesstion-box2_").show();
								$("#suggesstion-box2_").html(content);
							}
						}
					},
					error : function(data) {
						console.log(data);
					}
				})
	}else{
		$("#suggesstion-box2_").hide();
	}

}

function selectAutocompleteValuee() {

	$("#salesPersonId").val("");

	$("#salespersonName").val("");
	$("#custGSTNoo").val("");
	$("#taxTypee").val("");
	$("#search").val("");
	$("#search").attr('data-procat', "");
	$("#suggesstion-box2_").hide();

}

function selectAutocompleteValue2(salespersonId, spName,custGSTNo, taxType) {

	

	$("#salesPersonId").val(salespersonId);
	$("#salespersonName").val(spName);
	$("#custGSTNoo").val(custGSTNo);
	$("#taxTypee").val(taxType);
		$("#search").val(spName);
		$("#search").attr('data-procat', salespersonId);
		$("#suggesstion-box2_").hide();
	//	hideShowS();
		//checkForDuplicate(key,counter);

	
}

function cancelBtn1() {
$('#addCustomerModel').modal('hide');
customerType();
}
function cancelBtn() {
	$('#addAddressModel').modal('hide');
	//$("#billingInfo").hide();
	}
function cancelBtn2() {
	$('#addAddressModel1').modal('hide');
	//$("#shippingInfo").hide();
	}
function tcscancelBtn() {
	$('#manageTCsModel').modal('hide');
	}

function customerType() {
	var ctype = $('#customerType').val();
	if (ctype == 'Business') {
		$('#salutationDiv').hide();
		$('#customerNameDiv').hide();
		$('#companyNameDiv').show();
		$('#custDesignationDiv').show();
		$('#departmentDiv').show();
	} else {
		$('#salutationDiv').show();
		$('#customerNameDiv').show();
		$('#companyNameDiv').hide();
		$('#custDesignationDiv').hide();
		$('#departmentDiv').hide();
	}

}
	

	
	function getAddressDetails(custId,shipId) {
	
   if(shipId=="null" || shipId=="" || shipId==null){
	   shipId="new";
   }
  
	$.ajax({
		type : "GET",
		url : "view-quotation-get-address?id=" + custId + "&shipId=" + shipId ,

		async : false,
		success : function(response) {
			if (response.message == "Success") {
				
				console.log(response.body)
				$("#con").html(response.body.country);
				$("#bstate").html(response.body.states);
				$("#bcity").html(response.body.city);
				$("#bstreet1").html(response.body.street1);
				$("#bstreet2").html(response.body.street2);
				$("#bzipcode").html(response.body.zipCode);
				$("#bphone").html(response.body.phone);
				$("#bfax").html(response.body.fax);

				$("#con1").html(response.body.country1);
				$("#bstate1").html(response.body.states1);
				$("#bcity1").html(response.body.city1);
				$("#bstreet11").html(response.body.street11);
				$("#bstreet21").html(response.body.street21);
				$("#bzipcode1").html(response.body.zipCode1);
				$("#bphone1").html(response.body.phone1);
				$("#bfax1").html(response.body.fax1);
				$("#shippingHiddenId").val(response.body.shippingId);
				$("#addre").show();
				

                  }
		}
	});
}
	
	
	
	function saveFile1(event) {
		var uFile = $(uploadDoc_0)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");
		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_0").html("");

		if (extension[1] == "jpg" || extension[1] == "png"|| extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o' style='color: blue'></i></a></div>";
		}else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o' style='color: red'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l'> </div>";
		}
		$("#uploadedBillDiv_0").html(LightImg);
		$("#imageName_0").html(fileName);
		var fileData = new FormData();
		fileData.append('file', uFile);
		fileData.append('path', 'none');
		$.ajax({
			type : "POST",
			url : "view-quotation-upload-file1",
			enctype : "multipart/form-data",
			contentType : false,
			data : fileData,
			processData : false,
			cache : false,
			success : function(response) {
			},
			error : function(e) {

			}
		});
	}
	//TCS auto search

	function getTCSList () {
		var search = $("#tcsName").val();

		if (search) {

			$
					.ajax({
						type : "POST",
						url : "view-quotation-get-tcs-list",
						dataType : 'json',
						contentType : 'application/json',
						data : search,
						success : function(response) {
							if (response.message == "success") {
								console.log("response data"
										+ JSON.stringify(response))
								if (response.body.length != 0) {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list3" >';
									for (var i = 0; i < response.body.length; i++) {
										content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" class="autocompletedata cp" onClick="selectAutocompleteValue3(\''
												+ response.body[i].tcsId
												+ '\',\''
												+ response.body[i].taxName
												+ '\',\''
												+ response.body[i].rateId
												+ '\',\''
												+ response.body[i].taxType
												+ '\')">'
												+ response.body[i].taxName
												+ '</li>';
									}
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									//console.log("content " + content)
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);

								} else {
									$("#search").css("background", "#FFF");
									var content = '<ul id="autocomplete-list3">';
									content += '<li style="margin-left:-30px; font-weight:100; font-size:14px; color:#ccc;     background-color: #0909e4;" onClick="selectAutocompleteValuee1()">'
											+ "No Data Found" + '</li>';
									content += '<li style="margin-left:-30px;"  onclick="AddTCS();"><a class="addCust" href="#">Manage TCS</a>'
											+ '</li>';
									content += '</ul>';
									$("#suggesstion-box3_").show();
									$("#suggesstion-box3_").html(content);
								}
							}
						},
						error : function(data) {
							console.log(data);
						}
					})
		}

	}
	
	function selectAutocompleteValuee1() {

		$("#tcsId").val("");

		$("#tcsName").val("");
		$("#custGSTNoo1").val("");
		$("#taxTypee1").val("");
		$("#search").val("");
		$("#search").attr('data-procat', "");
		$("#suggesstion-box3_").hide();

	}

	function selectAutocompleteValue3(tcsId, taxName,rateId, taxType) {

		

		$("#tcsId").val(tcsId);
		$("#tcsName").val(taxName);
		$("#tcsValue").val(rateId);
		$("#taxTypee1").val(taxType);
			$("#search").val(taxName);
			$("#search").attr('data-procat', tcsId);
			$("#suggesstion-box3_").hide();
		//	hideShowS();
			//checkForDuplicate(key,counter);
tcsCalculation();
//tcsAmountCalculation();
		
	}
	function AddTCS() {

		$('#manageTCsModel').modal('show');

	}
	
	function addtcsInfo1() {
		var obj = {};
		var Id = $("#tcsId").val();

		obj.salespersonId = $("#tcsId").val();
		obj.collection = $("#collection").val();
		obj.rateId = $("#rateId").val();
		obj.taxName = $("#taxName").val();
		

		$.ajax({
			type : "POST",
			url : "view-quotation-add-tcs",
			contentType : "application/json",
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "Success") {
					//getSalessPersonList();
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');

					//$("#myGrid").show();
					//$("#salespersonDetails").hide();
					$('#manageTCsModel').modal('hide');

				}
			},
			error : function(data) {
			}
		})

	}
	
	
	function checkEmpty() {
		var infofileName = true;
		$(".formValidation").remove();
		$('.docNoclss').each(function() {
			if ($(this).val() == null || $(this).val() == "") {
				infofileName = false;
				validationModal("Document Name Required", $(this).attr('id'));
			}
		});

		var mulDocInfo = true;
		if (infofileName) {
			$('#doctbodyData > tr').each(function() {
				if ($(this).closest('tr').find('.imageName').text()) {
					mulDocInfo = true;
				} else {
					mulDocInfo = false;
					$("#messageParagraph").text("Please Choose a File ");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					return false;
				}

			});
		}
		if (infofileName && mulDocInfo) {
			addMore1()
		}
	}
	
	function saveMultiFile(event) {
		var AssignItemQty = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var currentFldId = "#" + currentFldId;

		var uFile = $(currentFldId)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".");

		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_" + counter).html("");
		if (extension[1] != null && extension[1] != "") {
			$("#uploadHidden_" + counter).val('');
		}
		if (extension[1] == "jpg" || extension[1] == "png" || extension[1] == "jpeg") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></div>";
		} else if (extension[1] == "pdf") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o'></i> </a></div>";
		} else if (extension[1] == "xls" || extension[1] == "xlsx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-excel-o'></i></a></div>";
		} else if (extension[1] == "doc" || extension[1] == "dox"
				|| extension[1] == "docx") {
			var LightImg = "<div class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-word-o'></i></a></div>";
		} else {
			var LightImg = "<div class='uploadicon position-l '> </div>";
		}
		var dltImg = "<i class='ti-close position-l rmv1'></i>";
		$("#uploadedBillDiv_" + counter).html(LightImg);
		$("#imageName_" + counter).html(fileName);
		$("#dltImage_" + counter).html(dltImg); 
	 
		$("#dltImage_" + counter).addClass("custom-file-delete");
		$("#clickImg_" + counter).removeClass("ti-plus");
		$("#clickImg_" + counter).addClass("ti-pencil");

	}
	function addMore1() {

		var lengthOfTableRow = $("#doctbodyData").children('tr').length;
		var cloneHtml = $("#docTbl tbody tr:first").clone();

		$("#docTbl tbody").append($("#docTbl tbody tr:first").clone());
		$("#myTable tbody tr td:last").html("");
		//var addMore = '<button type="button" class="btn btn-primary tr_clone_add" name="add" onclick="addMore1();"><span class="ti-plus"></span></button>&nbsp;'

		$("#docTbl tbody tr:last").find(".documentclss").val("");
		$("#docTbl tbody tr:last").find(".docNoclss").val("");
		$("#docTbl tbody tr:last").find(".documentclssup").val("");
		$("#docTbl tbody tr:last").find(".uploadedBillCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").val('');
		$("#docTbl tbody tr:last").find(".imageName").empty();
            var j =0;
		$("#docTbl > #doctbodyData > tr").each(function(i) {

			var selectInput = $(this).find('select');
			var textInput = $(this).find('input');
			var fileInput = $(this).find('file');
			var divInput = $(this).find('div');
			var label = $(this).find('label');
			var iInput = $(this).find('i');
			selectInput.eq(0).attr('id', "docid_" + i);

			textInput.eq(1).attr('id', "docnoid_" + i);
			textInput.eq(2).attr('id', "uploadDoc_" + i);
			label.eq(1).attr('for', "uploadDoc_" + i);
			textInput.eq(3).attr('id', "uploadHidden_" + i);
			divInput.eq(4).attr('id', "uploadedBillDiv_" + i);
			divInput.eq(5).attr('id', "imageName_" + i);
			divInput.eq(6).attr('id', "dltImage_" + i);
			iInput.eq(0).attr('id', "clickImg_" + i); 
			j++;
		}) 
		$("#clickImg_" + (j-1)).removeClass("ti-pencil");
		$("#clickImg_" + (j-1)).addClass("ti-plus");

	}
	
	function checkForDuplicateEntry(event) {
		var document = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var count = 0;
		$(".docNoclss").each(function() {
			if (document == $(this).val()) {
				count++;
			}
		})
		if (count >= 2) {
			$("#messageParagraph").text("Document Name Already Entered");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');

			return false;
		} else {
			return true;
		}

	}
	function openDeleteConfirm() {
		 $("#dltValue").val("");
			$('#deleteAttachment').modal('show');
		}
		//for closeing modal box for dlt ind product
		function closeDeleteConfirm() {
			$("#dltValue").val("");
			$('#deleteAttachment').modal('hide');
		}
		
		function deletAttachmentRow(){
			var lengthOfTableRow1 = 0;
			$("#docTbl > #doctbodyData > tr") .each( function() {
					lengthOfTableRow1 = lengthOfTableRow1 + 1;
			})
			var id = $("#dltValue").val();
			$("#"+id).closest('tr').remove();
			closeDeleteConfirm();
			if (lengthOfTableRow1 == 1) {
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
						+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
						+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
						+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
						+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
						+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0"></div> </td>'
						+ '</tr>';
						$("#doctbodyData").append(tbl);
				}
		}
		
		
	function downloadDetails() { 
			  var dataset = [];
			  gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
			        dataset.push(rowNode.data);
			    });
			  gridOptions.api.exportDataAsCsv(dataset);
			}
		
/*create PurchaseOrder*/
function purchaseOrder() {
			var selectedRows = gridOptions.api.getSelectedRows();
			var selectedRowsString = '';
			selectedRows.forEach(function(selectedRow, index) {
				if (index > 0) {
					selectedRowsString += ',';
				}
		selectedRowsString += selectedRow.quotationId;
				//selectedRowsString += selectedRow.referenceId;
			});
			var selectedRowsString1 = '';
			selectedRows.forEach(function(selectedRow, index) {
				if (index > 0) {
					selectedRowsString1 += ',';
				}
				selectedRowsString1 += selectedRow.referenceId;
			});
			if (selectedRowsString) {
				sessionStorage.setItem('activity', 'ACT0228');
				agGrid.simpleHttpRequest({
					url : "view-quotation-getOrder?id="+ selectedRowsString,
				}).then(function(data) {
					localStorage.setItem('ReqQuotationData', JSON.stringify(data));
					itemOptions.api.setRowData(data);
					window.location.href = "/sales/view-po-or-wo"
				});
			} else {
				$("#alert").modal('show');
				document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
			}
}		

		function changeDateFormat(inputDate){  // expects Y-m-d
		    var splitDate = inputDate.split('-');
		    if(splitDate.count == 0){
		        return null;
		    }
		    var year = splitDate[0];
		    var month = splitDate[1];
		    var day = splitDate[2]; 
		    return day + '-' + month + '-' + year;
		}	
function closeAllNav(){
	closeNav();
	closeNav2();
}

/* function checkNumeric(fieldId) {

	var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');

	const input = document.getElementById(fieldId);
	const position = input.selectionStart;
	if (tempVal.slice(-1) == ' ') {
		$("#" + fieldId).empty();
		tempVal = '';
	}
	$("#" + fieldId).val(tempVal);
} */
//Mobile Number validation
var mobValid1;

function mobVal1() {
    var mob = $('#custMobile').val();
    var phoneno = /^\d{10}$/;
    if (mob != '') {
        if (phoneno.test(mob)) {
        	
            $("#error9").hide();
           
            mobValid1 = true;
            return true;
        } else {
        	
            $("#error9").html(
                "please enter  10 digit mobile number  ex:7089451278");
        	 $("#error9").show();
            mobValid1 = false;
            return false;
        }
    } else {
    	 $('#custMobile').val("");
         $("#error9").hide();
         mobValid1 = true;
         return true;
    	
       /*  $("#error9").html(" Mobile No is Required");
        
        mobValid1 = false;
        return false; */
    }
}
//Whatsapp Val
var mobValid2;

function mobVal2() {
    var mob = $('#whatsApp').val();
    var phoneno = /^\d{10}$/;
    if (mob != '') {
        if (phoneno.test(mob)) {
        	
            $("#error10").hide();
           
            mobValid2 = true;
            return true;
        } else {
        	
            $("#error10").html(
                "please enter  10 digit mobile number  ex:7089451278");
        	 $("#error9").show();
            mobValid2 = false;
            return false;
        }
    } else {
    	 $('#whatsApp').val("");
         $("#error10").hide();
         mobValid2 = true;
         return true;
       /*  $("#error10").html(" Mobile No is Required");
        
        mobValid2 = false;
        return false; */
    }
}
//mob Val
var mobValid3;

function mobVal3() {
    var mob = $('#phone').val();
    var phoneno = /^\d{10}$/;
    if (mob != '') {
        if (phoneno.test(mob)) {
        	
            $("#error11").hide();
           
            mobValid3 = true;
            return true;
        } else {
        	
            $("#error11").html(
                "please enter  10 digit mobile number  ex:7089451278");
        	 $("#error11").show();
            mobValid3 = false;
            return false;
        }
    } else {
    	 $('#phone').val("");
         $("#error11").hide();
         mobValid3 = true;
         return true;
      /*   $("#error11").html(" Mobile No is Required");
        
        mobValid3 = false;
        return false; */
    }
}
//mob Val
var mobValid4;

function mobVal4() {
    var mob = $('#phone1').val();
    var phoneno = /^\d{10}$/;
    if (mob != '') {
        if (phoneno.test(mob)) {
        	
            $("#error12").hide();
           
            mobValid4 = true;
            return true;
        } else {
        	
            $("#error12").html(
                "please enter  10 digit mobile number  ex:7089451278");
        	 $("#error12").show();
            mobValid4 = false;
            return false;
        }
    } else {
    	 $('#phone1').val("");
         $("#error12").hide();
         mobValid4 = true;
         return true;
      /*   $("#error12").html(" Mobile No is Required");
        
        mobValid4 = false;
        return false; */
    }
}
//mob Val
var mobValid5;

function mobVal5() {
    var mob = $('#mobile').val();
    var phoneno = /^\d{10}$/;
    if (mob != '') {
        if (phoneno.test(mob)) {
        	
            $("#error13").hide();
           
            mobValid5 = true;
            return true;
        } else {
        	
            $("#error13").html(
                "please enter  10 digit mobile number  ex:7089451278");
        	 $("#error13").show();
            mobValid5 = false;
            return false;
        }
    } else {
    	$('#mobile').val("");
        $("#error13").hide();
        mobValid5 = true;
        return true;
       /*  $("#error13").html(" Mobile No is Required");
        
        mobValid5 = false;
        return false; */
    }
}
//Zip Code  validation 

var zipcodeValid;

	function zipcodeVal() {
					
		var zipcode = $('#zipCode').val();
				  
		  var zipcodeid = /^\d{6}(-\d{6})?$/;
		 var zipcodeid1 = /^\d{6}(-\d{5})?$/;
		    if (zipcode != '') {
				 if (zipcodeid.test(zipcode) || zipcodeid1.test(zipcode) ) {
				        	
				     $("#error14").hide();
				     zipcodeValid = true;
				      return true;
			  } else {
				      $("#error14").show();
				      $("#error14").html("Please enter a valid Zip Code No.");
				       zipcodeValid = false;
				      return false;
		}

	} else {
		 $("#error14").hide();
		  zipcodeValid = true;
		 return true;
 }

} 
	var zipcodeValid1;

	function zipcodeVal1() {
					
		var zipcode = $('#zipCode1').val();
				  
		  var zipcodeid = /^\d{6}(-\d{6})?$/;
		 var zipcodeid1 = /^\d{6}(-\d{5})?$/;
		    if (zipcode != '') {
				 if (zipcodeid.test(zipcode) || zipcodeid1.test(zipcode) ) {
				        	
				     $("#error15").hide();
				     zipcodeValid1 = true;
				      return true;
			  } else {
				      $("#error15").show();
				      $("#error15").html("Please enter a valid Zip Code No.");
				       zipcodeValid1 = false;
				      return false;
		}

	} else {
		 $("#error15").hide();
		  zipcodeValid1 = true;
		 return true;
 }

} 
	
	var mobValid6;

	function mobVal6() {
	    var mob = $('#phoneb').val();
	    var phoneno = /^\d{10}$/;
	    if (mob != '') {
	        if (phoneno.test(mob)) {
	        	
	            $("#error16").hide();
	           
	            mobValid6 = true;
	            return true;
	        } else {
	        	
	            $("#error16").html(
	                "please enter  10 digit mobile number  ex:7089451278");
	        	 $("#error16").show();
	            mobValid6 = false;
	            return false;
	        }
	    } else {
	        $("#error16").html(" Mobile No is Required");
	        
	        mobValid6 = false;
	        return false;
	    }
	}
	var zipcodeValid2;

	function zipcodeVal2() {
					
		var zipcode = $('#zipCodeb').val();
				  
		  var zipcodeid = /^\d{6}(-\d{6})?$/;
		 var zipcodeid2 = /^\d{6}(-\d{5})?$/;
		    if (zipcode != '') {
				 if (zipcodeid.test(zipcode) || zipcodeid2.test(zipcode) ) {
				        	
				     $("#error17").hide();
				     zipcodeValid2 = true;
				      return true;
			  } else {
				      $("#error17").show();
				      $("#error17").html("Please enter a valid Zip Code No.");
				       zipcodeValid2 = false;
				      return false;
		}

	} else {
		 $("#error17").hide();
		  zipcodeValid2 = true;
		 return true;
 }

} 
	
	var zipcodeValid3;

	function zipcodeVal3() {
					
		var zipCode1s = $('#zipCode1s').val();
				  
		  var zipcodeid2 = /^\d{6}(-\d{6})?$/;
		 var zipcodeid3 = /^\d{6}(-\d{5})?$/;
		    if (zipCode1s != '') {
				 if (zipcodeid2.test(zipCode1s) || zipcodeid3.test(zipCode1s) ) {
				        	
				     $("#error18").hide();
				     zipcodeValid3 = true;
				      return true;
			  } else {
				      $("#error18").show();
				      $("#error18").html("Please enter a valid Zip Code No.");
				       zipcodeValid3 = false;
				      return false;
		}

	} else {
		 $("#error18").hide();
		  zipcodeValid3 = true;
		 return true;
 }

} 
	
	
	function retriveDraft(){
		$('#deleteDraft').attr("disabled", true);
		$('#quotationDraftModel').modal('show');
		agGrid.simpleHttpRequest({
			url : "view-quotation-draft-ajax"
		}).then(function(data) {
			var len = data.length;
			
			$('#totalDraftList').find('span').html(len);
			gridDraftOptions.api.setRowData(data);
		});
	}
	function cancelDraft(){
		$('#quotationDraftModel').modal('hide');
	}
	
	function onQuickFilterDraftChanged() {
		$(".ti-search srchicon").hide();
		gridDraftOptions.api
				.setQuickFilter(document.getElementById('quickFilterDraft').value);
	}

	function cancelBarDraft() {
		var id = document.getElementById("closeKeyDraft");
		id.style.display = "block";

		if ($('#quickFilterDraft').val() == null || $('#quickFilterDraft').val() == "") {
			id.style.display = "none";
		}
	}
	
	//Edit Draft
	
	function editDraft (draftId) {
		var data = draftId.split(",");
		

		Cancel();
		
		$('#delete1').attr("disabled", true);
		$("#searchRowDiv").hide();
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#addData").show();
		$("#add").hide();
		$("#saveAsDraft").show();

		$("#Cancel").show();
		$("#save").show();
		$("#totalCandidate").hide();
		$("#dwnld").hide();
		$("#upld").hide();
		$("#addre").hide();
		$("#documentDetails").show();
		 $('.loader').show();
	 	$.ajax({
			type : "GET",
			url : "view-quotation-get-insertedid",
					success : function(response) {
						if (response.message == "success") {
						$("#quotationId").val(response.body[0].key);
						}
					},
					error : function(e) { 
					}
				});  
				
		agGrid.simpleHttpRequest({
			url : "view-quotation-draft-edit-new?draftId="+ draftId,
		}).then(
				function(data) {
					 $('.loader').hide();
					$('#quotationDraftModel').modal('hide');
					console.log(JSON.stringify(data));
					console.log('scopeMatrix========>>>>'+JSON.stringify(data[0].scopematrix));
					scopeMatrixOptions.api.setRowData(data[0].scopematrix);
					
					itemOptions.api.setRowData(data);
					$("#draftId").val(data[0].draftId);
					//$("#quotationId").val(data[0].quotationId);
				   // $("#orderType").val(data[0].orderType);
				 // alert(data[0].version)
				    // $("#version").html(data[0].version);
				
					$("#quotationDate").val(data[0].quotationDate);
					$("#qutValidDate").val(data[0].qutValidDate);
					$("#subject").val(data[0].subject);
					//$("#orderType").val(data[0].orderType);
					$("#custName").val(data[0].custName);
					$("#custId").val(data[0].custId);
					$("#grandTotal").val(data[0].grandTotal);
					$("#qSGST").val(data[0].qSGST);
					$("#qCGST").val(data[0].qCGST);
					$("#subTotal").val(data[0].subTotal);
					$("#qIGST").val(data[0].qIGST);
					$("#taxType").val(data[0].taxType);
					$("#quotType").val(data[0].quotType);
					$("#shippingHiddenId").val(data[0].shippingHiddenId);
					if(data[0].quotType=="QTM0001"){
						$("#main_content1").hide();
					}else{
						$("#main_content1").show();
					}
					//getAddressDetails(data[0].custId);
					getAddressDetails(data[0].custId,data[0].shippingHiddenId);
					CKEDITOR.instances['qutDescription'].setData(data[0].qutDescription);
					CKEDITOR.instances['termCondition'].setData(data[0].termCondition);
					
					//var lastVersion=(data[0].lastVersion);
					//var version=(data[0].version);
					//var numb=parseFloat(version);
					//$("#version").parseFloat(data[0].version);
					//alert(version)
					//alert(numb)
		/*  if(version<=lastVersion)	{
				$("#save").hide();
				$("#newItem").hide();
				$("#saveTableData1").hide();
				$("#saveAttachmentBtn").hide();
			}	else{
				$("#save").show();
				$("#newItem").show();
				$("#saveTableData1").show();
				$("#saveAttachmentBtn").show();
			} 
			 */
			
					$("#doctbodyData").empty();

					console.log(JSON.stringify(data));
					console.log('documentList========>>>>'+JSON.stringify(data[0].documentList));
					if (data[0].documentList != null && data[0].documentList != "") {
						
						for (var i = 0; i < data[0].documentList.length; i++) {
							
							console.log('in for loop documentList========>>>>'+JSON.stringify(data[0].documentList[i].documnentName));
						
							

							var tbl = '<tr>'
									+ '<td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
									+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option>  </select> </div></td>'
									+ '<td><div class="form-group"> <input type="text" value="'+data[0].documentList[i].documnentName+'" class="form-control docNoclss" id="docnoid_'+i+'"> </div></td>'
									+ '<td><div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_'+i+'" id="uploadFor_'+i+'"> <i class="ti-pencil" id="clickImg_'+i+'"></i> </label>'
									+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_'
									+ i
									+ '"name="userImage" onchange="saveMultiFile(event)" /> </div>'
									+ '</div> <input type="hidden" id="uploadHidden_'+i+'" value="'+data[0].documentList[i].fileName+'" class="uploadHidCls">'
									+ '<div id="uploadedBillDiv_'+i+'" align="center" class="uploadedBillCls"><div class="uploadicon position-l">'
									+ data[0].documentList[i].action
									+ '</div></div>'
									+ '<div id="imageName_'+i+'" class="imageName">'
									+ data[0].documentList[i].fileName
									+ '</div>'
									+ '<input type="hidden" id="editId_'+i+'" value="'+ data[0].documentList[i].vendorRfqId+'">'
									+ '<div id="dltImage_'+i+'" class="custom-file-delete"><i class="ti-close position-l rmv1" onclick="openDeleteConfirm()"></i></div> </td>'
									+ '</tr>';

							$("#doctbodyData").append(tbl);
						}
					} else {
						var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
								+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
								+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_"></div></td>'
								+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
								+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
								+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" ></div><input type="hidden" id="editId_0></td>'
								+ '</tr>';
						$("#doctbodyData").append(tbl);
					}


				});

	}
	
	function deleteDraft() {
		  $('.loader').show();
		var selectedRows = gridDraftOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
			selectedRowsString += selectedRow.draftId;
		});
		if (selectedRowsString) {
			var item = {};
			item.draftId = selectedRowsString;

			$.ajax({
				type : "POST",
				url : "view-quotation-draft-delete",
				dataType : "json",
				contentType : "application/json",
				data : JSON.stringify(item),
				success : function(response) {

					//$('#deleteQuot').modal('hide');

					$('#deleteDraft').attr("disabled", true);
					
					if (response.message == "Success") {
						  $('.loader').show();
						agGrid.simpleHttpRequest({
							url : "view-quotation-draft-ajax"
						}).then(function(data) {
							var len = data.length;
							
							$('#totalDraftList').find('span').html(len);
							gridDraftOptions.api.setRowData(data);
						});

					} else {

					}
				},
				error : function(data) {
					console.log(data)
					  $('.loader').show();
				}
			})
		}

	}
	
	//Create New Version 

	function revision(){
	
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
	selectedRowsString += selectedRow.quotationId;
			//selectedRowsString += selectedRow.referenceId;
		});
		var selectedRowsString1 = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString1 += ',';
			}
			selectedRowsString1 += selectedRow.referenceId;
		});
		if (selectedRowsString) {
			sessionStorage.setItem('activity', 'ACT0079');
			agGrid.simpleHttpRequest({
				url : "view-quotation-revision-new?id="+ selectedRowsString,
			}).then(function(data) {
				localStorage.setItem('ReqRevisionData', JSON.stringify(data));
				itemOptions.api.setRowData(data);
				window.location.href = "/sales/view-quotation"
			});
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}
	
		

	}
	
	function copyQuotation(){
		var selectedRows = gridOptions.api.getSelectedRows();
		var selectedRowsString = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
			}
	selectedRowsString += selectedRow.quotationId;
			//selectedRowsString += selectedRow.referenceId;
		});
		var selectedRowsString1 = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString1 += ',';
			}
			selectedRowsString1 += selectedRow.referenceId;
		});
		if (selectedRowsString) {
			sessionStorage.setItem('activity', 'ACT0079');
			agGrid.simpleHttpRequest({
				url : "view-quotation-revision-new?id="+ selectedRowsString,
			}).then(function(data) {
				localStorage.setItem('ReqCopyData', JSON.stringify(data));
				itemOptions.api.setRowData(data);
				window.location.href = "/sales/view-quotation"
			});
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}
	
	}
	

	function AddProduct() {

		$('#addItemModel').modal('show');
		$(".formValidation").remove();
		$("#mainItem").hide();
		$("#profile").hide();
		$("#prCategoryId").val("");
		$("#tempCategoryId").val("");
		$("#prLevelId").val("");
		$("#productId").val("");
		$("#catDesc").text("");
		$("#vertical").empty();
		var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
		$("#vertical").append(img);
		$("#productName").val("");
	    $("#brand").val("");
	    $("#mode").val("");
	    $("#hsnCodeProduct").val("");
	    $("#sicCode").val("");
	    //$("#imgemp").val("");
	    $("#prodStatus").prop("checked",false);
	    closeNavSku();
	    
	    agGrid.simpleHttpRequest({
			url : 'view-quotation-get-sku-by-product?id=0'
		}).then(function(data) {
			console.log(data)
			skuOptions.api.setRowData(data);
			$("#skuPurchase").empty();
			$("#skuPurchase").append("<option value>Select</option>");
		});
	}
	function cancelItemModel() {
		$('#addItemModel').modal('hide');
		}
	
	function viewMasterData(){
		agGrid.simpleHttpRequest({
			url : 'view-quotation-get-sku-listing?type='+'Sales'
		}).then(function(data) {
			var len = data.length;
			$('#totalReq').find('span').html(len);
			console.log(data)
			gridOptionsProduct.api.setRowData(data);
		});
	}
	
</script>
<script>
$(document).ready(function() {
	$('#mainItem').hide();
	  $('#deletess').attr("disabled", true);
	 
	  $('#deletes').attr("disabled", true);
	  $('#deleteproduct').attr("disabled", true);
	  
	 
	
	$('#vertical').lightSlider({
		gallery : true,
		item : 1,
		vertical : true,
		verticalHeight : 214,
		vThumbWidth : 50,
		thumbItem : 6,
		thumbMargin : 4,
		slideMargin : 0
	});
});
</script>
<script>

function openNavItem() {
	$(".formValidation").remove();
	var productId = $("#productId").val();
	var productName = $("#productName").val();
	
	$("#skudiv").hide();
	$("#skuPrdId").text(productId);
	$("#isEdit").val("");
	$("#skuId").val("");
	$("#model").val("");
	$("#manufacture").val(productName);
	$("#variationType").val("");
	$("#variationValue").val("");
	$("#itemUnit").val("");
	$("#salePrice").val("0");
	$("#saleTax").val("");
	$("#saleCess").val("");
	$("#area").val("");
	$("#description").val("");
	document.getElementById("mySidenavItem").style.cssText = "width: 30%; position: absolute; right:-10px; overflow: hidden; height:auto;bottom:4px;";

	document.getElementById("mainItem").style.width = "70%";
}


function closeNavSku() {
	$("#isEdit").val("");
	document.getElementById('skuId').readOnly = false;
	$("#skuId").val("");
	$("#model").val("");
	$("#manufacture").val("");
	$("#variationType").val("");
	$("#variationValue").val("");
	$("#itemUnit").val("");
	$("#salePrice").val("");
	$("#saleTax").val("");
	$("#saleCess").val("");
	$("#area").val("");
	$("#description").val("");
	document.getElementById("mySidenavItem").style.width = "0";
	document.getElementById("mainItem").style.width = "100%";
}
 



function onSelectionChangedsku(){
	var selectedRows =skuOptions.api.getSelectedRows();

	var rowCount = 0;
	selectedRows.forEach(function(i) {
		rowCount = rowCount + 1;
	});
	if (rowCount > 0) {
	        $('#deletess').attr("disabled", false);
	        $('#newBtn2').attr("disabled", true);
			
	}else{
		    $('#deletess').attr("disabled", true);
		    $('#newBtn2').attr("disabled", false);
		
	}
}


function profilecancelbtn(){
	$('#addItemModel').modal('hide');
	deleteFile();
	$("#newId").show();
	$(".btn-hs").show();
	$("#profile").hide();
	$("#productCategoryCBDiv").attr("df","0");
	$("#prCategoryId").val("");
	$("#tempCategoryId").val("");
	$("#prLevelId").val("");
	$("#catDesc").text("");
	$("#vertical").empty();
	var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
	$("#vertical").append(img);
	viewMasterData();
	
}

function openDetailss (id) {
	//$("#skudiv").show();
	$('.formValidation').remove();
	//newPage();
	
	$("#mainItem").show();
	$("#productId").val("");
	$("#productName").val("");
	$("#brand").val("");
	$("#mode").val("");
	$("#prodStatus").prop("checked",false);
	$("#prCategoryId").val("");
	$("#tempCategoryId").val("");
	$("#prLevelId").val("");
	$("#catDesc").text("");
	
	profileSelect();
	if(id) {
		$('.loader').show();
		$.ajax({
			type : "POST",
			url : "view-quotation-get-product-details",
			dataType : 'json',
			contentType : 'application/json',
			data : id,
			success : function(response) {
				if (response.message == "success") {
					$('.loader').hide();
					//console.log(response);
					$("#productheadId").html(response.body.productId);
					$("#productId").val(response.body.productId);
					$("#productName").val(response.body.productName);
					$("#brand").val(response.body.brand);
					$("#mode").val(response.body.mode);
					if(response.body.productStatus == "1") {
						$("#prodStatus").prop("checked",true);
					} else {
						$("#prodStatus").prop("checked",false);
					}
					
					$("#prCategoryId").val(response.body.productCategory);
					$("#catDesc").text(response.body.productCategoryText);
					$("#hsnCode").val(response.body.hsnCode);
					//$("#sicCode").val(response.body.sicCode);
			
					$('#nextproduct').hide();
		            $('#productSave').show();
					$('#imgemp').attr('src', '');
					if(response.body.pImgName!=null && response.body.pImgName!="") {
						$('#imgemp').attr('src', response.body.pImgName);
					} else {
						$('#imgemp').attr('src', '../assets/images/noimage.jpg');
					}
					
					agGrid.simpleHttpRequest({
						url : 'view-quotation-get-sku-by-product?id='+response.body.productId
					}).then(function(data) {
						console.log(data)
						skuOptions.api.setRowData(data);
						
						$("#skuPurchase").empty();
						$("#skuPurchase").append("<option value>Select</option>");
						for(var i = 0; i < data.length; i++) {
							
							$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
						}
					});
 
					
				}
			}, error : function(data) {
				console.log(data)
				$('.loader').hide();
			}
		});
	}
}
</script>
<script type="text/javascript">
$(document).ready(function() {
	
	
    $('.collapse').on('show.bs.collapse', function() {
        $(this).siblings('.panel-heading').addClass('active');
    });

    $('.collapse').on('hide.bs.collapse', function() {
        $(this).siblings('.panel-heading').removeClass('active');
        closeNavSku();
    });
    
    $("#categoryBtn").click(function(){
    	
    	//closeModal();
    	$("#myModall").modal('show');
    	getCategoryList();
    	
    })
    
    $("#saveSKUData").click(function(){
    	
    	obj = {};
    	
    	obj.isEdit = $("#isEdit").val();
    	obj.productId = $("#productId").val();
    	obj.sku = $("#skuId").val();
    	obj.model = $("#model").val();
    	obj.manufacture = $("#manufacture").val();
    	obj.variationType = $("#variationType").val();
    	obj.variationValue = $("#variationValue").val();
    	obj.unit = $("#itemUnit").val();
    	var price = $("#salePrice").val();
    	price = price.replaceAll(",","");
    	obj.salePrice = price;
    	obj.saleTax = $("#saleTax").val();
    	obj.saleCess = $("#saleCess").val();
    	obj.area = $("#area").val();
    	obj.description = $("#description").val();
    	$(".formValidation").remove();
		allValid = true;
	
		if( obj.manufacture == null || obj.manufacture == ""){
			allValid = false;
			validationModal("Item Name Required","manufacture");
		} 

		
		if( obj.unit == null || obj.unit == ""){
			var mode = $("#mode").val();
			if (mode=="PMODE00004"){
				allValid = true;
			}else{
				allValid = false;
				validationModal("UOM Required","itemUnit");
			}

		} 
		if( obj.salePrice == null || obj.salePrice == ""){
			allValid = false;
			validationModal("Sale Price Required","salePrice");
		} 

    	
		if(allValid) {
			submitProductDetails(obj);
		}
    	
    })
    
 $("#saveSaddressData").click(function(){
			var customerId = $("#customerId").val();
		  
 	    	obj = {};
 	    	
 	    	obj.shippingId = $("#shippingId").val();
 	    	obj.customerId = $("#customerId").val();
 	    	obj.country1 = $('#country1').val();
 			obj.states1 = $('#states1').val();
 			obj.city1 = $('#city').val();
 			obj.street11 = $('#street11').val();
 			obj.street21 = $('#street21').val();
 			obj.zipCode1 = $('#zipCode1').val();
 			obj.phone1 = $('#phone1').val();
 			obj.fax1 = $('#fax1').val()
 			//obj.defaultStatus= $("input[name='isDefault']:checked").val();
 			var ds=$("input[name='isDefault']:checked").val();
 			if(ds=='1'){
 				obj.defaultStatus='1';
 			}else{
 				obj.defaultStatus='0';	
 			}
 	    	$(".formValidation").remove();
 			allValid = true;
 		
 			if( obj.country1 == null || obj.country1 == ""){
 				allValid = false;
 				validationModal("Select County","country1");
 			} 
 	
 	    	
 			if(allValid) {
 				
 				submitAddressDetails(obj);
 			}
 	    	
 	    })
    
    $("#productSave").click(function(){
    	  
    	var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});  
         	 
        })
    
	
          obj = {};
   
            obj['productId'] = $("#productId").val();
            obj['productName'] = $("#productName").val();
            obj['brand'] = $("#brand").val();
            obj['mode'] = $("#mode").val();
            obj['hsnCode'] = $("#hsnCodeProduct").val();
            obj['sicCode'] = $("#sicCode").val();
            obj['productStatus'] = $("input[name='isActive']:checked").val();
            obj['productCategory'] = $("#prCategoryId").val();
            obj['productCategoryText'] = $("#catDesc").text();
            obj['imgList'] = data;
            $(".formValidation").remove();
           allPValid = true;
    		if( $("#productName").val() == null || $("#productName").val() == ""){
    			allPValid = false;
    			validationModal("Product Name Required","productName");
    		} 
    		/* if( $("#brand").val() == null || $("#brand").val() == ""){
    			allPValid = false;
    			validationModal("Brand Required","brand");
    		}  */
    		if( $("#mode").val() == null || $("#mode").val() == ""){
    			allPValid = false;
    			validationModal("Mode Required","mode");
    		} 
    		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
    			allPValid = false;
    			validationModal("HSN/SAC Code Required","hsnCodeProduct");
    		} 
    		var productId = $('#productheadId').html();
            if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            			submitProduct(obj);
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	submitProduct(obj);
              }
            	
            	
            }
         
    })
    
    $("#selectCategory").click(function(){ 
    	var id = $("#tempCategoryId").val();
		var lvl = $("#prLevelId").val();
		
		if(id && lvl) {
			$("#prCategoryId").val(id);
			if(lvl == 'L1') {
				var textDesc = $("#lbl_"+id).text();
				$("#catDesc").text(textDesc);
			} else {
				var res = lvl.substring(1, 1000000);
				
				var lastText = $("#lbl_"+id).text();
				var textDesc = "";
				for(i = res; i > 1; i--) {
					var pUL = $("#"+id).attr("data-node-pid");
					//pUL = pUL.substring(3, 10000000000000);
					var newText = $("#lbl_"+pUL).text();
					console.log(newText+" "+i)
					textDesc =  newText+" > "+textDesc ; 
					id = pUL;
				}
				textDesc = textDesc + lastText;
				$("#catDesc").html(textDesc);
			}
		}
		$("#myModall").modal("hide");
		closeModall();
    })
    
    $("#skuPurchase").change(function(){
    	var sku = $(this).val();
    	$("#variantTypeSpan").text("");
		$("#variantValueSpan").text("");
    	if(sku) {
    		obj = {};
    		obj.key = $("#productId").val();
    		obj.name = sku;
    		$.ajax({
				type : "POST",
				url : "view-quotation-get-variant-dtls",
				dataType : 'json',
				contentType : 'application/json',
				data : JSON.stringify(obj),
				success : function(response) {
					if (response.message == "success") {
						$("#variantTypeSpan").text(response.body.key);
			    		$("#variantValueSpan").text(response.body.name);
					}
				}, error : function(data) {
					console.log(data)
				}
    		});
    	} else {
    		$("#variantTypeSpan").text("");
    		$("#variantValueSpan").text("");
    	}
    })
    
});


 

var columnSKUDefs = [{
    headerCheckboxSelection: true,
    headerCheckboxSelectionFilteredOnly: true,
    checkboxSelection: true,
    width: 10,
    sortable: false,
    filter: false,
    resizable: true,
    pinned: 'left',
},
{
    headerName: "SKU",
    field: "sku",
    pinned: 'left',
    cellRenderer: function(params) {
        return '<a onclick=openSKUDetails("' + params.data.sku + '","'+params.data.productId+'") href="javascript:void(0)">' + params.data.sku + '</a>';
    }
},
{
    headerName: "Manufacture Item",
    field: "manufacture",
    width: 200,
},
{
	headerName: "Description",
    field: "description",
    width: 200,
},
{
	   headerName: "Model/Size",
    field: "model"
},
{
	  headerName: "Area",
	    field: "area"
	},
	{
    headerName: "Variation Type",
    field: "variationType"
},
{
    headerName: "Variation Value",
    field: "variationValue"
},
{
    headerName: "UOM",
    field: "unit"
},
{
    headerName: "Unit Sale Price",
    field: "sPrice",
    cellStyle: {textAlign: 'right'}
}, 
{
    headerName: "Create Date",
    field: "createdDate",
    cellStyle: {textAlign: 'center'}
}
];



var skuOptions = {
columnDefs: columnSKUDefs,
rowSelection: 'multiple',
defaultColDef: {
	sortable: true,
    filter: true,
    resizable: true,
    width: 150,
    height: 10
},
rowSelection: 'multiple',
suppressRowClickSelection : true,
onSelectionChanged: onSelectionChangedsku 
};




function onQuickFilterChanged() {
	gridOptions.api.setQuickFilter(document.getElementById('quickFilter').value);
}
function cancelBar() {
	var id = document.getElementById("closeKey");
	id.style.display = "block";

	if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
		id.style.display = "none";
	}
}


function totalProductCSV() {
	var dataset = [];
	gridOptionsProduct.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		dataset.push(rowNode.data);
	});
	gridOptionsProduct.api.exportDataAsCsv(dataset);
}

function skuProductCSV() {
	var dataset = [];
	skuOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		dataset.push(rowNode.data);
	});
	skuOptions.api.exportDataAsCsv(dataset);
}
 
/* function deleteProduct() {
	var selectedRows = gridOptions.api.getSelectedRows();
	var dataset = [];
	selectedRows.forEach(function (selectedRow, index) {
		console.log(selectedRow.productId)
		console.log(selectedRow.skuId)
		obj = {};
		
		obj.key = selectedRow.productId;
		obj.name = selectedRow.skuId;
		dataset.push(obj);
	});
	
	if(dataset.length > 0) {
		$("#delete").modal('show');
	}
} */

function deleteskuDtls(){
	$("#deleteSKU").modal('show');
}
function cancelModalSKUDtls(){
	$("#deleteSKU").modal('hide');
}
function deleteskud(){

	 var selectedNodes = skuOptions.api.getSelectedNodes();
	 var selectedData = selectedNodes.map(node => node.data);
	 sku= selectedData.map(node => node.sku);
	// alert(sku)
		var id = $('#productId').val();
		
	$.ajax({
			type : "GET",
			url : "view-quotation-deletesku?id="+ sku,
			success : function(response) {
			if (response.message == "Success") {
				
				$("#deleteSKU").modal('hide');
				 $('#newBtn2').attr("disabled", false);
				 $('#deletess').attr("disabled", true);
		
				
				agGrid.simpleHttpRequest({
					url : 'view-quotation-get-sku-by-product?id='+ id
				}).then(function(data) {
					console.log(data)
					skuOptions.api.setRowData(data);
					
					$("#skuPurchase").empty();
					$("#skuPurchase").append("<option value>Select</option>");
					for(var i = 0; i < data.length; i++) {
						
						$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
					}
				});
				closeNavSku();
				cancelModalSKUDtls();
			}
			},
			error : function(data) {
			console.log(data);
			
			}
		})
	
}
function deletepurchaseDtls(){
 $("#deleteSKUPrd").modal('show');

}
function cancelModalSKUPrdDtls(){
	$("#deleteSKUPrd").modal('hide');
}
 
function openSKUDetails(skuid, id) {
	$(".formValidation").remove();
	$("#isEdit").val("");
	document.getElementById('skuId').readOnly = true;
	
	$("#skuId").val("");
	$("#model").val("");
	$("#manufacture").val("");
	$("#variationType").val("");
	$("#variationValue").val("");
	$("#itemUnit").val("");
	$("#salePrice").val("");
	$("#saleTax").val("");
	$("#saleCess").val("");
	$("#area").val("");
	$("#description").val("");
	openNavItem();
	if(id) {
		$('.loader').show();
		obj = {};
		
		obj.key = id;
		obj.name = skuid;
		
		$.ajax({
			type : "POST",
			url : "view-quotation-get-sku-details",
			dataType : 'json',
			contentType : 'application/json',
			data : JSON.stringify(obj),
			success : function(response) {
				if (response.message == "success") {
					$('.loader').hide();
					$("#skudiv").show(); 
					$("#isEdit").val(response.body.isEdit);
					$("#skuId").val(response.body.sku);
					$("#model").val(response.body.model);
					$("#manufacture").val(response.body.manufacture);
					$("#variationType").val(response.body.variationType);
					$("#variationValue").val(response.body.variationValue);
					$("#itemUnit").val(response.body.unit);
					$("#salePrice").val(response.body.salePrice);
					$("#saleTax").val(response.body.saleTax);
					$("#saleCess").val(response.body.saleCess);
					$("#area").val(response.body.area);
					$("#description").val(response.body.description);
				}
			}, error : function(data) {
				console.log(data)
				$('.loader').hide();
			}
		});
	}
}


function closeModall() {
	$("#myModall").modal("hide");
	$("#myModall").modal("empty");
}

function submitProduct(dataset) {
	$('.loader').show();
	$("body").addClass("overlay");
    console.log(dataset)
    $.ajax({
    	 type: "POST",
         url: "view-quotation-products-save",
         dataType: 'json',
         contentType: 'application/json',
         data: JSON.stringify(dataset),
        success: function(response) {
            if (response.message == "Success") {
            	$('.loader').hide();
            	$("body").removeClass("overlay");
            	//returnPage();
				
				var productIdd = $('#productId').val();
				if(productIdd!=""){
					$('.loader').hide();
	            	$("body").removeClass("overlay");
					profilecancelbtn();
				}else{
				
            	$('.loader').hide();
            	$("body").removeClass("overlay");
            	/* $("#messageParagraph").text("Data Saved Successfully");
            	$("#msgOkModal").removeClass("btn3");
            	$("#msgOkModal").addClass("btn1");
            	$("#msgModal").modal('show'); */
            	$("#productId").val(response.body.productId);
            	$("#productheadId").html(response.body.productId);
            	//$("#productName").val(response.body.productName);
            	//
            	$("#mainItem").show();
            	$("#nextproduct").hide();
            	$("#productSave").show();
				}
            } else {
            	$('.loader').hide();
            	$("body").removeClass("overlay");
                swal({
                    title: response.code,
                    text: response.message,
                    type: "warning"
                })
            }
        },
        error: function(response) {
        	$('.loader').hide();
        	$("body").removeClass("overlay");
            console.log(response);
        }
    }) 
}

function submitProductDetails(dataset) {
    console.log(dataset)
    $('.loader').show();
    $.ajax({
    	 type: "POST",
         url: "view-quotation-save-sku-dtls",
         dataType: 'json',
         contentType: 'application/json',
         data: JSON.stringify(dataset),
        success: function(response) {
            if (response.message == "Success") {
            	$('.loader').hide();
            	closeNavSku();
            	//$("#addItemModel").modal('hide');
            	var productId = $("#productId").val();
            	agGrid.simpleHttpRequest({
					url : 'view-quotation-get-sku-by-product?id='+productId
				}).then(function(data) {
					console.log(data)
					skuOptions.api.setRowData(data);
					
					$("#skuPurchase").empty();
					$("#skuPurchase").append("<option value>Select</option>");
					for(var i = 0; i < data.length; i++) {
						$("#skuPurchase").append("<option value='"+data[i].sku+"'>"+data[i].sku+"</option>");
					}
				});
            	
            } else {
                swal({
                    title: response.code,
                    text: response.message,
                    type: "warning"
                })
            }
        },
        error: function(response) {
            console.log(response);
            $('.loader').hide();
        }
    })
}
 

function toDataUrl(url, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onload = function() {
        var reader = new FileReader();
        reader.onloadend = function() {
            callback(reader.result);
        }
        reader.readAsDataURL(xhr.response);
    };
    xhr.open('GET', url);
    xhr.responseType = 'blob';
    xhr.send();
}
 
function getCategoryList() {
	$('.loader').show();
	$("body").addClass("overlay");
	$("#productDiv").modal("show");
	$.ajax({
        type: "POST",
        url: "view-quotation-get-total-list",
        dataType: "json",
        contentType: "application/json",
        success: function(response) {
        	if (response.message == "Success") {
        		$("#costCeneterCBDiv").empty();
            	for(var i = 0; i < response.body.length; i++) {
            		var row = "";
            		if(response.body[i].categoryId == response.body[i].parentId) {
            			if(response.body[i].nodeCount > 0) {
            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
            			} else {
            				row = '<tr data-node-id="'+response.body[i].categoryId+'" class="abc" id="'+response.body[i].categoryId+'">'+
    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +
    						'" name="'+ response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
            			}
            			
            		} else {
            			if(response.body[i].nodeCount > 0) {
            				row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
    						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'>'+response.body[i].categoryName+'</td></tr>';
            			} else {
            				
            					row = '<tr data-node-id="'+response.body[i].categoryId+'" data-node-pid="'+response.body[i].parentId+'" class="abc" id="'+response.body[i].categoryId+'">'+
        						'<td class="firstnode" id=lbl_'+response.body[i].categoryId+'><input class="benefitChk pc1-box" type="checkbox" id="ccCheck_'+ response.body[i].categoryId +'" value="'+ response.body[i].categoryId +'" name="'+
        						response.body[i].categoryName +'" onchange=selectCheckBoxx("'+response.body[i].categoryId+'","'+response.body[i].catLevel+'")>'+response.body[i].categoryName+'</td></tr>';
            			}
            		}
					$("#costCeneterCBDiv").append(row);
					
            	}
        		
        		var pcat = $("#prCategoryId").val();
        		$(".benefitChk pc1-box").prop("checked", false);
        		$("#ccCheck_"+pcat).prop("checked", false);
            	
            	$('.loader').hide();
            	$("body").removeClass("overlay");
            	
            	$('#basic').simpleTreeTable({
            	    expander: $('#expander'),
            	    collapser: $('#collapser'),
            	    store: 'session',
            		storeKey: 'simple-tree-table-basic'
            	});
            }
        }, error: function(data) {
        	console.log(data)
        	$('.loader').hide();
        	$("body").removeClass("overlay");
        	$("#productDiv").modal("show");
        }
	});
}

function selectCheckBoxx(id,lvl) {
	$(".benefitChk").prop("checked", false);
	$("#ccCheck_"+id).prop("checked", true);
	$("#tempCategoryId").val(id);
	$("#prLevelId").val(lvl);
	 
}

function saveFile() {
	
	var uFile = $('#fileUpload')[0].files[0];
	var fileName = $('#fileUpload').val();
console.log(uFile);
console.log(fileName);

	var lastIndex = fileName.lastIndexOf("\\");
	if (lastIndex >= 0) {
		fileName = fileName.substring(lastIndex + 1);
	}
	var iURL = URL.createObjectURL(uFile);

	$('#imgemp').attr('src', '');
	$('#imgemp').attr('src', iURL);

	var fileData = new FormData();
	fileData.append('file', uFile);
	fileData.append('path', 'none');

	$.ajax({
		type : "POST",
		url : "view-quotation-upload-fileprofuct",
		enctype : "multipart/form-data",
		contentType : false,
		data : fileData,
		processData : false,
		cache : false,
		success : function(response) {

		},
		error : function(e) {

		}
	});
	
}

function check1(fieldId) {
		var tempVal = $("#" + fieldId).val().replace(/[^0-9 ]/g, '');
			$("#" + fieldId).val(tempVal);
}
function deleteFile() {
	$('#fileUpload').val("");
	$('#imgemp').attr('src', '');
	$('#imgemp').attr('src', '../assets/images/noimage.jpg');

	var fileData = new FormData();
console.log('fileData',fileData)
	fileData.append('file', 'none');
	fileData.append('path', 'none');
console.log('File',fileData.append('file', 'none'))
console.log('Pathh',fileData.append('path', 'none'))

	$.ajax({
		type : "POST",
		url : "view-quotation-delete-fileproduct",
		enctype : "multipart/form-data",
		contentType : false,
		/* data        : fileData, */
		processData : false,
		cache : false,
		success : function(response) {
		},
		error : function(e) {

		}
	});
}


document.addEventListener('DOMContentLoaded', function() {
    var gridDiv = document.querySelector('#mySKUGrid');
    new agGrid.Grid(gridDiv, skuOptions);
});

 
function cancelModalBtn() {
	$('#delete').modal('hide');
	
}
/*  function deleteProduct() {

	$('#delete').modal('show');
}  */
	
	
	function getScopeMatrix(){
		var quotType=$("#quotType").val();
		
		if(quotType=="QTM0001"){
			
			$("#main_content1").hide();
		}else{
			$("#main_content1").show();
			//scopeMatrixes
			
			$.ajax({
				type : "GET",
				url : "view-quotation-get-scopematrix-details?quotType=" + quotType,
						success : function(response) {
							scopeMatrixOptions.api.setRowData()
							scopeMatrixOptions.api.setRowData(response); 
							headerNameChange();
						},
						error : function(e) { 
						}
					}); 
		}
	}
	
	
	function changeAddress(){
		var shippingHiddenId = $("#shippingHiddenId").val();
		
	$('#changeAddressModel').modal('show');
	var customerId = $("#custId").val();
	
 	$.ajax({
		type : "GET",
		/* url : "view-quotation-shipping-address", */
		 url : "view-quotation-shipping-address?customerId="+ customerId, 
		success : function(response) {
			if (response.code == "success") {
				var jsonData = JSON.parse(response.body);
				var allData=jsonData.ShippingAddress;
				var address=``;
				
				for (var i=0, n=allData.length;i<n;i++) {
					if(allData[i].addressId==shippingHiddenId){
						
						address=address+`<div class="col-md-12">
						<div class="radio-align">
						<span><input type="radio" id="orgDetails" 
							checked name="checkbox" onclick="selcetOption('${allData[i].addressId}')"></span> <label
							class="lbl">${allData[i].address}</label>
					    </div>
				        </div>`;
					}else{
						address=address+`<div class="col-md-12">
						<div class="radio-align">
						<span><input type="radio" id="orgDetails" 
							 name="checkbox" onclick="selcetOption('${allData[i].addressId}')"></span> <label
							class="lbl">${allData[i].address}</label>
					    </div>
				        </div>`;
					}

					}
			/* }else{
				
			} */	 
				var len = allData.length;
			    $("#shipping").html(address);
			   
			}
		},
		error : function(e) {
		}
	});
	
	}
	
	function cancelChangeAddressModel(){
		$('#changeAddressModel').modal('hide');
		}
	
	function selcetOption(addressId){
		$.ajax({
			type : "GET",
			url : "view-quotation-shipping-dataedit?addressId="+ addressId,
			success : function(response) {
				if (response.code == "success") {
					$('#changeAddressModel').modal('hide');
					var jsonData = JSON.parse(response.body);
					var allData=jsonData.ShippingAddress[0];
					
					var len = allData.length;
					$("#shippingHiddenId").val(addressId);
				    $("#con1").val(allData.countryName);
				    $("#bstate1").html(allData.stateName);
				    $("#bcity1").html(allData.city);
					$("#bstreet11").html(allData.street1);
					$("#bstreet21").html(allData.street2);
					$("#bzipcode1").html(allData.zipCode);
					$("#bphone1").html(allData.phone);
					$("#bfax1").html(allData.fax);
					
					
				}
			},
			error : function(e) {
			}
		}); 
		
		 
	}
	
    function submitAddressDetails(dataset) {
        console.log(dataset)
          $('.loader').show();
        $.ajax({
        	 type: "POST",
             url: "view-quotation-save-shipping-address",
             dataType: 'json',
             contentType: 'application/json',
             data: JSON.stringify(dataset),
            success: function(response) {
                if (response.message == "Success") {
                	$('.loader').hide();
                	closeNavAddress();
                	var customerIdd = $("#customerId").text();
    				
    				 agGrid.simpleHttpRequest({
    	       			 url : "view-quotation-shippingdetails?customerIdd=" + customerIdd,
    	       			}).then(function(data) {
    	       				var jsonData = JSON.parse(data.body);
    	       				var allData=jsonData.Data;
    	       				//var len = allData.length;
    	       				//$('#totaldispatch').find('span').html(len);
    	       				gridSAOptions.api.setRowData(allData);
    	       			});
                	
                } else {
                    swal({
                        title: response.code,
                        text: response.message,
                        type: "warning"
                    })
                }
            },
            error: function(response) {
                console.log(response);
                $('.loader').hide();
            }
        })
    }
    
	function openDetails (addressId) {
		 var editId = addressId.split(",");
		var addressId = editId[0];
		var modal = editId[1];
		$('.loader').show();
		newAddress();
		agGrid.simpleHttpRequest({
 			 url : 'view-quotation-edit-address?addressId=' + addressId,
 			}).then(function(data) {
					//$("#shipmentheadId").html(data[0].salesShipmentId);
				var jsonData = JSON.parse(data.body);
				var allData=jsonData.Data;
				console.log("hhgfvh",jsonData);
				$('.loader').hide();
				   $("#shippingId").val(allData[0].addressId);
				   $("#country1").val(allData[0].country);
					$("#states1").val(allData[0].state);
					$("#city1").val(allData[0].city);
				    $("#street11").val(allData[0].street1);
					$("#street21").val(allData[0].street2);
					$("#zipCode1").val(allData[0].zipCode);
					$("#fax1").val(allData[0].fax);
					$("#phone1").val(allData[0].phone);
					if(allData[0].defaultStatus == "1") {
						$("#addStatus").prop("checked",true);
					} else {
						$("#addStatus").prop("checked",false);
					}
					
					
				});
		

	}
	
	function deleteAddressDtls() {
		 $('.loader').show();
			var selectedRows = gridSAOptions.api.getSelectedRows();
						 var id=selectedRows[0].addressId;
						 console.log("vvv",id);
						
						$.ajax({
							type : "GET",
							url : "view-quotation-address-delete?id=" + id,
							async : false,
							success : function(response) {

								if (true) {
									 $('.loader').hide();
									$("#messageParagraph").text("Deleted Successfully");
									$("#msgOkModal").removeClass("btn3");
									$("#msgOkModal").addClass("btn1");
									$("#msgModal").modal('show');

									var customerIdd = $("#customerId").text();
									
									 agGrid.simpleHttpRequest({
						       			 url : "view-customer-shippingdetails?customerIdd=" + customerIdd,
						       			}).then(function(data) {
						       				var jsonData = JSON.parse(data.body);
						       				var allData=jsonData.Data;
						       				//var len = allData.length;
						       				//$('#totaldispatch').find('span').html(len);
						       				gridSAOptions.api.setRowData(allData);
						       			});
									
									
									$('#deleteAddressDtls').attr("disabled", true);
									
									$('#newBtn2').attr("disabled", false);
									
									
								}

							},
						});
			}
	
	
	function checkAlphabetAndSpecialChars(fieldId) {
	    var tempVal = $("#" + fieldId).val().replace(/[^a-zA-Z!@#$%^&*()_+{}\[\]:;<>,.?~\s]/g, '');
	    tempVal = tempVal.replace(/^\w/, c => c.toUpperCase());
	    
	    const input = document.getElementById(fieldId);
	    const position = input.selectionStart;	
	    
	    if (position == 1 && tempVal.charAt(0) == ' ') {
	        $("#" + fieldId).val('');
	        tempVal = '';
	    }
	    
	    $("#" + fieldId).val(tempVal);
	}
	
	function deleteProduct() {

		$('#deleteProductModel').modal('show');
	} 
	function cancelProductModelOnclick() {

		$('#deleteProductModel').modal('hide');
	} 

	function deleteProductModelOnclick() {
		//var vendorId=$("#vendorId").val();
		var selectedRows = gridOptionsProduct.api.getSelectedRows();
		var selectedRowsString = '';
		var selectedId = '';
		selectedRows.forEach(function(selectedRow, index) {
			if (index > 0) {
				selectedRowsString += ',';
				selectedId += ',';
			}
			selectedRowsString += '"' + selectedRow.productId + '"';
			selectedId += selectedRow.productId;
		});

		if (selectedRowsString) {
			$('.loader').hide();
			$("body").addClass("overlay");

			/* var item = {};
			item.vendorLocationId = selectedRowsString; */
			$.ajax({
				type : "POST",
				url : "view-quotation-products-delete?id=" + selectedRowsString
						+ "&simpleid=" + selectedId,
				success : function(response) {
					if (response.message == "success") {
						console.log(response.message)
						$("#deleteProductModel").modal('hide');
						cancelProductModelOnclick();
						$('.loader').hide();
						$("body").removeClass("overlay");
						
						viewMasterData();
						 $('#deleteproduct').attr("disabled", true);
						 $('#newBtn').attr("disabled", false);
					}
				},
				error : function(data) {
					console.log(data);
				}
			})

		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}
		/* $('#deleteVendor').modal('hide');  */

	}
	
	function profileSelect() {
		//newPage();
		$("#productheadId").html("");
		$(".formValidation").remove();
		$('#nextproduct').show();
		$('#productSave').hide();
		$('#newId').hide();
		$("#profile").show();
		$("#prCategoryId").val("");
		$("#tempCategoryId").val("");
		$("#prLevelId").val("");
		$("#productId").val("");
		$("#catDesc").text("");
		$("#vertical").empty();
		var img = '<li data-thumb="../assets/css/extend/sld-noimg.jpg"><img src="../assets/css/extend/sld-noimg.jpg" id="imgLoc" alt="Mountains" class="hvrbox-layer_bottom img-fluid"></li>';
		$("#vertical").append(img);
		$("#productName").val("");
	    $("#brand").val("");
	    $("#mode").val("");
	    $("#hsnCode").val("");
	    $("#sicCode").val("");
	    //$("#imgemp").val("");
	    $("#prodStatus").prop("checked",false);
	    closeNavSku();
	    
	    agGrid.simpleHttpRequest({
			url : 'view-quotation-get-sku-by-product?id=0'
		}).then(function(data) {
			console.log(data)
			skuOptions.api.setRowData(data);
			$("#skuPurchase").empty();
			$("#skuPurchase").append("<option value>Select</option>");
		});
	} 
	
function next(){
		
    	var data = [];
        $(".hvrbox-layer_bottom").each(function(i) {
        	var xyz = "";
        	 toDataUrl($(this).attr("src"), function(myBase64) {
        		
        		 xyz = myBase64;
        		 data.push(myBase64);
        		 console.log(xyz)
        	});  
         	 
        })
    
	
          obj = {};
   
            obj['productId'] = $("#productId").val();
            obj['productName'] = $("#productName").val();
            obj['brand'] = $("#brand").val();
            obj['mode'] = $("#mode").val();
            obj['hsnCode'] = $("#hsnCode").val();
            obj['sicCode'] = $("#sicCode").val();
            obj['productStatus'] = $("input[name='isActive']:checked").val();
            obj['productCategory'] = $("#prCategoryId").val();
            obj['productCategoryText'] = $("#catDesc").text();
            obj['imgList'] = data;
            $(".formValidation").remove();
            console.log(obj);
           allPValid = true;
    		if( $("#productName").val() == null || $("#productName").val() == ""){
    			allPValid = false;
    			validationModal("Product Name Required","productName");
    		} 
    		/* if( $("#brand").val() == null || $("#brand").val() == ""){
    			allPValid = false;
    			validationModal("Brand Required","brand");
    		}  */
    		if( $("#mode").val() == null || $("#mode").val() == ""){
    			allPValid = false;
    			validationModal("Mode Required","mode");
    		} 
    		if( $("#hsnCodeProduct").val() == null || $("#hsnCodeProduct").val() == ""){
    			allPValid = false;
    			validationModal("HSN/SAC Code Required","hsnCodeProduct");
    		} 
    		var productId = $('#productheadId').html();
            if(allPValid) {
            	if(productId!=""){
            		var rowCount = skuOptions.api.getDisplayedRowCount();
	            		if(rowCount>0){
	            		 submitProduct(obj);
	            		 $('#nextproduct').hide();
	            			$('#productSave').show();
	            		}else{
	                      	$("body").removeClass("overlay");
	                      	$("#messageParagraph").text("Please Select Atleast one Item");
	                      	$("#msgOkModal").removeClass("btn3");
	                      	$("#msgOkModal").addClass("btn1");
	                      	$("#msgModal").modal('show');
	            		}
         
              }else{
            	submitProduct(obj);
              }
            	
            	
            }
         
	}
function vendorNameUpper(){
		var text =$("#customerName").val();
		var result = text.toUpperCase();
		$("#customerName").val(result);
	}
	function vendorNameUpperr(){
		var text =$("#companyName").val();
		var result = text.toUpperCase();
		$("#companyName").val(result);
	}
	function productNameUpper(){
		var text =$("#productName").val();
		var result = text.toUpperCase();
		$("#productName").val(result);
	}

	function onQuickFilterChangedd() {
		gridOptionsProduct.api.setQuickFilter(document.getElementById('quickFilterr').value);
	}

	function cancelBarr() {
		var id = document.getElementById("closeKeyy");
		id.style.display = "block";

		if ($('#quickFilterr').val() == null || $('#quickFilterr').val() == "") {
			id.style.display = "none";
		}
	}
</script>

</head>

<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">

						<div class="d-flex justify-content-between" id="reqTable"
							style="display: none;">

							<div class="btn-hs" id="total">
								<div class="font-design" id="totalCandidate">
									QUOTATION LIST (<span></span>)
								</div>
							</div>

							<div id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>

							<div class="col-md-5 buttonsec btn-hs" id="btndiv">
								<button class="download-btn" id=dwnld
									onclick="downloadDetails()">Download</button>
								<button onclick="add()" class="new-btn" id="add">New</button>
								<button onclick="deleteQuotation()" class="delete-btn"
									id="delete">delete</button>
								<button onclick="purchaseOrder()" class="approve-btn"
									id="purchaseOrder">Po/Wo</button>
								<button id="reqAppvBtn" class="approve-btn" onclick="approve()">APPROVE</button>
								<button id="revision" class="new-btn" onclick="revision()">REVISION</button>
								<button id="copyQuotation" style="background-color: orange;"
									class="new-btn" onclick="copyQuotation()">COPY</button>
							</div>
						</div>
                             <input type="hidden" id="sessionOrganization1"
							th:value="${session.ORGANIZATION}" />
						<input type="hidden" id="sessionOrganization"
							th:value="${organization}" /> <input type="hidden"
							id="sessionOrgDivision" th:value="${orgDivision}" /> <input
							type="hidden" id="sessionId" th:value="${userId}" /> <input
							type="hidden" id="sessionName" th:value="${userName}" /> <input
							type="hidden" id="hrRole" th:value="${hrRole}" /> <input
							type="hidden" id="sessionRole" th:value="${userRole}" /> <input
							type="hidden" id="adRole" th:value="${adRole}" />

						<div id="myGrid" style="height: 500px; width: 100%;"
							class="ag-theme-alpine"></div>
						<div class="collapse" id="addData">
							<div class="innerstickybg" id="headingItem">
								<div class="row">
									<div class="col-md-6">
										<input type="hidden" id="draftId" class="form-control">
										<div id="a">
											Reference ID: <span id="quotationReference"></span>
										</div>
										<div id="b">
											Version: <span id="version"></span>
										</div>
									</div>
									<div class="col-md-6" align="right" id="buttonDiv">
										<button class="cancel-btn" id="Cancel" onClick="Cancel()">Cancel</button>
										<button class="save-btn" id="save" onclick="save()">Save</button>
										<button class="download-btn" id="retriveDraft"
											onclick="retriveDraft()">View Draft</button>
										<button class="new-btn" id="saveAsDraft"
											onclick="saveAsDraft()">Save As Draft</button>

									</div>
								</div>
							</div>
							<div class="row">
								<div class="col-md-3">
									<div class="form-group">
										<label>Quotation Type</label>
										<div class="select">
											<select class="form-control" id="quotType"
												onchange="getScopeMatrix();" onblur="removeValid(event)">

												<option th:each="c:${quotationTypeList}" th:value='${c.key}'
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>
								</div>
							</div>
							<div class="row innersticky_contentgap" id="mainPage"
								style="margin-top: 3px;">
								<!-- 	<div class="col-lg-3">
									<div class="form-group">
										<label>Quotation No</label> 
										<input type="text" id="qutNo"
											class="form-control" autocomplete="off" readonly>
									</div>
								</div> -->
								<input type="hidden" id="qutNo">
								<div class="col-lg-3">
									<div class="form-group">
										<div class="autocomplete">
											<label>Customer Name</label> <input type="text" id="custName"
												onblur="removeValid(event)" placeholder="Customer Name"
												class="form-control" onkeyup='getCustomerList()'
												autocomplete="off"> <input type="hidden" id="custId">
											<input type="hidden" id="custGSTNo"> <input
												type="hidden" id="approveStatus">

										</div>
										<div id="suggesstion-box1_" class="sugg-cls"></div>
									</div>

									<div class="row" id=addre>
										<div class="col-md-6">
											<span class="billtxt" id="billingAdd">Billing Address</span>
											<address class="font-small ember-view">
												<strong id="addNewAdd1" onclick="addnewAddress()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>
											</address>
											<div class="preserve-wrap1">
												<span id='con'></span><br> <span id='bstate'></span><br>
												<span id='bcity'></span><br> <span id='bstreet1'></span><br>
												<span id='bstreet2'></span><br> <span id='bzipcode'></span><br>
												<span id='bphone'></span><br> <span id='bfax'></span><br>
											</div>
										</div>
										<div class="col-md-6">
											<span class="billtxt" id="shippingAdd">Shipping
												Address</span>
												 <input type=hidden id="shippingHiddenId">  
											<address class="font-small ember-view">
												<strong id="changeAddress" onclick="changeAddress()"
													style="color: blue; cursor: pointer;">Change</strong>
											</address>
											<!-- <address class="font-small ember-view">
												<strong id="addNewAdd" onclick="addnewAddress1()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>
												<div class="preserve-wrap">Near DAV School</div>
												BBSR<br> Odisha 748945<br> India<br> Phone:
												9090868717<br> Fax: 86896869
											</address> -->
											<div class="preserve-wrap1">
											
												<span id='con1'></span><br> <span id='bstate1'></span><br>
												<span id='bcity1'></span><br> <span id='bstreet11'></span><br>
												<span id='bstreet21'></span><br> <span id='bzipcode1'></span><br>
												<span id='bphone1'></span><br> <span id='bfax1'></span><br>

											</div>
										</div>


									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Quotation Id</label><input type="text" id="quotationId"
											class="form-control" readonly>

									</div>
								</div>
								<div class="col-lg-3">
									<div class="form-group">
										<label>Quotation Date</label><input type="text"
											id="quotationDate" class="form-control" readonly>
									</div>
								</div>
								<!-- <div class="col-lg-3">
									<div class="form-group">
										<label>Order Type</label>
										<div class="select">
											<select id="orderType" onblur="removeValid(event)">
												<option value="">Select</option>
												<option value="Work Order">Work Order</option>
												<option value="Sales Order">Sales Order</option>
											</select>
										</div>
									</div>
								</div> -->
								<div class="col-lg-3">
									<div class="form-group calendar_box">
										<label>Valid UpTo Date</label> <input type="text"
											id="qutValidDate" class="form-control"
											onblur="removeValid(event)"
											th:attr="onkeyup=|formatDate('qutValidDate','${session.DATEFORMAT_JS}')|"
											readonly> <i class="ti-calendar picker_calendar"
											id="toDateCalendar" onblur="removeValid(event)"></i>
									</div>
								</div>
								<div class="col-lg-12">
									<div class="form-group">
										<label>Subject</label>
										<textarea id="subject" class="form-control"
											onblur="removeValid(event)"> </textarea>
									</div>
								</div>
								<div class="col-lg-12">
									<div class="form-group1">
										<label>Customer Notes</label>
										<textarea id="qutDescription" class="form-control"
											onblur="removeValid(event)"></textarea>
									</div>
									<input type="hidden" id="commentckdreason">
								</div>
							</div>
							<input type="hidden" id="taxType" class="form-control" readonly>
							<input type="hidden" id="subTotal" class="form-control" readonly>
							<input type="hidden" id="qIGST" class="form-control" readonly>
							<input type="hidden" id="qCGST" class="form-control" readonly>
							<input type="hidden" id="qSGST" class="form-control" readonly>
							<input type="hidden" id="grandTotal" class="form-control"
								readonly>
							<div class="accordion" id="accordionExample">
								<div id="main_content">
									<div class="accordion-item mt-4">
										<h2 class="accordion-header" id="headingOne"
											onclick="closeAllNav()">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne"
												aria-expanded="false" aria-controls="collapseOne">
												Item Details</button>
										</h2>
										<div id="collapseOne" class="accordion-collapse collapse show"
											aria-labelledby="headingOne"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">
												<div class="row">
													<div class="col-md-4 btn-hs1">
														<div class="font-design"></div>
													</div>
													<div class="col-md-8 butttonsec">
														<button class="new-btn" id="newItem" onclick="openNav()">ADD</button>
														<button class="delete-btn" id="delete1"
															onclick="deleteItem()">Delete</button>
													</div>
												</div>
												<div id="item" style="width: 100%; height: 200px;"
													class="ag-theme-alpine"></div>


											</div>

										</div>
									</div>

									<div id="mySidenav" class="sidenav">
										<div class="slidebox">
											<div class="row">
												<div class="chartbtnsec">
													<div align="right">
														<button class="cancel-btn" onclick="closeNav()">CANCEL</button>
														<button class="approve-btn" id="saveTableData"
															onclick="saveTableData()">SAVE</button>

													</div>
												</div>


												<div class="col-lg-6">
													<div class="form-group">
														<label>Stock Keeping Unit</label> <input type="text"
															onblur="removeValid(event)" id="sku" class="form-control"
															disabled="true">
													</div>
												</div>
												<div class="col-lg-6 mrt_6">
													<div class="form-group">
														<button id="browseBtn" class="browse-btn">Browse</button>
													</div>
												</div>

												<div class="col-lg-12">
													<div class="form-group">
														<div class="autocomplete">
															<input type="hidden" id="editProduct"> <input
																type="hidden" id="itemId"> <label>Item
																Name</label> <input type="text" id="itemName"
																class="form-control" autocomplete="off"
																onkeyup='getItemQutotationList()'
																onblur="removeValid(event)">
														</div>
														<div id="suggesstion-box_" class="sugg-cls"></div>
													</div>
												</div>
												<input type="hidden" id="hsnCode"
													onblur="removeValid(event)" class="form-control">
												<div class="col-lg-6">
													<div class="form-group">
														<label>Size(Height*Weight) In MM</label> <input
															type="text" id="sizeInMM" class="form-control">
													</div>
												</div>

												<div class="col-lg-6">
													<div class="form-group">
														<label>Thickness In MM</label> <input type="text"
															id="thicknessInMM" class="form-control">
													</div>
												</div>

												<div class="col-lg-6">
													<div class="form-group">
														<label>Unit</label>
														<div class="select">
															<select class="" id="unit" onblur="removeValid(event);">
																<option value="">Select</option>
																<option th:each="c,iter:${unitList}" th:value="${c.key}"
																	th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>
												<div class="col-lg-6">
													<div class="form-group">
														<label>Quantity</label> <input type="text" id="quantity"
															class="form-control"
															onkeyup="calculateLineTotal();getGSTRateCal()"
															onblur="removeValid(event)">
													</div>
												</div>

												<div class="col-lg-6">
													<div class="form-group">
														<label>Unit Price</label><input type="text" id="unitPrice"
															class="form-control"
															onkeyup="calculateLineTotal();getGSTRateCal()"
															onblur="removeValid(event)">
													</div>
												</div>
												<input type="hidden" id="gstRate" class="form-control"
													onkeyup="getGSTRateCal()">
												<div class="col-lg-6">
													<div class="form-group">
														<label>Total Amount</label> <input type="text"
															id="lineTotal" class="form-control"
															onblur="removeValid(event)">
													</div>
												</div>
												<div class="col-lg-12">
													<div class="form-group">
														<label>Description</label> <input type="text"
															id="itemDesc" class="form-control">
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>


								<div id="main_content1">
									<div class="accordion-item mt-4">
										<h2 class="accordion-header" id="heading34"
											onclick="closeAllNav()">

											<button class="accordion-button collapsed" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapse34"
												aria-expanded="false" aria-controls="collapse34">
												Scope Matrix</button>

										</h2>
										<div id="collapse34" class="accordion-collapse collapse"
											aria-labelledby="heading34"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<input type="hidden" id="rowEdit">
												<div class="row">
													<div class="col-md-4 btn-hs1">
														<div class="font-design"></div>
													</div>

													<div class="col-md-8">
														<input type="hidden" id="rowEdit">

														<!-- <button class="delete-btn" id="noButton"
															onclick="noMatrix()">NO</button>
														<button class="new-btn" id="yesButton"
															onclick="yesMatrix()">YES</button> -->
															<!-- <button class="new-btn" id="submitButton"
															onclick="submitMatrix()">SUBMIT</button> -->
													</div>
												</div>
												<div id="scopeMatrixes" style="width: 100%; height: 200px;"
													class="ag-theme-alpine"></div>


											</div>

										</div>
									</div>

									<div id="mySidenav1" class="sidenav">
										<div class="slidebox">
											<div class="row">
												<div class="chartbtnsec">
													<div align="right">
														<button class="cancel-btn" onclick="closeNav2()">CANCEL</button>
														<button class="approve-btn" id="saveTableData1"
															onclick="saveTableDataforScope()">SAVE</button>

													</div>
												</div>
												<div class="col-lg-12">
													<div class="form-group">
														<label>Description</label> <input type="text"
															id="scopeMatrixDesc" class="form-control" readonly>
													</div>
												</div>

												<div class="col-md-12">
													<div class="form-group">
														<label>Samudyam Description</label> <br> <label
															for="Yes"> <input type="radio" id="Yes"
															value="Yes" name="matrixSamudyam" /> Yes
														</label> <label for="No"> <input type="radio" id="No"
															value="No" name="matrixSamudyam" checked /> No
														</label>
													</div>
												</div>


												<div class="col-md-12">
													<div class="form-group">
														<label>Client Description</label> <br> <label
															for="Yes"> <input type="radio" id="Yes1"
															value="Yes" name="matrixClient" /> Yes
														</label> <label for="No"> <input type="radio" id="No1"
															value="No" name="matrixClient" checked /> No
														</label>
													</div>
												</div>

												<div class="col-lg-12">
													<div class="form-group">
														<label>Remarks</label> <input type="text"
															id="scopeMatrixRemarks" class="form-control" readonly>
													</div>
												</div>

											</div>
										</div>
									</div>
								</div>

								<div class="row" id=gstCalS>
									<div class="col-lg-12">


										<!--accordion start-->
										<div class="accordion-item mt-4">
											<div class="accordion-item" id="documentDetails">
												<h2 class="accordion-header" id="headingTwoo"
													onclick="closeAllNav()">

													<button class="accordion-button collapsed" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwoo"
														aria-expanded="false" aria-controls="collapseTwoo">
														OTHER DOCUMENTS</button>

												</h2>
												<div id="collapseTwoo" class="accordion-collapse collapse"
													aria-labelledby="headingTwoo"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">


														<div class="row">
															<div class="col-md-4 btn-hs1">
																<div class="font-design"></div>
															</div>
															<div class="col-md-8 butttonsec">
																<!--   <button class="download-btn" onclick="rfqCSV()">Download</button> -->
																<button class="new-btn" id="saveAttachmentBtn"
																	onclick="checkEmpty();">Add Document</button>

															</div>
														</div>

														<table id="docTbl" cellspacing="7" cellpadding="7">
															<thead>
																<tr class="tr_clone">
																	<!-- <th align="center"></th> -->

																	<th width="320">Document Name</th>
																	<th width="380">Attachment</th>


																</tr>
															</thead>
															<tbody id="doctbodyData">
																<tr>
																	<td style="display: none" align="center" class="pdb-24"><input
																		class="checkCls" type="checkbox" id="check2"><label
																		for="check2"></label></td>
																	<td style="display: none"><div class="form-group">


																			<select class="form-control documentclss"
																				id="docid_0" onblur="removeValid(event);">
																				<option value="">--Select--</option>
																				<option th:each="c,iter:${documentTypeList}"
																					th:value="${c.key}" th:text="${c.name}"></option>
																			</select>
																		</div></td>
																	<td><div class="form-group">
																			<input type="text" value=""
																				class="form-control docNoclss"
																				onblur="checkForDuplicateEntry(event)" id="docnoid_">
																		</div></td>

																	<td>
																		<div class="control-group position-r">
																			<label class="custom-file-upload" for="uploadDoc_0"
																				id="uploadFor_0"> <i id="clickImg_0"
																				class="ti-plus"></i>
																			</label>
																			<div class="controls">

																				<input type="file" class="document" id="uploadDoc_0"
																					name="userImage" accept="image/*"
																					onchange="saveMultiFile(event)" />

																			</div>
																		</div> <input type="hidden" id="uploadHidden_0"
																		class="uploadHidCls">
																		<div id="uploadedBillDiv_0" align="center"
																			class="uploadedBillCls"></div>
																		<div id="imageName_0" class="imageName"></div>
																		<div id="dltImage_0"></div>
																	</td>

																</tr>


															</tbody>
														</table>

													</div>
												</div>
											</div>
										</div>
										<!--accordion end-->

										<div class="col-lg-12">
											<div class="form-group1">
												<label>Terms & Conditions</label>
												<textarea id="termCondition" onblur="removeValid(event)"></textarea>
											</div>
											<!-- <input type="hidden" id="commentckdreason"> -->
										</div>

									</div>

								</div>
							</div>
						</div>

					</div>

					<div class="modal fade" id="myModal">
						<div class="modal-dialog modal-lg" style="margin-top: 130px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header">
									<h4 class="modal-title md-color">Select Product</h4>
									<button type="button" class="close cp" data-dismiss="modal"
										onclick="closeModal1()">&times;</button>
								</div>

								<!-- Modal body -->
								<div class="modal-body modal-cat1">
									<div class="row">

										<div class="col-md-6" df="0"
											style="height: 300px; overflow-y: scroll;">
											<table id="basic">
												<tbody id="productCategoryCBDiv"></tbody>
											</table>


										</div>
										<div class="col-md-6" id="productCategorySelectDiv" df="0"
											style="border-left: 1px solid #ccc; height: 300px; overflow-y: scroll;">
											<div>
												<div class="productlist">Select Product</div>
												<div id="select_product"></div>
												<input type="hidden" id="itemNameTemp" /> <input
													type="hidden" id="hsnCodeTemp" /> <input type="hidden"
													id="itemNameTemp" /> <input type="hidden" id="itemIdTemp" />
												<input type="hidden" id="brandNameTemp" /> <input
													type="hidden" id="brandIdTemp" /> <input type="hidden"
													id="skuTemp" /> <input type="hidden" id="hsnCodeTemp" />
												<input type="hidden" id="unitTemp" /> <input type="hidden"
													id="gstRateTemp" /> <input type="hidden"
													id="prodCatIdTemp" /> <input type="hidden"
													id="prodCatNameTemp" />
											</div>
										</div>
									</div>
								</div>

								<!-- Modal footer -->
								<div class="modal-footer">
									<div class="chartbtnsec">
										<button class="approve-btn" onclick="selectProductVal()">SELECT</button>
										<button class="cancel-btn" data-dismiss="modal"
											onclick="closeModal1()">CANCEL</button>
									</div>
								</div>

							</div>
						</div>
					</div>


					<div class="modal fade" id="addCustomerModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">


								<div class="modal-body">
									<!-- <div class="innerstickybg"> -->
										<div class="d-flex justify-content-between" id="main">
											<div class="col-md-3" id="idDiv">
												Customer ID: <span id="customerId"></span>
											</div>
											<div>
												<span class="taskInfo">Customer Information</span>
											</div>
												<div class="col-md-3 padding-0" align="right">
										<button class="btn3" id="cancel" onclick="cancelBtn1()">Back</button>

									</div>
										</div>
								<!-- 	</div> -->

									<div class="row">
										<div class="innercontent">

											<div class="row">
												<div class="row">
													<div class="col-md-4">
														<div class="form-group">
															<label>Customer Type</label>

															<div class="select">
																<select id="customerType" onchange="customerType();"
																	onblur="removeValid(event)">

																	<option value="">Select</option>
																	<option value="Business">Business</option>
																	<option value="Individual">Individual</option>
																</select>
															</div>
														</div>
													</div>


													<div class="col-md-4" id="salutationDiv">
														<div class="form-group">
															<label>Salutation</label>
															<div class="select">
																<select id="salutation" onchange="showDisplay()"
																	onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option value="Mr.">Mr.</option>
																	<option value="Mrs.">Mrs.</option>
																	<option value="Ms.">Ms.</option>
																	<option value="Miss.">Miss.</option>
																	<option value="Dr.">Dr.</option>
																	<option value="Prof.">Prof.</option>
																</select>
															</div>
														</div>
													</div>

													<div class="col-md-4" id="customerNameDiv">
														<div class="form-group">
															<label>Customer Name</label> <input type="text"
																class="form-control" id="customerName"
																placeholder="Customer Name"
																onkeyup="showDisplay(),checkAlphabetAndSpecialChars('customerName'),vendorNameUpper()"
																onblur="removeValid(event)" maxLength="50">
														</div>
													</div>

													<div class="col-md-4" id="companyNameDiv">
														<div class="form-group">
															<label>Customer Name</label> <input type="text"
																class="form-control" id="companyName"
																placeholder="Customer Name"
																onkeyup="showDisplay(),checkAlphabetAndSpecialChars('companyName'),vendorNameUpperr()"
																maxLength="50" onblur="removeValid(event)">
														</div>
													</div>

													<div class="col-md-4" id="customerDisplayNameDiv">
														<div class="form-group">
															<label>Customer Display Name</label> <input type="text"
																class="form-control" id="customerDisplayName"
																placeholder="Customer Display Name" disabled>
														</div>
													</div>

													<div class="col-md-4">
														<div class="form-group">
															<label>Customer Email</label> <input type="text"
																class="form-control" id="cusEmail" placeholder="Email"
																onblur="removeValid(event)" onkeyup="pmailVal();"
																style="text-transform: lowercase"> <span
																id="error3" class="formValidation1"></span>
														</div>
													</div>

													<div class="col-md-4" id="custMobileDiv">
														<div class="form-group">
															<label>Customer Mobile</label> <input type="text"
																class="form-control" id="custMobile"
																placeholder="Mobile" maxlength="10"
																onkeyup="mobVal1();checkNumeric('custMobile');"
																onblur="removeValid(event)"> <span id="error9"
																class="formValidation1"></span>
														</div>
													</div>


													<div class="col-md-4" id="custSkypeDiv">
														<div class="form-group">
															<label>Customer Skype</label> <input type="text"
																class="form-control" id="custSkype"
																onblur="removeValid(event)" placeholder="Customer Skype">
														</div>
													</div>

													<div class="col-md-4" id="custDesignationDiv">
														<div class="form-group">
															<label>Customer Designation</label> <input type="text"
																class="form-control" id="custDesignation"
																onblur="removeValid(event)"
																placeholder="Customer Designation">
														</div>
													</div>

													<div class="col-md-4" id="departmentDiv">
														<div class="form-group">
															<label>Department</label> <input type="text"
																class="form-control" id="department"
																onblur="removeValid(event)" placeholder="Department">
														</div>
													</div>


													<div class="col-md-4" id="webSiteDiv">
														<div class="form-group">
															<label>Web Site</label> <input type="text"
																class="form-control" id="webSite" placeholder="Web Site"
																onblur="removeValid(event)">
														</div>
													</div>


													<div class="col-md-4">
														<div class="form-group">
															<label>Status</label>
															<div class="select">
																<select id="status" onblur="removeValid(event)">
																	<option value="">Select</option>
																	<option value="Active">Active</option>
																	<option value="Inactive">Inactive</option>
																</select>
															</div>
														</div>
													</div>


												</div>
											</div>

											<div class="accordion-item">
												<h2 class="accordion-header" id="headingTwo">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo"
														aria-expanded="true" aria-controls="collapseTwo">
														Other Details</button>
												</h2>
												<div id="collapseTwo"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">

														<div class="row">
															<div class="col-md-4">
																<div class="form-group">
																	<label>Pan Card</label> <input type="text"
																		class="form-control" id="pan" placeholder="Pan Card"
																		onblur="removeValid(event)" onkeyup="pancardVal();"
																		maxLength="10"> <span id="error4"
																		class="formValidation1"></span>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">

																	<label>GST No.</label>
																	<div class="d-flex">
																		<div>
																			<input type="text" class="form-control" id="gstNo"
																				placeholder="GST No" onkeyup="ValidateGSTNumber()"
																				maxlength="15" onblur="removeValid(event)">
																			<span id="error5" class="formValidation1"></span>
																		</div>

																		<!-- <div style="margin-top: 7px;">
																			<button class="approve-btn1" id=approveGst
																				onclick="getGstData()">GST</button>
																		</div> -->
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Currency</label>
																	<div class="select">
																		<select id="currency" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="INR RUPPEE">INR RUPEE</option>
																			<option value="AED-UAE Dirham">AED-UAE
																				Dirham</option>
																			<option value="AUD-Australian Doller">AUD-Australian
																				Dollar</option>
																			<option value="CAD-Canadian Doller">CAD-Canadian
																				Dollar</option>
																			<option value="CNY-Yuan Renminbi">CNY-Yuan
																				Renminbi</option>
																			<option value="EUR-Euro">EUR-Euro</option>
																			<option value="GBP-Pound Sterlin">GBP-Pound
																				Sterlin</option>
																			<option value="JPY-Japanese Yen">JPY-Japanese
																				Yen</option>
																			<option value="SAR-Saudi Riyal">SAR-Saudi
																				Riyal</option>
																			<option value="USD-United State Doller">USD-United
																				State Dollar</option>
																			<option value="ZAR-South Africa Rand">ZAR-South
																				Africa Rand</option>
																		</select>
																	</div>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Opening Balance</label> <input type="text"
																		class="form-control" id="openingBalance"
																		placeholder="Opening Balance"
																		onblur="removeValid(event)" autocomplete="off"
																		onkeyup="checkAmount('openingBalance');">
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Payment Terms</label>
																	<div class="select">
																		<select id="paymentTerms" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="Net 15">Net 15</option>
																			<option value="Net 30">Net 30</option>
																			<option value="Net 45">Net 45</option>
																			<option value="Net 60">Net 60</option>
																			<option value="Due end of the month">Due end
																				of the month</option>
																			<option value="Due end of the next month">Due
																				end of the next month</option>
																			<option value="Due on receipt">Due on
																				receipt</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Portable Language</label>

																	<div class="select">
																		<select id="portableLang" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="English">English</option>
																			<option value="HIndi">Hindi</option>
																			<option value="Bengali">Bengali</option>
																			<option value="Odia">Odia</option>
																			<option value="French">French</option>
																			<option value="Spanish">Spanish</option>
																			<option value="Bahasa Indonesia">Bahasa
																				Indonesia</option>
																			<option value="Italian">Italian</option>
																			<option value="Dutch">Dutch</option>
																			<option value="Sanskrit">Sanskrit</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>WhatsApp No</label> <input type="text"
																		class="form-control" id="whatsApp"
																		placeholder="WhatsApp No" maxlength="10"
																		onkeyup="mobVal2();checkNumeric('whatsApp');"
																		onblur="removeValid(event)"> <span
																		id="error10" class="formValidation1"></span>
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>Facebook</label> <input type="text"
																		class="form-control" id="faceBook"
																		placeholder="Facebook" onblur="removeValid(event)">
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Twitter</label> <input type="text"
																		class="form-control" id="twitter"
																		placeholder="Twitter" onblur="removeValid(event)">
																</div>
															</div>
															<div class="col-md-4">
																<div class="form-group">
																	<label>Enable Portals</label><br> <input
																		type="checkbox" name="isActive" class="form-control"
																		id="enableDtls" style="margin-top: 8px;" value="on"
																		placeholder="Enable Details"> <label>Allow
																		portal acces for this customer</label>
																</div>
															</div>


														</div>

													</div>
												</div>
											</div>


											<div class="accordion-item">
												<h2 class="accordion-header" id="headingTwo2">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
														aria-expanded="true" aria-controls="collapseTwo2">
														Billing Address Details</button>
												</h2>
												<div id="collapseTwo2"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo2"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">


														<div class="row">

															<div class="col-md-4">
																<div class="form-group">
																	<label>Country</label>
																	<div class="select">
																		<select id="country" onchange="getStateDetails()"
																			onblur="removeValid(event)">
																			<option th:value="NULL">Select Country</option>
																			<option th:each="c,iter:${countryList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>State</label>
																	<div class="select">
																		<select id="states" onblur="removeValid(event)">
																			<option th:value="NULL">Select State</option>
																			<option th:each="c,iter:${statesList}"
																				th:value="${c.key}" th:text="${c.name}"></option>
																		</select> <span class="focus"></span>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>City</label> <input type="text"
																		class="form-control" id="city" placeholder="City"
																		onblur="removeValid(event)"
																		onkeyup="checkAlphabet('city')" maxLength="30">
																	<span id="error7" class="formValidation1"></span>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Street 1</label> <input type="text"
																		class="form-control" id="street1"
																		placeholder="Street 1" onblur="removeValid(event)"
																		maxLength="200">
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Street 2</label> <input type="text"
																		class="form-control" id="street2"
																		placeholder="Street 2" onblur="removeValid(event)"
																		maxLength="200">
																</div>
															</div>



															<div class="col-md-4">
																<div class="form-group">
																	<label>Zip Code</label> <input type="text"
																		class="form-control" id="zipCode" autocomplete="off"
																		placeholder="Zip Code" maxlength="6"
																		onkeyup="zipcodeVal();checkNumeric('zipCode');"
																		onblur="removeValid(event)"> <span
																		id="error14" class="formValidation1"></span>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Phone</label> <input type="text"
																		class="form-control" id="phone" placeholder="Phone"
																		maxlength="10"
																		onkeyup="mobVal3();checkNumeric('phone');"
																		onblur="removeValid(event)"> <span
																		id="error11" class="formValidation1"></span>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Fax</label> <input type="text"
																		class="form-control" id="fax" placeholder="Fax"
																		onblur="removeValid(event)">
																</div>
															</div>

														</div>

													</div>
												</div>
											</div>
												<div id="mainSa">
							<div class="accordion-item" id="shippingAddressAcc">
								<h2 class="accordion-header" id="headingTwo2">
									<button class="accordion-button" type="button"
										data-bs-toggle="collapse" data-bs-target="#collapseTwo2"
										aria-expanded="true" aria-controls="collapseTwo2">
										Shipping Address Details</button>

									<button class="btn btn-primarynew" onclick="copyAsBillingAdd()">Copy
										As Billing Address</button>
							</div>
							</h2>
							<div id="collapseTwo2" class="accordion-collapse collapse show"
								aria-labelledby="headingTwo2" data-bs-parent="#accordionExample">
								<div class="accordion-body">

									<div id="mySidenavAddress" class="sidenav">
										<div class="slidebox">
											<div class="row">
												<div class="col-md-10">
													<div class="edit">
														Address Id: <span id="shippingId"></span>
													</div>
												</div>
												<div class="col-md-2">
													<div class="arrow">
														<a href="javascript:void(0)" class="closebtn"
															onclick="closeNav()"><i class="ti-arrow-right"></i></a>
													</div>
												</div>
											</div>
											<div class="chartbtnsec">
												<div align="right">
													<button class="cancel-btn" onclick="closeNavAddress()">CANCEL</button>
													<!-- <button class="btn3">DELETE</button> -->
													<button class="approve-btn" id="saveSaddressData">SAVE</button>
												</div>
											</div>
											<div class="clearfix"></div>
											<!-- <input type="hidden" id="isEdit"> -->

											<div class="row">

												<div class="col-md-6">
													<div class="form-group">
														<label>Country</label>
														<div class="select">
															<select id="country1" onchange="getStateDetails1()"
																onblur="removeValid(event)">
																<option th:value="NULL">Select Country</option>
																<option th:each="c,iter:${countryList}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>

												<div class="col-md-6">
													<div class="form-group">
														<label>State</label>
														<div class="select">
															<select id="states1" onblur="removeValid(event)">
																<option th:value="NULL">Select State</option>
																<!-- <option th:each="c,iter:${statesList}"
													th:value="${c.key}" th:text="${c.name}"></option> -->
															</select> <span class="focus"></span>
														</div>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label>City</label> <input type="text"
															class="form-control" id="city1" placeholder="City"
															onblur="removeValid(event)"
															onkeyup="checkAlphabet('city')" maxLength="30">
													</div>
												</div>


												<div class="col-md-6">
													<div class="form-group">
														<label>Street 1</label> <input type="text"
															class="form-control" id="street11" placeholder="Street 1"
															onblur="removeValid(event)" maxLength="200">
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label>Street 2</label> <input type="text"
															class="form-control" id="street21" placeholder="Street 2"
															onblur="removeValid(event)" maxLength="200">
													</div>
												</div>



												<div class="col-md-6">
													<div class="form-group">
														<label>Zip Code</label> <input type="text"
															class="form-control" id="zipCode1" autocomplete="off"
															placeholder="Zip Code" maxlength="6"
															onkeyup="zipcodeVal1();checkNumeric('zipCode1');"
															onblur="removeValid(event)"> <span id="error15"
															class="formValidation1"></span>
													</div>
												</div>
											</div>
											<div class="row">
												<div class="col-md-6">
													<div class="form-group">
														<label>Phone</label> <input type="text"
															class="form-control" id="phone1" placeholder="Phone"
															maxlength="10"
															onkeyup="mobVal4();checkNumeric('phone1');"
															onblur="removeValid(event)"> <span id="error12"
															class="formValidation1"></span>
													</div>
												</div>


												<div class="col-md-4">
													<div class="form-group">
														<label>Fax</label> <input type="text" class="form-control"
															id="fax1" placeholder="Fax" onblur="removeValid(event)">
													</div>
												</div>
											</div>
											<div class="row">
                                               <div class="col-md-2">
													<div class="form-group" style="margin-top: 28px;">
														<input type="checkbox" name="isDefault"
															style="margin-top: 8px;" id="addStatus" value="1">
														<label>Default Address</label>
													</div>
												</div>
                                        </div>
                                         

										</div>
									</div>

									<div class="row">
										<div class="col-md-4 btn-hs1">
											<div class="font-design"></div>
										</div>
										<div class="col-md-8 butttonsec">
											<button class="delete-btn" data-toggle="modal" id="deleteAddressDtls"
												data-target="#delete" onclick="deleteAddressDtls()">DELETE</button>
											<button class="new-btn" id="newAddress" onclick="newAddress()">NEW</button>
										</div>

									</div>

									<div class="row">
										<div class="col-md-12">
											<div id="mySAGrid" style="width: 100%; height: 200px;"
												class="ag-theme-alpine"></div>
										</div>
									</div>
								</div>
							</div>
						</div>

											<div class="accordion-item" id="contactPersonAcc">
												<h2 class="accordion-header" id="headingTwo3">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo3"
														aria-expanded="true" aria-controls="collapseTwo3">
														Contact Person Details</button>
												</h2>
												<div id="collapseTwo3"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo3"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">


														<div class="row">
															<div class="col-md-4">
																<div class="form-group">
																	<label>Salutation</label>
																	<div class="select">
																		<select id="salutation1" onblur="removeValid(event)">
																			<option value="">Select</option>
																			<option value="Mr.">Mr.</option>
																			<option value="Mrs.">Mrs.</option>
																			<option value="Ms.">Ms.</option>
																			<option value="Miss.">Miss.</option>
																			<option value="Dr.">Dr.</option>
																			<option value="Prof.">Prof.</option>
																		</select>
																	</div>
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>First Name</label> <input type="text"
																		class="form-control" id="firstName"
																		placeholder="First Name" maxLength="50"
																		onkeyup="checkAlphabet('firstName');"
																		onblur="removeValid(event)">
																</div>
															</div>

															<div class="col-md-4">
																<div class="form-group">
																	<label>Last Name</label> <input type="text"
																		class="form-control" id="lastName"
																		placeholder="Last Name" maxLength="50"
																		onkeyup="checkAlphabet('lastName');"
																		onblur="removeValid(event)">
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Email Address</label> <input type="text"
																		class="form-control" id="emailAdd" placeholder="Email"
																		onblur="removeValid(event)" onkeyup="pmailVal1()"
																		style="text-transform: lowercase"> <span
																		id="error6" class="formValidation1"></span>
																</div>
															</div>


															<div class="col-md-4">
																<div class="form-group">
																	<label>Mobile</label> <input type="text"
																		class="form-control" id="mobile" placeholder="Mobile"
																		maxlength="10"
																		onkeyup="mobVal5();checkNumeric('mobile');"
																		onblur="removeValid(event)"> <span
																		id="error13" class="formValidation1"></span>
																</div>
															</div>

														</div>

													</div>
												</div>
											</div>


											<div class="accordion-item" id="remarksAcc">
												<h2 class="accordion-header" id="headingTwo4">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse" data-bs-target="#collapseTwo4"
														aria-expanded="true" aria-controls="collapseTwo4">
														Remark Details</button>
												</h2>
												<div id="collapseTwo4"
													class="accordion-collapse collapse show"
													aria-labelledby="headingTwo4"
													data-bs-parent="#accordionExample">
													<div class="accordion-body">

														<div class="row">
															<div class="col-md-8">
																<div class="modal-inrheading">Remarks</div>
																<div class="position-text">
																	<textarea rows="4" cols="100" id="remarks"
																		onkeyup="textCount(event)"></textarea>
																	<div id="charNumSN" class="txtcounter" align="right">
																		<span>0</span> characters
																	</div>
																</div>
															</div>


														</div>

													</div>
												</div>
											</div>

											<div class="row mt-4" id="btnDiv">
												<div class="form-group">

													<button class="btn3" id="cancel" onclick="cancelBtn1()">CANCEL</button>
													<button class="btn1" id="saveAdd" onclick="addCustomerInfo()">SAVE</button>
													<button class="btn1" id="next" onclick="addCustomerInfo()">NEXT</button>

												</div>
											</div>

										</div>

									</div>


								</div>
							</div>
						</div>
					</div>
					<!-- delete modal start -->
					<div id="deleteQuot" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<!-- 	Approve Modal Start -->

					<div id="approveQuot" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you want to approve this estimate order</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">
									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelApproveModalBtn();">No</button>
									<button type="button" class="approve-btn"
										onclick="approveOnclick()">Yes</button>
								</div>
							</div>
						</div>
					</div>



					<!-- delete item start	 -->
					<div id="deleteProduct" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -30px;">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="cancelModalProductBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteProductOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>



					<div id="deleteAttachment" class="modal fade show"
						aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
									<input type="hidden" id="dltValue">
								</div>
								<div class="modal-footer justify-content-center">

									<button type="button" class="cancel-btn" data-dismiss="modal"
										onclick="closeDeleteConfirm()">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deletAttachmentRow()">Delete</button>
								</div>
							</div>
						</div>
					</div>

					<div class="modal fade" id="addAddressModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- Modal Header -->
								<div class="modal-header flex-column">
									<!-- <button type="button" class="close" data-dismiss="modal"
											aria-hidden="true" onclick="cancelModalBtn()">
											<i class="ti-close modal-close"></i>
										</button> -->
								</div>
								<!-- 	Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="billingInfo">
										<div class="card-title">
											<h4>Billing Address</h4>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="countryb" onchange="getStateDetailsb()"
															onblur="removeValid(event)">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="statesb" onblur="removeValid(event)">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														id="cityb" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														class="form-control" id="street1b" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														class="form-control" id="street2b" placeholder="Street 2">
												</div>
											</div>



											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCodeb" placeholder="Zip Code"
														onblur="removeValid(event)" maxlength="6"
														onkeyup="zipcodeVal2(zipCodeb);checkNumeric('zipCodeb');">
													<span id="error17" class="formValidation1"></span>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														class="form-control" id="phoneb" placeholder="Phone"
														maxlength="10" onkeyup="mobVal6();checkNumeric('phoneb');">
													<span id="error16" class="formValidation1"></span>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														id="faxb" placeholder="Fax">
												</div>
											</div>

										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="cancel-btn" id="cancel" onclick="cancelBtn()">CANCEL</button>
												<button class="btn1" id="save" onclick="addCustomerInfo2()">SAVE</button>

											</div>
										</div>
									</div>



								</div>
							</div>
						</div>
					</div>


					<div class="modal fade" id="addAddressModel1">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<div class="modal-header flex-column">
									<!-- <button type="button" class="close" data-dismiss="modal"
											aria-hidden="true" onclick="cancelModalBtn()">
											<i class="ti-close modal-close"></i>
										</button> -->
								</div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingInfo">
										<div class="edit">
											Shipping Address : <span id="shippingId"></span>
										</div>
										<div class="row">

											<div class="col-md-4">
												<div class="form-group">
													<label>Country</label>
													<div class="select">
														<select id="country1s" onchange="getStateDetailss('')"
															onblur="removeValid(event)">
															<option th:value="NULL">Select Country</option>
															<option th:each="c,iter:${countryList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>State</label>
													<div class="select">
														<select id="states1s" onblur="removeValid(event)">
															<option th:value="NULL">Select State</option>
															<option th:each="c,iter:${statesList}"
																th:value="${c.key}" th:text="${c.name}"></option>
														</select> <span class="focus"></span>
													</div>
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>City</label> <input type="text" class="form-control"
														id="city1s" placeholder="City">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Street 1</label> <input type="text"
														class="form-control" id="street11s" placeholder="Street 1">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group">
													<label>Street 2</label> <input type="text"
														class="form-control" id="street21s" placeholder="Street 2">
												</div>
											</div>



											<!-- 	<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCode1s" placeholder="Zip Code"
														onblur="removeValid(event)" maxlength="6"
														onkeyup="checkNumeric('zipCode1s');">
												</div>
											</div> -->


											<div class="col-md-4">
												<div class="form-group">
													<label>Zip Code</label> <input type="text"
														class="form-control" id="zipCode1s" placeholder="Zip Code"
														onblur="removeValid(event)" maxlength="6"
														onkeyup="zipcodeVal3(zipCode1s);checkNumeric('zipCode1s');">
													<span id="error18" class="formValidation1"></span>
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Phone</label> <input type="text"
														class="form-control" id="phone1s" placeholder="Phone"
														maxlength="10" onkeyup="checkNumeric('phone1s');">
												</div>
											</div>


											<div class="col-md-4">
												<div class="form-group">
													<label>Fax</label> <input type="text" class="form-control"
														id="fax1s" placeholder="Fax">
												</div>
											</div>

											<div class="col-md-4">
												<div class="form-group" style="margin-top: 28px;">
													<input type="checkbox" name="isDefault"
														style="margin-top: 8px;" id="addStatus" value="1">
													<label>Default Address</label>
												</div>
											</div>


										</div>

										<div class="row mt-4">
											<div class="form-group">

												<button class="cancel-btn" id="cancel"
													onclick="cancelBtn2()">CANCEL</button>
												<button class="btn1" id="save" onclick="addCustomerInfo1()">SAVE</button>

											</div>
										</div>
									</div>



								</div>
							</div>
						</div>
					</div>


					<!-- 	############################################Change Address Modal##################################### -->

					<div class="modal fade" id="changeAddressModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">

								<!-- 	Modal Header -->
								<!-- 	<div class="modal-header">
							 <button type="button" class="close" data-dismiss="modal"
											aria-hidden="true" onclick="cancelChangeAddressModel()">
											<i class="ti-close modal-close"></i>
										</button> 
								</div> -->
								<div class="modal-header">
									<h4 class="modal-title" style="font-size: 16px">
										<b>Change Address </b>
									</h4>
									<button type="button" class="close" data-bs-dismiss="modal"
										aria-label="Close" onclick="cancelChangeAddressModel()">
										<i class="ti-close"></i>
									</button>
								</div>
								<!-- Modal body -->
								<div class="modal-body">

									<div class="col-md-12" id="shippingData">

										<div class="row">
											<div class="col-md-12" id="shipping" >
												
											</div>
										</div>

										<div class="row mt-4">
											<address class="font-small ember-view">
												<strong id="addNewAdd" onclick="addnewAddress1()"
													style="color: blue; cursor: pointer;">Add New
													Address</strong>
											</address>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="modal fade" id="quotationDraftModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content" style="padding: 19px 19px;">

								<!-- Modal Header -->
								<div class="d-flex justify-content-between" id="drftTable"
									style="display: none;">

									<div class="btn-hs col-md-3" id="totalDraft">
										<div class="font-design" id="totalDraftList">
											DRAFT LIST (<span></span>)
										</div>
									</div>
									<div id="searchRowDraftDiv" class="col-md-4">
										<div class="input-style">
											<input type="text" placeholder="Search.." name="search"
												class="searchboxinput" onkeyup="cancelBarDraft()"
												oninput="onQuickFilterDraftChanged()" id="quickFilterDraft"
												autocomplete="off">
											<div class="searchicon">
												<a href="javascript:void(0)"><span
													style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
													id="closeKeyDraft"
													onclick="gridDraftOptions.api.setQuickFilter(null);$('#quickFilterDraft').val('');document.getElementById('closeKeyDraft').style.display='none';"
													class="close_i"><i class="ti-close srchicon"></i></span></a><a
													href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
											</div>
										</div>
									</div>

									<div class="col-md-5 buttonsec btn-hs" id="btndivDraft">
										<button type="button" class="close" data-dismiss="modal"
											onclick="cancelDraft()" aria-label="Close" id="cancelDraft"
											style="float: right; top: 0px !important;">
											<i class="ti-close"></i>
										</button>
										<button onclick="deleteDraft()" class="delete-btn"
											id="deleteDraft" style="margin-right: 10px;">Delete
											Draft</button>



										<!-- <button class="cancel-btn" id="cancelDraft" onclick="cancelDraft()">CLOSE</button> -->

									</div>
								</div>
								<!-- Modal body -->
								<div class="modal-body" style="padding: 0px;">

									<div id="myGridDraft" style="height: 500px; width: 100%;"
										class="ag-theme-alpine"></div>
									<div class="row mt-4">
										<div class="form-group">

											<!--  <button class="cancel-btn" id="cancelDraft" onclick="cancelDraft()">CLOSE</button> -->

										</div>
									</div>

								</div>
							</div>
						</div>
					</div>

					<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model start@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->
					<div class="modal fade" id="addItemModel">
						<div class="modal-dialog modal-lg"
							style="margin-top: 130px; height: 900px;">
							<div class="modal-content">
                                  <div class="modal-body">
                                  
                                  	<div id="newId">
								
									<div class="row" id="reqTable">
										<div class="d-flex justify-content-between">
											<div class="btn-hs" id="total">
												<div class="font-design" id="totalReq">
													Product List (<span></span>)
												</div>
											</div>

											<div id="searchRowDiv">
												<div class="input-style">
													<input type="text" placeholder="Search.." name="search"
														class="searchboxinput" onkeyup="cancelBarr()"
														oninput="onQuickFilterChangedd()" id="quickFilterr"
														autocomplete="off">
													<div class="searchicon">
														<a href="javascript:void(0)"><span
															style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
															id="closeKeyy"
															onclick="gridOptionsProduct.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKeyy').style.display='none';"
															class="close_i"><i class="ti-close srchicon"></i></span></a><a
															href="javascript:void(0)"><i
															class="ti-search srchicon"></i></a>
													</div>
												</div>
											</div>
											<div class="butttonsec btn-hs" id="btndiv">
												<!-- <button class="upload-btn">Upload</button> -->
												<button class="download-btn" onclick="totalProductCSV();">Download</button>
												<button class="delete-btn" onclick="deleteProduct();"
													id="deleteproduct">DELETE</button>
												<button class="new-btn" id="newBtn"
													onclick="profileSelect()">NEW</button>
											</div>
										</div>
									</div>
									<div id="myGridProduct" style="width: 100%; height: 500px;"
										class="ag-theme-alpine"></div>
								</div>
								
								<div id="profile" class="collapse">
									<div class="row">
										<div class="col-md-6 btn-hs"></div>
										<div class="col-md-12">
											Product ID: <span id="productheadId"></span>
										</div>
										<div class="col-md-12" align="right">

											<button class="cancel-btn" onclick="profilecancelbtn()"
												id="profilecancelbtn">Cancel</button>
											<button class="approve-btn" id="productSave">Save</button>
										</div>
										<div class="col-md-3">
											<div class="demo">
												<div class="item">
													<div class="clearfix" style="max-width: 360px">
														<div class="hvrbox">
															<img src="../assets/images/noimage.jpg" id="imgemp"
																alt="Location" class="hvrbox-layer_bottom img-fluid">

															<div class="hvrbox-layer_top">
																<div class="hvrbox-text">
																	<!-- <span><i class="fa fa-pencil-square-o"></i></span> -->
																	<input type="file" id="fileUpload"
																		onchange="saveFile();" /> <span><label
																		for="fileUpload"><i class="fa fa-camera"
																			style="cursor: pointer; font-size: 16px;"></i> <!-- <i class="fa fa-pencil-square-o"></i> --></label></span>
																	<span><i class="fa fa-trash red"
																		onclick="deleteFile();"></i></span>
																</div>
															</div>
														</div>

													</div>
												</div>

											</div>
										</div>
										<div class="col-md-9">
											<div class="row">
												<div class="col-md-12">
													<input type="hidden" id="productId"> <input
														type="text" name="code" value="" id="productName"
														maxLength="30" placeholder="Product Name"
														onkeyup="productNameUpper()"
														class="form-control_big" onblur="removeValid(event);">

												</div>
											</div>
											<div class="row">
												<div class="col-md-4">
													<div class="form-group">
														<label>Brand</label>
														<div class="select">
															<select class="" id="brand" onblur="removeValid(event);">
																<option value="">Select</option>
																<option th:each="c,iter:${brandListt}"
																	th:value="${c.key}" th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>
												<div class="col-md-4">
													<div class="form-group">
														<label>Mode</label>
														<div class="select">
															<select class="" id="mode" onblur="removeValid(event);">
																<option value="">Select</option>
																<option th:each="c,iter:${modeList}" th:value="${c.key}"
																	th:text="${c.name}"></option>
															</select>
														</div>
													</div>
												</div>
												<div class="col-md-2">
													<div class="form-group" style="margin-top: 28px;">
														<input type="checkbox" name="isActive"
															style="margin-top: 8px;" id="prodStatus" value="1">
														<label>Active</label>
													</div>
												</div>
												<div class="col-md-4">
													<div class="form-group">
														<label>HSN/SAC</label> <input type="text" value=""
															placeholder="HSN/SAC" class="form-control"
															id="hsnCodeProduct" onkeyup="check1('hsnCode')"
															maxLength="8" onblur="removeValid(event);">
													</div>
												</div>


											</div>
											<div class="row mt-2">
												<div class="col-md-3">
													<button class="approve-btn modalbtn" id="categoryBtn">Select
														Category</button>
													<input type="hidden" id="prCategoryId"> <input
														type="hidden" id="tempCategoryId"> <input
														type="hidden" id="prLevelId">
												</div>
												<div class="col-md-9">
													<div class="breadcrumb" id="catDesc"></div>
												</div>
											</div>
										</div>
									</div>
 <div class="col-md-12 mt-4" align="right">
										<button class="approve-btn" onclick="next()" id="nextproduct">Next</button>
									</div>
									<div id="mainItem">
										<div class="accordion" id="accordionExampleItem">

											<div class="accordion-item">
												<h2 class="accordion-header" id="headingOneItem">
													<button class="accordion-button" type="button"
														data-bs-toggle="collapse"
														data-bs-target="#collapseOneItem" aria-expanded="true"
														aria-controls="collapseOneItem">Product Details</button>

												</h2>
												<div id="collapseOneItem"
													class="accordion-collapse collapse show"
													aria-labelledby="headingOneItem"
													data-bs-parent="#accordionExampleItem">
													<div class="accordion-body">

														<div id="mySidenavItem" class="sidenav">
															<div class="slidebox" style="margin: 0px !important;">
																<div class="row">
																	<div class="col-md-10">
																		<div class="edit">
																			Product Id: <span id="skuPrdId"></span>
																		</div>
																	</div>
																	<div class="col-md-2">
																		<div class="arrow">
																			<a href="javascript:void(0)" class="closebtn"
																				onclick="closeNavSku()"><i
																				class="ti-arrow-right"></i></a>
																		</div>
																	</div>
																</div>
																<div class="chartbtnsec">
																	<div align="right">
																		<button class="cancel-btn" onclick="closeNavSku()">CANCEL</button>

																		<button class="approve-btn" id="saveSKUData">SAVE</button>
																	</div>
																</div>
																<div class="clearfix"></div>
																<input type="hidden" id="isEdit">
																<div class="row">

																	<div class="col-lg-12" id="skudiv">
																		<div class="form-group">
																			<label>SKU</label> <input type="text" value=""
																				placeholder="" class="form-control" id="skuId"
																				onblur="removeValid(event);" maxLength="8">
																		</div>
																	</div>
																	<div class="col-lg-6">
																		<div class="form-group">
																			<label>Model/Size</label> <input type="text" value=""
																				placeholder="" class="form-control" id="model"
																				onblur="removeValid(event);">
																		</div>
																	</div>
																	<div class="col-lg-6">
																		<div class="form-group">
																			<label>Area</label> <input type="text" value=""
																				placeholder="" class="form-control" id="area"
																				onblur="removeValid(event);">
																		</div>
																	</div>
																</div>
																<div class="row">
																	<div class="col-md-12">
																		<div class="form-group">
																			<label>Manufacture Item</label> <input type="text"
																				value="" placeholder="" class="form-control"
																				id="manufacture" onblur="removeValid(event);">
																		</div>
																	</div>

																</div>
																   <div class="row">
																	<div class="col-md-12">
																		<div class="form-group">
																			<label>Description</label> <textarea id="description" class="form-control"
											                          onblur="removeValid(event)"> </textarea>
																		</div>
																	</div>

																</div>

																<div class="row">
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Variation Type</label>
																			<div class="select">
																				<select class="" id="variationType"
																					onblur="removeValid(event);">
																					<option value="">Select</option>
																					<option th:each="c,iter:${variationTypeList}"
																						th:value="${c.key}" th:text="${c.name}"></option>
																				</select>
																			</div>

																		</div>
																	</div>
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Variation Value</label> <input type="text"
																				value="" onblur="removeValid(event);" placeholder=""
																				class="form-control" id="variationValue">
																		</div>
																	</div>

																</div>

																<div class="row">
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>UOM</label>
																			<div class="select">
																				<select class="" id="itemUnit"
																					onblur="removeValid(event);">
																					<option value="">Select</option>
																					<option th:each="c,iter:${unitList}"
																						th:value="${c.key}" th:text="${c.name}"></option>
																				</select>
																			</div>
																		</div>
																	</div>
																	<div class="col-md-6">
																		<div class="form-group">
																			<label>Unit Sale Price</label> <input type="text"
																				value="" onclick="salaryBack(event)"
																				onblur="removeValid(event);salaryCheck(event)"
																				placeholder="" class="form-control" id="salePrice">
																		</div>
																	</div>
																</div>
															</div>
														</div>

														<div class="row">
															<div class="col-md-4 btn-hs1">
																<div class="font-design"></div>
															</div>
															<div class="col-md-8 butttonsec">
																<!-- <button class="upload-btn">Upload</button> -->
																<button class="download-btn" onclick="skuProductCSV();">Download</button>
																<!-- <div class="buttongap"></div> -->
																<button class="delete-btn" data-toggle="modal"
																	id="deletess" data-target="#delete"
																	onclick="deleteskuDtls()">DELETE</button>
																<button class="new-btn" id="newBtn2"
																	onclick="openNavItem()">NEW</button>
															</div>

														</div>
														<div class="row" id="skuDiv">
															<div class="col-md-12">
																<div id="mySKUGrid" style="width: 100%; height: 200px;"
																	class="ag-theme-alpine"></div>
															</div>
														</div>

													</div>
												</div>
											</div>

										</div>
									</div>
</div>

								</div>
							</div>
						</div>


						<!-- @@@@@@@@@@@@@@@@@@@@@@@@@@@@@Item Model end@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ -->

						<div class="modal fade" id="myModall">
							<div class="modal-dialog modal-lg" style="margin-top: 130px;">
								<div class="modal-content">

									<!-- Modal Header -->
									<div class="modal-header">
										<h4 class="modal-title md-color">Select Product Category</h4>
										<button type="button" class="close cp"
											onclick="closeModall();" data-dismiss="modal">&times;</button>
									</div>

									<!-- Modal body -->

									<div class="modal-body modal-cat">
										<div class="row">
											<table id="basicc">
												<tbody id="costCeneterCBDiv"></tbody>
											</table>
										</div>
									</div>

									<!-- Modal footer -->

									<div class="modal-footer">
										<button class="cancel-btn" data-dismiss="modal"
											onclick="closeModall();">Cancel</button>
										<button class="approve-btn" id="selectCategory">Select</button>
									</div>

								</div>
							</div>
						</div>

						<div id="deleteSKU" class="modal fade show" aria-modal="true">
							<div class="modal-dialog modal-confirm">
								<div class="modal-content">
									<div class="modal-header flex-column"></div>
									<div class="modal-body">
										<p>Do you really want to delete these records? This
											process cannot be undone.</p>
									</div>
									<div class="modal-footer justify-content-center"
										style="margin-top: -30px;">

										<button type="button" class="cancel-btn" data-dismiss="modal"
											onclick="cancelModalSKUDtls();">Cancel</button>
										<button type="button" class="delete-btn"
											onclick="deleteskud()">Delete</button>
									</div>
								</div>
							</div>
						</div>
						
											<div id="deleteProductModel" class="modal fade show" aria-modal="true">
			<div class="modal-dialog modal-confirm">
				<div class="modal-content">
					<div class="modal-header flex-column">
					</div>
					<div class="modal-body">
						<p>Do you really want to delete these records? This process
							cannot be undone.</p>
					</div>
					<div class="modal-footer justify-content-center"
						style="margin-top: -30px;">
						<button type="button" class="cancel-btn" data-dismiss="modal"
							onclick="cancelProductModelOnclick();">Cancel</button>
						<button type="button" class="delete-btn" id="deleteModalBtn"
							onclick="deleteProductModelOnclick()">Delete</button>
					</div>
				</div>
			</div>
		</div>
						

					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>