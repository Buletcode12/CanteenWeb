<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<script>
var gAmount;
$(document).ready(function() {

    var gridDiv = document.querySelector('#myGrid');
    new agGrid.Grid(gridDiv, gridOptions);
    var data = [];
    gridOptions.api.setRowData(data);

    var userid = $("#sessionId").val();

    var startYr = '2022';
    var endYr = '2023';

    agGrid.simpleHttpRequest({
        url: "tax-declaration-incometax-view?userid=" +
            userid +
            "&startYr=" +
            startYr +
            "&endYr=" +
            endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(
            len);
        if (len > 0) {
            gridOptions.api
                .setRowData(data);
            gridOptions.api
                .setPinnedBottomRowData(createSlitData(gridOptions.api));
        } else {
            gridOptions.api.setRowData();
        }

    })

    /* ------------AG grid for ADHOC Income ----------------------- */
    var gridDiv = document.querySelector('#myGridAdhoc');
    new agGrid.Grid(gridDiv, gridOptionsAdhoc);
    var dataAdhoc = [];
    gridOptionsAdhoc.api.setRowData(dataAdhoc);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-monthly-adhoc-view?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsAdhoc.api.setRowData(data);
            gridOptionsAdhoc.api
                .setPinnedBottomRowData(createSlitDataAdhoc(gridOptionsAdhoc.api));
        } else {
            gridOptionsAdhoc.api.setRowData();
        }

    })


    /* ------------AG grid for Other Items ----------------------- */

    var gridDiv = document.querySelector('#myGridOtherItems');
    new agGrid.Grid(gridDiv, gridOptionsOtherItem);
    var dataOtherItem = [];
    gridOptionsOtherItem.api.setRowData(dataOtherItem);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-monthly-otheritem-view?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsOtherItem.api.setRowData(data);
            gridOptionsOtherItem.api
                .setPinnedBottomRowData(createSlitDataOtherItem(gridOptionsOtherItem.api));
        } else {
            gridOptionsOtherItem.api.setRowData();
        }

    })

 /* ------------AG grid for Deduction Chapter Vi A ----------------------- */

    var gridDiv = document.querySelector('#myGridDeductionVi');
    new agGrid.Grid(gridDiv, gridOptionsDeductionVi);
    var dataDeductionVi = [];
    gridOptionsDeductionVi.api.setRowData(dataDeductionVi);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-view-deduction-underviA?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsDeductionVi.api.setRowData(data);
           gridOptionsDeductionVi.api.setPinnedBottomRowData(createSlitDataDeductionVi(gridOptionsDeductionVi.api));
        } else {
            gridOptionsDeductionVi.api.setRowData();
        }

    })
    
    
    /* ------------AG grid for Tax Paid Till ----------------------- */

/*     var gridDiv = document.querySelector('#myGridtaxPaidTill');
    new agGrid.Grid(gridDiv, gridOptionstaxPaidTill);
    var datataxPaidTill = [];
    gridOptionstaxPaidTill.api.setRowData(datataxPaidTill);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-view-deduction-underviA?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsDeductionVi.api.setRowData(data);
           gridOptionsDeductionVi.api.setPinnedBottomRowData(createSlitDataDeductionVi(gridOptionsDeductionVi.api));
        } else {
            gridOptionsDeductionVi.api.setRowData();
        }

    }) */
    
    /* ------------AG grid for Surchage On Tax ----------------------- */

    var gridDiv = document.querySelector('#myGridSurchageOnTax');
    new agGrid.Grid(gridDiv, gridOptionsSurchageOnTax);
    var dataSurchageOnTax = [];
    gridOptionsSurchageOnTax.api.setRowData(dataSurchageOnTax);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-view-surchage-tax?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsSurchageOnTax.api.setRowData(data);
           gridOptionsSurchageOnTax.api.setPinnedBottomRowData(createSlitDataSurchageOnTax(gridOptionsSurchageOnTax.api));
        } else {
            gridOptionsSurchageOnTax.api.setRowData();
        }

    })
    /* ------------AG grid for PERQUISITES ----------------------- */

    var gridDiv = document.querySelector('#myGridPerquisites');
    new agGrid.Grid(gridDiv, gridOptionsPerquisites);
    var dataPerquisites = [];
    gridOptionsPerquisites.api.setRowData(dataPerquisites);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-perquisite-view?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsPerquisites.api.setRowData(data);
            gridOptionsPerquisites.api
                .setPinnedBottomRowData(createSlitDataPerquisites(gridOptionsPerquisites.api));
        } else {
            gridOptionsPerquisites.api.setRowData();
        }

    })


    /* ------------AG grid for Income excluded from tax  ----------------------- */

    var gridDiv = document.querySelector('#myGridExcludedTax');
    new agGrid.Grid(gridDiv, gridOptionsExcludedTax);
    var dataExcludedTax = [];
    gridOptionsExcludedTax.api.setRowData(dataExcludedTax);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-excludedtax-view?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsExcludedTax.api.setRowData(data);
            gridOptionsExcludedTax.api
                .setPinnedBottomRowData(createSlitDataExcludedTax(gridOptionsExcludedTax.api));
        } else {
            gridOptionsExcludedTax.api.setRowData();
        }

    })

    /* ------------AG grid and Calculation for GROSS SALARY ----------------------- */

    var gridDiv = document.querySelector('#myGridGrossSalary');
    new agGrid.Grid(gridDiv, gridOptionsGrossSalary);
    var dataGrossSalary = [];
    gridOptionsGrossSalary.api.setRowData(dataGrossSalary);
    
    /*  Grand Total=Monthly Income+Adhoc Income 
    Gross Salary=(Grand Total+Perquisites)-Income Excluded From Tax */
    
    setTimeout(function(){
    	var data1 = createSlitDataAdhoc(gridOptionsAdhoc.api);
    	var data2 = createSlitDataPerquisites(gridOptionsPerquisites.api);
    	var data3 = createSlitDataExcludedTax(gridOptionsExcludedTax.api);
        
        var grandAmnt = parseFloat(data1[1].totalAdhoc) + parseFloat(data2[0].perquisiteAmount) - parseFloat(data3[0].perquisiteAmount);    
        gAmount=grandAmnt;
        var data = [];
        var obj = {};
        
        obj.grossSalary = "Grand Total";
        obj.grossSalaryAmount = (grandAmnt).toFixed(2);
        data.push(obj);
    
        gridOptionsGrossSalary.api.setRowData(data);
    }, 2000);
    

    
    /* ------------AG grid for INCOME FROM PREVIOUS EMPLOYER----------------------- */

     var gridDiv = document.querySelector('#myGridPrevEmployer');
    new agGrid.Grid(gridDiv, gridOptionsPrevEmployer);
    var dataPrevEmployer = [];
    gridOptionsPrevEmployer.api.setRowData(dataPrevEmployer);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-prev-employer-view?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
            gridOptionsPrevEmployer.api.setRowData(data);
            gridOptionsPrevEmployer.api
                .setPinnedBottomRowData(createSlitDataPrevEmployer(gridOptionsPrevEmployer.api));
        } else {
            gridOptionsPrevEmployer.api.setRowData();
        }

    })
    
      /* ------------AG grid for Other Income By Employee----------------------- */

     var gridDiv = document.querySelector('#myGridOtherIncomeByEmp');
    new agGrid.Grid(gridDiv, gridOptionsOtherIncomeByEmp);
    var dataOtherIncomeByEmp = [];
    gridOptionsOtherIncomeByEmp.api.setRowData(dataOtherIncomeByEmp);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-any-other-income-by-employee?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
        
            gridOptionsOtherIncomeByEmp.api.setRowData(data);
            gridOptionsOtherIncomeByEmp.api
                .setPinnedBottomRowData(createSlitDataOtherIncomeByEmp(gridOptionsOtherIncomeByEmp.api));
        } else {
            gridOptionsOtherIncomeByEmp.api.setRowData();
        }

    })
    
  /* ------------AG grid for LESS DEDUCTION UNDER SECTION 16----------------------- */

     var gridDiv = document.querySelector('#myGridLessDeduction');
    new agGrid.Grid(gridDiv, gridOptionsLessDeduction);
    var dataLessDeduction = [];
    gridOptionsLessDeduction.api.setRowData(dataLessDeduction);

    agGrid.simpleHttpRequest({
        url: "tax-declaration-less-deduction-section16?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
        var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
        	gridOptionsLessDeduction.api.setRowData(data);
        	gridOptionsLessDeduction.api
                .setPinnedBottomRowData(createSlitLessDeduction(gridOptionsLessDeduction.api));
        } else {
        	gridOptionsLessDeduction.api.setRowData();
        }

    })
    /* ------------AG grid for LESS EXEMPTION UNDER SECTION 10 ----------------------- */

    var gridDiv = document.querySelector('#myGridLessExemption');
    new agGrid.Grid(gridDiv, gridOptionsLessExemption);
    var dataLessExemption = [];
    gridOptionsLessExemption.api.setRowData(dataLessExemption);
    
    agGrid.simpleHttpRequest({
        url: "tax-declaration-less-exemption-details?userid=" +
            userid + "&startYr=" + startYr +
            "&endYr=" + endYr,
            async: false
    }).then(function(data) {
    	console.log("section 10")
    	console.log(data)
    	 var dataLessExemption = [];
    	 
         var obj = {};
         obj.ConveyanceAssistance="Conveyance Assistance : Sec. 10(14)";
         obj.ConveyanceAssistance=data.perquisiteItem;
         obj.totalRentPaidpa=data.perquisiteAmount;
         
         dataLessExemption.push(obj);
         gridOptionsLessExemption.api.setRowData(data);
         
       var len = data.length;
        $('#totalReq').find('span').html(len);
        if (len > 0) {
        	gridOptionsLessExemption.api.setRowData(data);
        	
        	 gridOptionsLessExemption.api
                .setPinnedBottomRowData(createSlitDataExcludedTax(gridOptionsLessExemption.api));
        } else {
        	gridOptionsLessExemption.api.setRowData();
        }

    })
    
    /* ------------AG grid and Calculation for INCOME AFTER EXEMPTION ----------------------- */

    var gridDiv = document.querySelector('#myGridIncomeAftExemp');
    new agGrid.Grid(gridDiv, gridOptionsincomeAfterExemp);
    var dataIncomeAftExemp = [];
    gridOptionsincomeAfterExemp.api.setRowData(dataIncomeAftExemp);
    
  
    setTimeout(function(){
    	var data1 = gAmount;
    	var data2 = createSlitDataExcludedTax(gridOptionsLessExemption.api);
    	var data3 = createSlitDataPrevEmployer(gridOptionsPrevEmployer.api);
    	var grandAmntincomeaftexemption = (parseFloat(data1)-(parseFloat(data2[0].perquisiteAmount) + parseFloat(data3[0].perquisiteAmount)));       
    	gAmntincomeaftexemption=grandAmntincomeaftexemption;
    	var data = [];
        var obj = {};
        
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandAmntincomeaftexemption).toFixed(2);
        data.push(obj);
        gridOptionsincomeAfterExemp.api.setRowData(data);
    }, 2000);
    
    /* ------------AG grid and Calculation for Income Chargable Under The Head Salries ----------------------- */

    var gridDiv = document.querySelector('#myGridIncomeChargeUnderSal');
    new agGrid.Grid(gridDiv, gridOptionsIncomeChargeUnderSal);
    var dataIncomeChargeUnderSal = [];
    gridOptionsIncomeChargeUnderSal.api.setRowData(dataIncomeChargeUnderSal);
    
  
    setTimeout(function(){
    	var data1 = gAmntincomeaftexemption;
    	var data2 = createSlitLessDeduction(gridOptionsLessDeduction.api);
    	var grandAmntincomechargable = parseFloat(data1)-parseFloat(data2[0].perquisiteAmount); 
    	gAmntincomechargable=grandAmntincomechargable;
        var data = [];
        var obj = {};
        
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandAmntincomechargable).toFixed(2);
        data.push(obj);
        gridOptionsIncomeChargeUnderSal.api.setRowData(data);
    }, 2000);

    /* ------------AG grid and Calculation for Gross Total Income ----------------------- */

    var gridDiv = document.querySelector('#myGridgrossTotalIncome');
    new agGrid.Grid(gridDiv, gridOptionsgrossTotalIncome);
    var datagrossTotalIncome = [];
    gridOptionsgrossTotalIncome.api.setRowData(datagrossTotalIncome);
    
  
    setTimeout(function(){
    	var data1 = gAmntincomechargable;
    	var data2 = createSlitDataOtherIncomeByEmp(gridOptionsOtherIncomeByEmp.api);
    	var grandAmntgrossTotalIncome = parseFloat(data1)+parseFloat(data2[0].perquisiteAmount); 
    	gAmntgrossTotalIncome=grandAmntgrossTotalIncome;
        var data = [];
        var obj = {};
        
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandAmntgrossTotalIncome).toFixed(2);
        data.push(obj);
        gridOptionsgrossTotalIncome.api.setRowData(data);
    }, 2000);
    
    /* ------------AG grid and Calculation for Taxable Income ----------------------- */

    var gridDiv = document.querySelector('#myGridtaxableIncome');
    new agGrid.Grid(gridDiv, gridOptionstaxableIncome);
    var datataxableIncome = [];
    gridOptionstaxableIncome.api.setRowData(datataxableIncome);
    
  
    setTimeout(function(){
    	var data1 = gAmntgrossTotalIncome;
    	var data2 = createSlitDataDeductionVi(gridOptionsDeductionVi.api);
    	var grandTaxableIncome = parseFloat(data1)-parseFloat(data2[0].qualifying); 
        var data = [];
        var obj = {};
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandTaxableIncome).toFixed(2);
        data.push(obj);
        gridOptionstaxableIncome.api.setRowData(data);
    }, 2000);
    
    /* ------------AG grid and Calculation for Net Tax ----------------------- */

    var gridDiv = document.querySelector('#myGridnetTax');
    new agGrid.Grid(gridDiv, gridOptionsnetTax);
    var datanetTax = [];
    gridOptionsnetTax.api.setRowData(datanetTax);
    
  
    setTimeout(function(){
    	var data1 = taxonIncomeAmt;
    	console.log("data1"+data1)
    	var data2 = createSlitDataSurchageOnTax(gridOptionsSurchageOnTax.api);
    	var grandnetTax = parseFloat(data1)+parseFloat(data2[0].perquisiteAmount); 
        var data = [];
        var obj = {};
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandnetTax).toFixed(2);
        data.push(obj);
        gridOptionsnetTax.api.setRowData(data);
    }, 2000);
    
    /* ------------AG grid and Calculation for ROUND OFF TO NEAREST 10 RUPEE ----------------------- */

    var gridDiv = document.querySelector('#myGridroundOffNearest');
    new agGrid.Grid(gridDiv, gridOptionsroundOffNearest);
    var dataroundOffNearest = [];
    gridOptionsroundOffNearest.api.setRowData(dataroundOffNearest);
    
  
    setTimeout(function(){
    	var data1 = gAmntgrossTotalIncome;
    	var data2 = createSlitDataDeductionVi(gridOptionsDeductionVi.api);
    	var grandTaxableIncome = parseFloat(data1)-parseFloat(data2[0].qualifying); 
        var data = [];
        var obj = {};
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandTaxableIncome).toFixed(2);
        data.push(obj);
        gridOptionsroundOffNearest.api.setRowData(data);
    }, 2000);
    
  
    /* ------------AG grid and Calculation for TAX ON TOTAL INCOME ----------------------- */

    var gridDiv = document.querySelector('#myGridtaxOnTotalIncome');
    new agGrid.Grid(gridDiv, gridOptionstaxOnTotalIncome);
    var datataxOnTotalIncome = [];
    gridOptionstaxOnTotalIncome.api.setRowData(datataxOnTotalIncome);
    
  
    setTimeout(function(){
    	var data1 = gAmntgrossTotalIncome;
    	var data2 = createSlitDataDeductionVi(gridOptionsDeductionVi.api);
    	var grandtaxOnTotalIncome = parseFloat(data1)-parseFloat(data2[0].qualifying); 
    	
    	taxonIncomeAmt=grandtaxOnTotalIncome;
    	console.log("taxonIncomeAmt"+taxonIncomeAmt)
        var data = [];
        var obj = {};
        obj.perquisiteItem = "Grand Total";
        obj.perquisiteAmount = (grandtaxOnTotalIncome).toFixed(2);
        data.push(obj);
        gridOptionstaxOnTotalIncome.api.setRowData(data);
    }, 2000);
});

/* ------------columndefs & gridOptions for  LESS EXEMPTION UNDER SECTION 10 ----------------------- */
 const columnDefsLessExemption = [{
    headerName: 'ITEMS',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];

 const gridOptionsLessExemption = {
		    columnDefs: columnDefsLessExemption,
		    defaultColDef: {
		        sortable: true,
		        filter: true,
		        resizable: true,
		        width: 88,
		        height: 10
		    }
		};
/* ------------columndefs & gridOptions for INCOME FROM PREVIOUS EMPLOYER ----------------------- */

const columnDefsPrevEmployer = [{
    headerName: 'PAY ITEMS',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];

const gridOptionsPrevEmployer = {
	    columnDefs: columnDefsPrevEmployer,
	    defaultColDef: {
	        sortable: true,
	        filter: true,
	        resizable: true,
	        width: 88,
	        height: 10
	   }  ,
	    getRowNodeId: (data) => data.payItems,
	    pinnedBottomRowData: createSlitDataPrevEmployer(),
	    onGridReady: onGridReadySlitPrevEmployer,
	    rowSelection: 'single'
	};

/* ------------columndefs & gridOptions for Other Income By Employee ----------------------- */

const columnDefsOtherIncomeByEmp = [{
    headerName: 'DESCRIPTIONS',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];

const gridOptionsOtherIncomeByEmp = {
	    columnDefs: columnDefsOtherIncomeByEmp,
	    defaultColDef: {
	        sortable: true,
	        filter: true,
	        resizable: true,
	        width: 88,
	        height: 10
	   }  ,
	    getRowNodeId: (data) => data.payItems,
	    pinnedBottomRowData: createSlitDataOtherIncomeByEmp(),
	    onGridReady: onGridReadySlitOtherIncomeByEmp,
	    rowSelection: 'single'
	};
/* ------------columndefs & gridOptions for LESS DEDUCTION UNDER SECTION 16 ----------------------- */

const columnDefsLessDeduction = [{
    headerName: 'ITEMS',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];

const gridOptionsLessDeduction = {
	    columnDefs: columnDefsLessDeduction,
	    defaultColDef: {
	        sortable: true,
	        filter: true,
	        resizable: true,
	        width: 88,
	        height: 10
	   }  ,
	    getRowNodeId: (data) => data.payItems,
	    pinnedBottomRowData: createSlitLessDeduction(),
	    onGridReady: onGridReadySlitLessDeduction,
	    rowSelection: 'single'
	};

/* ------------columndefs & gridOptions for perquisites ----------------------- */
const columnDefsPerquisites = [{
    headerName: 'ITEM',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsPerquisites = {
    columnDefs: columnDefsPerquisites,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },
    getRowNodeId: (data) => data.payItems,
    pinnedBottomRowData: createSlitDataPerquisites(),
    onGridReady: onGridReadySlitPerquisites,
    rowSelection: 'single'
};


/* ------------columndefs & gridOptions for Monthly Income Declaration----------------------- */



const columnDefs = [{
    headerName: 'PAY ITEMS',
    field: "payItems",
    width: 150,
}, {
    headerName: 'TOTAL',
    field: "total",
    width: 115,
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'APR',
    field: "april",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'MAY',
    field: "may",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JUN',
    field: "june",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JUL',
    field: "july",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'AUG',
    field: "august",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'SEPT',
    field: "september",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'OCT',
    field: "october",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'NOV',
    field: "november",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'DEC',
    field: "december",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JAN',
    field: "january",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'FRB',
    field: "february",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'MAR',
    field: "march",
    cellStyle: {
        textAlign: 'right'
    }
}];
const gridOptions = {
    columnDefs: columnDefs,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },
    getRowNodeId: (data) => data.payItems,
    pinnedBottomRowData: createSlitData(),
    onGridReady: onGridReadySlit,
    rowSelection: 'single'
};

/* ------------columndefs & gridOptions for Adhoc income----------------------- */
const columnDefsAdhoc = [{
    headerName: 'PAY ITEMS',
    field: "payItemsAdhoc",
    width: 150,
}, {
    headerName: 'TOTAL',
    field: "totalAdhoc",
    width: 115,
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'APR',
    field: "aprilAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'MAY',
    field: "mayAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JUN',
    field: "juneAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JUL',
    field: "julyAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'AUG',
    field: "augustAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'SEPT',
    field: "septemberAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'OCT',
    field: "octoberAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'NOV',
    field: "novemberAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'DEC',
    field: "decemberAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JAN',
    field: "januaryAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'FRB',
    field: "februaryAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'MAR',
    field: "marchAdhoc",
    cellStyle: {
        textAlign: 'right'
    }
}];

const gridOptionsAdhoc = {
    columnDefs: columnDefsAdhoc,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },

    pinnedBottomRowData: createSlitDataAdhoc(),
    onGridReady: onGridReadySlitAdhoc,
    rowSelection: 'single'
};


/* ------------columndefs & gridOptions for Other Items----------------------- */

const columnDefsOtherItem = [{
    headerName: 'PAY ITEMS',
    field: "payItemsOtherItem",
    width: 150,
}, {
    headerName: 'TOTAL',
    field: "totalOtherItem",
    width: 120,
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'APR',
    field: "aprilOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'MAY',
    field: "mayOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JUN',
    field: "juneOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JUL',
    field: "julyOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'AUG',
    field: "augustOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'SEPT',
    field: "septemberOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'OCT',
    field: "octoberOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'NOV',
    field: "novemberOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'DEC',
    field: "decemberOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'JAN',
    field: "januaryOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'FRB',
    field: "februaryOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'MAR',
    field: "marchOtherItem",
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsOtherItem = {
    columnDefs: columnDefsOtherItem,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },

    pinnedBottomRowData: createSlitDataOtherItem(),
    onGridReady: onGridReadySlitOtherItem,
    rowSelection: 'single'
};


/* ------------columndefs & gridOptions for Deduction Under Chapter Vi-A----------------------- */

const columnDefsDeductionVi = [{
    headerName: 'INVESTMENT',
    field: "sectionInvestment",
    width: 550,
}, {
    headerName: 'GROSS',
    field: "gross",
    width: 255,
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'QUALIFYING',
    field: "qualifying",
    width: 255,
    cellStyle: {
        textAlign: 'right'
    }
}, {
    headerName: 'DEDUCTABLE',
    field: "qualifying",
    width: 255,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsDeductionVi = {
    columnDefs: columnDefsDeductionVi,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },

    pinnedBottomRowData: createSlitDataDeductionVi(),
    onGridReady: onGridReadySlitDeductionVi,
    rowSelection: 'single'
};

/* ------------columndefs & gridOptions for Surchage On Tax----------------------- */

const columnDefsSurchageOnTax = [{
    headerName: 'INVESTMENT',
    field: "perquisiteItem",
    width: 1150,
}, {
    headerName: 'Total',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsSurchageOnTax = {
    columnDefs: columnDefsSurchageOnTax,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },

    pinnedBottomRowData: createSlitDataSurchageOnTax(),
    onGridReady: onGridReadySlitSurchageOnTax,
    rowSelection: 'single'
};
/* ------------columndefs & gridOptions for perquisites ----------------------- */
const columnDefsExcludedTax = [{
    headerName: 'Income Excluded from tax',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];

const gridOptionsExcludedTax = {
    columnDefs: columnDefsExcludedTax,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
    },
    getRowNodeId: (data) => data.payItems,
    pinnedBottomRowData: createSlitDataExcludedTax(),
    onGridReady: onGridReadySlitExcludedTax,
    rowSelection: 'single'
};

var newTotal = 0;
var newjanuary = 0;
var newfebruary = 0;
var newmarch = 0;
var newapril = 0;
var newmay = 0;
var newjune = 0;
var newjuly = 0;
var newaugust = 0;
var newseptember = 0;
var newoctober = 0;
var newnovember = 0;
var newdecember = 0;

var newGrossTotal = 0;


/* ------------columndefs & gridOptions for Gross Salary ----------------------- */
const columnDefsGrossSalary = [{
    headerName: 'Gross Total',
    field: "grossSalary",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "grossSalaryAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsGrossSalary = {
    columnDefs: columnDefsGrossSalary,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};

/* ------------columndefs & gridOptions for Income After Exemption ----------------------- */
const columnDefsincomeAfterExemp = [{
    headerName: 'Income After Exemption Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsincomeAfterExemp = {
    columnDefs: columnDefsincomeAfterExemp,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};

/* ------------columndefs & gridOptions for Income After Exemption ----------------------- */
const columnDefsIncomeChargeUnderSal = [{
    headerName: 'Grand Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsIncomeChargeUnderSal = {
    columnDefs: columnDefsIncomeChargeUnderSal,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};

/* ------------columndefs & gridOptions for Gross Total Income ----------------------- */
const columnDefsgrossTotalIncome = [{
    headerName: 'Grand Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsgrossTotalIncome = {
    columnDefs: columnDefsgrossTotalIncome,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};

/* ------------columndefs & gridOptions for Taxable Income ----------------------- */
const columnDefstaxableIncome = [{
    headerName: 'Grand Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionstaxableIncome = {
    columnDefs: columnDefstaxableIncome,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};


/* ------------columndefs & gridOptions for Net Tax ----------------------- */
const columnDefsnetTax = [{
    headerName: 'Grand Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsnetTax = {
    columnDefs: columnDefsnetTax,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};
/* ------------columndefs & gridOptions for ROUND OFF TO NEAREST 10 RUPEE ----------------------- */
const columnDefsroundOffNearest = [{
    headerName: 'Grand Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionsroundOffNearest = {
    columnDefs: columnDefsroundOffNearest,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};

/* ------------columndefs & gridOptions for Tax On Total Income ----------------------- */
const columnDefstaxOnTotalIncome = [{
    headerName: 'Grand Total',
    field: "perquisiteItem",
    width: 1150,
    cellStyle: {
        textAlign: 'left'
    }
}, {
    headerName: 'AMOUNT',
    field: "perquisiteAmount",
    width: 170,
    cellStyle: {
        textAlign: 'right'
    }
}];


const gridOptionstaxOnTotalIncome = {
    columnDefs: columnDefstaxOnTotalIncome,
    defaultColDef: {
        sortable: true,
        filter: true,
        resizable: true,
        width: 88,
        height: 10
      
    }
};
/* ------------Ag grid function for total calculation(Monthly income)----------------------- */

function onGridReadySlit(event) {
    gridOptions.api.setPinnedBottomRowData(createSlitData(gridOptions.api));
   // console.log(createSlitData(gridOptions.api))
   // gridOptions.api.selectNode(createSlitData(gridOptions.api), true);
}

function createSlitData(gridApi) {
    var result = [];
    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }
    var total = 0;
    var january = 0;
    var february = 0;
    var march = 0;
    var april = 0;
    var may = 0;
    var june = 0;
    var july = 0;
    var august = 0;
    var september = 0;
    var october = 0;
    var november = 0;
    var december = 0;
    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.total != null &&
            visibleRows[i].data.total != "") {
            total = total + parseFloat(visibleRows[i].data.total);
        } else {
            total = total + parseFloat(0);
        }

        if (visibleRows[i].data.january != null &&
            visibleRows[i].data.january != "") {
            january = january + parseFloat(visibleRows[i].data.january);
        } else {
            january = january + parseFloat(0);
        }
        if (visibleRows[i].data.february != null &&
            visibleRows[i].data.february != "") {
            february = february + parseFloat(visibleRows[i].data.february);
        } else {
            february = february + parseFloat(0);
        }
        if (visibleRows[i].data.march != null &&
            visibleRows[i].data.march != "") {
            march = march + parseFloat(visibleRows[i].data.march);
        } else {
            march = march + parseFloat(0);
        }
        if (visibleRows[i].data.april != null &&
            visibleRows[i].data.april != "") {
            april = april + parseFloat(visibleRows[i].data.april);
        } else {
            april = april + parseFloat(0);
        }
        if (visibleRows[i].data.may != null &&
            visibleRows[i].data.may != "") {
            may = may + parseFloat(visibleRows[i].data.may);
        } else {
            may = may + parseFloat(0);
        }
        if (visibleRows[i].data.june != null &&
            visibleRows[i].data.june != "") {
            june = june + parseFloat(visibleRows[i].data.june);
        } else {
            june = june + parseFloat(0);
        }
        if (visibleRows[i].data.july != null &&
            visibleRows[i].data.july != "") {
            july = july + parseFloat(visibleRows[i].data.july);
        } else {
            july = july + parseFloat(0);
        }
        if (visibleRows[i].data.august != null &&
            visibleRows[i].data.august != "") {
            august = august + parseFloat(visibleRows[i].data.august);
        } else {
            august = august + parseFloat(0);
        }
        if (visibleRows[i].data.september != null &&
            visibleRows[i].data.september != "") {
            september = september +
                parseFloat(visibleRows[i].data.september);
        } else {
            september = september + parseFloat(0);
        }
        if (visibleRows[i].data.october != null &&
            visibleRows[i].data.october != "") {
            october = october + parseFloat(visibleRows[i].data.october);
        } else {
            october = october + parseFloat(0);
        }
        if (visibleRows[i].data.november != null &&
            visibleRows[i].data.november != "") {
            november = november + parseFloat(visibleRows[i].data.november);
        } else {
            november = november + parseFloat(0);
        }
        if (visibleRows[i].data.december != null &&
            visibleRows[i].data.december != "") {
            december = december + parseFloat(visibleRows[i].data.december);
        } else {
            december = december + parseFloat(0);
        }

    }

    newTotal = total;
    newjanuary = january;
    newfebruary = february;
    newmarch = march;
    newapril = april;
    newmay = may;
    newjune = june;
    newjuly = july;
    newaugust = august;
    newseptember = september;
    newoctober = october;
    newnovember = november;
    newdecember = december;

    obj = {};
    obj.payItems = "Total Monthly Income";
    obj.total = total.toFixed(2);
    obj.january = january.toFixed(2);
    obj.february = february.toFixed(2);
    obj.march = march.toFixed(2);
    obj.april = april.toFixed(2);
    obj.may = may.toFixed(2);
    obj.june = june.toFixed(2);
    obj.july = july.toFixed(2);
    obj.august = august.toFixed(2);
    obj.september = september.toFixed(2);
    obj.october = october.toFixed(2);
    obj.november = november.toFixed(2);
    obj.december = december.toFixed(2);


    result.push(obj)

    return result;


}

/* ------------Ag grid function for total calculation(Adhoc income)----------------------- */

function onGridReadySlitAdhoc(event) {
    gridOptionsAdhoc.api.setPinnedBottomRowData(createSlitDataAdhoc(gridOptionsAdhoc.api));
}
var gobalTotal = 0;

function createSlitDataAdhoc(gridApi) {
    var result = [];
    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var totalAdhoc = 0;
    var januaryAdhoc = 0;
    var februaryAdhoc = 0;
    var marchAdhoc = 0;
    var aprilAdhoc = 0;
    var mayAdhoc = 0;
    var juneAdhoc = 0;
    var julyAdhoc = 0;
    var augustAdhoc = 0;
    var septemberAdhoc = 0;
    var octoberAdhoc = 0;
    var novemberAdhoc = 0;
    var decemberAdhoc = 0;
    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.totalAdhoc != null &&
            visibleRows[i].data.totalAdhoc != "") {
            totalAdhoc = totalAdhoc + parseFloat(visibleRows[i].data.totalAdhoc);
        } else {
            totalAdhoc = totalAdhoc + parseFloat(0);
        }

        if (visibleRows[i].data.januaryAdhoc != null &&
            visibleRows[i].data.januaryAdhoc != "") {
            januaryAdhoc = januaryAdhoc + parseFloat(visibleRows[i].data.januaryAdhoc);
        } else {
            januaryAdhoc = januaryAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.februaryAdhoc != null &&
            visibleRows[i].data.februaryAdhoc != "") {
            februaryAdhoc = februaryAdhoc + parseFloat(visibleRows[i].data.februaryAdhoc);
        } else {
            februaryAdhoc = februaryAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.marchAdhoc != null &&
            visibleRows[i].data.marchAdhoc != "") {
            marchAdhoc = marchAdhoc + parseFloat(visibleRows[i].data.marchAdhoc);
        } else {
            marchAdhoc = marchAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.aprilAdhoc != null &&
            visibleRows[i].data.aprilAdhoc != "") {
            aprilAdhoc = aprilAdhoc + parseFloat(visibleRows[i].data.aprilAdhoc);
        } else {
            aprilAdhoc = aprilAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.mayAdhoc != null &&
            visibleRows[i].data.mayAdhoc != "") {
            mayAdhoc = mayAdhoc + parseFloat(visibleRows[i].data.mayAdhoc);
        } else {
            mayAdhoc = mayAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.juneAdhoc != null &&
            visibleRows[i].data.juneAdhoc != "") {
            juneAdhoc = juneAdhoc + parseFloat(visibleRows[i].data.juneAdhoc);
        } else {
            juneAdhoc = juneAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.julyAdhoc != null &&
            visibleRows[i].data.julyAdhoc != "") {
            julyAdhoc = julyAdhoc + parseFloat(visibleRows[i].data.julyAdhoc);
        } else {
            julyAdhoc = julyAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.augustAdhoc != null &&
            visibleRows[i].data.augustAdhoc != "") {
            augustAdhoc = augustAdhoc + parseFloat(visibleRows[i].data.augustAdhoc);
        } else {
            augustAdhoc = augustAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.septemberAdhoc != null &&
            visibleRows[i].data.septemberAdhoc != "") {
            septemberAdhoc = septemberAdhoc +
                parseFloat(visibleRows[i].data.septemberAdhoc);
        } else {
            septemberAdhoc = septemberAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.octoberAdhoc != null &&
            visibleRows[i].data.octoberAdhoc != "") {
            octoberAdhoc = octoberAdhoc + parseFloat(visibleRows[i].data.octoberAdhoc);
        } else {
            octoberAdhoc = octoberAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.novemberAdhoc != null &&
            visibleRows[i].data.novemberAdhoc != "") {
            novemberAdhoc = novemberAdhoc + parseFloat(visibleRows[i].data.novemberAdhoc);
        } else {
            novemberAdhoc = novemberAdhoc + parseFloat(0);
        }
        if (visibleRows[i].data.decemberAdhoc != null &&
            visibleRows[i].data.decemberAdhoc != "") {
            decemberAdhoc = decemberAdhoc + parseFloat(visibleRows[i].data.decemberAdhoc);
        } else {
            decemberAdhoc = decemberAdhoc + parseFloat(0);
        }

    }

    objAdhoc = {};
    objAdhoc.payItemsAdhoc = "Total Adhoc Income";
    objAdhoc.totalAdhoc = totalAdhoc.toFixed(2);
    objAdhoc.januaryAdhoc = januaryAdhoc.toFixed(2);
    objAdhoc.februaryAdhoc = februaryAdhoc.toFixed(2);
    objAdhoc.marchAdhoc = marchAdhoc.toFixed(2);
    objAdhoc.aprilAdhoc = aprilAdhoc.toFixed(2);
    objAdhoc.mayAdhoc = mayAdhoc.toFixed(2);
    objAdhoc.juneAdhoc = juneAdhoc.toFixed(2);
    objAdhoc.julyAdhoc = julyAdhoc.toFixed(2);
    objAdhoc.augustAdhoc = augustAdhoc.toFixed(2);
    objAdhoc.septemberAdhoc = septemberAdhoc.toFixed(2);
    objAdhoc.octoberAdhoc = octoberAdhoc.toFixed(2);
    objAdhoc.novemberAdhoc = novemberAdhoc.toFixed(2);
    objAdhoc.decemberAdhoc = decemberAdhoc.toFixed(2);

    objAdhoc1 = {};
    objAdhoc1.payItemsAdhoc = "Grand Total (1 + 2)";
    objAdhoc1.totalAdhoc = (totalAdhoc + parseFloat(newTotal)).toFixed(2);
    objAdhoc1.januaryAdhoc = (januaryAdhoc + parseFloat(newjanuary)).toFixed(2);
    objAdhoc1.februaryAdhoc = (februaryAdhoc + parseFloat(newfebruary)).toFixed(2);
    objAdhoc1.marchAdhoc = (marchAdhoc + parseFloat(newmarch)).toFixed(2);
    objAdhoc1.aprilAdhoc = (aprilAdhoc + parseFloat(newapril)).toFixed(2);
    objAdhoc1.mayAdhoc = (mayAdhoc + parseFloat(newmay)).toFixed(2);
    objAdhoc1.juneAdhoc = (juneAdhoc + parseFloat(newjune)).toFixed(2);
    objAdhoc1.julyAdhoc = (julyAdhoc + parseFloat(newjuly)).toFixed(2);
    objAdhoc1.augustAdhoc = (augustAdhoc + parseFloat(newaugust)).toFixed(2);
    objAdhoc1.septemberAdhoc = (septemberAdhoc + parseFloat(newseptember)).toFixed(2);
    objAdhoc1.octoberAdhoc = (octoberAdhoc + parseFloat(newoctober)).toFixed(2);
    objAdhoc1.novemberAdhoc = (novemberAdhoc + parseFloat(newnovember)).toFixed(2);
    objAdhoc1.decemberAdhoc = (decemberAdhoc + parseFloat(newdecember)).toFixed(2);

    gobalTotal = (totalAdhoc + parseFloat(newTotal)).toFixed(2); //global total 

    var data = {};

    data.grossSalary = "Grand Total";
    data.grossSalaryAmount = gobalTotal;

    result.push(objAdhoc)
    result.push(objAdhoc1)
    return result;
}


/* ------------Ag grid function for total calculation(Other Items)----------------------- */
function onGridReadySlitOtherItem(event) {
    gridOptionsOtherItem.api.setPinnedBottomRowData(createSlitData(gridOptionsOtherItem.api));
}

function createSlitDataOtherItem(gridApi) {
    var result = [];

    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var payItemsOtherItem = 0;
    var totalOtherItem = 0;
    var januaryOtherItem = 0;
    var februaryOtherItem = 0;
    var marchOtherItem = 0;
    var aprilOtherItem = 0;
    var mayOtherItem = 0;
    var juneOtherItem = 0;
    var julyOtherItem = 0;
    var augustOtherItem = 0;
    var septemberOtherItem = 0;
    var octoberOtherItem = 0;
    var novemberOtherItem = 0;
    var decemberOtherItem = 0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.totalOtherItem != null &&
            visibleRows[i].data.totalOtherItem != "") {
            totalOtherItem = totalOtherItem + parseFloat(visibleRows[i].data.totalOtherItem);
        } else {
            totalOtherItem = totalOtherItem + parseFloat(0);
        }

        if (visibleRows[i].data.januaryOtherItem != null &&
            visibleRows[i].data.januaryOtherItem != "") {
            januaryOtherItem = januaryOtherItem + parseFloat(visibleRows[i].data.januaryOtherItem);
        } else {
            januaryOtherItem = januaryOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.februaryOtherItem != null &&
            visibleRows[i].data.februaryOtherItem != "") {
            februaryOtherItem = februaryOtherItem + parseFloat(visibleRows[i].data.februaryOtherItem);
        } else {
            februaryOtherItem = februaryOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.marchOtherItem != null &&
            visibleRows[i].data.marchOtherItem != "") {
            marchOtherItem = marchOtherItem + parseFloat(visibleRows[i].data.marchOtherItem);
        } else {
            marchOtherItem = marchOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.aprilOtherItem != null &&
            visibleRows[i].data.aprilOtherItem != "") {
            aprilOtherItem = aprilOtherItem + parseFloat(visibleRows[i].data.aprilOtherItem);
        } else {
            aprilOtherItem = aprilOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.mayOtherItem != null &&
            visibleRows[i].data.mayOtherItem != "") {
            mayOtherItem = mayOtherItem + parseFloat(visibleRows[i].data.mayOtherItem);
        } else {
            mayOtherItem = mayOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.juneOtherItem != null &&
            visibleRows[i].data.juneOtherItem != "") {
            juneOtherItem = juneOtherItem + parseFloat(visibleRows[i].data.juneOtherItem);
        } else {
            juneOtherItem = juneOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.julyOtherItem != null &&
            visibleRows[i].data.julyOtherItem != "") {
            julyOtherItem = julyOtherItem + parseFloat(visibleRows[i].data.julyOtherItem);
        } else {
            julyOtherItem = julyOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.augustOtherItem != null &&
            visibleRows[i].data.augustOtherItem != "") {
            augustOtherItem = augustOtherItem + parseFloat(visibleRows[i].data.augustOtherItem);
        } else {
            augustOtherItem = augustOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.septemberOtherItem != null &&
            visibleRows[i].data.septemberOtherItem != "") {
            septemberOtherItem = septemberOtherItem +
                parseFloat(visibleRows[i].data.septemberOtherItem);
        } else {
            septemberOtherItem = septemberOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.octoberOtherItem != null &&
            visibleRows[i].data.octoberOtherItem != "") {
            octoberOtherItem = octoberOtherItem + parseFloat(visibleRows[i].data.octoberOtherItem);
        } else {
            octoberOtherItem = octoberOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.novemberOtherItem != null &&
            visibleRows[i].data.novemberOtherItem != "") {
            novemberOtherItem = novemberOtherItem + parseFloat(visibleRows[i].data.novemberOtherItem);
        } else {
            novemberOtherItem = novemberOtherItem + parseFloat(0);
        }
        if (visibleRows[i].data.decemberOtherItem != null &&
            visibleRows[i].data.decemberOtherItem != "") {
            decemberOtherItem = decemberOtherItem + parseFloat(visibleRows[i].data.decemberOtherItem);
        } else {
            decemberOtherItem = decemberOtherItem + parseFloat(0);
        }

    }

    obj = {};
    obj.payItemsOtherItem = "Total Other Items";
    obj.totalOtherItem = totalOtherItem.toFixed(2);
    obj.januaryOtherItem = januaryOtherItem.toFixed(2);
    obj.februaryOtherItem = februaryOtherItem.toFixed(2);
    obj.marchOtherItem = marchOtherItem.toFixed(2);
    obj.aprilOtherItem = aprilOtherItem.toFixed(2);
    obj.mayOtherItem = mayOtherItem.toFixed(2);
    obj.juneOtherItem = juneOtherItem.toFixed(2);
    obj.julyOtherItem = julyOtherItem.toFixed(2);
    obj.augustOtherItem = augustOtherItem.toFixed(2);
    obj.septemberOtherItem = septemberOtherItem.toFixed(2);
    obj.octoberOtherItem = octoberOtherItem.toFixed(2);
    obj.novemberOtherItem = novemberOtherItem.toFixed(2);
    obj.decemberOtherItem = decemberOtherItem.toFixed(2);

    result.push(obj)

    return result;


}
/* ------------Ag grid function for total calculation(DEDUCTION UNDER CHAPTER  VI A)----------------------- */
function onGridReadySlitDeductionVi(event) {
    gridOptionsDeductionVi.api.setPinnedBottomRowData(createSlitData(gridOptionsDeductionVi.api));
}


function createSlitDataDeductionVi(gridApi) {
    var result = [];

    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var sectionInvestment = 0;
    var gross = 0;
  var qualifying=0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.gross != null &&
            visibleRows[i].data.gross != "") {
        	gross = gross + parseFloat(visibleRows[i].data.gross);
        } else {
        	gross = gross + parseFloat(0);
        }
        if (visibleRows[i].data.qualifying != null &&
                visibleRows[i].data.qualifying != "") {
        	qualifying = qualifying + parseFloat(visibleRows[i].data.qualifying);
            } else {
            	qualifying = qualifying + parseFloat(0);
            }

    }

    obj = {};
    obj.sectionInvestment = "Total";
    obj.gross = gross.toFixed(2);
    obj.qualifying = qualifying.toFixed(2);
    result.push(obj)

    return result;


}

/* ------------Ag grid function for total Surchage On Tax----------------------- */
function onGridReadySlitSurchageOnTax(event) {
	gridOptionsSurchageOnTax.api.setPinnedBottomRowData(createSlitData(gridOptionsSurchageOnTax.api));
}

function createSlitDataSurchageOnTax(gridApi) {
    var result = [];
    
    
    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var incomeForTotalEmployer = 0;
    var perquisiteAmount = 0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.perquisiteAmount != null &&
            visibleRows[i].data.perquisiteAmount != "") {
        	perquisiteAmount = perquisiteAmount + parseFloat(visibleRows[i].data.perquisiteAmount);
        } else {
        	perquisiteAmount = perquisiteAmount + parseFloat(0);
        }
    }

    obj = {};
    obj.perquisiteItem = "Total Income";
    obj.perquisiteAmount = perquisiteAmount.toFixed(2);

    result.push(obj)

    return result;


}
/* ------------Ag grid function for total calculation(Perquisites)----------------------- */
function onGridReadySlitPerquisites(event) {
    gridOptionsPerquisites.api.setPinnedBottomRowData(createSlitDataPerquisites(gridOptionsPerquisites.api));
}

function createSlitDataPerquisites(gridApi) {
    var result = [];

    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var perquisiteItem = 0;
    var perquisiteAmount = 0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.perquisiteAmount != null &&
            visibleRows[i].data.perquisiteAmount != "") {
            perquisiteAmount = perquisiteAmount + parseFloat(visibleRows[i].data.perquisiteAmount);
        } else {
            perquisiteAmount = perquisiteAmount + parseFloat(0);
        }
    }

    obj = {};
    obj.perquisiteItem = "Total Perquisites";
    obj.perquisiteAmount = perquisiteAmount.toFixed(2);

    perquisiteTotal = perquisiteAmount.toFixed(2);
    result.push(obj)

    return result;

}

/* ------------Ag grid function for total calculation(Income Excluded From Tax)----------------------- */
function onGridReadySlitExcludedTax(event) {
    gridOptionsExcludedTax.api.setPinnedBottomRowData(createSlitDataExcludedTax(gridOptionsExcludedTax.api));
}

function createSlitDataExcludedTax(gridApi) {
    var result = [];

    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var miscExcludedTax = 0;
    var payItemsExcludedTax = 0;

    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.perquisiteAmount != null &&
            visibleRows[i].data.perquisiteAmount != "") {
            miscExcludedTax = miscExcludedTax + parseFloat(visibleRows[i].data.perquisiteAmount);
        } else {
            miscExcludedTax = miscExcludedTax + parseFloat(0);
        }
    }

    obj = {};
    obj.perquisiteItem = "Total";
    obj.perquisiteAmount = miscExcludedTax.toFixed(2);
    incomeExFromTaxTotal = miscExcludedTax.toFixed(2);
    result.push(obj)

    return result;

}


/* ------------Ag grid function for total calculation(Income for Prev Employer)----------------------- */
function onGridReadySlitPrevEmployer(event) {
	gridOptionsPrevEmployer.api.setPinnedBottomRowData(createSlitData(gridOptionsPrevEmployer.api));
}

function createSlitDataPrevEmployer(gridApi) {
    var result = [];
    
    
    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var incomeForTotalEmployer = 0;
    var perquisiteAmount = 0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.perquisiteAmount != null &&
            visibleRows[i].data.perquisiteAmount != "") {
        	perquisiteAmount = perquisiteAmount + parseFloat(visibleRows[i].data.perquisiteAmount);
        } else {
        	perquisiteAmount = perquisiteAmount + parseFloat(0);
        }
    }

    obj = {};
    obj.perquisiteItem = "Total Income from Prev Employers";
    obj.perquisiteAmount = perquisiteAmount.toFixed(2);

    result.push(obj)

    return result;


}

/* ------------Ag grid function for total calculation(Other Income By Employee)----------------------- */
function onGridReadySlitOtherIncomeByEmp(event) {
	gridOptionsOtherIncomeByEmp.api.setPinnedBottomRowData(createSlitData(gridOptionsOtherIncomeByEmp.api));
}

function createSlitDataOtherIncomeByEmp(gridApi) {
    var result = [];
    
    
    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }
    var incomeForTotalEmployer = 0;
    var perquisiteAmount = 0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.perquisiteAmount != null &&
            visibleRows[i].data.perquisiteAmount != "") {
        	perquisiteAmount = perquisiteAmount + parseFloat(visibleRows[i].data.perquisiteAmount);
        } else {
        	perquisiteAmount = perquisiteAmount + parseFloat(0);
        }
    }

    obj = {};
    obj.perquisiteItem = "Total Income from Prev Employers";
    obj.perquisiteAmount = perquisiteAmount.toFixed(2);

    result.push(obj)

    return result;


}
/* ------------Ag grid function for total calculation(Less Deduction Under Section 16)----------------------- */
function onGridReadySlitLessDeduction(event) {
	gridOptionsLessDeduction.api.setPinnedBottomRowData(createSlitData(gridOptionsLessDeduction.api));
}

function createSlitLessDeduction(gridApi) {
    var result = [];
    
    
    var model;
    var visibleRows = [];
    if (gridApi) {
        model = gridApi.getModel();
        visibleRows = model.rowsToDisplay;
    }

    var incomeForTotalEmployer = 0;
    var perquisiteAmount = 0;


    for (var i = 0; i < visibleRows.length; i++) {
        if (visibleRows[i].data.perquisiteAmount != null &&
            visibleRows[i].data.perquisiteAmount != "") {
        	perquisiteAmount = perquisiteAmount + parseFloat(visibleRows[i].data.perquisiteAmount);
        } else {
        	perquisiteAmount = perquisiteAmount + parseFloat(0);
        }
    }

    obj = {};
    obj.perquisiteItem = "Total";
    obj.perquisiteAmount = perquisiteAmount.toFixed(2);

    result.push(obj)

    return result;


}
function getPeriod() {
    var finanacialId = $("#fID").val();
    if (finanacialId) {

        $.ajax({
            type: 'GET',
            url: 'tax-declaration-date-ajax?finanacialid=' + finanacialId,
            contentType: false,
            success: function(response) {
                if (response.message == "success") {
                    for (var i = 0; i < response.body.length; i++) {

                        $("#period1").val(response.body[i].key);
                        $("#period2").val(response.body[i].name);

                    }
                }
            },
            error: function(e) {

            }
        });
    } else {
        $("#period1").val("");
        $("#period2").val("");

    }
}
</script>
</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">
						<div id="main_content">

				<!-- 			<div class="row">
								<div class="col-md-3">
									<div class="form-group">
										<label> Financial Year</label>
										<div class="select">
											<select id="fID" class="form-control" onchange="getPeriod()">
												<option value="">--Select--</option>
												<option th:each="c,iter:${financialYr}" th:value="${c.key}"
													th:text="${c.name}"></option>
											</select>
										</div>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label></label> <input id="period1" class="form-control"
											readonly>
									</div>
								</div>

								<div class="col-md-3">
									<div class="form-group">
										<label></label> <input id="period2" class="form-control"
											readonly>
									</div>
								</div>

								<div class="col-md-12 buttonsec btn-hs">
									<button onclick="deleteFun()" class="btn3" id="delete">delete</button>
									<button class="btn1" id="add" onclick="openNav()">New</button>
								</div>

							</div> -->


							<div class="row">
								<div class="col-md-3"></div>
							</div>
							<div id="main">
								<input type="hidden" id="sessionId" th:value="${userId}" /> <input
									type="hidden" id="sessionName" th:value="${userName}" /> <input
									type="hidden" id="hrRole" th:value="${hrRole}" /> <input
									type="hidden" id="sessionRole" th:value="${userRole}" />

								<div class="row">
									<div class="col-md-3">
										<H5>TAXABLE INCOME</H5>
									</div>
								</div>
								<div class="row">
									<div class="col-md-3">MONTHLY INCOME</div>
								</div>

								<div id="myGrid" style="width: 100%; height: 243px;"
									class="ag-theme-alpine"></div>


								<div class="col-md-12"
									style="border: 1px solid #ccc; padding-left: 10px;">ADHOC
									INCOME</div>

								<div id="myGridAdhoc" style="width: 100%; height: 183px;"
									class="ag-theme-alpine"></div>


								<div class="row mt-4">
									<div class="col-md-3">OTHER ITEMS</div>
								</div>
								<div id="myGridOtherItems" style="width: 100%; height: 159px;"
									class="ag-theme-alpine"></div>

								<div class="row mt-4">
									<div class="col-md-3">PERQUISITES</div>
								</div>
								<div id="myGridPerquisites" style="width: 100%; height: 184px;"
									class="ag-theme-alpine"></div>

								<div class="row mt-4">
									<div class="col-md-3">INCOME EXCLUDED FROM TAX</div>
								</div>
								<div id="myGridExcludedTax" style="width: 100%; height: 93px;"
									class="ag-theme-alpine"></div>
								<div class="row mt-4">
									<div class="col-md-3">Gross Salary</div>
								</div>
								<div id="myGridGrossSalary" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
								<div class="row mt-4">
									<div class="col-md-3">LESS EXEMPTION UNDER SECTION 10</div>
								</div>
								<div id="myGridLessExemption"
									style="width: 100%; height: 150px;" class="ag-theme-alpine"></div>
								<div class="row mt-4">
									<div class="col-md-3">INCOME FROM PREVIOUS EMPLOYER</div>
								</div>
								<div id="myGridPrevEmployer"
									style="width: 100%; height: 154px;" class="ag-theme-alpine"></div>
									
									<div class="row mt-4">
									<div class="col-md-3">INCOME AFTER EXEMPTION</div>
								</div>
								<div id="myGridIncomeAftExemp" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
									<div class="row mt-4">
									<div class="col-md-3">LESS DEDUCTION UNDER SECTION 16</div>
								</div>
								<div id="myGridLessDeduction"
									style="width: 100%; height: 150px;" class="ag-theme-alpine"></div>
									
									<div class="row mt-4">
									<div class="col-md-3">INCOME CHARGABLE UNDER THE HEAD SALRIES</div>
								</div>
								<div id="myGridIncomeChargeUnderSal" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
									
										<div class="row mt-4">
									<div class="col-md-3">ADD ANY OTHER INCOME DECLARED BY EMPLOYEE</div>
								</div>
								<div id="myGridOtherIncomeByEmp" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
									<div class="row mt-4">
									<div class="col-md-3">GROSS TOTAL INCOME</div>
								</div>
								<div id="myGridgrossTotalIncome" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
										<div class="row mt-4">
									<div class="col-md-3">DEDUCTION UNDER CHAPTER  VI A</div>
								</div>
								<div id="myGridDeductionVi" style="width: 100%; height: 159px;"
									class="ag-theme-alpine"></div>
									
									<div class="row mt-4">
									<div class="col-md-3">TAXABLE INCOME</div>
								</div>
								<div id="myGridtaxableIncome" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
										<div class="row mt-4">
									<div class="col-md-3">ROUND OFF TO NEAREST 10 RUPEE</div>
								</div>
								<div id="myGridroundOffNearest" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
										<div class="row mt-4">
									<div class="col-md-3">TAX ON TOTAL INCOME</div>
								</div>
								<div id="myGridtaxOnTotalIncome" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
										<div class="row mt-4">
									<div class="col-md-3">SURCHAGE ON TAX</div>
								</div>
								<div id="myGridSurchageOnTax" style="width: 100%; height: 159px;"
									class="ag-theme-alpine"></div>
									
									<div class="row mt-4">
									<div class="col-md-3">NET TAX </div>
								</div>
								<div id="myGridnetTax" style="width: 100%; height: 65px;"
									class="ag-theme-alpine"></div>
									
										<div class="row mt-4">
									<div class="col-md-3">TAX PAID TILL </div>
								</div>
								<div id="myGridtaxPaidTill" style="width: 100%; height: 159px;"
									class="ag-theme-alpine"></div>
							</div>
						</div>


					</div>

				</div>
			</div>
		</div>
	</div>
</body>

</html>