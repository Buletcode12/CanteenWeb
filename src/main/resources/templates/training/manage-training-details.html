<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.spanc {
	color: blue;
	cursor: pointer;
}

.mb-20 {
	margin-bottom: 20px;
}
</style>
<!-- ck editor slim selector CDN -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.27.0/slimselect.min.js"></script>
<!-- <script
	src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.27.0/slimselect.css"></script> -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.27.0/slimselect.js"></script>
<!-- <script
	src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.27.0/slimselect.min.css"></script> -->
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/slim-select/1.27.0/slimselect.min.mjs"></script>

<script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
<script>
	$(document)
			.ready(
					function() {
						
						$("#uploadTrainingContent").hide();
						$("#uploadTrainingMaterials").hide();
						$("#documentSection").hide();
						getTrainingCategoryList();
						$('#docTbl').on('click', '.rmv1', function() {
							openDeleteConfirm();
							var value = $(this).parent("div").attr("id");

							$("#dltValue").val(value);
						});

						CKEDITOR.replace('commentck', {
							height : 200,
							removePlugins : 'wsc',
							scayt_autoStartup : true,
							scayt_maxSuggestions : 3,
							autoParagraph : false,
						});
						$("#materialStatus").prop("checked", true);
						
						
						$("#studyMaterialType").val("Text");
					
						$("#ckDiv").hide();

						$("#categorySave")
								.click(
										function() {
											data = {};
											data.categoryId = $("#categoryId")
													.val();
											data.categoryName = $(
													"#categoryName").val();
											data.categoryDesc = $(
													"#categoryDesc").val();
											data.categoryStatus = $(
													"input[name='isActive']:checked")
													.val();
											$(".formValidation").remove();
											allValid = true;
											if (data.categoryName == null
													|| data.categoryName == "") {
												allValid = false;
												validationModal(
														"Category Name Required",
														"categoryName");
											}
											if (data.categoryDesc == null
													|| data.categoryDesc == "") {
												allValid = false;
												validationModal(
														"Category Description Required",
														"categoryDesc");
											}

											if (allValid) {
												$('.loader').show();
												$("body")
														.removeClass("overlay");
												submitTrainingCategory(data);
											}

										})

						$("#subCatSave")
								.click(
										function() {
											data = {};
											data.categoryId = $("#subCatId")
													.val();
											data.categoryName = $("#subCatName")
													.val();
											data.categoryDesc = $("#subCatDesc")
													.val();
											data.categoryStatus = $(
													"input[name='isSubCatActive']:checked")
													.val();
											data.parentId = $("#parentCat")
													.val();
											var slno = $("#slnoval").val();
											$(".formValidation").remove();
											allValid1 = true;
											if (data.categoryName == null
													|| data.categoryName == "") {
												allValid1 = false;
												validationModal(
														"Sub-Category Name Required",
														"subCatName");
											}
											if (data.categoryDesc == null
													|| data.categoryDesc == "") {
												allValid1 = false;
												validationModal(
														"Sub-Category Description Required",
														"subCatDesc");
											}

											if (allValid1) {
												$('.loader').show();
												$("body")
														.removeClass("overlay");
												submitSubCategory(data, slno);
											}

										})

						$("#deleteModalBtn")
								.click(
										function() {
											var data = $("#deleteModalBtn")
													.attr("value");
											var slno = $("#deleteModalBtn")
													.attr("slno");
											$("#deleteModalBtn").attr(
													"disabled", "disabled");
											if (data) {
												if (slno == "1") {
													$.ajax({
																type : "POST",
																url : "manage-training-category-delete",
																dataType : 'json',
																contentType : 'application/json',
																data : data,
																success : function(
																		response) {
																	if (response.message == "Success") {
																		$("#deleteModalBtn").removeAttr("disabled");
																		$("#"+ data).remove();
																		cancelModalBtn();
																		closeCat();
																		getTrainingCategoryList();
																	}
																},
																error : function(
																		data) {
																	console
																			.log(data)
																}
															});
												} else if (slno == "2") {
													$
															.ajax({
																type : "POST",
																url : "manage-training-category-delete",
																dataType : 'json',
																contentType : 'application/json',
																data : data,
																success : function(
																		response) {
																	if (response.message == "Success") {
																		$(
																				"#deleteModalBtn")
																				.removeAttr(
																						"disabled");
																		$(
																				"#"
																						+ data)
																				.remove();
																		cancelModalBtn();
																		closeNav();
																		getTrainingCategoryList();
																	}
																},
																error : function(
																		data) {
																	console
																			.log(data)
																}
															});
												}
											}
										})

					});

	function submitSubCategory(dataset, slno) {
		$.ajax({
			type : "POST",
			url : "manage-training-category-save-subcat",
			dataType : "json",
			contentType : "application/json",
			data : JSON.stringify(dataset),
			success : function(response) {
				if (response.message == "Success") {
					closeNav();
					getTrainingCategoryList();
					$('.loader').hide();
					$("body").removeClass("overlay");
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
				} else {
					getTrainingCategoryList();
					$('.loader').hide();
					$("body").removeClass("overlay");
					$("#messageParagraph").text("Something Went Wrong");
					$("#msgOkModal").removeClass("btn1");
					$("#msgOkModal").addClass("btn3");
					$("#msgModal").modal('show');
				}
			},
			error : function(response) {
				getTrainingCategoryList();
				$('.loader').hide();
				$("body").removeClass("overlay");
				$("#messageParagraph").text("Something Went Wrong");
				$("#msgOkModal").removeClass("btn1");
				$("#msgOkModal").addClass("btn3");
				$("#msgModal").modal('show');
			}
		})
	}

	function getCategoryID(id) {
		$.ajax({
			type : "GET",
			url : "manage-training-category-get-list?id=" + id,
			dataType : "json",
			contentType : "application/json",
			success : function(response) {
				console.log(response.body);
				if (response.message == "Success") {
					if (response.body.length > 0) {
						var count = 0;
						for (var i = 0; i < response.body.length; i++) {
							if (response.body[i].categoryId == id) {
								console.log("count value",
										response.body[i].countID);
								count = response.body[i].countID;
							}
						}
					}
					console.log("count value outside loop", count);
					return count;
				} else {
					console.log("nope");
				}
			},
		})
	}

	function getTrainingCategoryList() {

		$("#manage-training-tbody").empty();
		$
				.ajax({
					type : "POST",
					url : "manage-training-category-get-total-list",
					dataType : "json",
					contentType : "application/json",
					success : function(response) {
						console.log('response.body',response.body);
						if (response.message == "Success") {
							if (response.body.length > 0) {
								for (var i = 0; i < response.body.length; i++) {
									var row = "";
									console.log("xxxx", response.body[i].allotSts);
									if (response.body[i].categoryId == response.body[i].parentId) {
										console.log("if executed",
												response.body[i].allotSts);
										if (response.body[i].nodeCount == 0) {
											console.log("inside node 0 but parent");
											materialId = $("#studyMaterialId")
													.val();
											
											row = '<tr data-node-id="' + response.body[i].categoryId + '" class="abc" id="' + response.body[i].categoryId + '">'
													+ '<td class="firstnode tr-node-one" id=lbl_' + response.body[i].categoryId + '>'
													+ response.body[i].categoryName
													+ '<label for="check1">&nbsp;&nbsp;<a href="javascript:void(0)"><i title="Add Child" class="ti-plus cbicon" onclick=openNav("'
													+ response.body[i].categoryId
													+ '","1","'
													+ response.body[i].contentStatus
													+ '");></i></a>&nbsp;<a href="javascript:void(0)"><i title="Edit Category" class="ti-pencil" onclick=editCategory("'
													+ response.body[i].categoryId
													+ '")></i></a>&nbsp;<a href="javascript:void(0)" ><i title="Delete Category" class="ti-close" id=dl_'
													+ response.body[i].categoryId
													+ ' onclick=deleteCategory("'+ response.body[i].categoryId+'",'+response.body[i].allotSts+')></i></a></label>'
													+ '</td></tr>';

										} else if (response.body[i].nodeCount > 0) {
											console.log("inside only parent");
											row = '<tr data-node-id="' + response.body[i].categoryId + '" class="abc" id="' + response.body[i].categoryId + '">'
													+ '<td class="firstnode tr-node-one" id=lbl_' + response.body[i].categoryId + '>'
													+ response.body[i].categoryName
													+ '<label for="check1">&nbsp;&nbsp;<a href="javascript:void(0)"><i title="Add Child" class="ti-plus cbicon" onclick=openNav("'
													+ response.body[i].categoryId
													+ '","1","'
													+ response.body[i].contentStatus
													+ '");></i></a>&nbsp;<a href="javascript:void(0)"><i title="Edit Category" class="ti-pencil" onclick=editCategory("'
													+ response.body[i].categoryId
													+ '")></i></a>&nbsp;</label>'
													+ '</td></tr>';
										}
									} else {

										if (response.body[i].nodeCount > 0) {
											console.log("inside only parent");
											row = '<tr data-node-id="' + response.body[i].categoryId + '" data-node-pid="' + response.body[i].parentId + '" class="abc" id="' + response.body[i].categoryId + '">'
													+ '<td class="firstnode" id=lbl_' + response.body[i].categoryId + '><span id=sp_' + response.body[i].categoryId +'>'
													+ response.body[i].categoryName
													+ '</span><label for="check1">&nbsp;&nbsp;<a href="javascript:void(0)"><i title="Add Child" class="ti-plus cbicon" onclick=openNav("'
													+ response.body[i].categoryId
													+ '","2","'
													+ response.body[i].contentStatus
													+ '");></i></a>&nbsp;<a href="javascript:void(0)"><i title="Edit Category" class="ti-pencil" onclick=editSubCategory("'
													+ response.body[i].categoryId
													+ '","'
													+ response.body[i].parentId
													+ '")></i></a>&nbsp;</label>'
													+ '</td></tr>';
										} else {

											console.log("else executed",
													response.body[i]);
											row = '<tr data-node-id="' + response.body[i].categoryId + '" data-node-pid="' + response.body[i].parentId + '" class="abc" id="' + response.body[i].categoryId + '">'
													+ '<td class="firstnode" id=lbl_' + response.body[i].categoryId + '><span id=sp_' + response.body[i].categoryId +'>'
													+ response.body[i].categoryName
													+ '</span><label for="check1">&nbsp;&nbsp;<a href="javascript:void(0)"><i title="Add Child" class="ti-plus cbicon" onclick=openNav("'
													+ response.body[i].categoryId
													+ '","2","'
													+ response.body[i].contentStatus
													+ '");></i></a>&nbsp;<a href="javascript:void(0)"><i title="Edit Category" class="ti-pencil" onclick=editSubCategory("'
													+ response.body[i].categoryId
													+ '","'
													+ response.body[i].parentId
													+ '")></i></a>&nbsp;<a href="javascript:void(0)" id=dl_'
													+ response.body[i].categoryId
													+ '><i title="Delete Category" class="ti-close" onclick=deleteCategory("'+ response.body[i].categoryId+'",'+response.body[i].allotSts+')></i></a></label>'
													+ '</td></tr>';
										}

									}
									$("#manage-training-tbody").append(row);
								}

								$('.loader').hide();
								$("body").removeClass("overlay");
								$('#basic').simpleTreeTable({
									expander : $('#expander'),
									collapser : $('#collapser'),
									store : 'session',
									storeKey : 'simple-tree-table-basic'
								});
								var trss = document.getElementsByTagName("tr");
								console.log("ggggg", trss);
								for (var i = 0; i < trss.length; i++) {
									if (trss[i].className == 'abc simple-tree-table-empty'
											&& response.body[i].contentStatus == 0) {
										$("#" + trss[i].id).addClass('spanc');
										$("#sp_" + trss[i].id).attr(
												'onclick',
												'addTraining("' + trss[i].id
														+ '",0)');
										$("#sp_" + trss[i].id).attr('title',
												"Upload Training Content");
									} else if (response.body[i].contentStatus == 1) {
										$("#" + trss[i].id).addClass('spanc');
										$("#sp_" + trss[i].id).attr(
												'onclick',
												'addTraining("' + trss[i].id
														+ '",1)');
										$("#sp_" + trss[i].id).attr('title',
												"Upload Training Content");

									} else {
										$("#dl_" + trss[i].id).show();
										console.log("iiiiii", trss[i]);
									}
								}
							}
						} else {
							$('.loader').hide();
							$("body").removeClass("overlay");
						}
					},
					error : function(response) {
						$('.loader').hide();
						$("body").removeClass("overlay");
					}
				})
	}

	function deleteCategory(id,sts=0) {
		if (sts==0) {
			$("#delete").modal('show');
			$("#deleteModalBtn").attr("value", id);
			$("#deleteModalBtn").attr("slno", "1");
		} else {
			$("#messageParagraph").text("This category is assigned to someone. Delete prohibited");
			$("#msgOkModal").removeClass("btn1");
			$("#msgOkModal").addClass("btn3");
			$("#msgModal").modal('show');
			$("#delete").modal('hide');
			$("#deleteModalBtn").attr("value", "");
			$("#deleteModalBtn").removeAttr("disabled");
			$("#deleteModalBtn").attr("slno", "");
		}
	}
	function cancelModalBtn() {
		$("#delete").modal('hide');
		$("#deleteModalBtn").attr("value", "");
		$("#deleteModalBtn").attr("slno", "");
		$("#deleteModalBtn").removeAttr("disabled");
	}

	function deleteSubCategory(id) {
		if (id) {
			$("#delete").modal('show');
			$("#deleteModalBtn").attr("value", id);
			$("#deleteModalBtn").attr("slno", "2");
		} else {
			$("#delete").modal('hide');
			$("#deleteModalBtn").attr("value", "");
			$("#deleteModalBtn").removeAttr("disabled");
			$("#deleteModalBtn").attr("slno", "");
		}
	}

	function openNav(categoryId, sl, st) {

		if (st == "0") {

			closeCat();
			var pName = $("#lbl_" + categoryId).text();
			$("#subCatParentSpan").text(" " + pName);
			$("#parentCat").val(categoryId);

			$("#subCatId").val("");
			$("#subCatName").val("");
			$("#subCatDesc").val("");
			$('#subCatStatus').prop('checked', true);

			$("#slnoval").val(sl);

			$("#dltSlideSubCat").attr("onclick", "");

			document.getElementById("mySidenavSubCat").style.cssText = "width: 270px; position: absolute; right:-10px; overflow: hidden;";
			document.getElementById("main").style.width = "420px";
		} else if (st == "1") {

			$("#messageParagraph").text("You already have content in this category..You can't create subcategory further.");
			$("#msgOkModal").removeClass("btn1");
			$("#msgOkModal").addClass("btn3");
			$("#msgModal").modal('show');
		} else {

			closeCat();
			var pName = $("#lbl_" + categoryId).text();
			$("#subCatParentSpan").text(" " + pName);
			$("#parentCat").val(categoryId);

			$("#subCatId").val("");
			$("#subCatName").val("");
			$("#subCatDesc").val("");
			$('#subCatStatus').prop('checked', true);

			$("#slnoval").val(sl);

			$("#dltSlideSubCat").attr("onclick", "");

			document.getElementById("mySidenavSubCat").style.cssText = "width: 270px; position: absolute; right:-10px; overflow: hidden;";
			document.getElementById("main").style.width = "420px";
		}
	}

	function submitTrainingCategory(dataset) {
		$.ajax({
			type : "POST",
			url : "manage-training-category-save",
			dataType : "json",
			contentType : "application/json",
			data : JSON.stringify(dataset),
			success : function(response) {
				if (response.message == "Success") {
					closeCat();
					getTrainingCategoryList();
					$('.loader').hide();
					$("body").removeClass("overlay");
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
				} else {
					getTrainingCategoryList();
					$('.loader').hide();
					$("body").removeClass("overlay");
					$("#messageParagraph").text("Something Went Wrong");
					$("#msgOkModal").removeClass("btn1");
					$("#msgOkModal").addClass("btn3");
					$("#msgModal").modal('show');
				}
			},
			error : function(response) {
				getTrainingCategoryList();
				$('.loader').hide();
				$("body").removeClass("overlay");
				$("#messageParagraph").text("Something Went Wrong");
				$("#msgOkModal").removeClass("btn1");
				$("#msgOkModal").addClass("btn3");
				$("#msgModal").modal('show');
			}
		})
	}

	function closeCat() {

		$("#categoryId").val("");
		$("#categoryName").val("");
		$("#categoryDesc").val("");
		$('#catStatus').prop('checked', true);
		$("#deleteSlideCat").attr("onclick", "");

		document.getElementById("mySidenavCat").style.width = "0";
		document.getElementById("main").style.width = "480px";
	}

	function closeNav() {

		$("#subCatParentSpan").text(" ");
		$("#parentCat").val("");
		$("#subCatId").val("");
		$("#subCatName").val("");
		$("#subCatDesc").val("");
		$('#subCatStatus').prop('checked', true);
		$("#slnoval").val("");
		$("#dltSlideSubCat").attr("onclick", "");

		document.getElementById("mySidenavSubCat").style.width = "0";
		document.getElementById("main").style.width = "480px";

	}

	function openCat() {
		closeNav();
		$("#categoryId").val("");
		$("#categoryName").val("");
		$("#categoryDesc").val("");
		$('#catStatus').prop('checked', true);
		$("#deleteSlideCat").attr("onclick", "");

		document.getElementById("mySidenavCat").style.cssText = "width: 270px; position: absolute; right:-10px; overflow: hidden;";
		document.getElementById("main").style.width = "420px";
	}

	function editSubCategory(id, pId) {

		openNav(pId, "2");
		$("#subCatId").val(id);
		if (id) {
			$.ajax({
				type : "POST",
				url : "manage-training-category-dtls-by-id",
				dataType : "json",
				contentType : "application/json",
				data : id,
				success : function(response) {
					if (response.message == "Success") {
						if (response.body != null && response.body != "") {
							$("#subCatName").val(response.body.categoryName);
							$("#subCatDesc").val(response.body.categoryDesc);
							if (response.body.categoryStatus == "1") {
								$('#subCatStatus').prop('checked', true);
							} else {
								$('#subCatStatus').prop('checked', false);
							}
							var onAttr = "deleteSubCategory('"
									+ response.body.categoryId + "')";
							$("#dltSlideSubCat").attr("onclick", onAttr);
						}
					}
				},
				error : function(data) {
					$("#subCatId").val("");
					$("#subCatName").val("");
					$("#subCatDesc").val("");
					$('#subCatStatus').prop('checked', true);
					$("#dltSlideSubCat").attr("onclick", "");
				}
			});
		} else {
			$("#subCatId").val("");
			$("#subCatName").val("");
			$("#subCatDesc").val("");
			$('#subCatStatus').prop('checked', true);
			$("#dltSlideSubCat").attr("onclick", "");
		}
	}

	function editCategory(id) {
		openCat();
		$("#categoryId").val(id);
		if (id) {
			$.ajax({
				type : "POST",
				url : "manage-training-category-dtls-by-id",
				dataType : "json",
				contentType : "application/json",
				data : id,
				success : function(response) {
					if (response.message == "Success") {
						if (response.body != null && response.body != "") {
							$("#categoryName").val(response.body.categoryName);
							$("#categoryDesc").val(response.body.categoryDesc);
							if (response.body.categoryStatus == "1") {
								$('#catStatus').prop('checked', true);
							} else {
								$('#catStatus').prop('checked', false);
							}
							var onAttr = "deleteCategory('"
									+ response.body.categoryId + "')";
							$("#deleteSlideCat").attr("onclick", onAttr);
						}
					}
				},
				error : function(data) {
					$("#categoryId").val("");
					$("#categoryName").val("");
					$("#categoryDesc").val("");
					$('#catStatus').prop('checked', true);
					$("#deleteSlideCat").attr("onclick", "");
				}
			});
		} else {
			$("#categoryId").val("");
			$("#categoryName").val("");
			$("#categoryDesc").val("");
			$('#catStatus').prop('checked', true);
			$("#deleteSlideCat").attr("onclick", "");
		}
	}

	//fuction is used to upload the training content
	function addTraining(id, st) {
		$("#uploadtxt").addClass("active");
		$("#uploadPdf").removeClass("active");
		$("#uploadVdo").removeClass("active");
		$("#uploadAudio").removeClass("active");
		$("#initialTrainingScreen").hide();
		$("#uploadTrainingContent").show();
		$("#uploadCategoryId").val(id);
		$("#uploadTrainingMaterials").show();
		$("#documentSection").hide();
		$("#ckDiv").show();
		var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
				+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0" onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
				+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0"  onblur="checkForDuplicateEntry(event)"></div></td>'
				+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
				+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
				+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"></div><input type="hidden" id="editId_0></td>'
				+ '</tr>';
		$("#doctbodyData").html(tbl);
	}

	function saveTrainingContent() {
		$(".formValidation").remove()
		var allValid = true;

		if (!validationUpdated("Heading Required", 'textHeading'))
			allValid = false;

		if (!validationUpdated("Description Required", 'textDescription'))
			allValid = false;

		if (!validationUpdated("Description Required", 'textDescription'))
			allValid = false;
		if (window.st == 0) {
			$("#messageParagraph").text(
					"File Extention Doesn't Meet with Document Type");
			$("#msgModal").modal('show');
			allValid = false;
		}
		checkEmptyy();
		if (window.upst == 1) {
			allValid = false;
		}

		if ($("#studyMaterialType").val() == "Text") {
			if (CKEDITOR.instances.commentck.getData() == null
					|| CKEDITOR.instances.commentck.getData() == "") {
				allValid = false;
				validationModal("Content Required", "commentck");
			}

		}

		var datas = [];
		var uploadList = [];
		if (allValid) {
			$("#doctbodyData > tr").each(
					function(i) {
						var uFile = $(this).find(".document")[0].files[0];
						var fileName = $(this).find(".document").val();
						var data = [];
						var x = [];
						if (fileName != '' && fileName != 'undefined'
								&& fileName != null) {
							var lastIndex = fileName.lastIndexOf("\\");
							if (lastIndex >= 0) {
								fileName = fileName.substring(lastIndex + 1);
							}
							var reader = new FileReader();
							reader.readAsDataURL(uFile);

							reader.onload = function() {
								data = reader.result.split(",");
								x.push(data[1]);
							};
						}
						uploadData = {};
						uploadData['documnentName'] = $("#docnoid_" + i).val();
						uploadData['documentFile'] = x;
						uploadData['fileName'] = fileName;
						uploadData['imageNameEdit'] = $(this).find(
								".uploadHidCls").val();
						uploadList.push(uploadData);
					});

			setTimeout(function() {

				obj = {};
				obj.materialId = $("#studyMaterialId").val();
				obj.textDescription = $("#textDescription").val();
				obj.textHeading = $("#textHeading").val();
				obj.categoryId = $("#uploadCategoryId").val();
				obj.studyMaterialType = $("#studyMaterialType").val();
				obj.materialStatus = $('#materialStatus:checked').val();
				obj.textContent = CKEDITOR.instances.commentck.getData();
				obj.timeSpent = obj.textHour + ":" + obj.textHour;

				if (obj.materialStatus == undefined) {
					obj.materialStatus = "0";
				} else {
					obj.materialStatus = "1";
				}

				obj.documentList = uploadList;
				datas.push(obj);
				$('.loader').show();
				$("body").removeClass("overlay");
				saveStudyMaterial(datas);
			}, 1000)
		}
	}

	function saveStudyMaterial(data) {
		$.ajax({
			type : "POST",
			url : "manage-training-save-studymaterial",
			dataType : "json",
			contentType : "application/json",
			data : JSON.stringify(data),
			success : function(response) {
				if (response.message == "Success") {
					backPage();
					$('.loader').hide();
					$("body").removeClass("overlay");
					$("#messageParagraph").text("Data Saved Successfully");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					
					
					$("#textDescription").val("");
					$("#textHeading").val("");
					$("#materialStatus").prop("checked", true);
					CKEDITOR.instances.commentck.setData('');
					

				} else {
					$('.loader').hide();
					$("body").removeClass("overlay");
					$("#messageParagraph").text("Something Went Wrong");
					$("#msgOkModal").removeClass("btn1");
					$("#msgOkModal").addClass("btn3");
					$("#msgModal").modal('show');

				}
			},
			error : function(response) {
				$('.loader').hide();
				$("body").removeClass("overlay");
				$("#messageParagraph").text("Something Went Wrong");
				$("#msgOkModal").removeClass("btn1");
				$("#msgOkModal").addClass("btn3");
				$("#msgModal").modal('show');
			}
		})
	}

	function uploadStudyMaterials(event) {
		$("#textHour").val("");
		$("#textHeading").val("");
		$("#textDescription").val("");
		CKEDITOR.instances.commentck.setData('');
		var type = event.currentTarget.value;
		if (type == 'Text') {
			$("#uploadtxt").addClass("active");
			$("#uploadPdf").removeClass("active");
			$("#uploadVdo").removeClass("active");
			$("#uploadAudio").removeClass("active");
			$("#ckDiv").show();
			$("#studyMaterialType").val("Text");
			$("#documentSection").hide();

		} else if (type == 'Pdf') {
			$("#uploadPdf").addClass("active");
			$("#uploadtxt").removeClass("active");
			$("#uploadVdo").removeClass("active");
			$("#uploadAudio").removeClass("active");
			$("#ckDiv").hide();
			$("#studyMaterialType").val("Pdf");
			$("#documentSection").show();
			window.value = 'Pdf';

			var lengthOfTableRow1 = 0;
			$("#docTbl > #doctbodyData > tr").each(function() {
				lengthOfTableRow1 = lengthOfTableRow1 + 1;
			})
			for (i = 0; i < lengthOfTableRow1; i++) {
				let name = "dltImage_" + i;
				console.log(name);
				id = name;
				$("#" + id).closest('tr').remove();
			}
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);

		} else if (type == 'Video') {
			$("#uploadVdo").addClass("active");
			$("#uploadPdf").removeClass("active");
			$("#uploadtxt").removeClass("active");
			$("#uploadAudio").removeClass("active");
			$("#ckDiv").hide();
			$("#studyMaterialType").val("Video");
			$("#documentSection").show();
			window.value = 'Video';

			var lengthOfTableRow1 = 0;
			$("#docTbl > #doctbodyData > tr").each(function() {
				lengthOfTableRow1 = lengthOfTableRow1 + 1;
			})
			for (i = 0; i < lengthOfTableRow1; i++) {
				let name = "dltImage_" + i;
				console.log(name);
				id = name;
				$("#" + id).closest('tr').remove();
			}
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);
		} else if (type == 'Audio') {
			$("#uploadAudio").addClass("active");
			$("#uploadtxt").removeClass("active");
			$("#uploadVdo").removeClass("active");
			$("#uploadPdf").removeClass("active");
			$("#ckDiv").hide();
			$("#studyMaterialType").val("Audio");
			$("#documentSection").show();
			window.value = 'Audio';

			var lengthOfTableRow1 = 0;
			$("#docTbl > #doctbodyData > tr").each(function() {
				lengthOfTableRow1 = lengthOfTableRow1 + 1;
			})
			for (i = 0; i < lengthOfTableRow1; i++) {
				let name = "dltImage_" + i;
				console.log(name);
				id = name;
				$("#" + id).closest('tr').remove();
			}
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);

		}
	}

	//Document upload section 

	function saveMultiFile(event) {
		var AssignItemQty = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var currentFldId = "#" + currentFldId;

		var uFile = $(currentFldId)[0].files[0];
		var fileName = event.currentTarget.value;
		var lastIndex = fileName.lastIndexOf("\\");
		if (lastIndex >= 0) {
			fileName = fileName.substring(lastIndex + 1);
		}
		var extension = fileName.split(".").pop();

		var iURL = URL.createObjectURL(uFile);
		$("#uploadedBillDiv_" + counter).html("");

		if (window.value == 'Pdf') {
			if (extension == 'pdf' || extension == 'jpg' || extension == 'png'
					|| extension == 'xls' || extension == 'doc') {
				console.log("pdf success");
				window.st = 1;
			} else {
				console.log("pdf failed");
				$("#messageParagraph").text("Pick A Valid Document File");
				$("#msgModal").modal('show');
				window.st = 0;

				var lengthOfTableRow1 = 0;
				$("#docTbl > #doctbodyData > tr").each(function() {
					lengthOfTableRow1 = lengthOfTableRow1 + 1;
				})
				var id = $("#dltValue").val();
				console.log(id);
				$("#" + id).closest('tr').remove();
				closeDeleteConfirm();
				if (lengthOfTableRow1 == 1) {
					var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
							+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
							+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
							+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
							+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
							+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
							+ '</tr>';
					$("#doctbodyData").append(tbl);
				}
			}

		}
		if (window.value == 'Video') {
			if (extension == 'mp4' || extension == 'mkv' || extension == 'avi'
					|| extension == 'wmv' || extension == 'flv') {
				console.log("video success");
				window.st = 1;
			} else {
				console.log("video failed");
				$("#messageParagraph").text("Pick A Valid Video File");
				$("#msgModal").modal('show');
				window.st = 0;

				var lengthOfTableRow1 = 0;
				$("#docTbl > #doctbodyData > tr").each(function() {
					lengthOfTableRow1 = lengthOfTableRow1 + 1;
				})
				var id = $("#dltValue").val();
				console.log(id);
				$("#" + id).closest('tr').remove();
				closeDeleteConfirm();
				if (lengthOfTableRow1 == 1) {
					var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
							+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
							+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
							+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
							+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
							+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
							+ '</tr>';
					$("#doctbodyData").append(tbl);
				}
			}

		}
		if (window.value == 'Audio') {
			if (extension == 'mp3' || extension == 'aac' || extension == 'ogg'
					|| extension == 'wma') {
				console.log("audio success")
				window.st = 1;
				;
			} else {
				console.log("audio failed");
				$("#messageParagraph").text("Pick A Valid Audio File");
				$("#msgModal").modal('show');
				window.st = 0;

				var lengthOfTableRow1 = 0;
				$("#docTbl > #doctbodyData > tr").each(function() {
					lengthOfTableRow1 = lengthOfTableRow1 + 1;
				})
				var id = $("#dltValue").val();
				console.log(id);
				$("#" + id).closest('tr').remove();
				closeDeleteConfirm();
				if (lengthOfTableRow1 == 1) {
					var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
							+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
							+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
							+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
							+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
							+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
							+ '</tr>';
					$("#doctbodyData").append(tbl);
				}
			}

		}
		if (extension != null && extension != "") {
			$("#uploadHidden_" + counter).val('');
		}
		if (extension == "jpg" || extension == "png" || extension == "jpeg") {
			var LightImg = "<span class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-picture-o'></i></a></span>";
		} else if (extension == "pdf") {
			var LightImg = "<span class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-pdf-o'></i> </a></span>";
		} else if (extension == "xls" || extension == "xlsx") {
			var LightImg = "<span class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-excel-o'></i></a></span>";
		} else if (extension == "doc" || extension == "dox"
				|| extension == "docx") {
			var LightImg = "<span class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-file-word-o'></i></a></span>";
		} else if (extension == "mp4" || extension == "MOV"
				|| extension == "MP4") {
			var LightImg = "<span class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-solid fa-video-camera'></i></a></span>";
		} else if (extension == "mp3" || extension == "MP3"
				|| extension == "WAV" || extension == "AAC") {
			var LightImg = "<span class='uploadicon position-l'><a class='example-image-link' href='" + iURL + "' title='" + fileName + "' target='_balnk'><i class='fa fa-solid fa-music'></i></a></span>";
		} else {
			var LightImg = "<span class='uploadicon position-l'> </div>";
		}
		var dltImg = "<i class='ti-close position-l rmv1' onclick='openDeleteConfirm()'></i>";
		$("#uploadedBillDiv_" + counter).html(LightImg);
		$("#imageName_" + counter).html(fileName);
		$("#dltImage_" + counter).html(dltImg);
		$("#dltImage_" + counter).addClass("custom-file-delete");

		$("#clickImg_" + counter).removeClass("ti-plus");
		$("#clickImg_" + counter).addClass("ti-pencil");

	}

	function checkEmpty() {
		var infofileName = true;
		$(".formValidation").remove();
		$('.docNoclss').each(function() {
			if ($(this).val() == null || $(this).val() == "") {
				infofileName = false;
				validationModal("Document Name Required", $(this).attr('id'));
			}
		});

		var mulDocInfo = true;
		if (infofileName) {
			$('#doctbodyData > tr').each(function() {
				if ($(this).closest('tr').find('.imageName').text()) {
					mulDocInfo = true;
				} else {
					mulDocInfo = false;
					$("#messageParagraph").text("Please Choose a File ");
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					return false;
				}

			});
		}
		if (infofileName && mulDocInfo) {
			addMore1()
		}
	}

	function checkEmptyy() {
		var infofileName = true;
		$(".formValidation").remove();
		$('.docNoclss').each(function() {
			if ($(this).val() == null || $(this).val() == "") {
				infofileName = false;
				validationModal("Document Name Required", $(this).attr('id'));
			}
		});
		var mulDocInfo = true;
		if (infofileName) {
			$('#doctbodyData > tr').each(function() {
				if ($(this).closest('tr').find('.imageName').text()) {
					mulDocInfo = true;
					window.upst = 0;
				} else {
					mulDocInfo = false;
					$("#messageParagraph").text("Please Choose a File ");
					window.upst = 1;
					$("#msgOkModal").removeClass("btn3");
					$("#msgOkModal").addClass("btn1");
					$("#msgModal").modal('show');
					return false;
				}

			});
		}
	}

	//addmore fun for document upload
	function addMore1() {
		var lengthOfTableRow = $("#doctbodyData").children('tr').length;
		var cloneHtml = $("#docTbl tbody tr:first").clone();

		$("#docTbl tbody").append($("#docTbl tbody tr:first").clone());
		$("#myTable tbody tr td:last").html("");
		//var addMore = '<button type="button" class="btn btn-primary tr_clone_add" name="add" onclick="addMore1();"><span class="ti-plus"></span></button>&nbsp;'

		$("#docTbl tbody tr:last").find(".documentclss").val("");
		$("#docTbl tbody tr:last").find(".docNoclss").val("");
		$("#docTbl tbody tr:last").find(".documentclssup").val("");
		$("#docTbl tbody tr:last").find(".uploadedBillCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").empty();
		$("#docTbl tbody tr:last").find(".uploadHidCls").val('');
		$("#docTbl tbody tr:last").find(".imageName").empty();
		$("#docTbl tbody tr:last").find(".dltImage").empty();

		var j = 0;
		$("#docTbl > #doctbodyData > tr").each(function(i) {

			var selectInput = $(this).find('select');
			var textInput = $(this).find('input');
			var fileInput = $(this).find('file');
			var divInput = $(this).find('div');
			var label = $(this).find('label');
			var iInput = $(this).find('i');

			selectInput.eq(0).attr('id', "docid_" + i);
			textInput.eq(1).attr('id', "docnoid_" + i);
			label.eq(1).attr('for', "uploadDoc_" + i);
			iInput.eq(0).attr('id', "clickImg_" + i);
			textInput.eq(2).attr('id', "uploadDoc_" + i);
			textInput.eq(3).attr('id', "uploadHidden_" + i);
			divInput.eq(4).attr('id', "uploadedBillDiv_" + i);
			divInput.eq(5).attr('id', "imageName_" + i);
			divInput.eq(6).attr('id', "dltImage_" + i);

			j++;
		})
		$("#clickImg_" + (j - 1)).removeClass("ti-pencil");
		$("#clickImg_" + (j - 1)).addClass("ti-plus");

	}

	//function to check duplicate entry of document name
	function checkForDuplicateEntry(event) {
		var document = event.currentTarget.value;
		var currentFldId = event.currentTarget.getAttribute('id');
		var l = currentFldId.split("_");
		var counter = l[1];
		var count = 0;
		$(".docNoclss").each(function() {
			if (document == $(this).val()) {
				count++;
			}
		})
		if (count >= 2) {
			$("#messageParagraph").text("Document Name Already Entered");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');

			return false;
		} else {
			return true;
		}

	}

	function openDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('show');
	}

	//category back button
	function backPage() {
		$("#uploadTrainingContent").hide()
		$("#initialTrainingScreen").show()

	}

	//Delete doc 

	function deleteAttachmentRow() {
		var lengthOfTableRow1 = 0;
		$("#docTbl > #doctbodyData > tr").each(function() {
			lengthOfTableRow1 = lengthOfTableRow1 + 1;
		})
		var id = $("#dltValue").val();
		$("#" + id).closest('tr').remove();
		closeDeleteConfirm();
		if (lengthOfTableRow1 == 1) {
			var tbl = '<tr> <td style="display:none" align="center" class="pdb-24"><input class="checkCls" type="checkbox" id="check2"><label for="check2"></label></td>'
					+ '<td style="display:none"><div class="form-group"> <select class="form-control documentclss" id="docid_0"  onblur="removeValid(event);"> <option value="">Select</option> </select> </div></td>'
					+ '<td><div class="form-group"> <input type="text" value="" class="form-control docNoclss" id="docnoid_0" onblur="checkForDuplicateEntry(event)"></div></td>'
					+ '<td> <div class="control-group position-r"> <label class="custom-file-upload" for="uploadDoc_0" id="uploadFor_0"> <i class="ti-plus" id="clickImg_0"></i> </label>'
					+ '<div class="controls"> <input type="file" class="document" id="uploadDoc_0" name="userImage" onchange="saveMultiFile(event)" /></div> </div> <input type="hidden" id="uploadHidden_0" class="uploadHidCls">'
					+ '<div id="uploadedBillDiv_0" align="center" class="uploadedBillCls"></div> <div id="imageName_0" class="imageName"></div><div id="dltImage_0" class="dltImage"  ></div> </td>'
					+ '</tr>';
			$("#doctbodyData").append(tbl);
		}
	}

	//for closing modal box for delete 

	function closeDeleteConfirm() {
		$("#dltValue").val("");
		$('#deleteAttachment').modal('hide');
	}
	

	function backPage() {
		//window.reload();
		$("#uploadTrainingContent").hide()
		$("#initialTrainingScreen").show()

	}
</script>
</head>
<body>
	<div layout:fragment="content" class="maincontent">
		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">
						<div class="row" id="initialTrainingScreen">
							<div class="col-md-10  btn-hs" style="margin-bottom: 15px;">
								<div class="font-design ft-lt" id="totalReq">Training
									Category</div>
								<div class="roomdetails2">
									<div class="cat_plusbtn cp" title="Add Category"
										onclick="openCat()">+</div>
								</div>
							</div>

							<div class="wrapper center-block">
								<div class="panel-group" id="accordion" role="tablist"
									aria-multiselectable="true">
									<div class="panel panel-default">
										<div id="demo_11" class="panel-collapse collapse show"
											role="tabpanel" aria-labelledby="headingOne">
											<!-- show -->
											<div class="row">
												<div class="col-md-8">
													<div class="flowsection"
														style="border-right: 0px solid #ccc !important">
														<table id="basic">
															<tbody id="manage-training-tbody"></tbody>
														</table>
														<!-- code start for second tree -->
														<!-- code end for second tree -->
													</div>
												</div>
												<div class="col-md-4">
													<div class="roomdetails roomListDiv" id="main"></div>
													<div class="slidearrow" onclick="openNav()">
														<i class="ti-arrow-left"></i>
													</div>
													<!-- Add Floor -->
													<div id="mySidenavSubCat" class="sidenav">
														<div class="slidebox">
															<div class="row">
																<div class="col-md-10">
																	<div class="edit" id="floorNavText">Sub-Category</div>
																</div>
																<div class="col-md-2">
																	<div class="arrow">
																		<a href="javascript:void(0)" class="closebtn"
																			onclick="closeNav()"><i class="ti-arrow-right"></i></a>
																	</div>
																</div>
																<div class="chartbtnsec">
																	<div class="" align="right">
																		<button class="btn4" onclick="closeNav()">CANCEL</button>
																		<!-- <button class="btn3" id="dltSlideSubCat" onclick="">DELETE</button> -->
																		<button class="btn1" id="subCatSave">SAVE</button>
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<span class="slide-span">Parent:</span><span
																			id="subCatParentSpan" class="slide-span-text"></span>
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<label>Name</label> <input type="hidden" id="subCatId">
																		<input type="text"
																			class="form-control transparenttxtbox" placeholder=""
																			id="subCatName" onblur="removeValid(event);">
																		<input type="hidden" id="parentCat"> <input
																			type="hidden" id="slnoval">
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<label>Description</label>
																		<textarea class="form-control" id="subCatDesc"
																			onblur="removeValid(event);"></textarea>
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<input type="checkbox" class="loc-chb"
																			name="isSubCatActive" id="subCatStatus" value="1"
																			checked> <label style="margin-top: 8px;">Active</label>
																	</div>
																</div>
															</div>
														</div>
													</div>
													<!-- Add Section -->
													<div id="mySidenavCat" class="sidenav">
														<div class="slidebox">
															<div class="row">
																<div class="col-md-10">
																	<div class="edit" id="sectionNavText">Category</div>
																</div>
																<div class="col-md-2">
																	<div class="arrow">
																		<a href="javascript:void(0)" class="closebtn"
																			onclick="closeCat()"><i class="ti-arrow-right"></i></a>
																	</div>
																</div>
																<div class="chartbtnsec">
																	<div class="" align="right">
																		<button class="btn4" onclick="closeCat()">CANCEL</button>
																		<!-- <button class="btn3" id="deleteSlideCat">DELETE</button> -->
																		<button class="btn1" id="categorySave">SAVE</button>
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<label>Name</label> <input type="hidden"
																			id="categoryId"> <input type="text"
																			class="form-control transparenttxtbox" placeholder=""
																			id="categoryName" onblur="removeValid(event);">
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<label>Description</label>
																		<textarea class="form-control" id="categoryDesc"
																			onblur="removeValid(event);"></textarea>
																	</div>
																</div>
																<div class="col-md-12">
																	<div class="form-group">
																		<input type="checkbox" class="loc-chb" name="isActive"
																			id="catStatus" value="1" checked> <label
																			style="margin-top: 8px;">Active</label>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- this section is for uploading the training content -->
						<div class="row mb-20" id="uploadTrainingContent">
							<input type="hidden" id="uploadCategoryId"> <input
								type="hidden" id="studyMaterialId"> <input type="hidden"
								id="studyMaterialType">
							<div class="row mt-2">

								<div>
									<button class="btn back-btn" id="bckBtn" onclick="backPage()">GO
										BACK!</button>
								</div>
							</div>
							<div class="row mt-2">
								<div class="btn-group col-md-3">
									<button class="btn btn-primary " id="uploadtxt" value='Text'
										onclick="uploadStudyMaterials(event)">Upload Text</button>
								</div>
								<div class="btn-group col-md-3">
									<button class="btn btn-primary " id="uploadPdf" value='Pdf'
										onclick="uploadStudyMaterials(event)">Upload PDF</button>
								</div>
								<div class="btn-group col-md-3">
									<button class="btn btn-primary " id="uploadVdo" value='Video'
										onclick="uploadStudyMaterials(event)">Upload Video</button>
								</div>
								<div class="btn-group col-md-3">
									<button class="btn btn-primary " id="uploadAudio" value='Audio'
										onclick="uploadStudyMaterials(event)">Upload Audio</button>
								</div>
							</div>
							<div class="row mt-2">
								<div class="col-md-4"></div>
								<!-- <div class="buttonsec btn-hs"> -->
								<div class="col-md-8">
									<button class="new-btn" id="mainsave"
										onclick="saveTrainingContent()">Save</button>
								</div>
							</div>
								<div class="col-md-10">
									<div class="form-group">
										<input type="checkbox" id="materialStatus" value="1" checked>
										<label>Active</label>
									</div>
								</div>

								<div class="col-md-12">
									<div class="form-group">
										<label>Heading</label>
										<textarea id="textHeading" autocomplete="off"
											onblur="removeValid(event)"></textarea>
									</div>
								</div>

								<div class="col-md-12">
									<div class="form-group">
										<label>Description</label>
										<textarea id="textDescription" autocomplete="off"
											onblur="removeValid(event)"></textarea>
									</div>
								</div>
								<div class="row" id="ckDiv">
									<div class="col-md-12">
										<div class="form-group">
											<label>Content</label>
											<textarea id="commentck" onblur="removeValid(event)"></textarea>
										</div>
										<input type="hidden" id="commentckdreason">
									</div>
								</div>
								<!-- Document Section -->
								<div id=documentSection>
									<div class="panel panel-default" style="width: 100%;">
										<div class="panel-heading" role="tab" id="headingThree">
											<h4 class="panel-title">
												<a class="collapsed mainSecond" role="button"
													data-toggle="collapse" data-parent="#accordion"
													href="#collapseThree" aria-expanded="true"
													aria-controls="collapseThree"> OTHER DOCUMENTS </a>
											</h4>
										</div>
										<div id="collapseThree" class="panel-collapse collapse show"
											role="tabpanel" aria-labelledby="headingThree">
											<div class="row">
												<div class="col-md-12 btn-hs1 padding-7" align="right">
													<button class="btn1" id="saveAttachmentBtn"
														onclick="checkEmpty();">New</button>
												</div>
											</div>
											<table id="docTbl" cellspacing="7" cellpadding="7">
												<thead>
													<tr class="tr_clone">
														<!-- <th align="center"></th> -->

														<th width="320">Document Name</th>
														<th width="380">Attachment</th>
													</tr>
												</thead>
												<tbody id="doctbodyData">
												</tbody>
											</table>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div id="delete" class="modal fade show" aria-modal="true">
					<div class="modal-dialog modal-confirm">
						<div class="modal-content">
							<div class="modal-header flex-column"></div>
							<div class="modal-body">
								<p>Do you really want to delete these records? This process
									cannot be undone.</p>
							</div>
							<div class="modal-footer justify-content-center">
								<button type="button" class="btn1" data-dismiss="modal"
									onclick="cancelModalBtn();">Cancel</button>
								<button type="button" class="btn3" id="deleteModalBtn">Delete</button>
							</div>
						</div>
					</div>
				</div>
				<!-- delete attachment modal for Document Upload -->
				<div id="deleteAttachment" class="modal fade show" aria-modal="true">
					<div class="modal-dialog modal-confirm">
						<div class="modal-content">
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="closeDeleteConfirm()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<div class="modal-body">
								<p>Do you really want to delete these records? This process
									cannot be undone.</p>
								<input type="hidden" id="dltValue">
							</div>
							<div class="modal-footer justify-content-center">

								<button type="button" class="btn4" data-dismiss="modal"
									onclick="closeDeleteConfirm();">Cancel</button>
								<button type="button" class="btn3"
									onclick="deleteAttachmentRow();">Delete</button>
							</div>
						</div>
					</div>
				</div>
				<div id="deleteFile" class="modal fade show" aria-modal="true">
					<div class="modal-dialog modal-confirm">
						<div class="modal-content">
							<div class="modal-header flex-column">
								<button type="button" class="close" data-dismiss="modal"
									aria-hidden="true" onclick="cancelModalBtn()">
									<i class="ti-close modal-close"></i>
								</button>
							</div>
							<div class="modal-body">
								<p>Do you really want to delete this image? This process
									cannot be undone.</p>
							</div>
							<div class="modal-footer justify-content-center"
								style="margin-top: -30px;">
								<button type="button" class="btn1" data-dismiss="modal"
									onclick="cancelModalBtn();">Cancel</button>
								<button type="button" class="btn3" onclick="deleteLocFile()">Delete</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>