<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/master}">
<head>
<style type="text/css">
.highcharts-exporting-group {
	display: none;
}

.slidebox {
	padding: 14px;
	margin-top: 0px;
	margin: 0px 10px;
}

/* .form-group label {
	font-size: 12px;
	position: relative;
	top: 4px;
} */
.holdCls {
	background-color: rgb(0, 143, 0);
}

.bg_white {
	background: #ffffff !important;
}
</style>

<script type="text/javascript">
	function openNav() {
		// $("#subItem").val(null);
		 $("#time").val('');		 
		 $("#vct").val('');
		 $("#dfr").val('');
		 $("#bd").val('');
		 $("#uct").val('');
		 $("#ph").val('');
		  //$("#itemSubId").val(null);
		  
		  $("#rowEdit").val('');
		document.getElementById("mySidenav").style.cssText = "width: 25%; position: absolute; right:-10px; overflow: hidden; height:auto; top:220px;";

		document.getElementById("main").style.width = "75%";
	}

	function closeNav() {
		document.getElementById("mySidenav").style.width = "0";
		document.getElementById("main").style.width = "100%";
		
	}
	var x = 0;
	var x1 = 0;
	function openNav1() {
		
		 $("#sampleWt3").val('');
		 $("#time1").val('');
		 $("#batchNo").val('');
		// $("#batchNo").val('');
		 $("#sampleHymine").val('');
		 $("#sampleAd").val(0);
		 $("#weightOfDisc").val('');
		 $("#weightOfTotal").val(0);
		 $("#weightOfLoss").val('');
		 $("#sampleMc").val(0);
		 $("#rowEdit1").val('');

		document.getElementById("mySidenav1").style.cssText = "width: 40%; position: absolute; right:-10px;  overflow: hidden; height:auto; top:1770px;";

		document.getElementById("main4").style.width = "60%";
		
		$("#main5").removeClass("mt-4");
		$("#main5").css("margin-top", "75px");
		//$("#mySidenav2").css("top", "2000px");
		x = 1;
		if(x1 == 1){
			document.getElementById("mySidenav2").style.cssText = "width: 40%; position: absolute; right:-10px;  overflow: hidden; height:auto; top:2175px;";
		}
	}

	function closeNav1() {
		document.getElementById("mySidenav1").style.width = "0";
		document.getElementById("main4").style.width = "100%";
		
		$("#main5").addClass("mt-4");
		$("#main5").removeAttr("style");
		//$("#mySidenav2").css("top", "1935px");
			x = 0;

		if(x1 == 1){
			openNav2();
		}
			
	}
	
	function openNav2() {
		
		 $("#sampleWt4").val('');
		 $("#compositeHymine").val('');
		 //$("#sampleWt4").val(0);
		 $("#compositeAd").val(0);
		 $("#compositeWeightOfDisc").val('');
		 $("#compositeWeightOfTotal").val(0);
		 $("#compositeWeightLoss").val('');
		 $("#compositeMc").val(0);
		 $("#compositeBd").val('');
		 $("#compositePh").val('');
		 $("#compositeDfr").val('');
		 $("#compositeCompatibility").val('');
		 $("#compositeRetention").val('');
		 $("#compositeAppearance").val('');
		 $("#compositeColour").val('');
		 $("#compositeOdour").val('');
		 $("#compositeVisualCue").val('');
		 $("#rowEdit2").val('');
		 x1 = 1;
		 if(x == 1){
			 document.getElementById("mySidenav2").style.cssText = "width: 40%; position: absolute; right:-10px;  overflow: hidden; height:auto; top:2175px;";
			 x1 == 0;
		 }else{
			 document.getElementById("mySidenav2").style.cssText = "width: 40%; position: absolute; right:-10px;  overflow: hidden; height:auto; top:2125px;";
		 }

		document.getElementById("main5").style.width = "60%";
		
		
	}

	function closeNav2() {
		document.getElementById("mySidenav2").style.width = "0";
		document.getElementById("main5").style.width = "100%";
		x1 = 0;
		
	}
	
	
	


	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";
		if ($('#searchBar').val() == null || $('#searchBar').val() == "") {
			id.style.display = "none";
		}
	}
</script>


<script type="text/javascript">
	$(document).ready(function() {
		
		
		var dateFormat = localStorage.getItem("dateFormat");
		$("#DateCalendar3").datetimepicker({
			format : dateFormat,
			closeOnDateSelect : true,
			timepicker : false,
		}).on("change", function() {
			$('#date').val($(this).val());
		})

		$('#date').blur(function() {
			$("#DateCalendar3").val($(this).val());
		})
		
		$("#toDateCalendarTime").datetimepicker({
		 format: 'h:i A',
		    closeOnDateSelect: false,
		    timepicker: true,
		    datepicker: false,
		    step: 1,
		    formatTime: 'h:i A'
	}).on("change", function() {
		$('#time').val($(this).val());
	})

	$('#time').blur(function() {
		$("#toDateCalendarTime").val($(this).val());
	})
	$("#toDateCalendarTime1").datetimepicker({
		 format: 'h:i A',
		    closeOnDateSelect: false,
		    timepicker: true,
		    datepicker: false,
		    step: 1,
		    formatTime: 'h:i A'
	}).on("change", function() {
		$('#time1').val($(this).val());
	})

	$('#time1').blur(function() {
		$("#toDateCalendarTime1").val($(this).val());
	})
		
		gridOptions.api.setRowData();
		agGrid.simpleHttpRequest({
			url : 'dar-view-data'
		}).then(function(data) {
			var jsonData = JSON.parse(data.body[0]);
			var allData=jsonData.view;
			if(allData == "" || allData == null || allData == "null"){
				var len = 0;
			}else{
				var len = allData.length;
			}
			$('#totalReq').find('span').html(len);
			gridOptions.api.setRowData(allData);
		});
		
		
		activityOptions.api.setRowData();
		activityOptions1.api.setRowData();
		activityOptions2.api.setRowData();

 
		//changeOpt();
		
		$('#approve').attr('disabled', true);
		//$('#inactive').attr('disabled', true);

		$("#statusDiv").hide();
		$('#reqDltBtn').attr('disabled', true);
		$('#approve').attr('disabled', true);
		$('#reject').attr('disabled', true);
		$('#deleteChild').attr('disabled', true);
		$('#deleteChild1').attr('disabled', true);
		$('#deleteChild2').attr('disabled', true);
		$('.collapse').on('show.bs.collapse', function() {
			$(this).siblings('.panel-heading').addClass('active');
		});

		$('.collapse').on('hide.bs.collapse', function() {
			$(this).siblings('.panel-heading').removeClass('active');
		});
		/* $("#newBtn").click(function() {
			$("#myGrid").hide();
			$("#reqTable").hide();
			$("#searchDiv").hide();
			$(".btn-hs").show();
			$("#btndiv").hide();
			$("#listdiv").hide();
			$("#totalReq").hide();
			$("#searchRowDiv").hide();
			$("#ttbtn").hide();
			$("#demo").show();
		}) */
		
	
		
		

	});
	
	/* -------------------search bar for mygrid------------------------ */

	function onQuickFilterChanged() {
		gridOptions.api
				.setQuickFilter(document.getElementById('quickFilter').value);
	}

	function cancelBar() {
		var id = document.getElementById("closeKey");
		id.style.display = "block";

		if ($('#quickFilter').val() == null || $('#quickFilter').val() == "") {
			id.style.display = "none";
		}
	}
 function cancel() {
	 $(".formValidation").remove();
		//$("#reqTable").show();
		//$("#searchDiv").show();
		$(".btn-hs").show();
		$("#myGrid").show();
		$("#demo").hide();
		$("#reqDltBtn").attr('disabled', true);
		$("#newBtn").attr('disabled', false);
		$("#totalReq").show();
		$("#searchRowDiv").show();
		$('#approve').attr('disabled', true);
		//$('#inactive').attr('disabled', true); 
		
		gridOptions.api.setRowData();
		agGrid.simpleHttpRequest({
			url : 'dar-view-data'
		}).then(function(data) {
			var jsonData = JSON.parse(data.body[0]);
			var allData=jsonData.view;
			if(allData == "" || allData == null || allData == "null"){
				var len = 0;
			}else{
				var len = allData.length;
			}
			
			$('#totalReq').find('span').html(len);
			gridOptions.api.setRowData(allData);
		});
		$("#shift").val('');
		$("#molecularWeight").val('');
		$("#molarityHyamine").val('');
		$("#wInsoluble").val('');
		$("#retention12").val('');
		$("#retention60").val('');
		$("#passing85").val('');
		
		$("#sampleWt1").val('');
		$("#sampleWt2").val('');
		/* $("#sampleWt3").val(0);
		$("#sampleWt4").val(0); */
		
		
		$("#volHyamine11").val('');
		$("#volHyamine12").val('');
		$("#volHyamine13").val('');
		$("#ad11").val(0);
		$("#ad12").val(0);
		$("#ad13").val(0);
		$("#avgAD1").val(0);
		$("#totalAD1").val(0);
		$("#rod1").val(0);
		
		$("#volHyamine21").val('');
		$("#volHyamine22").val('');
		$("#volHyamine23").val('');
		$("#ad21").val(0);
		$("#ad22").val(0);
		$("#ad23").val(0);
		$("#avgAD2").val(0);
		$("#totalAD2").val(0);
		$("#rod2").val(0);
		
		$("#sku1").val('');
		$("#sku2").val('');
		$("#sku3").val('');
		
		$("#alkalinity").val('');
		$("#zeolity").val('');
		$("#av50").val('');
		$("#slopeFactor").val('');
		$("#sampleWt5").val('');
		$("#abs").val('');
		
	
		$("#checkBox").html("");
		
		
		
		
		activityOptions.api.setRowData();
		activityOptions1.api.setRowData();
		activityOptions2.api.setRowData();
 
	};
</script>


<script type="text/javascript">
 function validFormData(){
	 var valid= true;
	 var shift = $("#shift").val();
	 var molecularWeight = $("#molecularWeight").val();
	 var molarityHyamine = $("#molarityHyamine").val();
       	if (shift == null || shift == "") {
			valid = validationUpdated("*Shift is Required", "shift");
		}
       if (molecularWeight == null || molecularWeight == "" || molecularWeight == 0 || molecularWeight == "0") {
    		alert(molecularWeight);
			valid = validationUpdated("*Enter Molecular Weight", "molecularWeight");
		}
        if (molarityHyamine == null || molarityHyamine == "" || molarityHyamine == 0 || molarityHyamine == "0") {
    		alert(molarityHyamine);
			valid = validationUpdated("*Add Molarity Of Hyamine", "molarityHyamine");
			return false;
		}
        return true;
	
 }
//master save data

function masterSaveData() {
	
if (validFormData()) { 
		$(".formValidation").remove();
	var valid= true;
	var datas = [];
	var mcNumber = [];
	var machineNo = "";
	var machineName = "";
	var item ={};
 	
	var rowCount = activityOptions.api.getDisplayedRowCount();
	
	if(rowCount > 0){

	activityOptions.api.forEachNode(function(rowNode, index) {
		
		item = rowNode.data;
        
		item.type = "details"
		
		item.darId = $("#darId").val();
		item.date = $("#date").val();
		item.shift = $("#shift").val();
		item.product1 = $("#product1").val();
		item.molecularWeight = $("#molecularWeight").val();
		item.molarityHyamine = $("#molarityHyamine").val();
		
		item.wInsoluble = $("#wInsoluble").val();
		item.retention12 = $("#retention12").val();
		item.retention60 = $("#retention60").val();
		item.passing85 = $("#passing85").val();
		
		
		item.sampleWt1 = $("#sampleWt1").val();
		item.volHyamine11 = $("#volHyamine11").val();
		item.volHyamine12 = $("#volHyamine12").val();
		item.volHyamine13 = $("#volHyamine13").val();
		item.ad11 = $("#ad11").val();
		item.ad12 = $("#ad12").val();
		item.ad13 = $("#ad13").val();
		item.avgAD1 = $("#avgAD1").val();
		item.totalAD1 = $("#totalAD1").val();
		item.rod1 = $("#rod1").val();
		
		
		item.sampleWt2 = $("#sampleWt2").val();
		item.volHyamine21 = $("#volHyamine21").val();
		item.volHyamine22 = $("#volHyamine22").val();
		item.volHyamine23 = $("#volHyamine23").val();
		item.ad21 = $("#ad21").val();
		item.ad22 = $("#ad22").val();
		item.ad23 = $("#ad23").val();
		item.avgAD2 = $("#avgAD2").val();
		item.totalAD2 = $("#totalAD2").val();
		item.rod2 = $("#rod2").val();
		
		
		item.sku1 = $("#sku1").val();
		item.sku2 = $("#sku2").val();
		item.sku3 = $("#sku3").val();
		
		item.alkalinity = $("#alkalinity").val();
		item.zeolity = $("#zeolity").val();
		item.av50 = $("#av50").val();
		item.slopeFactor = $("#slopeFactor").val();
		item.sampleWt5 = $("#sampleWt5").val();
		item.abs = $("#abs").val();
		
		
		 $("input:checkbox[name=mcNo]:checked").each(function() {
			machineNo = machineNo + $(this).val() + ",";
			//machineName = machineName + $(this).html() + ",";
			//datas.push($(this).val());
		})
		
		item.mcNo = machineNo; 
		//item.mcName = machineName;
		/*  $("input:checkbox[name=mcNo]:checked").each(function() {
				mcNumber.push($(this).val());
			})

		item.machineNumber = mcNumber; 
		 */
		 $("input:checkbox[name=mcNo]:checked").each(function() {
				mcNumber.push($(this).val());
			})

			item.machineNumber = mcNumber;  
		
		datas.push(item);
		mcNumber =[];
		
		//datas.push(item); 
		});
activityOptions1.api.forEachNode(function(rowNode, index) {
		
		item = rowNode.data;
		item.type = "sample"
		//item.sampleWt3 = $("#sampleWt3").val();
		datas.push(item);
		
});
activityOptions2.api.forEachNode(function(rowNode, index) {
	
	item = rowNode.data;
	item.type = "composite"
	//item.sampleWt4 = $("#sampleWt4").val();
	datas.push(item);
	
});
 


//console.log(machineNo);

console.log(datas);
		saveDarDetails(datas);
	} else {
		$("#messageParagraph").text(
		"Add Other Services Details First");
		$("#msgOkModal").removeClass("btn3");
		$("#msgOkModal").addClass("btn1");
		$("#msgModal").modal('show');
	}
  }
}

function saveDarDetails(datas) {
	//console.log(datas);
	$('.loader').show();
	//$("body").addClass("overlay");
	$.ajax({
		type : "POST",
		url : "dar-add-details",
		dataType : "json",
		contentType : "application/json",
		data : JSON.stringify(datas),
		success : function(response) {
			$('.loader').hide();
			if (response.code == "success") {
				cancel();
				$("#messageParagraph").text(response.message);
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
				closeNav()
			} else {
				$('.loader').hide();
				$("#messageParagraph").text(response.message);
				$("#msgOkModal").removeClass("btn3");
				$("#msgOkModal").addClass("btn1");
				$("#msgModal").modal('show');
			}
		},
		error : function(data) {
			$('.loader').hide();
		}
	}) //ajax ends
}

	$("#newBtn").click(function() {
		$("#myGrid").hide();
		$("#reqTable").hide();
		$(".btn-hs").hide();
		$("#demo").show();
		$("#totalReq").hide();
		$("#searchRowDiv").hide();
		$("#ttbtn").hide();
	})

	var columnDefs = [
			{
				headerCheckboxSelection : false,
				headerCheckboxSelectionFilteredOnly : false,
				checkboxSelection : true,
				width : 10,
				sortable : false,
				filter : false,
				resizable : true,
				pinned: 'left'

			},
			{
				headerName : 'DAR Id',
				width : 150,
				pinned: 'left',
				field : "darId",
					cellRenderer : function(params) {
					return '<a id="darId" onclick=editDar("'
					+params.data.darId + '","' + params.data.apstatus + '","' + params.data.pId
					+ '") href="javascript:void(0)">'
					+ params.data.darId + '</a>';

				}

			}, {
				headerName : 'Date',
				field : "date",
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				headerName : 'Shift',
				field : "shift",
				cellStyle : {
					textAlign : 'center'
				}
			}, {
				headerName : 'pId',
				field : "pId",
				hide: true,
				cellStyle : {
					textAlign : 'center'
				}
			},  {
				headerName : 'Product',
				field : "product",
				width: 200
			},   {
				headerName : 'Approve Status',
				field : "apstatus",
				cellStyle : {
					textAlign : 'center'
				},cellRenderer : function(params) {
					if(params.data.apstatus == 'Approved'){
						return '<div style="color:#0642f5">Approved</div>';
					}else{
						return '<div style="color:#a9a9a9">Pending</div>';
					}
				}
			},  {
				headerName : 'Approved By',
				field : "approvedBy",
				cellStyle : {
					textAlign : 'center'
				}
			},{
				headerName : 'PDF',
				field : "downloaddoc",
				cellStyle : {
					textAlign : 'center'
				},cellRenderer : function(params) {
					if(params.data.apstatus=='Approved'){
						return '<a id="pcroId" onclick=darPdfDownload("'
						+params.data.darId
						+ '") href="javascript:void(0)"><i class="bi bi-cloud-download">Download</i></a>';
					}else{
						return '';
					}
					

				}
			},

			 ];

	

	// let the grid know which columns and what data to use
	var gridOptions = {
		columnDefs : columnDefs,
		rowSelection : 'single',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 150
		},
		onSelectionChanged : onSelectionChanged,
	};
	// for activity table

	var activityDefs = [
			{
				headerCheckboxSelection : true,
				headerCheckboxSelectionFilteredOnly : true,
				checkboxSelection : true,
				sortable : false,
				filter : false,
				resizable : true,
				width : 30
			},
			{
				headerName : "slNo",
				field : "slNo",
				width : 100,
				cellRenderer : function(params) {
					if (params.data.slNo) {
						return '<a onclick=editRow("' + params.data.slNo
								+ '") href="javascript:void(0)">'
								+ params.data.slNo + '</a>';
					} else {
						return '<a onclick=editRow("' + params.data.slNo
								+ '") href="javascript:void(0)">'
								+ params.data.slNo + '</a>';
					}
				}
			}, {
				headerName : "Time",
				field : "time",
				
				cellStyle : {
					textAlign : 'center'
				},
			}, {
				headerName : "VCT",
				field : "vct",
				
				cellStyle : {
					textAlign : 'center'
				},
			},
			 {
				headerName : "UCT",
				field : "uct",
				
				cellStyle : {
					textAlign : 'center'
				},
			},
			 {
				headerName : "PH",
				field : "ph",
				
				cellStyle : {
					textAlign : 'center'
				},
			},{
				headerName : "DFR",
				field : "dfr",
				
				cellStyle : {
					textAlign : 'center'
				},
			}, {
				headerName : "B.D. (gm/cc)",
				field : "bd",
				cellStyle : {
					textAlign : 'center'
				},
			},];


	// let the grid know which columns and what data to use product table
	var activityOptions = {
		columnDefs : activityDefs,
		rowSelection : 'multiple',
		groupSelectsChildren : true,
		suppressRowClickSelection : true,
		suppressAggFuncInHeader : true,
		defaultColDef : {
			sortable : true,
			filter : true,
			resizable : true,
			width : 250
		},
		onSelectionChanged : onSelectionChangeChild,
		getRowNodeId : function(data) {
			return data.slNo;
		}
	};
	
	var activityDefs1 = [
		{
			headerCheckboxSelection : true,
			headerCheckboxSelectionFilteredOnly : true,
			checkboxSelection : true,
			sortable : false,
			filter : false,
			resizable : true,
			width : 30
		},
		{
			headerName : "slNo",
			field : "slNo",
			width : 100,
			cellRenderer : function(params) {
				if (params.data.slNo) {
					return '<a onclick=editRow1("' + params.data.slNo
							+ '") href="javascript:void(0)">'
							+ params.data.slNo + '</a>';
				} else {
					return '<a onclick=editRow1("' + params.data.slNo
							+ '") href="javascript:void(0)">'
							+ params.data.slNo + '</a>';
				}
			}
		},{
			headerName : "Wt. Of The Sample",
			field : "sampleWt3",
			width : 250,
			cellStyle : {
				textAlign : 'center'
			},
		}, {
			headerName : "Time",
			field : "time1",
		}, {
			headerName : "Sample/Batch NO",
			field : "batchNo",
		}, {
			headerName : "Vol of Hymine Consumed",
			field : "sampleHymine",
			width : 300,
			
		}, {
			headerName : "AD",
			field : "sampleAd",
			
		},{
			headerName : "Wt. Of the Disc",
			field : "weightOfDisc",
			
		},{
			headerName : "Wt. of The Disc (Disc+Sample)",
			field : "weightOfTotal",
			
		},{
			headerName : "Wt. Loss on Drying",
			field : "weightOfLoss",
			
		},{
			headerName : "MC",
			field : "sampleMc",
			
		},];


// let the grid know which columns and what data to use product table
var activityOptions1 = {
	columnDefs : activityDefs1,
	rowSelection : 'multiple',
	groupSelectsChildren : true,
	suppressRowClickSelection : true,
	suppressAggFuncInHeader : true,
	defaultColDef : {
		sortable : true,
		filter : true,
		resizable : true,
		width : 200
	},
	onSelectionChanged : onSelectionChangeChild1,
	getRowNodeId : function(data) {
		return data.slNo;
	} 
};

var activityDefs2 = [
	{
		headerCheckboxSelection : true,
		headerCheckboxSelectionFilteredOnly : true,
		checkboxSelection : true,
		sortable : false,
		filter : false,
		resizable : true,
		width : 30
	},
	{
		headerName : "slNo",
		field : "slNo",
		width : 100,
		cellRenderer : function(params) {
			if (params.data.slNo) {
				return '<a onclick=editRow2("' + params.data.slNo
						+ '") href="javascript:void(0)">'
						+ params.data.slNo + '</a>';
			} else {
				return '<a onclick=editRow2("' + params.data.slNo
						+ '") href="javascript:void(0)">'
						+ params.data.slNo + '</a>';
			}
		}
	},{
		headerName : "Wt. Of The Sample",
		field : "sampleWt4",
		width : 250,
		cellStyle : {
			textAlign : 'center'
		},
	}, {
		headerName : "Vol of Hymine Consumed",
		field : "compositeHymine",
		width : 300,
		cellStyle : {
			textAlign : 'center'
		},
	},  {
		headerName : "AD",
		field : "compositeAd",
		
	}, {
		headerName : "wt. of the disc",
		field : "compositeWeightOfDisc",
	}, {
		headerName : "Wt. Of The Disc (Disc + Sample)",
		field : "compositeWeightOfTotal",
		
	},{
		headerName : "Wt. Loss On Drying",
		field : "compositeWeightLoss",
		
	},{
		headerName : "MC",
		field : "compositeMc",
	},{
		headerName : "B.D",
		field : "compositeBd",
	},{
		headerName : "D.F.R",
		field : "compositeDfr",
	},{
		headerName : "PH",
		field : "compositePh",
	},{
		headerName : "Compatibility",
		field : "compositeCompatibility",
	},{
		headerName : "Retentation On 12 #",
		field : "compositeRetention",
	},{
		headerName : "Appearance",
		field : "compositeAppearance",
	},{
		headerName : "Colour",
		field : "compositeColour",
	},{
		headerName : "Odour",
		field : "compositeOdour",
	},{
		headerName : "Visual Cue",
		field : "compositeVisualCue",
	},];


// let the grid know which columns and what data to use product table
var activityOptions2 = {
columnDefs : activityDefs2,
rowSelection : 'multiple',
groupSelectsChildren : true,
suppressRowClickSelection : true,
suppressAggFuncInHeader : true,
defaultColDef : {
	sortable : true,
	filter : true,
	resizable : true,
	width : 200
},
onSelectionChanged : onSelectionChangeChild2,
getRowNodeId : function(data) {
	return data.slNo;
}
};
	
	var id = "";
	var creq="";
	function onSelectionChangeChild() { 
		 var selectedNodes = activityOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 childid= selectedData.map(node => node.itemSubId);
		var selectedRows = activityOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
			$('#newchild').attr('disabled', true);
			$('#deleteChild').attr('disabled', false);
		}else{
			$('#newchild').attr('disabled', false);
			$('#deleteChild').attr('disabled', true);
		}
	}
	function onSelectionChangeChild1() { 
		 var selectedNodes = activityOptions1.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 childid= selectedData.map(node => node.itemSubId);
		var selectedRows = activityOptions1.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
			$('#newchild1').attr('disabled', true);
			$('#deleteChild1').attr('disabled', false);
		}else{
			$('#newchild1').attr('disabled', false);
			$('#deleteChild1').attr('disabled', true);
		}
	}
	function onSelectionChangeChild2() { 
		 var selectedNodes = activityOptions2.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 childid= selectedData.map(node => node.itemSubId);
		var selectedRows = activityOptions2.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		if (rowCount > 0) {
			$('#newchild2').attr('disabled', true);
			$('#deleteChild2').attr('disabled', false);
		}else{
			$('#newchild2').attr('disabled', false);
			$('#deleteChild2').attr('disabled', true);
		}
	}
	
	// for selecting parents.
	var id = "";
	function onSelectionChanged() {
		var selectedNodes = gridOptions.api.getSelectedNodes();
		 var selectedData = selectedNodes.map(node => node.data);
		 id= selectedData.map(node => node.darId);
		var selectedRows = gridOptions.api.getSelectedRows();
		var rowCount = 0;
		selectedRows.forEach(function(i) {
			rowCount = rowCount + 1;
		});
		
		

		if (rowCount > 0) {
			$('#newBtn').attr('disabled', true);
			//$('#reqDltBtn').attr("disabled", false);
			
			if (selectedData.map(node => node.apstatus) =="Approved") {
				$('#approve').attr('disabled', true);
				$('#reqDltBtn').attr("disabled", true);
	        } else {
	        	$('#approve').attr('disabled', false);
				$('#reqDltBtn').attr("disabled", false);
	        }
			
			
		}else {
			$('#reqDltBtn').attr("disabled", true);
			$('#newBtn').attr('disabled', false);
			//$('#inactive').attr('disabled', true);
			$('#approve').attr('disabled', true);
		}
	}
	// for editing child table of shift 

	function editRow(slNo) {
		openNav();
		var rowNode = activityOptions.api.getRowNode(slNo);
		
		
		$("#time").val(rowNode.data.time);
		$("#vct").val(rowNode.data.vct);
		$("#uct").val(rowNode.data.uct);
		$("#ph").val(rowNode.data.ph);
		$("#dfr").val(rowNode.data.dfr);
		$("#bd").val(rowNode.data.bd);
		$("#rowEdit").val(slNo);
			

	}
	
	function editRow1(slNo) {
		openNav1();
		var rowNode = activityOptions1.api.getRowNode(slNo);
		
		
		$("#time1").val(rowNode.data.time1);
		$("#batchNo").val(rowNode.data.batchNo);
		$("#sampleHymine").val(rowNode.data.sampleHymine);
		$("#sampleAd").val(rowNode.data.sampleAd);
		$("#weightOfDisc").val(rowNode.data.weightOfDisc);
		$("#weightOfTotal").val(rowNode.data.weightOfTotal);
		$("#weightOfLoss").val(rowNode.data.weightOfLoss);
		$("#sampleMc").val(rowNode.data.sampleMc);
		$("#rowEdit1").val(slNo);
			

	}
	
	function editRow2(slNo) {
		openNav2();
		var rowNode = activityOptions2.api.getRowNode(slNo);
		
		
		$("#compositeHymine").val(rowNode.data.compositeHymine);
		$("#sampleWt4").val(rowNode.data.sampleWt4);
		$("#compositeAd").val(rowNode.data.compositeAd);
		$("#compositeWeightOfDisc").val(rowNode.data.compositeWeightOfDisc);
		$("#compositeWeightOfTotal").val(rowNode.data.compositeWeightOfTotal);
		$("#compositeWeightLoss").val(rowNode.data.compositeWeightLoss);
		$("#compositeMc").val(rowNode.data.compositeMc);
		$("#compositeBd").val(rowNode.data.compositeBd);
		$("#compositePh").val(rowNode.data.compositePh);
		$("#compositeDfr").val(rowNode.data.compositeDfr);
		$("#compositeCompatibility").val(rowNode.data.compositeCompatibility);
		$("#compositeRetention").val(rowNode.data.compositeRetention);
		$("#compositeAppearance").val(rowNode.data.compositeAppearance);
		$("#compositeColour").val(rowNode.data.compositeColour);
		$("#compositeOdour").val(rowNode.data.compositeOdour);
		$("#compositeVisualCue").val(rowNode.data.compositeVisualCue);
		$("#rowEdit2").val(slNo);
			

	}

	//editing the employee shift details parent table
var mcNumber;
	function editDar(darid,sts,pId) {
		if(sts == "Approved"){
			$("#save").hide();
		}else{
			$("#save").show();
		}
		getMachineList(pId);
		agGrid.simpleHttpRequest(
				{
					url : 'dar-edit-details?id='+ darid
				}).then(function(data) {
					$("#tdiv").hide();
					$("#searchRowDiv").hide();
					$("#totalReq").hide();
					$("#ttbtn").hide();
					var jsonData = JSON.parse(data.body);
					var allData=jsonData.details;
					var allData1=jsonData.sample;
					var allData2=jsonData.composite;
				
					$("#myGrid").hide();
					switchPage()
					
					activityOptions.api.setRowData(allData);
					activityOptions1.api.setRowData(allData1);
					activityOptions2.api.setRowData(allData2);
					
				$("#darId").val(darid);
				$("#trReqId").text(darid);
				
				$("#pId").val(allData[0].pid);
				
				$("#date").val(allData[0].date);
				$("#shift").val(allData[0].shift);
				$("#product2").val(allData[0].product);
				$("#molecularWeight").val(allData[0].molecularWt);
				$("#molarityHyamine").val(allData[0].molarityHyamine);
				$("#wInsoluble").val(allData[0].wInsoluble);
				$("#retention12").val(allData[0].retention12);
				$("#retention60").val(allData[0].retention60);
				$("#passing85").val(allData[0].passing85);
				$("#sampleWt1").val(allData[0].sampleWt1);
				$("#volHyamine11").val(allData[0].volHyamine11);
				$("#volHyamine12").val(allData[0].volHyamine12);
				$("#volHyamine13").val(allData[0].volHyamine13);
				$("#ad11").val(allData[0].ad11);
				$("#ad12").val(allData[0].ad12);
				$("#ad13").val(allData[0].ad13);
				$("#avgAD1").val(allData[0].avgAd1);
				$("#totalAD1").val(allData[0].totalAd1);
				$("#rod1").val(allData[0].rod1);
				$("#sampleWt2").val(allData[0].sampleWt2);
				$("#volHyamine21").val(allData[0].volHyamine21);
				$("#volHyamine22").val(allData[0].volHyamine22);
				$("#volHyamine23").val(allData[0].volHyamine23);
				$("#ad21").val(allData[0].ad21);
				$("#ad22").val(allData[0].ad22);
				$("#ad23").val(allData[0].ad23);
				$("#avgAD2").val(allData[0].avgAd2);
				$("#totalAD2").val(allData[0].totalAd2);
				$("#rod2").val(allData[0].rod2);
				$("#sku1").val(allData[0].sku1);
				$("#sku2").val(allData[0].sku2);
				$("#sku3").val(allData[0].sku3);
				/* $("#sampleWt3").val(allData[0].sampleWt3);
				$("#sampleWt4").val(allData[0].sampleWt4); */
				
				$("#alkalinity").val(allData[0].alkilinity);
				$("#zeolity").val(allData[0].zeloty);
				$("#av50").val(allData[0].av50);
				$("#slopeFactor").val(allData[0].slopeFactor);
				$("#sampleWt5").val(allData[0].sample_wt_slope);
				$("#abs").val(allData[0].abs);
				
				
				 mcNumber = allData[0].mcNo;
				  var mcArray = mcNumber.split(",");
				 for (var i = 0; i < mcArray.length; i++) {
					  $("#" +mcArray[i]).attr("checked","checked");
					} 

				
				
				
				
							
				});
 
	}

	// delete  

	function deleteOnclick() {
		if (id) {
			$.ajax({
				type : "GET",
				url : 'dar-detls-delete?id='+ id,
				success : function(response) {
					if (response.code == "success") {
						cancel();
						$("#messageParagraph").text("Report Deleted Sucessfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$('#delete').modal('hide');
					} else {
						$("#messageParagraph").text("Something went to wrong!");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
					}
				},
				error : function(data) {
					console.log(data)
				}
			})
		} else {
			$("#alert").modal('show');
			document.getElementById("textId").innerHTML = "Please Select Atleast one Record !";
		}

	}

	// delete selected record from ag grid
	function deleteDetailsOnclick() {
		
		var grid = $("#deleteChildGrid").val();
		$('.modal').hide();
		
		if(grid == "details"){
			var selectedRows = activityOptions.api.getSelectedRows();
			activityOptions.api.applyTransaction({
				remove : selectedRows
			});
		}else if(grid == "sample"){
			var selectedRows1 = activityOptions1.api.getSelectedRows();
			activityOptions1.api.applyTransaction({
				remove : selectedRows1
			});
		}else if (grid == "composite"){
			var selectedRows2 = activityOptions2.api.getSelectedRows();
			activityOptions2.api.applyTransaction({
				remove : selectedRows2
			});
		}
		
		//$('#newchild').show();
		//$('#deletechild').hide;
		cancelModalProductBtn();
		$("#deleteChildGrid").val("");
		
	}
	

	//for closeing modal box for dlt  product
	function cancelModalProductBtn() {
		$("#deleteModalBtn").removeAttr("disabled");
		$('#deleteDetails').modal('hide');
		//$('#newchild').show();
		//$('#deletechild').hide;
	}

	function deleteFun() {
		$('#delete').modal('show');
	}
	
	function approve(){
		$('#approveModal').modal('show');
	}

	function deleteDetails(grid) {
		
		$("#deleteChildGrid").val(grid);
		$('#deleteDetails').modal('show');
		closeNav();
	}

	function cancelModalBtn() {
		$("#deleteModalBtn").removeAttr("disabled");
	}

	// save data in aggrid table sidenav save

	   function saveTableData() {
		var datas = [];
		var item = {};
		var valid = true;
		var data = 1;
		var rowEdit = $("#rowEdit").val();
		if (true) {
			item.slNo = data;
			activityOptions.api.forEachNode(function(rowNode, index) {
				if (!rowEdit) {
					data = data + 1;
					item.slNo = data;
				}else{
					item.slNo = rowEdit;
				}
			});
			//var iname=$("#itemName").val();
			item.time = $("#time").val();
			item.vct = $("#vct").val();
			item.uct = $("#uct").val();
			item.ph = $("#ph").val();
			item.dfr = $("#dfr").val();
			item.bd = $('#bd').val();
			//item.unitName = $("#unit option:selected").text();
		   /*  if (iname == null || iname == "") {
				valid = validationUpdated("Item Name is Required", "itemName");
			}
			if (item.quantity == null || item.quantity == "") {
				valid = validationUpdated("Quantity Required", "quantity");
			} */

		 if (valid) {
				closeNav();
				if (rowEdit) {
					var rowNode = activityOptions.api.getRowNode(rowEdit);
					rowNode.setData(item);
				} else {
					activityOptions.api.forEachNode(function(rowNode, index) {
						datas.push(rowNode.data);
					});
					datas.push(item)
					activityOptions.api.setRowData(datas);
				}
			} else{
				$('#mySidenav').show();
			}
		}
	} 
	
	
	   function saveTableData1() {
			var datas = [];
			var item = {};
			var valid = true;
			var data = 1;
			var rowEdit1 = $("#rowEdit1").val();
			if (true) {
				item.slNo = data;
				activityOptions1.api.forEachNode(function(rowNode, index) {
					if (!rowEdit1) {
						data = data + 1;
						item.slNo = data;
					}else{
						item.slNo = rowEdit1;
					}
				});
				//var iname=$("#itemName").val();
				item.sampleWt3 = $("#sampleWt3").val();
				item.time1 = $("#time1").val();
				item.batchNo = $("#batchNo").val();
				item.sampleHymine = $("#sampleHymine").val();
				item.sampleAd = $('#sampleAd').val();
				item.weightOfDisc = $('#weightOfDisc').val();
				item.weightOfTotal = $('#weightOfTotal').val();
				item.weightOfLoss = $('#weightOfLoss').val();
				item.sampleMc = $('#sampleMc').val();
				//item.unitName = $("#unit option:selected").text();
			   /*  if (iname == null || iname == "") {
					valid = validationUpdated("Item Name is Required", "itemName");
				}
				if (item.quantity == null || item.quantity == "") {
					valid = validationUpdated("Quantity Required", "quantity");
				} */

			 if (valid) {
					closeNav1();
					if (rowEdit1) {
						var rowNode = activityOptions1.api.getRowNode(rowEdit1);
						rowNode.setData(item);
					} else {
						activityOptions1.api.forEachNode(function(rowNode, index) {
							datas.push(rowNode.data);
						});
						datas.push(item)
						activityOptions1.api.setRowData(datas);
					}
				} else{
					$('#mySidenav1').show();
				}
			}
		} 
	   
	   function saveTableData2() {
			var datas = [];
			var item = {};
			var valid = true;
			var data = 1;
			var rowEdit2 = $("#rowEdit2").val();
			if (true) {
				item.slNo = data;
				activityOptions2.api.forEachNode(function(rowNode, index) {
					if (!rowEdit2) {
						data = data + 1;
						item.slNo = data;
					}else{
						item.slNo = rowEdit2;
					}
				});
				//var iname=$("#itemName").val();
				item.compositeHymine = $("#compositeHymine").val();
				item.sampleWt4 = $("#sampleWt4").val();
				item.compositeAd = $("#compositeAd").val();
				item.compositeWeightOfDisc = $("#compositeWeightOfDisc").val();
				item.compositeWeightOfTotal = $('#compositeWeightOfTotal').val();
				item.compositeWeightLoss = $('#compositeWeightLoss').val();
				item.compositeMc = $('#compositeMc').val();
				item.compositeBd = $('#compositeBd').val();
				item.compositePh = $('#compositePh').val();
				item.compositeDfr = $('#compositeDfr').val();
				item.compositeCompatibility = $('#compositeCompatibility').val();
				item.compositeRetention = $('#compositeRetention').val();
				item.compositeAppearance = $('#compositeAppearance').val();
				item.compositeColour = $('#compositeColour').val();
				item.compositeOdour = $('#compositeOdour').val();
				item.compositeVisualCue = $('#compositeVisualCue').val();
				//item.unitName = $("#unit option:selected").text();
			   /*  if (iname == null || iname == "") {
					valid = validationUpdated("Item Name is Required", "itemName");
				}
				if (item.quantity == null || item.quantity == "") {
					valid = validationUpdated("Quantity Required", "quantity");
				} */

			 if (valid) {
					closeNav2();
					if (rowEdit2) {
						var rowNode = activityOptions2.api.getRowNode(rowEdit2);
						rowNode.setData(item);
					} else {
						activityOptions2.api.forEachNode(function(rowNode, index) {
							datas.push(rowNode.data);
						});
						datas.push(item)
						activityOptions2.api.setRowData(datas);
					}
				} else{
					$('#mySidenav2').show();
				}
			}
		} 
	
	
	// setup the grid after the page has finished loading
	document.addEventListener('DOMContentLoaded', function() {

		var gridDiv = document.querySelector('#myGrid');
		new agGrid.Grid(gridDiv, gridOptions);

		var gridDiv = document.querySelector('#activity');
		new agGrid.Grid(gridDiv, activityOptions);
		
		var gridDiv = document.querySelector('#activity1');
		new agGrid.Grid(gridDiv, activityOptions1);
		
		var gridDiv = document.querySelector('#activity2');
		new agGrid.Grid(gridDiv, activityOptions2);

	});
	
	function newPlan() {
		$('#productModal').modal('show');
		$('#trReqId').html("");
		$('#darId').val("");
		$('#product').val("");
	}
	
	function newPage(){
		
		if( $("#product").val() == "" || $("#product").val() == null ){
			$("#messageParagraph").text("Please Select A Product");
			$("#msgOkModal").removeClass("btn3");
			$("#msgOkModal").addClass("btn1");
			$("#msgModal").modal('show');
		}else{
			var date1 = (new Date()).toISOString().split('T')[0];
			var newDate = changeDateFormat(date1);
		    $('#date').val(newDate);
		   getMachineList("new");
		   $("#myGrid").hide();
			$("#reqTable").hide();
			$("#searchDiv").hide();
			$(".btn-hs").show();
			$("#btndiv").hide();
			$("#listdiv").hide();
			$("#totalReq").hide();
			$("#searchRowDiv").hide();
			$("#ttbtn").hide();
			$("#demo").show();
			$("#save").show();
		}
		
		
	}

	function switchPage() {
		$("#demo").show();
		$("#itemId").val('');
		$("#itemName").val("");
		$("#description").val('');
		$("#deleteChild").attr('disabled', true);
		$("#deleteChild1").attr('disabled', true);
		$("#deleteChild2").attr('disabled', true);
		$("#newchild").attr('disabled', false);
		$("#newchild1").attr('disabled', false);
		$("#newchild2").attr('disabled', false);
		
		activityOptions.api.setRowData();
		activityOptions1.api.setRowData();
		activityOptions2.api.setRowData();
		
	}
	

	function downloadDetails() { 
		  var dataset = [];
		  gridOptions.api.forEachNodeAfterFilterAndSort(function(rowNode, index) {
		        dataset.push(rowNode.data);
		    });
		  gridOptions.api.exportDataAsCsv(dataset);
		}
	
	function getparentItemId(){
		var itemId = $("#itemName").val();
		$('#itemId').val(itemId);
	}
	function getItemId(){
		var itemSubId1 = $("#subItem").val();
		$('#itemSubId').val(itemSubId1);	
	}
	function getUnitId(){
		var itemUnitId = $("#itemUnitName").val();
		$('#itemUnitId').val(itemUnitId);	
	}
	
	// Change Status.
	
	function changeStatusFun(){
			$.ajax({
				type : "GET",
				url : "dar-approve-data?id="+ id,
				success : function(response) {
					if (response.code == "success") {
						cancel();
						$("#messageParagraph").text("Approved Sucessfully");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
						$('#delete').modal('hide');
						
					} else {
						$("#messageParagraph").text("Something went to wrong!");
						$("#msgOkModal").removeClass("btn3");
						$("#msgOkModal").addClass("btn1");
						$("#msgModal").modal('show');
					}
				},
				error : function(data) {
					console.log(data)
				}
			})

	}
	
	 //Amount validation
	 function checkAmount(fieldId) {   
		var myField = document.getElementById(fieldId)
		 var reg = /^\d{0,8}(\.\d{0,2})?$/;   
		 if (reg.test(myField.value))
		 {       
			 $("#" + fieldId).val();
			 reg = '';  
		 }else{        
			 $("#" + fieldId).val(null);     } 
		 }  
	 
	 function changeDateFormat(inputDate) { // expects Y-m-d
			var splitDate = inputDate.split('-');
			if (splitDate.count == 0) {
				return null;
			}
			var year = splitDate[0];
			var month = splitDate[1];
			var day = splitDate[2];

			return day + '-' + month + '-' + year;
		}
	 
	 function getMachineList(type){
		 $("#checkBox").html(" ");
		 var product;
		if(type == "new"){
			var selectedOption = $("#product").find('option:selected');
			$("#product1").val(selectedOption.val());
			$("#product2").val(selectedOption.text());
			product = $("#product").val();
		}else{
			product = type;
		}
			
				
		 agGrid.simpleHttpRequest(
					{
						url : 'dar-machineList?id='+ product
					}).then(function(data) {
						console.log("allDATA",data);
						var jsonData = JSON.parse(data.body);
						var allData=jsonData.machineList;
						x = allData;
						for(var i = 0 ; i< allData.length ; i++){
							x = allData[i].mc_id;
							var machine = `<div class="col-md-2">
							<label class="checkbox"> <input type="checkbox"
								id=${allData[i].mc_id} text = ${allData[i].mc_name}
							value=${allData[i].mc_id} name="mcNo"><span
							>${allData[i].mc_name}</span> <span class="checkmark"></span></label>
						</div>`
								
								$("#checkBox").append(machine);
						}
						 
					});
		 
	 }
	 
	 
 function darPdfDownload(id) {
			window.open("/production/view-dar-pdf-downloads?dcId="+window.btoa(id), '_blank');  
		} 
 
</script>

<script>

function onMolecularChange(){
	getAd11();
	getAd12();
	getAd13();
	getAd21();
	getAd22();
	getAd23();
}
 function onMolarityChange(){
	getAd11();
	getAd12();
	getAd13();
	getAd21();
	getAd22();
	getAd23();
}  

function onRod1SampleChange(){
	getAd11();
	getAd12();
	getAd13();
}

function onRod2SampleChange(){
	getAd21();
	getAd22();
	getAd23();
} 
	
		function getAd11(){
			
			var molecularWt;
			var molarityHymine;
			var weight; 
			var volHymine11;
			
			if($("#molecularWeight").val() == "" || $("#molecularWeight").val() == null){
				molecularWt = 0;
			}else{
				molecularWt = $("#molecularWeight").val();
			}
			if($("#molarityHyamine").val() == 0 || $("#molarityHyamine").val() == null){
				molarityHymine = 0;
			}else{
				molarityHymine = $("#molarityHyamine").val();
			}
			if($("#sampleWt1").val() == "" || $("#sampleWt1").val() == null){
				weight = 0;
			}else{
				weight = $("#sampleWt1").val();
			}
			
			if($("#volHyamine11").val() == "" || $("#volHyamine11").val() == null){
				volHymine11 = 0;
			}else{
				volHymine11 = $("#volHyamine11").val();
			}
			
			
			var res; 
			
			if(weight == 0 || volHymine11 == 0 || molecularWt == 0 || molarityHymine == 0){
				res = 0;
			}else{
				res = (parseFloat(volHymine11)*parseFloat(molecularWt)*parseFloat(molarityHymine)*1000)/(10*25*(parseFloat(weight)));
			}
			$("#ad11").val(res.toFixed(2));
			var ad11 = $("#ad11").val();
			var ad12 = $("#ad12").val();
			var ad13 = $("#ad13").val();
			var res1 = parseFloat(ad11)+parseFloat(ad12)+parseFloat(ad13);
			var res2 = parseFloat(res1)/3;
			$("#avgAD1").val(res2.toFixed(2));
			$("#totalAD1").val(res1.toFixed(2));
			
			getRod1();
		}
		
function getAd12(){
			
			var molecularWt;
			var molarityHymine;
			var weight;
			var volHymine12;
			
			if($("#molecularWeight").val() == "" || $("#molecularWeight").val() == null){
				molecularWt = 0;
			}else{
				molecularWt = $("#molecularWeight").val();
			}
			if($("#molarityHyamine").val() == 0 || $("#molarityHyamine").val() == null){
				molarityHymine = 0;
			}else{
				molarityHymine = $("#molarityHyamine").val();
			}
			if($("#sampleWt1").val() == "" || $("#sampleWt1").val() == null){
				weight = 0;
			}else{
				weight = $("#sampleWt1").val();
			}
			if($("#volHyamine12").val() == "" || $("#volHyamine12").val() == null){
				volHymine12 = 0;
			}else{
				volHymine12 = $("#volHyamine12").val();
			}
			var res; 
			if(weight == 0 || volHymine12 == 0 || molecularWt == 0 || molarityHymine == 0){
				res = 0;
			}else{
				res = (parseFloat(volHymine12)*parseFloat(molecularWt)*parseFloat(molarityHymine)*1000)/(10*25*(parseFloat(weight)));
			}
			$("#ad12").val(res.toFixed(2));
			
			var ad11 = $("#ad11").val();
			var ad12 = $("#ad12").val();
			var ad13 = $("#ad13").val();
			var res1 = parseFloat(ad11)+parseFloat(ad12)+parseFloat(ad13);
			var res2 = parseFloat(res1)/3;
			$("#avgAD1").val(res2.toFixed(2));
			$("#totalAD1").val(res1.toFixed(2));
			
			getRod1();
			
		}
		
function getAd13(){
	
	var molecularWt;
	var molarityHymine;
	var weight;
	var volHymine13;
	
	if($("#molecularWeight").val() == "" || $("#molecularWeight").val() == null){
		molecularWt = 0;
	}else{
		molecularWt = $("#molecularWeight").val();
	}
	if($("#molarityHyamine").val() == 0 || $("#molarityHyamine").val() == null){
		molarityHymine = 0;
	}else{
		molarityHymine = $("#molarityHyamine").val();
	}
	if($("#sampleWt1").val() == "" || $("#sampleWt1").val() == null){
		weight = 0;
	}else{
		weight = $("#sampleWt1").val();
	}
	if($("#volHyamine13").val() == "" || $("#volHyamine13").val() == null){
		volHymine13 = 0;
	}else{
		volHymine13 = $("#volHyamine13").val();
	}
	var res;
	if(weight == 0 || volHymine13 == 0 || molecularWt == 0 || molarityHymine == 0){
		res = 0;
	}else{
		res = (parseFloat(volHymine13)*parseFloat(molecularWt)*parseFloat(molarityHymine)*1000)/(10*25*(parseFloat(weight)));
	}
	$("#ad13").val(res.toFixed(2));
	
	var ad11 = $("#ad11").val();
	var ad12 = $("#ad12").val();
	var ad13 = $("#ad13").val();
	var res1 = parseFloat(ad11)+parseFloat(ad12)+parseFloat(ad13);
	var res2 = parseFloat(res1)/3;
	$("#avgAD1").val(res2.toFixed(2));
	$("#totalAD1").val(res1.toFixed(2));
	
	getRod1();
	
}

function getRod1(){
	//alert("x");
	var avgAd = $("#avgAD1").val();
	var avgAd1;
	var totalAd1;
	var res3;
	if(avgAd == "" || avgAd == null){
		avgAd1 = 0;
	}else{
		avgAd1 = avgAd;
	}
	if($("#totalAD1").val() == "" || $("#totalAD1").val() == null){
		totalAd1 = 0;
	}else{
		totalAd1 = $("#totalAD1").val();
	}
	console.log("avgAd1",avgAd1);
	console.log("totalAd1",totalAd1);
	
	 if(avgAd1 == 0 || totalAd1 == 0){
		res3 = 0;
	}else{
		res3 = (parseFloat(avgAd1)/parseFloat(totalAd1))*100 ;
	}
	 console.log("res3",res3);
	$("#rod1").val(res3.toFixed(2)); 
}

function getAd21(){
	
	var molecularWt;
	var molarityHymine;
	var weight;
	var volHymine21;
	
	if($("#molecularWeight").val() == "" || $("#molecularWeight").val() == null){
		molecularWt = 0;
	}else{
		molecularWt = $("#molecularWeight").val();
	}
	if($("#molarityHyamine").val() == 0 || $("#molarityHyamine").val() == null){
		molarityHymine = 0;
	}else{
		molarityHymine = $("#molarityHyamine").val();
	}
	if($("#sampleWt2").val() == "" || $("#sampleWt2").val() == null){
		weight = 0;
	}else{
		weight = $("#sampleWt2").val();
	}
	if($("#volHyamine21").val() == "" || $("#volHyamine21").val() == null){
		volHymine21 = 0;
	}else{
		volHymine21 = $("#volHyamine21").val();
	}
	
	var res;
	
	if(molecularWt == 0 || molarityHymine == 0 || weight == 0 || volHymine21 == 0){
		res = 0;
	}else{
		res = (parseFloat(volHymine21)*parseFloat(molecularWt)*parseFloat(molarityHymine)*1000)/(10*25*(parseFloat(weight)));
	}
	$("#ad21").val(res.toFixed(2));
	
	var ad21 = $("#ad21").val();
	var ad22 = $("#ad22").val();
	var ad23 = $("#ad23").val();
	var res1 = parseFloat(ad21)+parseFloat(ad22)+parseFloat(ad23);
	var res2 = parseFloat(res1)/3;
	$("#avgAD2").val(res2.toFixed(2));
	$("#totalAD2").val(res1.toFixed(2));
	
	getRod2();
	
}

function getAd22(){
	
	var molecularWt;
	var molarityHymine;
	var weight;
	var volHymine22;
	
	if($("#molecularWeight").val() == "" || $("#molecularWeight").val() == null){
		molecularWt = 0;
	}else{
		molecularWt = $("#molecularWeight").val();
	}
	if($("#molarityHyamine").val() == 0 || $("#molarityHyamine").val() == null){
		molarityHymine = 0;
	}else{
		molarityHymine = $("#molarityHyamine").val();
	}
	if($("#sampleWt2").val() == "" || $("#sampleWt2").val() == null){
		weight = 0;
	}else{
		weight = $("#sampleWt2").val();
	}
	if($("#volHyamine22").val() == "" || $("#volHyamine22").val() == null){
		volHymine22 = 0;
	}else{
		volHymine22 = $("#volHyamine22").val();
	}
	
	var res;
	
	if(molecularWt == 0 || molarityHymine == 0 || weight == 0 || volHymine22 == 0){
		res = 0;
	}else{
		res = (parseFloat(volHymine22)*parseFloat(molecularWt)*parseFloat(molarityHymine)*1000)/(10*25*(parseFloat(weight)));
	}
	
	$("#ad22").val(res.toFixed(2));
	
	var ad21 = $("#ad21").val();
	var ad22 = $("#ad22").val();
	var ad23 = $("#ad23").val();
	var res1 = parseFloat(ad21)+parseFloat(ad22)+parseFloat(ad23);
	var res2 = parseFloat(res1)/3;
	$("#avgAD2").val(res2.toFixed(2));
	$("#totalAD2").val(res1.toFixed(2));
	
	getRod2();
	
}

function getAd23(){
	
	var molecularWt;
	var molarityHymine;
	var weight;
	var volHymine23 = $("#volHyamine23").val();
	
	if($("#molecularWeight").val() == "" || $("#molecularWeight").val() == null){
		molecularWt = 0;
	}else{
		molecularWt = $("#molecularWeight").val();
	}
	if($("#molarityHyamine").val() == 0 || $("#molarityHyamine").val() == null){
		molarityHymine = 0;
	}else{
		molarityHymine = $("#molarityHyamine").val();
	}
	if($("#sampleWt2").val() == "" || $("#sampleWt2").val() == null){
		weight = 0;
	}else{
		weight = $("#sampleWt2").val();
	}
	if($("#volHyamine23").val() == "" || $("#volHyamine23").val() == null){
		volHymine23 = 0;
	}else{
		volHymine23 = $("#volHyamine23").val();
	}
	
	var res;
	
	if(molecularWt == 0 || molarityHymine == 0 || weight == 0 || volHymine23 == 0){
		res = 0;
	}else{
		res = (parseFloat(volHymine23)*parseFloat(molecularWt)*parseFloat(molarityHymine)*1000)/(10*25*(parseFloat(weight)));
	}
	
	$("#ad23").val(res.toFixed(2));
	
	var ad21 = $("#ad21").val();
	var ad22 = $("#ad22").val();
	var ad23 = $("#ad23").val();
	var res1 = parseFloat(ad21)+parseFloat(ad22)+parseFloat(ad23);
	var res2 = parseFloat(res1)/3;
	$("#avgAD2").val(res2.toFixed(2));
	$("#totalAD2").val(res1.toFixed(2));
	
	getRod2();
	
}

function getRod2(){
	var avgAd = $("#avgAD2").val();
	var avgAd2;
	var totalAd2;
	var res3;
	if(avgAd == "" || avgAd == null){
		avgAd2 = 0;
	}else{
		avgAd2 = avgAd;
	}
	if($("#totalAD2").val() == "" || $("#totalAD2").val() == null){
		totalAd2 = 0;
	}else{
		totalAd2 = $("#totalAD2").val();
	}
	console.log("avgAd2", avgAd2);
	console.log("totalAd2",totalAd2);
	
	
	if(avgAd2 == 0 || totalAd2 == 0){
		res3 = 0;
	}else{
		res3 = (parseFloat(avgAd2)/parseFloat(totalAd2))*100 ;
	}
	
	$("#rod2").val(res3.toFixed(2));
}


function onSampleChange(){
	getSampleAd();
	getWeightOfTotal();
}

function getSampleAd(){
	var sampleWt3;
	var sampleHymine;

	if($('#sampleWt3').val()==""|| $('#sampleWt3').val() == null){
		sampleWt3 = 0;
	}else{
		 sampleWt3 = $('#sampleWt3').val();
	}
	if($('#sampleHymine').val()==""|| $('#sampleHymine').val() == null){
		sampleHymine = 0;
	}else{
		sampleHymine = $('#sampleHymine').val();
	}
	var res;
	if(sampleWt3 == 0 || sampleHymine == 0){
		res = 0;
	}else{
		res = (parseFloat(sampleHymine)*6.8850)/parseFloat(sampleWt3);
	}
	$('#sampleAd').val(res.toFixed(2));
}

function getWeightOfTotal(){
	var sampleWt3;
	var weightOfDisc; 
	if($('#sampleWt3').val()==""|| $('#sampleWt3').val() == null){
		sampleWt3 = 0;
	}else{
		 sampleWt3 = $('#sampleWt3').val();
	}
	if( $('#weightOfDisc').val() ==""||  $('#weightOfDisc').val() == null){
		weightOfDisc = 0;
	}else{
		weightOfDisc =  $('#weightOfDisc').val()
	}
	var res = parseFloat(sampleWt3) + parseFloat(weightOfDisc);
	$('#weightOfTotal').val(res.toFixed(4));
}

function onCompoundSampleChange(){
	getCompositeAd();
	getCompositeWeightOfTotal();
}

function getCompositeAd(){
	var sampleWt4; 
	var compositeHymine;
	

	if($("#sampleWt4").val( )== ""|| $("#sampleWt4").val() == null){
		sampleWt4 = 0;
	}else{
		sampleWt4 = $("#sampleWt4").val();
	}
	if($("#compositeHymine").val() ==""|| $("#compositeHymine").val() == null){
		compositeHymine = 0;
	}else{
		compositeHymine = $("#compositeHymine").val();
	}
	var res;
	if(sampleWt4 == 0 || compositeHymine == 0 ){
		res = 0;
	}else{
		res = (parseFloat(compositeHymine)*6.8850)/parseFloat(sampleWt4);
	}
	
	$('#compositeAd').val(res.toFixed(2));
}

function getCompositeWeightOfTotal(){
	var sampleWt4;
	var compositeWeightOfDisc;
	if($("#sampleWt4").val( )== ""|| $("#sampleWt4").val() == null){
		sampleWt4 = 0;
	}else{
		sampleWt4 = $("#sampleWt4").val();
	}
	if($('#compositeWeightOfDisc').val() ==""|| $('#compositeWeightOfDisc').val() == null){
		compositeWeightOfDisc = 0;
	}else{
		compositeWeightOfDisc = $("#compositeWeightOfDisc").val();
	}
	var res = parseFloat(sampleWt4) + parseFloat(compositeWeightOfDisc);
	$('#compositeWeightOfTotal').val(res.toFixed(4));
}


function getSampleMc(){
	var lossOnDrying = $("#weightOfLoss").val();
	var lossOnDrying1;
	console.log("lossOnDrying",lossOnDrying);
	if(lossOnDrying == "" || lossOnDrying == null){
		lossOnDrying1 = 0;
	}else{
		lossOnDrying1 = lossOnDrying;
	}
	console.log("lossOnDrying1",lossOnDrying1);
	var res;
	if(lossOnDrying1 == 0){
		res = 0;
	}else{
		res = (parseFloat(lossOnDrying1)/parseFloat(5.0069))*100 ;
	}
	
	$('#sampleMc').val(res.toFixed(2));
}

function getCompositeMc(){
	var lossOnDrying = $("#compositeWeightLoss").val();
	var lossOnDrying1;
	
	if(lossOnDrying == "" || lossOnDrying == null){
		lossOnDrying1 = 0;
	}else{
		lossOnDrying1 = lossOnDrying;
	}
	
	var res;
	if(lossOnDrying1 == 0){
		res = 0;
	}else{
		res = (parseFloat(lossOnDrying1)/parseFloat(5.0014))*100 ;
	}
	
	$('#compositeMc').val(res.toFixed(2));
}

</script>

</head>
<body>

	<div layout:fragment="content" class="maincontent">

		<div class="container-fluid">
			<div class="row">
				<div class="maincontentsec">
					<div class="content_padding">

						<div class="d-flex justify-content-between" id="tdiv">
							<div class="btn-hs">
								<div class="font-design" id="totalReq">
									DAR LIST(<span></span>)
								</div>
							</div>
							<div id="searchRowDiv">
								<div class="input-style">
									<input type="text" placeholder="Search.." name="search"
										class="searchboxinput" onkeyup="cancelBar()"
										oninput="onQuickFilterChanged()" id="quickFilter"
										autocomplete="off">
									<div class="searchicon">
										<a href="javascript:void(0)"><span
											style="display: none; border-right: 1px solid #ccc; padding-right: 5px;"
											id="closeKey"
											onclick="gridOptions.api.setQuickFilter(null);$('#quickFilter').val('');document.getElementById('closeKey').style.display='none';"
											class="close_i"><i class="ti-close srchicon"></i></span></a><a
											href="javascript:void(0)"><i class="ti-search srchicon"></i></a>
									</div>
								</div>
							</div>
							<div class="buttonsec btn-hs" id="ttbtn">
								<button class="download-btn" id="download"
									onclick="downloadDetails()">Download</button>
								<button class="delete-btn" id="reqDltBtn" onclick="deleteFun()">DELETE</button>
								<button class="new-btn" id="newBtn" onclick="newPlan()">NEW</button>
								<!-- <button class="delete-btn" id="inactive"
									onclick="changeStatusFun('0')">INACTIVE</button> -->
								<button class="approve-btn" id="approve" onclick="approve()">APPROVE</button>
							</div>
						</div>

						<input type="hidden" id="sessionId" th:value="${userId}" /> <input
							type="hidden" id="sessionName" th:value="${userName}" /> <input
							type="hidden" id="hrRole" th:value="${hrRole}" /> <input
							type="hidden" id="sessionRole" th:value="${userRole}" /> <input
							type="hidden" id="adRole" th:value="${adRole}" />
						<div id="myGrid" style="width: 100%; height: 500px;"
							class="ag-theme-alpine"></div>

						<div class="collapse" id="demo">
							<div class="innercontent">
								<div class="innerstickybg">
									<div class="row">

										<div class="col-md-6">
											DAR ID: <span id="trReqId"></span>
										</div>

										<div class="col-md-6" align="right">
											<button class="cancel-btn" id="cancelBtn" onclick="cancel()">Cancel</button>
											<button class="approve-btn" id="save"
												onclick="masterSaveData()">Save</button>
										</div>
									</div>

								</div>
								<div class="row mt-2">
									<input type="hidden" id="darId"> <input type="hidden"
										id="pId">

									<div class="col-md-4">
										<div>
											<div class="form-group calendar_box">
												<label>Date</label> <input type="text" id="date"
													class="form-control" onblur="removeValid(event)"
													th:attr="onkeyup=|formatDate('date','${session.DATEFORMAT_JS}')|"
													readonly> <i class="ti-calendar picker_calendar"
													id="DateCalendar3"></i>
											</div>
										</div>
									</div>
									<div class="col-md-4">

										<div class="form-group">
											<label> Shift </label>
											<div class="select">
												<select id="shift">
													<option value="">Select</option>
													<option th:each="c:${shiftLists}" th:value='${c.key}'
														th:text="${c.name}"></option>
												</select> <span class="focus"></span>
											</div>
										</div>
									</div>
									<div class="col-md-4">
										<input type="hidden" id="product1">
										<div class="form-group">
											<label> Product </label> <input type="text"
												class="form-control" id="product2" readonly>
										</div>
									</div>
								</div>
								<div class="row mt-3">

									<div class="col-md-6">
										<div class="form-group">
											<label> Molecular Weight Of Detergent </label> <input
												type="number"  min=0 class="form-control"
												id="molecularWeight" oninput="onMolecularChange()">
										</div>
									</div>
									<div class="col-md-6">
										<div class="form-group">
											<label> Molarity Of Hyamine Solution </label> <input
												type="number"  min=0 class="form-control"
												id="molarityHyamine" oninput="onMolarityChange()">
										</div>
									</div>
								</div>
								<div id="main" class="mt-4">
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingOne">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne"
												aria-expanded="false" aria-controls="collapseOne">
												Details</button>
										</h2>

										<div id="collapseOne" class="accordion-collapse collapse show"
											aria-labelledby="headingOne"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div id="mySidenav" class="sidenav">
													<div class="slidebox">
														<div class="row">
															<div class="col-md-10 edit">Details</div>
															<div class="col-md-2">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
														</div>
														<div style="clear: both;"></div>
														<div class="chartbtnsec">
															<div align="right">
																<button class="cancel-btn" onclick="closeNav()">CANCEL</button>
																<!-- <button class="btn3" onclick="deleteProductIndConfirm()">DELETE</button> -->
																<button class="approve-btn" id="save1"
																	onclick="saveTableData()">SAVE</button>
															</div>

														</div>
														<div class="clearfix"></div>
														<div class="row">
															<div class="col-lg-12">
																<div class="form-group">
																	<input type="hidden" class="form-control" id="rowEdit">
																</div>
															</div>
															<div class="row">
																<div class="col-lg-12">
																	<div class="form-group calendar_box">
																		<label>Time</label> <input type="text" id="time"
																			class="form-control" onblur="removeValid(event)"
																			th:attr="onkeyup=|formatDate('time','${session.DATEFORMAT_JS}')|"
																			readonly> <i class="ti-time picker_calendar"
																			id="toDateCalendarTime"></i>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-12">
																	<div class="form-group">
																		<label>VCT</label> <input type="number"  min=0
																			class="form-control" id="vct">
																	</div>
																</div>
															</div>

															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>UCT</label> <input type="number"  min=0
																			class="form-control" id="uct">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>PH</label> <input type="number"  min=0
																			class="form-control" id="ph">
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>DFR</label> <input type="number"  min=0
																			class="form-control" id="dfr">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>B.D. (gm/cc)</label> <input type="number"
																			 min=0 class="form-control" id="bd">
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>


												<div class="row">
													<div class="col-md-12 buttonsec btn-hs">
														<button class="delete-btn" id="deleteChild"
															onclick="deleteDetails('details')">DELETE</button>
														<button class="new-btn" id="newchild" onclick="openNav();">NEW</button>
													</div>
													<div id="activity" style="width: 100%; height: 200px;"
														class="ag-theme-alpine"></div>
													<div class="row mt-3" id="navInfo">
														<div class="col-lg-3">
															<div class="form-group">
																<label>Water Insoluble</label> <input type="number"
																	 min=0 class="form-control" id="wInsoluble">
															</div>
														</div>
														<div class="col-lg-3">
															<div class="form-group">
																<label>Retention On 12 #</label> <input type="number"
																	 min=0 class="form-control" id="retention12">
															</div>
														</div>
														<div class="col-lg-3">
															<div class="form-group">
																<label>Retention On 60 #</label> <input type="number"
																	 min=0 class="form-control" id="retention60">
															</div>
														</div>
														<div class="col-lg-3">
															<div class="form-group">
																<label>Passing Through 85 #</label> <input type="number"
																	 min=0 class="form-control" id="passing85">
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>

									</div>
								</div>

								<div id="main1" class="mt-4">
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingOne1">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne1"
												aria-expanded="false" aria-controls="collapseOne1">
												(1) R.O.D :-</button>
										</h2>

										<div id="collapseOne1"
											class="accordion-collapse collapse show"
											aria-labelledby="headingOne1"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-lg-6">
														<div class="form-group">
															<label>Weight Of The Sample</label> <input type="number" oninput = "onRod1SampleChange()"
																 min=0 class="form-control" id="sampleWt1">
														</div>
													</div>
												</div>
												<div class="row mt-2">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Volume Of Hyamine Consumed</label> <input
																type="number"  min=0 class="form-control"
																id="volHyamine11" oninput="getAd11()">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Volume Of Hyamine Consumed</label> <input
																type="number"  min=0 class="form-control"
																id="volHyamine12" oninput="getAd12()">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Volume Of Hyamine Consumed</label> <input
																type="number"  min=0 class="form-control"
																id="volHyamine13" oninput="getAd13()">
														</div>
													</div>
												</div>
												<div class="row mt-2">
													<div class="col-lg-4">
														<div class="form-group">
															<label>AD</label> <input type="number" value=0 min=0
																class="form-control" id="ad11" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>AD</label> <input type="number" value=0 min=0
																class="form-control" id="ad12" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>AD</label> <input type="number" value=0 min=0
																class="form-control" id="ad13" readonly>
														</div>
													</div>
												</div>
												<div class="row mt-2">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Average AD</label> <input type="number" value=0
																min=0 class="form-control" id="avgAD1" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Total AD</label> <input type="number" value=0
																min=0 class="form-control" id="totalAD1" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>R.O.D</label> <input type="number" value=0 min=0
																class="form-control" id="rod1" readonly>
														</div>
													</div>
												</div>
											</div>

										</div>
									</div>


								</div>

								<div id="main2" class="mt-4">
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingOne2">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne2"
												aria-expanded="false" aria-controls="collapseOne2">
												(2) R.O.D :-</button>
										</h2>

										<div id="collapseOne2"
											class="accordion-collapse collapse show"
											aria-labelledby="headingOne2"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div class="row">
													<div class="col-lg-6">
														<div class="form-group">
															<label>Weight Of The Sample</label> <input type="number" oninput = "onRod2SampleChange()"
																 min=0 class="form-control" id="sampleWt2">
														</div>
													</div>
												</div>
												<div class="row mt-2">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Volume Of Hyamine Consumed</label> <input
																type="number"  min=0 class="form-control"
																id="volHyamine21" oninput="getAd21()">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Volume Of Hyamine Consumed</label> <input
																type="number"  min=0 class="form-control"
																id="volHyamine22" oninput="getAd22()">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Volume Of Hyamine Consumed</label> <input
																type="number"  min=0 class="form-control"
																id="volHyamine23" oninput="getAd23()">
														</div>
													</div>
												</div>
												<div class="row mt-2">
													<div class="col-lg-4">
														<div class="form-group">
															<label>AD</label> <input type="number" value=0 min=0
																class="form-control" id="ad21" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>AD</label> <input type="number" value=0 min=0
																class="form-control" id="ad22" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>AD</label> <input type="number" value=0 min=0
																class="form-control" id="ad23" readonly>
														</div>
													</div>
												</div>
												<div class="row mt-2">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Average AD</label> <input type="number" value=0
																min=0 class="form-control" id="avgAD2" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Total AD</label> <input type="number" value=0
																min=0 class="form-control" id="totalAD2" readonly>
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>R.O.D</label> <input type="number" value=0 min=0
																class="form-control" id="rod2" readonly>
														</div>
													</div>
												</div>
											</div>

										</div>
									</div>


								</div>
								<div id="main6" class="mt-4">
									<div class="accordion-item">


										<div>
											<div class="accordion-body">

												<div class="row">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Alkalinity</label> <input type="number" 
																min=0 class="form-control" id="alkalinity">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Zeolity</label> <input type="number"  min=0
																class="form-control" id="zeolity">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>AV 50 dye</label> <input type="number" 
																min=0 class="form-control" id="av50">
														</div>
													</div>

												</div>
												<div class="row">
													<div class="col-lg-4">
														<div class="form-group">
															<label>Slope Factor</label> <input type="number" 
																min=0 class="form-control" id="slopeFactor">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>Sample Wt.</label> <input type="number" 
																min=0 class="form-control" id="sampleWt5">
														</div>
													</div>
													<div class="col-lg-4">
														<div class="form-group">
															<label>ABS</label> <input type="number"  min=0
																class="form-control" id="abs">
														</div>
													</div>

												</div>



											</div>

										</div>
									</div>


								</div>

								<div id="main3" class="mt-4">
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingOne3">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne3"
												aria-expanded="false" aria-controls="collapseOne3">
												Checked At M/C Number</button>
										</h2>

										<div id="collapseOne3"
											class="accordion-collapse collapse show"
											aria-labelledby="headingOne3"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">
												<div class="col-md-12">

													<div class="row" id="checkBox"></div>

													<div class="row mt-4">
														<div class="col-lg-4">
															<div class="form-group">
																<label>S.K.U</label> <input type="text"
																	class="form-control" id="sku1">
															</div>
														</div>
														<div class="col-lg-4">
															<div class="form-group">
																<label>S.K.U</label> <input type="text"
																	class="form-control" id="sku2">
															</div>
														</div>
														<div class="col-lg-4">
															<div class="form-group">
																<label>S.K.U</label> <input type="text"
																	class="form-control" id="sku3">
															</div>
														</div>

													</div>

												</div>

											</div>

										</div>
									</div>


								</div>

								<div id="main4" class="mt-4">
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingOne4">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne4"
												aria-expanded="false" aria-controls="collapseOne4">
												SAMPLE</button>
										</h2>

										<div id="collapseOne4"
											class="accordion-collapse collapse show"
											aria-labelledby="headingOne4"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div id="mySidenav1" class="sidenav">
													<div class="slidebox">
														<div class="row">
															<div class="col-md-10 edit">Sample Details</div>
															<div class="col-md-2">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav1()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
														</div>
														<div style="clear: both;"></div>
														<div class="chartbtnsec">
															<div align="right">
																<button class="cancel-btn" onclick="closeNav1()">CANCEL</button>
																<!-- <button class="btn3" onclick="deleteProductIndConfirm()">DELETE</button> -->
																<button class="approve-btn" id="save1"
																	onclick="saveTableData1()">SAVE</button>
															</div>

														</div>
														<div class="clearfix"></div>
														<div class="row">
															<div class="col-lg-12">
																<div class="form-group">
																	<input type="hidden" class="form-control" id="rowEdit1">
																</div>
															</div>
															<div class="row">
																<div class="col-lg-12">
																	<div class="form-group">
																		<label>Weight Of The Sample</label> <input
																			type="number"  min=0 class="form-control" oninput = 'onSampleChange()'
																			id="sampleWt3">
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group calendar_box">
																		<label>Time</label> <input type="text" id="time1"
																			class="form-control" onblur="removeValid(event)"
																			th:attr="onkeyup=|formatDate('time','${session.DATEFORMAT_JS}')|"
																			readonly> <i class="ti-time picker_calendar"
																			id="toDateCalendarTime1"></i>
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Sample/Batch No.</label> <input type="text"
																			class="form-control" id="batchNo">
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Vol. Of Hymine Consumed</label> <input
																			type="number"  min=0 class="form-control"
																			id="sampleHymine" oninput="getSampleAd()">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>AD</label> <input type="number" value=0 min=0
																			class="form-control" id="sampleAd" readonly>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Weight Of The Disc</label> <input type="number"
																			min=0 class="form-control" id="weightOfDisc"
																			oninput="getWeightOfTotal()">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Wt. Of The (Disc + Sample)</label> <input
																			type="number" value=0 min=0 class="form-control"
																			id="weightOfTotal" readonly>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Weight Loss On Drying</label> <input
																			type="number"  min=0 class="form-control"
																			id="weightOfLoss" oninput="getSampleMc()">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>MC</label> <input type="number" value=0 min=0
																			class="form-control" id="sampleMc" readonly>
																	</div>
																</div>
															</div>

														</div>
													</div>
												</div>

												<div class="row">
													<div class="col-md-12 buttonsec btn-hs">
														<button class="delete-btn" id="deleteChild1"
															onclick="deleteDetails('sample')">DELETE</button>
														<button class="new-btn" id="newchild1"
															onclick="openNav1();">NEW</button>
													</div>
													<div id="activity1" style="width: 100%; height: 200px;"
														class="ag-theme-alpine"></div>
												</div>

											</div>
										</div>

									</div>
								</div>
								<div id="main5" class="mt-4">
									<div class="accordion-item">
										<h2 class="accordion-header" id="headingOne5">
											<button class="accordion-button" type="button"
												data-bs-toggle="collapse" data-bs-target="#collapseOne5"
												aria-expanded="false" aria-controls="collapseOne4">
												COMPOSITE SAMPLE</button>
										</h2>

										<div id="collapseOne5"
											class="accordion-collapse collapse show"
											aria-labelledby="headingOne5"
											data-bs-parent="#accordionExample">
											<div class="accordion-body">

												<div id="mySidenav2" class="sidenav">
													<div class="slidebox">
														<div class="row">
															<div class="col-md-10 edit">Composite Sample</div>
															<div class="col-md-2">
																<div class="arrow">
																	<a href="javascript:void(0)" class="closebtn"
																		onclick="closeNav2()"><i class="ti-arrow-right"></i></a>
																</div>
															</div>
														</div>
														<div style="clear: both;"></div>
														<div class="chartbtnsec">
															<div align="right">
																<button class="cancel-btn" onclick="closeNav2()">CANCEL</button>
																<!-- <button class="btn3" onclick="deleteProductIndConfirm()">DELETE</button> -->
																<button class="approve-btn" id="save1"
																	onclick="saveTableData2()">SAVE</button>
															</div>

														</div>
														<div class="clearfix"></div>
														<div class="row">
															<div class="row">
																<div class="col-lg-12">
																	<div class="form-group">
																		<label>Weight Of The Sample</label> <input
																			type="number"  min=0 class="form-control" oninput="onCompoundSampleChange()"
																			id="sampleWt4">
																	</div>
																</div>
															</div>
															<div class="col-lg-12">
																<div class="form-group">
																	<input type="hidden" class="form-control" id="rowEdit2">
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Vol. Of Hymine Consumed</label> <input
																			type="number"  min=0 class="form-control"
																			id="compositeHymine" oninput="getCompositeAd()">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>AD</label> <input type="number" value=0 min=0
																			class="form-control" id="compositeAd" readonly>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Weight Of The Disc</label> <input type="number"
																			 min=0 class="form-control"
																			id="compositeWeightOfDisc"
																			oninput="getCompositeWeightOfTotal()">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Wt. Of The (Disc + Sample)</label> <input
																			type="number" value=0 min=0 class="form-control"
																			id="compositeWeightOfTotal" readonly>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Weight Loss On Drying</label> <input
																			type="number"  min=0 class="form-control"
																			id="compositeWeightLoss" oninput="getCompositeMc()">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>MC</label> <input type="number" value=0 min=0
																			class="form-control" id="compositeMc" readonly>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-4">
																	<div class="form-group">
																		<label>B.D.</label> <input type="number"  min = 0
																			class="form-control" id="compositeBd">
																	</div>
																</div>
																<div class="col-lg-4">
																	<div class="form-group">
																		<label>D.F.R.</label> <input type="number"  min = 0
																			class="form-control" id="compositeDfr">
																	</div>
																</div>
																<div class="col-lg-4">
																	<div class="form-group">
																		<label>PH</label> <input type="number"  min = 0
																			class="form-control" id="compositePh">
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Compatibility</label> <input type="number"  min = 0
																			class="form-control" id="compositeCompatibility">
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Retention On 12 #</label> <input type="number"  min = 0
																			class="form-control" id="compositeRetention">
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Appearance</label>
																		<div class="select" style="margin-right: 15px;">
																			<select id="compositeAppearance" class="form-control"
																				onblur="removeValid(event)"
																				style="width: 170px; padding-left: 7px;">
																				<option value="">--Select--</option>
																				<option value="Match with Std.">Match with Std.</option>
																				<option value="Does not Match">Does not Match</option>
																			</select>
																		</div>

																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Colour</label>
																		<div class="select" style="margin-right: 15px;">
																			<select id="compositeColour" class="form-control"
																				onblur="removeValid(event)"
																				style="width: 170px; padding-left: 7px;">
																				<option value="">--Select--</option>
																				<option value="Match with Std.">Match with Std.</option>
																				<option value="Does not Match">Does not Match</option>
																			</select>
																		</div>
																	</div>
																</div>
															</div>
															<div class="row">
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Odour</label>
																		<div class="select" style="margin-right: 15px;">
																			<select id="compositeOdour" class="form-control"
																				onblur="removeValid(event)"
																				style="width: 170px; padding-left: 7px;">
																				<option value="">--Select--</option>
																				<option value="Match with Std.">Match with Std.</option>
																				<option value="Does not Match">Does not Match</option>
																			</select>
																		</div>
																	</div>
																</div>
																<div class="col-lg-6">
																	<div class="form-group">
																		<label>Visual Cue</label>
																		<div class="select" style="margin-right: 15px;">
																			<select id="compositeVisualCue" class="form-control"
																				onblur="removeValid(event)"
																				style="width: 170px; padding-left: 7px;">
																				<option value="">--Select--</option>
																				<option value="Speckles Present">Speckles Present</option>
																				<option value="Speckles Not Present">Speckles Not Present</option>
																			</select>
																		</div>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>

												<div class="row">
													<div class="col-md-12 buttonsec btn-hs">
														<button class="delete-btn" id="deleteChild2"
															onclick="deleteDetails('composite')">DELETE</button>
														<button class="new-btn" id="newchild2"
															onclick="openNav2()">NEW</button>
													</div>
													<div id="activity2" style="width: 100%; height: 200px;"
														class="ag-theme-alpine"></div>
												</div>

											</div>
										</div>

									</div>
								</div>

							</div>
						</div>
					</div>

					<div id="productModal" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p style="font-size: 16px;color:black;font-weight: 500;">Select The Product</p>
								</div>
								<div class="col-md-12" style="margin-bottom: 55px;">
									<div class="form-group">
										<div class="select">
											<select id="product">
												<option value="">Select</option>
												<option th:each="c:${brandList}" th:value='${c.key}'
													th:text="${c.name}"></option>
											</select> <span class="focus"></span>
										</div>
									</div>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -10px;">
									<button type="button" class="cancel-btn"
										data-bs-dismiss="modal">Cancel</button>
									<button type="button" class="approve-btn" onclick="newPage()"
										data-bs-dismiss="modal">Select</button>
								</div>
							</div>
						</div>
					</div>


					<!-- delete modal start -->
					<div id="delete" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: 0px;">

									<button type="button" class="cancel-btn"
										data-bs-dismiss="modal" onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>
					<div id="approveModal" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you Want To Approve Data?</p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: 0px;">

									<button type="button" class="cancel-btn"
										data-bs-dismiss="modal">No</button>
									<button type="button" class="approve-btn"
										data-bs-dismiss="modal" onclick="changeStatusFun()">yes</button>
								</div>
							</div>
						</div>
					</div>

					<!-- delete product modal start -->
					<div id="deleteDetails" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column"></div>
								<div class="modal-body">
									<p>Do you really want to delete these records? This process
										cannot be undone.</p>
									<input type="hidden" class="form-control" id="deleteChildGrid">
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: -10px;">

									<button type="button" class="cancel-btn"
										data-bs-dismiss="modal" onclick="cancelModalBtn();">Cancel</button>
									<button type="button" class="delete-btn"
										onclick="deleteDetailsOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>




					<!-- alert modal start -->
					<div id="alert" class="modal fade show" aria-modal="true">
						<div class="modal-dialog modal-confirm">
							<div class="modal-content">
								<div class="modal-header flex-column">
									<button type="button" class="close" data-bs-dismiss="modal"
										aria-hidden="true" onclick="cancelModalBtn()">
										<i class="ti-close modal-close"></i>
									</button>
								</div>
								<div class="modal-body">
									<p id="textId"></p>
								</div>
								<div class="modal-footer justify-content-center"
									style="margin-top: 0px;">

									<button type="button" class="btn1" data-bs-dismiss="modal">SELECT</button>
									<button type="button" class="btn3" onclick="deleteOnclick()">Delete</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>